!function(){var e,t={316:function(e,t,i){"use strict";function a(){}var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j;i.d(t,{$$:function(){return U},$I:function(){return q},Pz:function(){return $},hM:function(){return W},rx:function(){return X}}),function(){var e,t="2022/12/31",i=["127.0.0.1","localhost","bajajfinservsecurities.in"];if(e=new Date(t).getTime()){var a=(new Date).getTime();if(e<=a)console.error("This license has expired!");else;}if("undefined"!=typeof document&&i&&i.length>0){for(var r=document.location.href,n=!1,s=0;s<i.length;s++)if(r.indexOf(i[s])>-1){n=!0;break}n||(alert("ERROR: Not licensed for domain "+r),console.error("ERROR: Not licensed for domain "+r))}}(),a[19588]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"kzdsm",{get:function(){for(;;)return this},configurable:!0}),(t=kzdsm).vOYq5=t,i=4;break;case 9:delete t.vOYq5,delete Object.prototype.kzdsm,i=6;break;case 4:i="undefined"==typeof vOYq5?3:9;break;case 3:throw""}}catch(e){t=window}return t}}(),function(e){function t(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[2]="",s[2]="operty",s[9]="",n=3;break;case 3:s[9]="r",s[1]="defineP",s[6]=!1;try{for(var o=2;13!==o;)switch(o){case 4:o=s[4].hasOwnProperty(s[0][4])&&s[4][s[0][4]]===s[4][s[0][2]]?3:9;break;case 9:s[4][s[0][4]]=s[4][s[0][2]],s[5].set=function(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];s[4][s[0][2]]=i[0][0],t=5}},o=7;break;case 7:s[5].get=function(){for(var e=2;13!==e;)switch(e){case 2:var t=[arguments];t[8]="n",t[3]="defined",t[6]="",t[6]="",t[6]="u",e=8;break;case 8:return t[5]=t[6],t[5]+=t[8],t[5]+=t[3],typeof s[4][s[0][2]]==t[5]?void 0:s[4][s[0][2]]}},s[5].enumerable=s[6];try{for(var l=2;3!==l;)if(2===l)s[3]=s[1],s[3]+=s[9],s[3]+=s[2],s[0][0].Object[s[3]](s[4],s[0][4],s[5]),l=3}catch(e){}o=13;break;case 2:s[5]={},s[8]=(0,s[0][1])(s[0][0]),s[4]=[s[8],s[8].prototype][s[0][3]],o=4;break;case 3:return}}catch(e){}n=6}}function i(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Array}}function a(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].String}}function r(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].RegExp}}for(var n=2;120!==n;)switch(n){case 35:o[70]="",o[61]="1",o[70]="G",o[14]="",n=31;break;case 126:s(r,"test",o[40],o[56]),n=125;break;case 131:s(l,"String",o[38],o[23]),n=130;break;case 54:o[73]="r1",o[78]="",o[78]="",o[78]="__",o[58]="tim",n=49;break;case 62:o[36]="ract",o[63]="NK3",o[83]="b1",o[51]="",n=58;break;case 27:o[34]="dpL",o[74]="X5jl",o[60]="",o[60]="83",o[15]="x",o[39]="",o[39]="F",n=35;break;case 58:o[51]="",o[51]="L",o[47]="",o[47]="x2",o[67]="",o[67]="N",n=75;break;case 127:s(i,"map",o[40],o[24]),n=126;break;case 18:o[6]="l9M",o[21]="",o[21]="4dt",o[34]="",n=27;break;case 11:o[8]="",o[8]="X",o[3]="",o[3]="4",n=18;break;case 40:o[41]="",o[41]="d",o[19]="",o[19]="BJR",o[73]="",n=54;break;case 130:s(a,"fromCharCode",o[38],o[79]),n=129;break;case 114:o[82]=o[15],o[82]+=o[21],o[82]+=o[3],o[79]=o[8],n=110;break;case 6:o[7]="",o[7]="i7x",o[4]="",o[4]="$",n=11;break;case 121:s(h,"apply",o[40],o[97]),n=120;break;case 128:s(a,"replace",o[40],o[77]),n=127;break;case 78:o[90]+=o[62],o[90]+=o[69],o[91]=o[78],o[91]+=o[54],n=101;break;case 105:o[53]=o[6],o[53]+=o[61],o[53]+=o[1],n=133;break;case 3:o[9]="",o[9]="3",o[2]="",o[2]="M",n=6;break;case 75:o[76]="",o[29]="eYP",o[76]="n9",o[42]="",o[42]="t",o[43]="2",n=69;break;case 122:s(i,"push",o[40],o[68]),n=121;break;case 133:var s=function(e,i,a,r){for(var n=2;5!==n;)if(2===n){var s=[arguments];t(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};n=132;break;case 69:o[27]="3lvH",o[38]=0,o[40]=1,o[97]=o[42],n=90;break;case 129:s(a,"substring",o[40],o[82]),n=128;break;case 44:o[93]="0",o[12]="ize",o[89]="",o[89]="__op",n=40;break;case 86:o[68]+=o[29],o[13]=o[47],o[13]+=o[51],o[13]+=o[63],n=82;break;case 101:o[91]+=o[52],o[26]=o[73],o[26]+=o[19],o[26]+=o[41],o[72]=o[89],n=96;break;case 110:o[79]+=o[4],o[79]+=o[7],o[23]=o[2],o[23]+=o[9],o[23]+=o[5],n=105;break;case 92:o[56]+=o[70],o[24]=o[39],o[24]+=o[60],o[24]+=o[34],o[77]=o[74],o[77]+=o[61],o[77]+=o[93],n=114;break;case 45:o[69]="w$m",o[63]="",o[63]="",o[52]="idual",n=62;break;case 90:o[97]+=o[43],o[97]+=o[27],o[68]=o[76],o[68]+=o[67],n=86;break;case 123:s(l,o[37],o[38],o[13]),n=122;break;case 124:s(l,o[91],o[38],o[90]),n=123;break;case 49:o[62]="I",o[18]="",o[54]="res",o[18]="__abs",n=45;break;case 125:s(l,o[72],o[38],o[26]),n=124;break;case 31:o[14]="",o[14]="im",o[22]="q$N",o[12]="",n=44;break;case 96:o[72]+=o[58],o[72]+=o[12],o[56]=o[22],o[56]+=o[14],n=92;break;case 132:s(a,"charCodeAt",o[40],o[53]),n=131;break;case 82:o[37]=o[18],o[37]+=o[42],o[37]+=o[36],o[90]=o[83],n=78;break;case 2:var o=[arguments];o[5]="",o[5]="u4T",o[1]="_",n=3}function l(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0]}}function h(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Function}}}(a[19588]),a.I_9=function(){return"function"==typeof a[477113].b9fNb$G?a[477113].b9fNb$G.apply(a[477113],arguments):a[477113].b9fNb$G},a[254460]=a[182467],a.l__=function(){return"function"==typeof a[3116].h07Ms$L?a[3116].h07Ms$L.apply(a[3116],arguments):a[3116].h07Ms$L},a[488184]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 4:i=o--?9:3;break;case 5:u=r[e[4]],i=4;break;case 9:i=o--?7:8;break;case 17:a=t-c>n,i=19;break;case 1:i=o--?4:5;break;case 18:i=c>=0?17:16;break;case 20:a=t-c>n&&l-t>n,i=19;break;case 14:i=o--?12:13;break;case 2:var a,n,s,l,h,c,u;i=1;break;case 7:i=o--?14:6;break;case 3:n=31,i=9;break;case 8:s=e[6],i=7;break;case 16:a=l-t>n,i=19;break;case 11:c=(h||0===h)&&u(h,n),i=10;break;case 6:l=s&&u(s,n),i=14;break;case 12:i=o--?10:11;break;case 10:i=c>=0&&l>=0?20:18;break;case 13:h=e[7],i=12;break;case 19:return a}}for(var i=2;10!==i;)switch(i){case 14:e=e.F83dpL((function(e){for(var t=2;13!==t;)switch(t){case 5:i="",t=4;break;case 7:t=i?14:6;break;case 2:var i;t=1;break;case 3:t=a<e.length?9:7;break;case 14:return i;case 1:t=o--?4:5;break;case 6:return;case 9:i+=r[s][l](e[a]+98),t=8;break;case 4:var a=0;t=3;break;case 8:a++,t=3}})),i=13;break;case 2:var r,n,s,o;i=1;break;case 1:i=o--?4:5;break;case 7:s=n.X5jl10(new r[h]("^['-|]"),"S"),i=6;break;case 6:i=o--?13:14;break;case 8:i=o--?6:7;break;case 5:r=a[19588],i=4;break;case 3:i=o--?8:9;break;case 13:i=o--?11:12;break;case 4:var l="fromCharCode",h="RegExp";i=3;break;case 11:return{K9p3iaJ:function(i){for(var a=2;6!==a;)switch(a){case 4:c=t(n),a=3;break;case 5:a=o--?3:4;break;case 1:a=n>u?5:8;break;case 3:a=o--?8:9;break;case 8:return function(t,a){for(var n=2;10!==n;)switch(n){case 2:n=void 0===t&&void 0!==i?1:5;break;case 13:o++,n=9;break;case 12:s^=h,n=13;break;case 1:t=i,n=5;break;case 9:n=o<t[a[5]]?8:11;break;case 11:return s;case 5:n=void 0===a&&void 0!==e?4:3;break;case 3:var s,o=0;n=9;break;case 4:a=e,n=3;break;case 8:var l=r[a[4]](t[a[2]](o),16)[a[3]](2),h=l[a[2]](l[a[5]]-1);n=6;break;case 6:n=0===o?14:12;break;case 14:s=h,n=13}}(void 0,void 0)?c:!c;case 2:var n=(new r[e[0]])[e[1]]();a=1;break;case 9:u=n+6e4,a=8}}};case 9:n=typeof l,i=8;break;case 12:var c,u=0;i=11}}([[-30,-1,18,3],[5,3,18,-14,7,11,3],[1,6,-1,16,-33,18],[18,13,-15,18,16,7,12,5],[14,-1,16,17,3,-25,12,18],[10,3,12,5,18,6],[-49,18,16,0,-48,8,10,-49,-41],[]]),a.u$p=function(){return"function"==typeof a[3116].h07Ms$L?a[3116].h07Ms$L.apply(a[3116],arguments):a[3116].h07Ms$L},a[477113]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[7]=void 0,t[6]={},e=4;break;case 4:return t[6].b9fNb$G=function(){for(var e=2;90!==e;)switch(e){case 39:i[33]={},i[33].u$P=["x54"],i[33].t_9=function(){return/\x74\u0072\u0075\u0065/.q$NimG(function(){return"aaa".includes("a")}+[])},e=36;break;case 4:i[4]=[],e=3;break;case 57:e=i[98]<i[4].length?56:69;break;case 67:return t[7]=30,58;case 68:e=68;break;case 58:i[98]=0,e=57;break;case 75:i[54]={},i[54][i[37]]=i[79][i[23]][i[90]],i[54][i[24]]=i[44],i[22].n9NeYP(i[54]),e=71;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 26:t=a[1]>=.5?25:24;break;case 25:a[9]=!0,t=24;break;case 2:var a=[arguments];t=1;break;case 6:a[6]=a[0][0][a[4]],t=14;break;case 1:t=0===a[0][0].length?5:4;break;case 5:return;case 14:t=void 0===a[2][a[6][i[37]]]?13:11;break;case 10:t=a[6][i[24]]===i[47]?20:19;break;case 19:a[4]++,t=7;break;case 23:return a[9];case 24:a[4]++,t=16;break;case 12:a[7].n9NeYP(a[6][i[37]]),t=11;break;case 11:a[2][a[6][i[37]]].t+=!0,t=10;break;case 18:a[9]=!1,t=17;break;case 17:a[4]=0,t=16;break;case 7:t=a[4]<a[0][0].length?6:18;break;case 13:a[2][a[6][i[37]]]=function(){for(var e=2;9!==e;)switch(e){case 5:return t[6].h=0,t[6].t=0,t[6];case 2:var t=[arguments];t[6]={},e=5}}.t23lvH(this,arguments),t=12;break;case 8:a[4]=0,t=7;break;case 15:a[5]=a[7][a[4]],a[1]=a[2][a[5]].h/a[2][a[5]].t,t=26;break;case 16:t=a[4]<a[7].length?15:23;break;case 4:a[2]={},a[7]=[],a[4]=0,t=8;break;case 20:a[2][a[6][i[37]]].h+=!0,t=19}}(i[22])?68:67;break;case 23:i[46]={},i[46].u$P=["O0M"],i[46].t_9=function(){return"function"==typeof x2LNK3},e=35;break;case 5:return 35;case 76:e=i[90]<i[79][i[23]].length?75:70;break;case 31:i[51]=i[32],i[81]={},i[81].u$P=["x54"],i[81].t_9=function(){return/\x61\x61\x61\u0061\u0061/.q$NimG(function(){return"aaaa".padEnd(5,"a")}+[])},i[78]=i[81],e=43;break;case 77:i[90]=0,e=76;break;case 27:i[19]={},e=26;break;case 46:i[4].n9NeYP(i[51]),i[4].n9NeYP(i[5]),i[22]=[],i[47]="r7V",e=63;break;case 43:i[18]={},i[18].u$P=["x54"],i[18].t_9=function(){return/\x31/.q$NimG(function(){return"aa".lastIndexOf("a")}+[])},i[62]=i[18],e=39;break;case 60:i[29]="t_9",i[37]="d_y",e=58;break;case 26:i[19].u$P=["O0M"],i[19].t_9=function(){return"function"==typeof b1Iw$m},i[26]=i[19],e=23;break;case 52:i[4].n9NeYP(i[62]),i[4].n9NeYP(i[30]),i[4].n9NeYP(i[78]),i[4].n9NeYP(i[8]),i[4].n9NeYP(i[92]),i[4].n9NeYP(i[9]),e=46;break;case 36:i[92]=i[33],i[4].n9NeYP(i[26]),i[4].n9NeYP(i[1]),e=52;break;case 70:i[98]++,e=57;break;case 35:i[30]=i[46],i[32]={},i[32].u$P=["O0M"],i[32].t_9=function(){var e=!1,t=[];try{for(var i in console)t.n9NeYP(i);e=0===t.length}catch(e){}return e},e=31;break;case 1:e=t[7]?5:4;break;case 3:i[7]={},i[7].u$P=["x54"],i[7].t_9=function(){return!/\x32\x35/.q$NimG(function(){return decodeURI("%25")}+[])},i[1]=i[7],i[6]={},i[6].u$P=["x54"],e=13;break;case 2:var i=[arguments];e=1;break;case 13:i[6].t_9=function(){return!/\u0032\x35/.q$NimG(function(){return decodeURIComponent("%25")}+[])},i[8]=i[6],i[3]={},i[3].u$P=["x54"],e=20;break;case 71:i[90]++,e=76;break;case 63:i[41]="p2k",i[23]="u$P",i[24]="x_J",e=60;break;case 56:i[79]=i[4][i[98]];try{i[44]=i[79][i[29]]()?i[47]:i[41]}catch(e){i[44]=i[41]}e=77;break;case 20:i[3].t_9=function(){return/\x39\x37/.q$NimG(function(){return"a".codePointAt(0)}+[])},i[5]=i[3],i[2]={},i[2].u$P=["O0M"],i[2].t_9=function(){return"function"==typeof r1BJRd},i[9]=i[2],e=27}},t[6]}}(),a.o7G=function(){return"function"==typeof a[3116].C4_h1O3?a[3116].C4_h1O3.apply(a[3116],arguments):a[3116].C4_h1O3},a[19588].R3ff=a,a.y$e=function(){return"function"==typeof a[553805].J2r27iY?a[553805].J2r27iY.apply(a[553805],arguments):a[553805].J2r27iY},a.n0Y=function(){return"function"==typeof a[488184].K9p3iaJ?a[488184].K9p3iaJ.apply(a[488184],arguments):a[488184].K9p3iaJ},a.w2u=function(){return"function"==typeof a[488184].K9p3iaJ?a[488184].K9p3iaJ.apply(a[488184],arguments):a[488184].K9p3iaJ},a[182467]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{X9xfeQe:function(e,t,i){for(var a=3432918353,n=461845907,s=i,o=-4&t,l=0;l<o;l+=4){var h=255&e.l9M1_(l)|(255&e.l9M1_(l+1))<<8|(255&e.l9M1_(l+2))<<16|(255&e.l9M1_(l+3))<<24;h=r(h,a),s=5*(s=(524287&(s^=h=r(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,t%4){case 3:h=(255&e.l9M1_(o+2))<<16;case 2:h|=(255&e.l9M1_(o+1))<<8;case 1:h|=255&e.l9M1_(o),h=r(h,a),s^=h=r(h=(131071&h)<<15|h>>>17,n)}return s^=t,s=r(s^=s>>>16,2246822507),s=r(s^=s>>>13,3266489909),s^=s>>>16}}),a.p_V=function(){return"function"==typeof a[182467].X9xfeQe?a[182467].X9xfeQe.apply(a[182467],arguments):a[182467].X9xfeQe},a[553805]=function(){function e(e,s,o,l,h){for(var c=2;15!==c;)switch(c){case 12:return!1;case 9:c=l>0?8:19;break;case 8:d=(u=p.x4dt4(e,l)).length,c=6;break;case 1:g=r[n([7,10,-2,-4,15,4,10,9])],!t&&(t=void 0!==g?g[n([3,10,14,15,9,-4,8,0])]||" ":""),!i&&(i=void 0!==g?g[n([3,13,0,1])]:""),p=h?i:t,c=9;break;case 11:return d=(u=p.x4dt4(m,p.length)).length,a.j7j(u,d,o);case 18:d=(u=p.x4dt4(0,p.length)).length,c=16;break;case 2:var u,d,p,g;c=1;break;case 13:c=s&&m>0&&46!==p.l9M1_(m-1)?12:11;break;case 19:c=null===e||e<=0?18:14;break;case 6:case 16:return a.j7j(u,d,o);case 14:var m=p.length-e;c=13}}for(;;){var t,i,r=a[19588];return{J2r27iY:function(t,i,a,r){for(;;)return e(t,i,a,r)},k$7sqj$:function(t,i,a,r){for(;;)return e(t,i,a,r,!0)}}}function n(e){for(var t=2;7!==t;)switch(t){case 2:var i=8,a="";t=5;break;case 4:t=r<e.length?3:8;break;case 8:return a;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 3:a+=M3u4T.X$i7x(e[r]-i+109),t=9}}}(),a.V6T=function(){return"function"==typeof a[3116].C4_h1O3?a[3116].C4_h1O3.apply(a[3116],arguments):a[3116].C4_h1O3},a[242151]=a[553805],a.L8B=function(){return"function"==typeof a[553805].J2r27iY?a[553805].J2r27iY.apply(a[553805],arguments):a[553805].J2r27iY},a.B8G=function(){return"function"==typeof a[553805].k$7sqj$?a[553805].k$7sqj$.apply(a[553805],arguments):a[553805].k$7sqj$},a.F__=function(){return"function"==typeof a[477113].b9fNb$G?a[477113].b9fNb$G.apply(a[477113],arguments):a[477113].b9fNb$G},a.u$t=function(){return"function"==typeof a[553805].k$7sqj$?a[553805].k$7sqj$.apply(a[553805],arguments):a[553805].k$7sqj$},a[527162]=766,a[3116]={h07Ms$L:function(){var e,t=arguments;switch(n){case 155:e=(t[3]+t[1])/t[4]+t[0]-t[2];break;case 108:e=-t[3]*t[0]-t[1]+t[2];break;case 152:e=(t[1]+t[0])/t[4]*t[2]+t[3];break;case 2:e=(t[0]-t[1])/t[3]+t[2];break;case 41:e=t[2]-+t[0]/t[1];break;case 49:e=-t[0]*t[2]+t[1];break;case 55:e=(t[0]-t[2]-t[3])*t[4]-t[1];break;case 149:e=t[0]+t[3]+t[1]-t[4]-t[2];break;case 112:e=t[2]-t[1]*t[0];break;case 119:e=(-t[1]*t[2]+t[4])*t[3]+t[0];break;case 95:e=t[0]*t[1]+t[2];break;case 88:e=t[1]/t[3]-t[0]+t[2];break;case 28:e=t[1]+(t[2]-t[0]);break;case 21:e=t[1]^t[0];break;case 13:e=t[0]/t[1]/t[3]+t[2];break;case 126:e=t[1]/t[3]-t[2]-t[4]+t[0];break;case 136:e=t[0]+(t[1]+t[2]);break;case 46:e=t[1]/t[2]+t[0];break;case 105:e=t[2]*t[0]+t[3]+t[1];break;case 137:e=t[1]+t[0]/t[2]*t[3];break;case 132:e=t[1]*t[0]*t[2]/t[4]+t[3];break;case 1:e=(t[2]+t[1])*t[3]+t[4]-t[0];break;case 7:e=(t[2]+t[0]-t[1])/t[4]+t[3];break;case 101:e=t[3]+t[1]*(t[2]-t[0]);break;case 75:e=t[2]+t[1]+t[3]+t[0];break;case 93:e=t[0]+t[2]-t[1]+t[3];break;case 123:e=t[3]/t[4]/t[1]/t[0]-t[2];break;case 115:e=(t[0]-t[2])/(t[3]-t[1]);break;case 26:e=t[1]+(t[0]>>t[2]);break;case 121:e=t[2]-t[1]-(t[0]-t[3]);break;case 68:e=t[1]/t[3]+t[2]-t[0];break;case 104:e=(t[3]-t[4])*t[0]+t[2]-t[1];break;case 23:e=t[0]+t[1];break;case 102:e=(t[0]*t[3]+t[1])/t[4]-t[2];break;case 133:e=t[3]/t[1]*t[0]/t[4]-t[2];break;case 67:e=(t[0]+t[4]-t[2])/t[1]-t[3];break;case 44:e=t[1]/t[2]-t[0]-t[3];break;case 79:e=t[1]>>t[0];break;case 4:e=t[1]*t[0]-t[2];break;case 138:e=t[0]>t[1];break;case 90:e=t[1]/t[3]+t[2]+t[0];break;case 36:e=(t[0]+t[1])/t[2];break;case 120:e=(t[1]-t[2])*t[3]-t[0];break;case 103:e=(t[4]-t[0]-t[3])/t[1]+t[2];break;case 129:e=t[3]+t[2]+t[0]%t[1];break;case 24:e=t[0]+ +t[1];break;case 91:e=(t[4]+t[1])*t[3]-t[0]+t[2];break;case 82:e=t[1]<t[0];break;case 71:e=(t[2]-t[4]+t[0])*t[3]-t[1];break;case 27:e=t[1]*t[0];break;case 5:e=t[3]+t[1]+t[2]-t[0];break;case 94:e=(t[0]+t[3]+t[1])*t[2]-t[4];break;case 47:e=(t[1]+t[3])/t[0]*t[4]-t[2];break;case 53:e=(t[3]+t[1])*t[0]-t[2];break;case 43:e=t[2]/t[0]-t[1];break;case 64:e=t[9]+t[0]+t[8]+t[1]+t[3]+t[2]+t[10]+t[7]+t[4]+t[5]+t[6];break;case 32:e=t[0]/t[1];break;case 147:e=t[0]/(t[2]-t[1]);break;case 87:e=t[3]*t[4]-t[0]-t[1]-t[2];break;case 146:e=t[1]!=t[0];break;case 59:e=t[1]-t[0]-t[3]-t[2];break;case 134:e=t[1]/(t[0]>>t[2]);break;case 17:e=t[2]+t[0]-t[1];break;case 39:e=t[1]+(t[6]-t[3])*(t[5]/t[4]-t[0])*+t[2];break;case 110:e=-t[1]/t[0]*t[4]+t[3]-t[2];break;case 85:e=t[3]*t[1]*t[2]*t[0]-t[4];break;case 144:e=t[0]-t[2]-(t[3]>>t[1]);break;case 58:e=t[0]*t[3]+t[2]-t[1];break;case 111:e=t[1]-(t[2]-t[0]);break;case 45:e=(t[3]*t[2]+t[0])*t[4]-t[1];break;case 60:e=t[0]-t[1]-t[2];break;case 61:e=(t[2]*t[4]-t[3])*t[0]-t[1];break;case 141:e=(t[0]-t[2])*t[1]+t[3];break;case 69:e=t[3]*t[0]*t[2]-t[1];break;case 135:e=t[4]-t[1]/(t[0]<<t[2])+(t[5]-t[3]);break;case 140:e=-t[2]/t[3]+t[1]-t[0];break;case 89:e=t[1]/t[3]/t[0]+t[4]+t[2];break;case 113:e=t[0]-+t[1];break;case 131:e=t[2]*t[3]+t[4]+t[1]-t[0];break;case 127:e=(t[3]/t[4]-t[2])*t[0]+t[1];break;case 109:e=(t[3]-t[4])*t[1]-t[2]+t[0];break;case 78:e=t[0]!==t[1];break;case 9:e=-t[2]+t[0]+t[1];break;case 15:e=t[4]-t[2]-t[3]-t[0]+t[1];break;case 22:e=t[0]*-t[1];break;case 153:e=t[0]+t[2]-t[3]-t[1]+t[4];break;case 0:e=(t[0]-t[3])/t[2]-t[1];break;case 8:e=-t[1]+t[0];break;case 48:e=t[1]-t[3]-t[0]+t[2];break;case 83:e=t[3]+t[0]+t[1]-t[4]+t[2];break;case 148:e=(t[4]-t[0])/t[2]/t[1]+t[3];break;case 31:e=t[2]|t[4]<<t[5]|t[3]<<(t[0]^t[1]);break;case 125:e=t[2]+t[1]*t[0];break;case 130:e=-t[1]/t[3]*t[2]+t[0];break;case 74:e=t[2]/t[1]/t[0]-t[3];break;case 116:e=t[2]*(t[3]-t[1])+t[0];break;case 56:e=t[1]*t[2]-t[3]-t[0];break;case 72:e=(t[3]+t[1])/t[0]-t[2];break;case 117:e=t[3]/t[1]*t[2]-t[0];break;case 118:e=t[1]-(t[0]|t[2]);break;case 92:e=t[0]-t[1]+t[2]-t[3];break;case 81:e=(t[1]+t[2])*t[0]-t[3]-t[4];break;case 29:e=(-t[1]+t[3])*t[0]+t[2];break;case 30:e=(t[3]-t[1]+t[4])/t[2]+t[0];break;case 66:e=t[2]*t[0]+t[1]-t[3]-t[4];break;case 73:e=(t[2]-t[1])*t[4]*t[3]-t[0];break;case 34:e=t[3]*(t[0]-t[2]/(t[4]-t[1]));break;case 84:e=t[0]*t[1]/t[3]+t[2];break;case 10:e=-t[1]/t[2]+t[0];break;case 145:e=t[3]-t[1]+t[0]*t[2];break;case 122:e=t[0]*+t[1];break;case 19:e=t[1]<<t[0];break;case 106:e=t[3]+t[0]-t[2]-t[1];break;case 143:e=(-t[2]-t[4])/t[1]/t[0]+t[3];break;case 20:e=t[0]|t[1];break;case 62:e=t[1]+t[4]+t[3]+t[5]+t[0]+t[2]+t[6];break;case 33:e=t[0]/+t[1];break;case 6:e=t[1]-t[0];break;case 51:e=t[4]+t[1]-t[3]+t[0]-t[2];break;case 42:e=t[0]+t[2]+t[1];break;case 96:e=t[3]*t[4]-t[1]+t[0]-t[2];break;case 97:e=-t[0]+t[2]-t[1];break;case 124:e=-t[3]*t[1]/t[0]+t[2];break;case 154:e=t[2]*t[4]/t[0]+t[1]-t[3];break;case 107:e=(t[0]-t[4]-t[1])*t[3]+t[2];break;case 150:e=t[1]-(t[2]^t[0]);break;case 35:e=(t[0]-t[2])/t[1];break;case 37:e=(t[4]-t[1])/t[3]+(t[2]>>t[0]);break;case 99:e=(t[5]-t[3])*(t[1]-t[4])-(t[2]-t[0])*(t[6]-t[7]);break;case 77:e=t[0]===t[1];break;case 12:e=-t[2]-t[0]+t[1];break;case 25:e=(t[4]-t[3])*(t[2]-t[1])/(t[5]-t[0]);break;case 142:e=(t[4]*t[3]-t[2])/t[0]-t[1];break;case 86:e=(t[4]-t[0])/t[3]+t[1]+t[2];break;case 128:e=(t[2]-t[3])/t[0]/t[1]-t[4];break;case 40:e=t[2]+t[0]/t[1];break;case 50:e=t[1]-t[2]+t[0];break;case 139:e=(t[0]+t[2]-t[3])*t[1]+t[4];break;case 98:e=(t[0]-t[4])/t[2]+t[3]-t[1];break;case 52:e=(-t[2]-t[4]+t[0])/t[1]+t[3];break;case 63:e=t[5]+t[4]+t[1]+t[6]+t[0]+t[2]+t[3]+t[8]+t[7];break;case 57:e=t[1]*t[0]/t[2]-t[3];break;case 3:e=(-t[2]+t[0])/t[1]-t[3];break;case 16:e=(t[0]+t[2])/t[1]/t[4]-t[3];break;case 114:e=t[0]/t[4]/t[3]/t[1]+t[2];break;case 70:e=(t[0]+t[1])/t[3]+t[2];break;case 151:e=t[1]>=t[0];break;case 80:e=(t[1]+t[0]-t[4])*t[3]-t[2];break;case 65:e=t[3]*t[2]*t[1]*(t[4]^t[0]);break;case 100:e=t[1]==t[0];break;case 76:e=t[4]+t[0]+t[1]+t[3]+t[2];break;case 38:e=t[3]+(t[0]-t[4])*(t[2]|t[5])*t[1];break;case 14:e=t[1]+t[4]+t[2]+t[3]-t[0];break;case 54:e=-t[0]+t[2]-t[1]+t[3];break;case 18:e=t[3]-t[1]+t[2]+t[0];break;case 11:e=t[2]*t[0]*t[3]-t[1]-t[4]}return e},C4_h1O3:function(e){n=e}},a.j7j=function(){return"function"==typeof a[182467].X9xfeQe?a[182467].X9xfeQe.apply(a[182467],arguments):a[182467].X9xfeQe},a.Q36=function(e){if(a.I_9(),a)return a.n0Y(e)},a.H2b=function(e){if(a.F__(),a)return a.w2u(e)},a.P4Y=function(e){if(a.I_9(),a)return a.n0Y(e)},s=e=>{var t=a;function i(){}e.timezoneJS={},e.CIQ=i,i.packageInfo=Object.freeze({version:"8.7.0",generationDate:"2022-08-01T14:30:00.407Z",clientName:"bajaj financial services ltd",packageType:"Technical Analysis e98f22c",licenseType:"annual",expirationDate:'"2022/12/31"',domainLock:'["127.0.0.1","localhost","bajajfinservsecurities.in"]',iframeLock:"Locked"}),t.F__(),i.suppressPackageInfo=!1,i.logVersion=function(){this.suppressPackageInfo||this.packageInfoDisplayed||(this.packageInfoDisplayed=!0,t.F__(),console.log("%cChart%cIQ%c Version: "+(this.packageInfo.version||"Unavailable"),"font-family:sans-serif; font-size:14px; color: white; font-weight: normal; background-color: #feb912; padding: 2px 1px 2px 5px;","font-family:sans-serif; font-size:14px; color: white; font-weight: bold; background-color: #feb912; padding: 2px 5px 2px 1px;","font-size:12px; font-weight: bold;"))},i.logPackageInfo=function(){var e;if("font-fam","ily:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-","top",": 5px;","Domai","n Lock:","L","icense T","ype:","Cli","ent ","N","ame:",!this.suppressPackageInfo)for(var i in this.packageInfoDisplayed=!0,t.I_9(),e={version:"Version:",generationDate:"Generation Date:",clientName:"Client Name:",packageType:"Package Type:",licenseType:"License Type:",expirationDate:"Expiration Date:",domainLock:"Domain Lock:",iframeLock:"iFrame Lock:"},console.log("%cPackage Information","font-family:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-top: 5px;"),e)"fo","nt-w","eight: n","ormal",console.log("%c"+e[i]+" %c"+this.packageInfo[i],"font-weight:bold; padding-right: 5px;","font-weight: normal")},i.inheritsFrom=function(e,i,a){var r;r=i.prototype||Object.getPrototypeOf(i),e.prototype=!1!==a&&"function"==typeof i?new i:Object.create(r),t.I_9(),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:r,writable:!0}})},i.extend=function(e,t,a){var r,n;for(r in t)e!==(n=t[r])&&void 0!==n&&(null===n||!0===a?e[r]=n:n.constructor==Array?e[r]=n.slice():n.constructor==Object?("o","bject",e[r]=i.extend("object"==typeof e[r]&&null!==e[r]?e[r]:{},n)):e[r]=n);return e},i.activateImports=function(...i){var a;t.I_9(),(a=this).activatedImports||(a.activatedImports={}),i.forEach((i=>{t.F__(),"function"==typeof i&&(i.__guid in a.activatedImports||(i.__guid=a.uniqueID(!0),a.activatedImports[i.__guid]=i.__name||i.name,i(e)))}))}},o=e=>{var t,r,n;r=function(e,t){var i;return a.I_9(),(i=document.createEvent("Event")).initEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable)),i},(t="undefined"!=typeof window?window:void 0!==i.g?i.g:{}).Event&&"function"!=typeof t.Event&&(r.prototype=t.Event.prototype,t.Event=r),n=function(e,t){var i;return(i=document.createEvent("CustomEvent")).initCustomEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable),t&&t.detail),i},t.CustomEvent&&"function"!=typeof t.CustomEvent&&(n.prototype=t.CustomEvent.prototype,t.CustomEvent=n),void 0!==i.g&&void 0===i.g.CanvasRenderingContext2D&&(i.g.CanvasRenderingContext2D=function(){})},l=e=>{var t,i,r,n,s,o=a;t=e.CIQ,r=(i="undefined"!=typeof navigator?navigator:{userAgent:""}).userAgent,n="undefined"!=typeof window?window:{},s="undefined"!=typeof document?document:{},t.ipad=-1!=r.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,t.iphone=-1!=r.indexOf("iPhone"),o.o7G(0);var l=o.u$p(15,2,1,14);t.isAndroid=r.toLowerCase().indexOf("android")>l,t.isIE=r.toLowerCase().indexOf("msie")>-1||r.indexOf("Trident/")>-1,o.V6T(1);var h=o.u$p(148,16,0,8,19);t.isEdge=r.indexOf("Edge/")>h,o.o7G(2);var c=o.u$p(0,8,3,2);o.I_9(),t.isSafari=r.indexOf("Safari/")>c,t.isIOS7=r.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),t.isIOS8=r.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),t.isIOS9=r.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),t.isIOS10=r.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),t.isIOS7or8=t.isIOS7||t.isIOS8||t.isIOS9||t.isIOS10,t.isMobile=t.isAndroid||t.ipad||t.iphone,t.touchDevice=void 0!==s.ontouchstart||i.maxTouchPoints>1,t.isSurface=t.touchDevice&&(t.isEdge||t.isIE||r.indexOf("Edg/")>-1),t.is_chrome=r.toLowerCase().indexOf("chrome")>-1&&!t.isEdge,o.V6T(3);var u=o.l__(18,3,9,4);t.isFF=r.toLowerCase().indexOf("firefox")>u,t.isSurfaceApp=n.MSApp,t.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),t.noKeyboard=t.isMobile||t.isSurfaceApp},h=e=>{var t,i,r,n=a;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,n.F__(),r=function(e,t,i,a){var r,s,o,l,h;function c(e,t,a){[1,2].forEach((e=>{t[e].cp={},n.F__(),["x","y"].forEach((function(i){var r;n.V6T(4);var s=n.l__(2,16,31);n.o7G(5);var o=n.u$p(28,19,11,0);n.V6T(6);var l=n.u$p(16,18);n.V6T(7);var h=n.l__(9,14,0,3,5);n.V6T(8);var c=n.u$p(16,14);n.V6T(9);var u=n.u$p(2,4,4);n.V6T(10);var d=n.l__(3,15,15);n.V6T(11);var p=n.l__(5,4,4,17,334);n.V6T(12);var g=n.l__(8,23,14);n.V6T(13);var m=n.l__(20,10,1,2);n.V6T(14);var f=n.u$p(38,1,19,18,2);n.V6T(15);var y=n.u$p(5,25,18,16,15);n.o7G(16);var v=n.l__(0,2,10,3,1);r=s/(1+Math.sqrt(Math.pow(t[2*e-1].x-t[o*e-l].x,h)+Math.pow(t[2*e-1].y-t[c*e-u].y,d))/Math.sqrt(Math.pow(t[p].x-t[g].x,m)+Math.pow(t[f].y-t["1"|y].y,v))),n.o7G(17);var b=n.l__(11,9,1);n.o7G(8);var x=n.u$p(6,5);n.V6T(18);var S=n.u$p(1,3,3,0);n.o7G(6),n.I_9();var C=n.u$p(13,77);t[e].cp[i]=t[e][i]+(b-2*e)*(t[e+x][i]-t[e-S][i])*a*(r||"0">>C),t[e].cp[i]<Math.min(t[1][i],t[2][i])&&(t[e].cp[i]=Math.min(t[1][i],t[2][i])),t[e].cp[i]>Math.max(t[1][i],t[2][i])&&(t[e].cp[i]=Math.max(t[1][i],t[2][i]))}))})),0===e?i.quadraticCurveTo(t[2].cp.x,t[2].cp.y,t[2].x,t[2].y):e===s-4?i.quadraticCurveTo(t[1].cp.x,t[1].cp.y,t[2].x,t[2].y):i.bezierCurveTo(t[1].cp.x,t[1].cp.y,t[2].cp.x,t[2].cp.y,t[2].x,t[2].y)}r=0,a||(a=[]),(!t||t<0)&&(t=0),s=e.length,i.moveTo(e[0],e[1]);for(var u=0;u<s-3;u+=2)l=u,h=void 0,r!=a.length&&(n.I_9(),(h=a[r]).coord[0]==e[l]&&h.coord[1]==e[l+1]&&(i.stroke(),i.strokeStyle=h.color,i.setLineDash(h.pattern),i.lineDashOffset=0,i.lineWidth=h.width,i.beginPath(),i.moveTo(e[l],e[l+1]),r++)),(o=[])[0]={x:e[Math.max(0,u-2)],y:e[Math.max(1,u-1)]},o[1]={x:e[u],y:e[u+1]},o[2]={x:e[u+2],y:e[u+3]},o[3]={x:e[Math.min(s-2,u+4)],y:e[Math.min(s-1,u+5)]},4===s&&(t=0),c(u,o,t)},e.SplinePlotter.plotSpline||(e.SplinePlotter.plotSpline=r),t.clearCanvas=function(e,i){var a,r,s;e.isDirty=!1,n.I_9(),(a=e.context).clearRect(0,0,e.width,e.height),!t.isAndroid||t.is_chrome||t.isFF||(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,a.fillRect(0,0,e.width,e.height),a.clearRect(0,0,e.width,e.height)),r=e.width,n.o7G(19),e.width=n.u$p(64,"1"),e.width=r),s=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||s)&&(i.useBackgroundCanvas=s,e==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(e,t,i,a){var r;r=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.fillStyle=t,n.o7G(20),e.fillRect(n.l__("0",0),0,i,a),n.F__(),e.globalCompositeOperation=r},t.convertBoxToPixels=function(e,t,i,a){var r;return r=e.panels[t],{x0:e.pixelFromTick(i.x0,r.chart),x1:e.pixelFromTick(i.x1,r.chart),y0:i.cy0||0===i.cy0?i.cy0:e.pixelFromValueAdjusted(r,i.x0,i.y0,a),y1:i.cy1||0===i.cy1?i.cy1:e.pixelFromValueAdjusted(r,i.x1,i.y1,a)}},t.fillArea=function(e,t,a){var r,s,o,l,h,c,u,d,p,g,m,f;if(t.length){if(s=(r=e.chart.context).globalAlpha,o=arguments[2],l=arguments[3],n.F__(),h=arguments[4],n.o7G(21),c=n.u$p(0,"0"),u=null,a&&"object"==typeof a&&(o=a.color,l=a.opacity,c=a.tension,h=a.panelName,u=a.yAxis),l||0===l||(l=.2),"auto"==o&&(o=e.defaultColor),r.globalAlpha=l,o&&(r.fillStyle=o),d=Number.MAX_VALUE,n.V6T(22),p=n.u$p(d,1),(g=e.panels[h])&&(p=(u||g.yAxis).top,d=(u||g.yAxis).bottom,r.save(),r.beginPath(),r.rect(g.left,p,g.width,d-p),r.clip()),r.beginPath(),c){for(f=[],m=0;m<t.length-2;m++)f.push(t[m][0],t[m][1]);for(i.plotSpline(f,c,r),m=t.length-2;m<t.length;m++)r.lineTo(Math.round(t[m][0]),Math.round(t[m][1]))}else for(r.moveTo(t[0][0],t[0][1]),m=1;m<t.length;m++)r.lineTo(t[m][0],t[m][1]);r.closePath(),r.fill(),g&&r.restore(),r.globalAlpha=s}},t.prepareChannelFill=function(e,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=e.panels[i.panelName],e.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=e.plotDataSegmentAsLine(i.topBand,a,n),o=e.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);t.fillArea(e,l,i)},t.preparePeakValleyFill=function(e,i){var a,r,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),r=(a=e.panels[i.panelName]).yAxis,(s=e.chart.context).strokeStyle,o={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},l=e.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=o.noDraw,i.gapDisplayStyle=o.gapDisplayStyle,h=i.threshold,c=i.direction,u=i.reverse,d=i.gapDisplayStyle,i.yAxis&&(r=i.yAxis),p=-Number.MAX_VALUE,g=Number.MAX_VALUE,m=u?p:g,(h||0===h)&&(m=e.pixelFromPrice(h,a,r)),f=[],y=l.points.length;for(var N=0;N<y;N+=2)v=l.points[N],n.V6T(23),b=l.points[n.u$p(N,1)],i.roundOffEdges&&(0===N?v=Math.floor(v):N+2==y&&(v=Math.ceil(v))),isNaN(b)||(b>m&&c>0||b<m&&c<0||(f.push([v,b]),p=Math.max(b,p),g=Math.min(b,g)),N<y-3&&(n.o7G(23),x=l.points[n.l__(N,2)],n.V6T(24),S=l.points[n.u$p(N,"3")],(b<m&&S>m||b>m&&S<m)&&(n.o7G(25),v+=n.u$p(b,v,x,b,m,S),f.push([v,m]))));if(y=f.length){if(C=i.edgeParameters,i.edgeHighlight){C.lineWidth>100&&(C.lineWidth=1),s.save(),s.beginPath();for(var H=0;H<y-1;H++)if(w=f[H],n.V6T(26),k=f[n.l__("1",H,0)],w[1]!=m||k[1]!=m){if(w[0]==k[0]&&e.layout.candleWidth>=1){if(w[1]==m&&f[H-1]&&f[H-1][1]==m)continue;if(k[1]==m&&f[H+2]&&f[H+2][1]==m)continue}e.plotLine(t.extend({x0:w[0],x1:k[0],y0:w[1],y1:k[1],color:i.edgeHighlight,type:"segment",context:s,confineToPanel:a,deferStroke:!0},C))}s.stroke(),s.restore()}if(h||0===h||(r.flipped&&(u=!u),m=u?Math.min(g,r.top):Math.max(p,r.bottom)),f.push([f[y-1][0],m],[f[0][0],m]),(T=i.opacity)||0===T||(i.opacity=.3),t.fillArea(e,f,i),d&&d.color&&d.fillMountain&&!i.tension&&!t.isTransparent(d.color)&&!t.isTransparent(i.color)){for(s.save(),s.fillStyle instanceof CanvasGradient?(D=t.colorToHex(d.color),(_=s.createLinearGradient(0,1===c?a.top:a.bottom,0,m)).addColorStop(0,t.hexToRgba(D,60)),_.addColorStop(1,t.hexToRgba(D,10)),s.fillStyle=_):s.fillStyle=d.color,A=[],M={opacity:i.opacity,panelName:i.panelName},s.beginPath(),N=0;N<l.gapAreas.length;N++)P=(F=l.gapAreas[N]).start,L=F.end,O=F.threshold,P?(n.o7G(27),A=[[P[0],P[n.u$p(1,"1")]],[P[0],O]]):A.push([L[0],O],[L[0],i.step?A[0][1]:L[1]]),4==A.length&&(E="segm",E+="e",E+="nt",t.fillArea(e,A,M),I=t.extend({x1:A[3][0],y0:A[0][1],type:E,deferStroke:!0,context:s,confineToPanel:a},d),i.step?(e.plotLine(t.extend({x0:A[0][0],y1:A[0][1]},I)),e.plotLine(t.extend({x0:A[3][0],y1:A[3][1]},I))):e.plotLine(t.extend({x0:A[0][0],y1:A[3][1]},I)));s.stroke(),s.restore()}i.opacity=T}},t.fillIntersecting=function(e,i,a){var r,s,o,l,h,c,u,d,p,g,m,f,y;(!a||a instanceof Array)&&(a=arguments[3]),r=a.topBand,s=a.bottomBand,o=a.topSubBand,l=a.bottomSubBand,h=a.topColor,c=a.bottomColor,(u=i).panel&&(u.outputs&&u.outputMap&&(h||(h=u.outputs[u.outputMap[r]]),c||(c=u.outputs[u.outputMap[s]])),u=u.panel),u=e.panels[u],p=(d=e.chart.context).canvas,(g=e.scratchContext)||(g=e.scratchContext=p.cloneNode(!0).getContext("2d")),n.I_9(),(m=g.canvas).height=p.height,m.width=p.width,m.context=g,t.clearCanvas(m,e),f=.3,a.opacity&&(f=a.opacity),g.globalCompositeOperation="xor",e.chart.context=g,y={band:r,subField:o,color:h,opacity:1,panelName:u.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},t.preparePeakValleyFill(e,y),t.extend(y,{band:s,subField:l,color:c,yAxis:a.bottomAxis}),t.preparePeakValleyFill(e,y),d.save(),d.globalAlpha=f,d.drawImage(m,0,0),d.restore(),e.chart.context=d},t.drawLegendItem=function(e,t,i,a,r){var s,o,l;r||(r=1),s=t[0],o=t[1],(l=e.chart.context).globalAlpha=r,l.fillStyle=a,l.fillRect(s,o,10,10),n.V6T(6),l.globalAlpha=n.u$p(0,"1"),n.V6T(28),s+=n.u$p(0,10,"2"),l.fillStyle=e.defaultColor,l.fillText(i,s,o),n.V6T(29);var h=n.u$p(17,12,40,10);return[s+=l.measureText(i).width+h,o]},t.drawLegend=function(e,i){var a,r,s,o,l,h,c,u,d,p,g;a=i.coordinates,(r=e.chart.context).textBaseline="top",s=r.font,e.canvasFont("stx-legend",r),o=i.chart||e.chart,a||(a=o.legend),l=[a.x,a.y],h=e.defaultColor;for(var m=0;m<2;m++)for(var f in i.legendColorMap)if((!(c=i.legendColorMap[f]).isBase||!m&&!i.noBase)&&(c.isBase||m)){if(c.color instanceof Array){for(u=(d=c.color).length-1;u>=0;u--)t.isTransparent(d[u])&&d.splice(u,1);if(d.length>1){for(p=r.createLinearGradient(l[0],l[1],l[0]+10,l[1]),u=0;u<d.length;u++)p.addColorStop(u/(d.length-1),d[u]);h=p}else h=d.length>0?d[0]:e.getCanvasColor("stx_line_chart")}else h=c.color?c.color:null;if(h){if(g=f,c.display&&(g=c.display),g||(g=o.symbolDisplay?o.symbolDisplay:o.symbol),l[0]+r.measureText(g).width>o.panel.right){n.o7G(30);n.l__(7845,18,7865,7863,20);n.o7G(17);var y=n.u$p(13,20,13);l=[a.x,a.y+r.measureText("M").width+y]}l=t.drawLegendItem(e,l,g,h,c.opacity)}}r.font=s}},c=e=>{var t,i,r;t=/rgb\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/,i=/rgba\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3}),\s?(\d\.\d+|\d+|\.\d+)\)/,(r=e.CIQ).colorsEqual=function(e,t){var a,n,s,o;return e==t||(!e&&!t||!(!e||!t)&&("transparent"==e&&(e="rgba(0,0,0,0)"),"transparent"==t&&(t="rgba(0,0,0,0)"),a=e.match(i),n=t.match(i),(a?parseFloat(a[4]):1)==(n?parseFloat(n[4]):1)&&(s=r.colorToHex(e),o=r.colorToHex(t),s.toLowerCase()==o.toLowerCase())))},r.colorToHex=function(e){var n,s,o,l,h,c,u,d,p,g,m=a;if("#","0","000","00",r.colorToHexMapping||(r.colorToHexMapping={}),e&&"transparent"!=e||(e="#000000"),r.colorToHexMapping[e])return r.colorToHexMapping[e];if("#"===e.charAt(0)){if(4==e.length){var[,f,y,v]=e.split("");m.V6T(23),e=r.colorToHexMapping[e]=`#${m.l__(f,f)}${m.l__(y,y)}${m.u$p(v,v)}`}return e}if((n=t.exec(e))||(n=i.exec(e)),!n)return d=e,m.F__(),s="undefined"==typeof document?"#000000":((p=document.querySelector(".ciq_color_converter"))||((p=document.createElement("textarea")).className="ciq_color_converter",p.style.display="none",document.body.appendChild(p)),p.style.color="#000000",p.style.color=d,g=getComputedStyle(p).getPropertyValue("color"),(n=t.exec(g))?r.colorToHex(g):"#"===g.charAt(0)?g:d),r.colorToHexMapping[e]=s,s;o=parseFloat(n[1]),l=parseFloat(n[2]),h=parseFloat(n[3]),m.V6T(31);for(var b=(c=m.l__("16",0,h,o,l,8).toString(16)).length;b<6;b++)m.V6T(23),c=m.l__("0",c);return m.V6T(23),u=m.l__("#",c),r.colorToHexMapping[e]=u,u},r.hexToRgba=function(e,t){var n,s,o,l,h,c=a;if("r","gb","a",e&&"transparent"!=e||(e="rgba(0,0,0,0)"),"rgba"===e.substring(0,4)){n=i.exec(e),144640068,1484437024,c.o7G(6),s=c.l__(0,"2");for(var u=1;144640068!==c.p_V(u.toString(),u.toString().length,83797);u++){var[d,p,g,m,f]=n;(t||0===t)&&(f=t),s+=2}if(1484437024!==c.p_V(s.toString(),s.toString().length,86240)){var[d,p,g,m,f]=n;t&&6!==t&&(f=t)}return f>1&&(c.o7G(32),f=c.u$p(f,100)),`rgba(${p},${g},${m},${f})`}return"rgb"===e.substring(0,3)&&(e=r.colorToHex(e)),c.I_9(),t||0===t||(c.o7G(20),t=c.u$p("100",68)),t<=1&&(c.o7G(27),t=c.u$p(100,t)),e=e.replace("#",""),o=parseInt(e.slice(0,2),16),l=parseInt(e.slice(2,4),16),h=parseInt(e.slice(4,6),16),isNaN(o)||isNaN(l)||isNaN(h)?("CI","Q.hexToRgba: invalid hex :",console.log("CIQ.hexToRgba: invalid hex :",e),null):(c.o7G(32),`rgba(${o},${l},${h},${c.l__(t,100)})`)},r.convertToNativeColor=function(e){var t,i;return(t=document.createElement("DIV")).style.color=e,t.style.display="none",document.body.appendChild(t),i=getComputedStyle(t).color,document.body.removeChild(t),i},r.isTransparent=function(e){var t;return!!e&&("transparent"==e||null!==(t=i.exec(e))&&(0===parseFloat(t[4])||(a.F__(),!1)))},r.hsv=function(e){var t,i,n,s,o,l,h,c,u,d=a;"#"===(t=r.colorToHex(e)).substr(0,1)&&(t=t.slice(1));for(var p=t.length;p<6;p++)d.V6T(23),t=d.u$p("0",t);return i=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),d.I_9(),s=parseInt(t.slice(4,6),16),0,0,0,i=parseInt((""+i).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),s=parseInt((""+s).replace(/\s/g,""),10),null===i||null===n||null===s||isNaN(i)||isNaN(n)||isNaN(s)?(console.log("CIQ.hsv: invalid color :",e),null):i<0||n<0||s<0||i>255||n>255||s>255?null:(d.o7G(33),i=d.l__(i,"255"),d.V6T(33),n=d.u$p(n,"255"),d.o7G(32),s=d.l__(s,255),(l=Math.min(i,Math.min(n,s)))==(h=Math.max(i,Math.max(n,s)))?[0,0,l]:(c=i==l?n-s:s==l?i-n:s-i,u=i==l?3:s==l?1:5,d.V6T(34),o=d.l__(u,l,c,60,h),d.V6T(35),[o,d.u$p(h,h,l),h]))},r.hsl=function(e){var t,i,n,s,o,l,h,c,u,d,p=a;"#"===(t=r.colorToHex(e)).substr(0,1)&&(t=t.slice(1));for(var g=t.length;g<6;g++)p.o7G(23),t=p.l__("0",t);if(i=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),s=parseInt(t.slice(4,6),16),i/=255,p.o7G(19),n/=p.u$p(0,"255"),p.V6T(20),s/=p.u$p("255",40),o=Math.max(i,n,s),l=Math.min(i,n,s),p.V6T(36),u=p.l__(o,l,2),o==l)h=c=0;else{switch(p.V6T(6),d=p.l__(l,o),c=u>.5?d/(2-o-l):d/(o+l),o){case i:p.V6T(2),h=p.l__(n,s,n<s?6:0,d);break;case n:p.V6T(37),h=p.u$p(32,i,"2",d,s);break;case s:p.V6T(2),h=p.l__(i,n,4,d)}h/=6}return[h,c,u]},r.hslToRgb=function(e,t,i){var r,n,s,o,l,h,c=a;return 0===t?r=n=s=i:(o=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),c.I_9(),i<1/6?(c.V6T(38),c.l__(t,i,"6",e,e,2)):i<.5?t:i<2/3?(c.o7G(39),c.l__(i,e,"6",e,3,2,t)):e},l=i<.5?i*(1+t):i+t-i*t,c.o7G(4),h=c.l__(i,2,l),c.V6T(40),r=o(h,l,c.u$p(1,3,e)),n=o(h,l,e),c.V6T(41),s=o(h,l,c.l__("1",3,e))),c.o7G(27),[Math.round(c.u$p(255,r)),Math.round(c.u$p(255,n)),Math.round(c.u$p(255,s))]},r.chooseForegroundColor=function(e){var t;return"#","000000","#F","F","F","FFF",a.I_9(),t=r.colorToHex(e),.2126*parseInt(t.slice(1,3),16)+.7152*parseInt(t.slice(3,5),16)+.0722*parseInt(t.slice(5,7),16)<100?"#FFFFFF":"#000000"},r.borderPatternToArray=function(e,t){var i=a;return"Unsuppor","ted ",'pattern "',t?t instanceof Array?t:"dotted"==t?[e,e]:"dashed"==t?(i.V6T(27),[i.u$p(5,e),i.u$p(5,e)]):("solid"!=t&&"none"!=t&&(i.V6T(42),console.log(i.l__('Unsupported pattern "','"; defaulting to "solid"',t))),[]):[]},r.getBackgroundColor=function(e){var t,i;for("#FF","FFFF",t=null;!t||r.isTransparent(t);){if("t","ransp","are","nt",!(i=getComputedStyle(e)))return;if(t=i.backgroundColor,r.isTransparent(t)&&(t="transparent"),!(e=e.parentNode)||!e.tagName)break}return a.I_9(),t&&"transparent"!=t||(t="#FFFFFF"),t}},u=e=>{var t,i,r=a;t=e.CIQ,i=e.timezoneJS,t.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],t.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.MILLISECOND=1,r.o7G(20),t.SECOND=r.l__("1000",64),r.V6T(43);var n=r.l__(1,5,65);t.MINUTE=n*t.SECOND,t.HOUR=60*t.MINUTE,r.V6T(44);var s=r.u$p(5,288,1,259);t.DAY=s*t.HOUR,r.o7G(6);var o=r.l__(91,98);t.WEEK=o*t.DAY,r.V6T(45);var l=r.u$p(13,753,18,2,16);t.MONTH=l*t.DAY,r.o7G(46);var h=r.l__(355,33,3);t.YEAR=h*t.DAY,r.o7G(23);var c=r.l__(2,8);r.o7G(47);var u=r.u$p(11,9,6,2,13);t.DECADE=c*t.YEAR-u*t.DAY,t.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),t.strToDateTime=function(e){var i,a,n,s,o,l,h,c,u,d,p,g,m,f,y;if(!e||e.getFullYear)return e;if(i=[],12==e.length||14==e.length){a=parseFloat(e.substring(0,4)),r.o7G(48);var v=r.u$p(11,0,30,13);return n=parseFloat(e.substring(4,v))-1,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14))||0,r.o7G(20),new Date(a,n,s,o,l,h,r.l__("0",0))}if(t.yyyymmddhhmmssmmmrx.test(e)){a=parseFloat(e.substring(0,4)),r.o7G(49);var b=r.l__(7,48,6);return n=parseFloat(e.substring(4,b))-1,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14)),c=parseFloat(e.substring(14,17)),new Date(a,n,s,o,l,h,c)}if(u=[e],-1!=(d=e.indexOf("T"))){if(-1!=(p=e.substring(d)).indexOf("Z")||-1!=p.indexOf("-")||-1!=p.indexOf("+"))return new Date(e);u=e.split("T")}else-1!=e.indexOf(" ")&&(u=e.split(" "));if(-1!=u[0].indexOf("/"))i=u[0].split("/");else{if(-1==u[0].indexOf("-"))return t.strToDate(e);i=u[0].split("-")}if(g=parseFloat(i[2],10),i[0]&&4==i[0].length&&(g=parseFloat(i[0],10),i[0]=i[1],r.V6T(21),i[r.u$p(0,"1")]=i[2]),u.length>1){if(m=u[2],u=u[1].split(":"),m)if("1","2","12"==u[0]&&"AM"==m.toUpperCase())u[0]=0;else if("12"!=u[0]&&"PM"==m.toUpperCase()){r.V6T(23);var x=r.u$p(1,9);u[0]=parseInt(u[0],x)+12}f=0,y=0,3==u.length&&(-1==u[2].indexOf(".")?f=parseInt(u[2],10):3==(f=u[2].split("."))[1].length&&(y=f[1],f=f[0])),r.o7G(50);var S=r.u$p(4,13,16);return new Date(g,i[0]-S,i[1],u[0],u[1],f,y)}r.o7G(51);var C=r.u$p(5,20,40,3,19);return r.o7G(27),new Date(g,i[0]-C,i[r.u$p(1,"1")],0,0,r.u$p(0,"0",r.o7G(21)),0)},t.strToDate=function(e){var t,i;if(-1!=e.indexOf("/"))t=e.split("/");else{if(-1==e.indexOf("-")){if(e.length>=8){r.o7G(52);var a=r.l__(5,1,8,23,16);r.o7G(53);var n=r.l__(4,18,70,1);return new Date(parseFloat(e.substring(0,4)),parseFloat(e.substring(a,n))-1,parseFloat(e.substring(6,8)))}return new Date}t=e.split("-")}if(t.length<3)return new Date;-1!=t[2].indexOf(" ")?t[2]=t[2].substring(0,t[2].indexOf(" ")):-1!=t[2].indexOf("T")&&(t[2]=t[2].substring(0,t[2].indexOf("T"))),(i=parseFloat(t[2],10))<20&&(i+=2e3),4==t[0].length&&(i=parseFloat(t[0],10),t[0]=t[1],t[1]=t[2]),r.V6T(8);var s=r.u$p(12,11);return new Date(i,t[0]-s,t[1])},t.dateToStr=function(e,t){var i,a,n,s;return"h","h","YYY","Y",a=(e,t=2)=>(r.I_9(),("0".repeat(t)+e).slice(-t)),n=(e,i)=>t=t.replace(e,i),s=(e,t)=>e>t?e-t:e,(i=e=>t.includes(e))("YYYY")&&n(/YYYY/g,e.getFullYear()),i("MM")&&n(/MM/g,a(e.getMonth()+1)),i("dd")&&n(/dd/g,a(e.getDate())),i("HH")&&n(/HH/g,a(e.getHours())),i("hh")&&n(/hh/g,a(s(e.getHours()||12,12))),i("mm")&&n(/mm/g,a(e.getMinutes())),i("ss")&&n(/ss/g,a(e.getSeconds())),i("SSS")&&n(/SSS/g,a(e.getMilliseconds(),3)),t},t.mmddyyyy=function(e){var i,a;"string"==typeof e&&(e=t.strToDate(e)),r.V6T(54);var n=r.u$p(3,20,8,16);(i=e.getMonth()+n)<10&&(r.V6T(23),i=r.l__("0",i)),(a=e.getDate())<10&&(r.V6T(23),a=r.u$p("0",a)),r.o7G(43);r.l__(1,16,17);return i+"/"+a+"/"+e.getFullYear()},t.yyyymmdd=function(e){var t,i;r.V6T(17);var a=r.u$p(11,22,12);(t=e.getMonth()+a)<10&&(r.V6T(23),t=r.l__("0",t)),(i=e.getDate())<10&&(r.V6T(23),i=r.l__("0",i)),r.V6T(46);var n=r.l__(9,180,60);r.o7G(55);var s=r.u$p(73908,952410,2,12,13);r.V6T(56);var o=r.l__(535661,48960,11,19);r.V6T(57);var l=r.u$p(8,6870,8,4580);r.o7G(58);r.l__(3548,67424,9,20);r.V6T(17),r.I_9();var h=r.l__(7,9,701);r.V6T(56);r.l__(1448,183,17,13);r.V6T(59);var c=r.l__(10,160550,152070,20);r.V6T(60);var u=r.u$p(4456,6,5);r.o7G(61);r.u$p(19,92592,378,20,13);return e.getFullYear()+(3040!=("1628"|n)?"-":s<=1462?o:l)+t+(126.59<h&&c>=u?"-":"c")+i},t.hhmm=function(e){var t,i;return(t=e.getHours())<10&&(r.o7G(23),t=r.u$p("0",t)),i=e.getMinutes(),r.I_9(),i<10&&(r.o7G(23),i=r.u$p("0",i)),r.o7G(42),r.l__(t,i,":")},t.hhmmss=function(e){var i;return(i=e.getSeconds())<10&&(r.V6T(23),i=r.u$p("0",i)),t.hhmm(e)+":"+i},t.yyyymmddhhmm=function(e){return r.I_9(),t.yyyymmddhhmmssmmm(e).substr(0,12)},t.yyyymmddhhmmssmmm=function(e){var t,i,a,n,s,o;r.V6T(17);var l=r.l__(17,20,4);return(t=e.getMonth()+l)<10&&(r.o7G(23),t=r.u$p("0",t)),(i=e.getDate())<10&&(r.o7G(23),i=r.l__("0",i)),(a=e.getHours())<10&&(r.o7G(23),a=r.l__("0",a)),(n=e.getMinutes())<10&&(r.V6T(23),n=r.u$p("0",n)),r.F__(),(s=e.getSeconds())<10&&(r.o7G(23),s=r.l__("0",s)),(o=e.getMilliseconds())<10?(r.V6T(23),o=r.l__("00",o)):o<100&&(r.o7G(23),o=r.l__("0",o)),""+e.getFullYear()+t+i+a+n+s+o},t.friendlyDate=function(e){return"YY","YY/MM/dd"," H","H:mm",r.F__(),t.dateToStr(e,"YYYY/MM/dd HH:mm")},r.F__(),t.mmddhhmm=function(e){var i,a,n,s,o,l,h;return"0","0","0","0","0","0","0","0","0",(a=(i=t.strToDateTime(e)).getMonth()+1)<10&&(r.V6T(23),a=r.u$p("0",a)),(n=i.getDate())<10&&(r.o7G(23),n=r.u$p("0",n)),(s=i.getHours())<10&&(r.V6T(23),s=r.u$p("0",s)),r.I_9(),(o=i.getMinutes())<10&&(r.V6T(23),o=r.u$p("0",o)),(l=i.getSeconds())<10&&(r.V6T(23),l=r.u$p("0",l)),(h=i.getMilliseconds())<10?(r.o7G(23),h=r.l__("00",h)):h<100&&(r.V6T(23),h=r.u$p("0",h)),"00"==s&&"00"==o&&"00"==l&&"000"==h?(r.V6T(6),a+"-"+n+(965.97!==r.l__(10860,12670)&&"-")+i.getFullYear()):"00"==l&&"000"==h?(r.o7G(62),r.l__(s,a,":",n,"-"," ",o)):"000"==h?(r.o7G(63),r.u$p(s,n,":",o,"-",a," ",l,":")):(r.V6T(64),r.l__("-"," ",":",s,l,":",h,":",n,a,o))},t.getYearDay=function(e){var t,i,a,n;return(t=e)||(t=new Date),t.setHours(0,0,0,0),i=new Date(t.getFullYear(),0,0),r.o7G(6),a=r.u$p(i,t),r.o7G(65),n=r.l__(0,60,60,1e3,"24"),r.V6T(32),r.F__(),Math.round(r.u$p(a,n))},t.getETDateTime=function(){var e;return r.F__(),e=new Date,t.convertTimeZone(new Date(e.getTime()+6e4*e.getTimezoneOffset()),"UTC","America/New_York")},t.fromET=function(e){var t,i,a;i=4,((t=new Date).getMonth()<2||2==t.getMonth()&&t.getDate()<11||t.getMonth()>10||10==t.getMonth()&&t.getDate()>=4)&&(r.V6T(20),i=r.l__("5",5)),r.o7G(7);var n=r.u$p(19,11,18e6,3599998,9000004);return r.F__(),a=e.getTime()+n*i,new Date(a)},t.monthAsDisplay=function(e,i,a){return i?a&&a.monthLetters?a.monthLetters[e]:t.monthLetters[e]:a&&a.monthAbv?a.monthAbv[e]:t.monthAbv[e]},t.timeAsDisplay=function(e,i,a){var n,s,o,l,h;if(n=i?i.internationalizer:null){-116645219,862403357,2;for(var c=1;-116645219!==r.p_V(c.toString(),c.toString().length,59379);c++)return a!==t.SECOND?n.hourMinuteSecond.format(e):a!=t.MILLISECOND?(n.hourMinuteSecond.format(e)-"")*e.getMilliseconds():n.hourMinute.format(e);return 862403357!==r.p_V(2..toString(),2..toString().length,38857)?a==t.SECOND?n.hourMinuteSecond.format(e):a===t.MILLISECOND?n.hourMinuteSecond.format(e)%""-e.getMilliseconds():n.hourMinute.format(e):a==t.SECOND?n.hourMinuteSecond.format(e):a==t.MILLISECOND?n.hourMinuteSecond.format(e)+"."+e.getMilliseconds():n.hourMinute.format(e)}(s=e.getMinutes())<10&&(r.o7G(23),s=r.u$p("0",s)),r.V6T(66);r.l__(3,13,8889,20,17752);r.o7G(67);r.l__(52150,1,5,44713,18);r.o7G(23);var u=r.u$p(783,3915);r.V6T(58);r.u$p(2806,36493,19,14);r.o7G(68);var d=r.u$p(128120,136640,20,1);return o=e.getHours()+(!(u>=d)&&":")+s,l="",a<=t.SECOND&&((l=e.getSeconds())<10&&(r.o7G(23),l=r.l__("0",l)),r.V6T(23),o+=r.u$p(":",l)),a==t.MILLISECOND&&("0","0",(h=e.getMilliseconds())<10?(r.o7G(23),h=r.u$p("00",h)):h<100&&(r.o7G(23),h=r.l__("0",h)),r.V6T(23),o+=r.u$p(".",h)),o},t.displayableDate=function(e,i,a,n){var s,o,l,h,c,u,d,p,g,m,f,y;if(s="",o=e.layout.interval,l=t.ChartEngine.isDailyInterval(o),h=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.SECOND||"second"==e.layout.timeUnit,c="tick"===o||i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.MILLISECOND||"millisecond"==e.layout.timeUnit,i.xAxis.formatter)s=i.xAxis.formatter(a);else if(e.internationalizer)if(s=e.internationalizer.monthDay.format(a),h||c){r.V6T(4);r.l__(19,276,544);r.o7G(69);var v=r.l__(8,8095230,16,63270);r.V6T(53);r.l__(19,11,106688,5915);r.V6T(2);var b=r.u$p(9281,6,7435,5);r.V6T(17);r.u$p(2,14,7062);r.o7G(70);var x=r.l__(523,9,6004,2);r.V6T(46);var S=r.l__(2479,2465,2465);r.o7G(46);var C=r.u$p(9481,499,1);r.o7G(23);r.l__(6475,3);r.V6T(49);var w=r.u$p(17,154,9);r.V6T(71);var k=r.l__(9,1550,110,15,15);if(s+=(398.44===v?b:x>S?" ":C=="67.36"*w?k:8320)+e.internationalizer.hourMinuteSecond.format(a),c){r.o7G(61);r.l__(14,1637,12,3,10);r.V6T(60);r.l__(3566,4,8);r.V6T(72);r.l__(1,6,7,2);r.o7G(4);r.l__(15,1011,14173);r.V6T(73);r.u$p(154746,16,1254,7,18);s+="."+a.getMilliseconds()}}else l?s="month"==o?e.internationalizer.yearMonth.format(a):e.internationalizer.yearMonthDay.format(a):(n&&(s=e.internationalizer.yearMonthDay.format(a)),s+=" "+e.internationalizer.hourMinute.format(a));else if(u=F(a.getMonth()+1),d=F(a.getDate()),p=F(a.getHours()),g=F(a.getMinutes()),l)"mo","nt","h",s="month"==o?u+"/":u+"/"+d+"/",s+=a.getFullYear();else{if(r.o7G(42),m=r.l__(u,d,"/"),n){r.o7G(74);r.u$p(1,7,14,1);r.o7G(6);var T=r.u$p(19692,29538);r.o7G(23);var D=r.u$p(2880,5760);r.o7G(6);var _=r.l__(17,3868);r.o7G(50);r.u$p(1548,96,14);r.V6T(6);var A=r.l__(26460,30240);r.o7G(18);r.l__(745,16,11,39);r.V6T(75);var M=r.l__(8581,11,782,6);r.o7G(0);r.u$p(47280,39394,1,6);m+=(T!==D?"/":_!==A?M:"p")+a.getFullYear()}r.o7G(76),s=r.l__(" ",p,g,":",m),(h||c)&&(f=F(a.getSeconds()),r.V6T(23),s+=r.l__(":",f),c&&((y=F(a.getMilliseconds()))<100&&(r.V6T(23),y=r.l__("0",y)),r.o7G(23),s+=r.u$p(":",y)))}function F(e){return e<10?(r.V6T(23),r.l__("0",e)):e}return r.I_9(),s},t.convertTimeZone=function(e,t,a){var r;return i.Date?((r=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t)).setTimezone(a),r):e},t.convertToLocalTime=function(e,t){var a,n,s;if(!i.Date)return e;a=e.getSeconds(),n=e.getMilliseconds(),s=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),r.V6T(6);var o=r.u$p(14,1014);return new Date(s.getTime()+a*o+n)}},d=e=>{var t,i,r;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,e.SplinePlotter,i=function(e,t){var a;if(!t)return document.getElementById(e);if(t.id==e)return t;if(!t.hasChildNodes)return null;for(var r=0;r<t.childNodes.length;r++)if(a=i(e,t.childNodes[r]))return a;return null},e.$$=i,r=function(e,t){return a.F__(),t||(t=document),t.querySelectorAll(e)[a.l__("0",0,a.o7G(20))]},e.$$$=r,t.wheelEvent=function(){if("undefined"!=typeof document)return t.isIE||"onwheel"in document.createElement("div")?"wheel":(a.F__(),void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll")}(),t.newChild=function(e,t,i,a){var r;return r=document.createElement(t),i&&(r.className=i),e.appendChild(r),a&&(r.innerHTML=a),r},t.innerHTML=function(e,t){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){a.F__(),e.innerHTML=t})):e.innerHTML=t},t.focus=function(e,i){var r;a.I_9(),t.isSurface||i?(r=0,isNaN(parseInt(i,10))||(r=i),setTimeout((function(){a.F__(),e.focus()}),r)):e.focus()},t.blur=function(e){e||(e=document.activeElement),a.I_9(),e&&e.blur(),window.focus()},t.findNodesByText=function(e,i){var r,n;if(a.F__(),e.innerHTML==i)return[e];r=[];for(var s=0;s<e.childNodes.length;s++)(n=t.findNodesByText(e.childNodes[s],i))&&(r=r.concat(n));return r.length?r:null},t.hideByText=function(e,i){var a;a=t.findNodesByText(e,i);for(var r=0;r<a.length;r++)"n","o","n","e",a[r].style.display="none"},t.pageHeight=function(e){var{innerHeight:t,top:i,parent:a,self:r}=e||window;if(i!=r)try{t>a.innerHeight&&(t=a.innerHeight)}catch(e){}return t},t.pageWidth=function(e){var{innerWidth:t,top:i,parent:r,self:n}=e||window;if(i!=n)try{t>r.innerWidth&&(t=r.innerWidth)}catch(e){}return a.F__(),t},t.stripPX=function(e){return e?"number"==typeof e?e:parseInt(e.substr(0,e.indexOf("p")),10):0},t.withinElement=function(e,t,i){var r;return a.F__(),!(t<=(r=e.getBoundingClientRect()).left)&&(!(i<=r.top)&&(!(t>=r.left+e.offsetWidth)&&!(i>=r.top+e.offsetHeight)))},t.efficientDOMUpdate=function(e,t,i){return a.F__(),e[t]!==i&&(e[t]=i,!0)},t.cqvirtual=function(e){var t;if(e)return(t=e.cloneNode(!0)).innerHTML="",t.original=e,a.I_9(),t},t.cqrender=function(e){var i;if(e)return e.innerHTML==e.original.innerHTML||(t.removeChildIfNot(e.original,"template"),(i=Array.from(e.children)).length&&i.forEach((function(t){e.original.appendChild(e.removeChild(t))})),a.I_9()),e.original},t.removeChildIfNot=function(e,t){var i;return i=Array.from(e.children),a.F__(),i.length&&i.forEach((function(i){t&&i.matches(t)||e.removeChild(i)})),e},t.safeMouseOut=function(e,i){var a,r;e.addEventListener("mouseout",(a=e,r=i,function(e){void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(a,e.pageX,e.pageY)||(a.stxMouseOver=!1,r(e))}))},t.safeMouseOver=function(e,i){var r,n;e.addEventListener("mouseover",(r=e,n=i,function(e){if(void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),a.F__(),t.withinElement(r,e.pageX,e.pageY)){if(r.stxMouseOver)return;r.stxMouseOver=!0,n(e)}}))},t.installTapEvent=function(e,i){var r;a.I_9(),r=function(e){var t;t=new Event("stxtap",{bubbles:!0,cancelable:!0}),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.pageX=e.pageX,a.F__(),t.pageY=e.pageY,e.target.dispatchEvent(t),i&&i.stopPropagation&&e.stopPropagation()},t.safeClickTouch(e,r,i)},t.safeClickTouch=function(e,i,r){var n,s,o,l,h,c,u,d;function p(e,t){return function(i){var r,n;r=i.clientX?i.clientX:i.pageX,a.F__(),n=i.clientY?i.clientY:i.pageY,t?(e.t=(new Date).getTime(),e.x=r,e.y=n):e.x&&Math.pow(e.x-r,2)+Math.pow(e.y-n,2)>16&&(e.t=null)}}function g(e,r,n){return a.F__(),function(s){var o;if(!t.safeClickTouchEvent){if(!n.t)return;if(o=n.t,n.t=null,o+1e3<(new Date).getTime())return}if(!(r.safety&&r.safety.recentlyDragged||(a.I_9(),s.which&&s.which>=2||s.button&&s.button>=2))){if(r.preventUnderlayClick)"INPUT"!==s.target.tagName&&s.preventDefault();else{if(r.lastType!=e&&Date.now()<r.allowAnotherDevice)return;r.lastType=e,r.allowAnotherDevice=Date.now()+1e3}i(s)}}}r||(r={}),n={},r.allowMultiple||t.clearSafeClickTouches(e),!1!==r.preventUnderlayClick&&(r.preventUnderlayClick=!0),!1!==r.absorbDownEvent&&(r.absorbDownEvent=!0),r.allowAnotherDevice=0,r.registeredClick=!1,(s=e.safeClickTouchEvents)||(s=e.safeClickTouchEvents=[]),o=g("mouseup",r,n),l=g("touchend",r,n),h=g("pointerup",r,n),c=function(e){a.I_9(),e.stopPropagation()},u={},t.safeClickTouchEvent?(d=g(t.safeClickTouchEvent,r),e.addEventListener(t.safeClickTouchEvent,d),u[t.safeClickTouchEvent]=d,s.push(u)):"onpointerup"in document&&!t.noPointerEvents?(e.addEventListener("pointerdown",p(n,!0)),e.addEventListener("pointermove",p(n)),e.addEventListener("pointerup",h),u.pointerup=h,r.absorbDownEvent&&(e.addEventListener("pointerdown",c),u.pointerdown=c),s.push(u)):("m","ouse","down",e.addEventListener("mousedown",p(n,!0)),e.addEventListener("mousemove",p(n)),e.addEventListener("touchstart",p(n,!0),{passive:!1}),e.addEventListener("touchmove",p(n),{passive:!1}),e.addEventListener("mouseup",o),e.addEventListener("touchend",l),u.mouseup=o,u.touchend=l,r.absorbDownEvent&&(e.addEventListener("mousedown",c),u.mousedown=c,e.addEventListener("touchstart",c,{passive:!1}),u.touchstart=c),s.push(u))},t.clearSafeClickTouches=function(e){var t,i,a;if(t=e.safeClickTouchEvents){for(var r=0;r<t.length;r++)for(var n in i=t[r])a=i[n],e.removeEventListener(n,a);e.safeClickTouchEvents=null}},t.safeDrag=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y;function v(a){return function(r){var n,s;g||(g=!0,t.ChartEngine.ignoreTouch=!0,n=function(e){e&&e.preventDefault&&e.preventDefault(),y.recentlyDragged=!0,e.displacementX=u(e)-m,e.displacementY=d(e)-f,i.move(e)},i.move&&e.ownerDocument.body.addEventListener(a.move,n),s=function(r){t.ChartEngine.ignoreTouch=!1,i.move&&e.ownerDocument.body.removeEventListener(a.move,n),e.ownerDocument.body.removeEventListener(a.up,s),r.displacementX=u(r)-m,r.displacementY=d(r)-f,i.up&&i.up(r),setTimeout((function(){y.recentlyDragged=!1}),50)},e.ownerDocument.body.addEventListener(a.up,s),setTimeout((function(){g=!1}),p),m=u(r),f=d(r),i.down&&i.down(r))}}return r="poi",r+="n",r+="termove",n="poin",n+="terdown",s="m",s+="oused",s+="own",o="client",o+="Y",l="p",l+="a",l+="geY",h="clie",h+="n",h+="t",u=(c=function(e,t){return a.I_9(),function(i){if(i.touches){if(i.touches.length>0)return i.touches[0][e];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][e]}return a.F__(),void 0!==i[e]?i[e]:i[t]}})("pageX",h+="X"),a.F__(),d=c(l,o),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},p=100,g=!1,m=0,f=0,y={recentlyDragged:!1},e.addEventListener(s,v({down:"mousedown",move:"mousemove",up:"mouseup"})),e.addEventListener("pointerdown",v({down:n,move:r,up:"pointerup"})),e.addEventListener("touchstart",v({down:"touchstart",move:"touchmove",up:"touchend"}),{passive:!1}),y},t.inputKeyEvents=function(e,t){e.addEventListener("keyup",(function(i){var r;switch(r=i.keyCode,a.F__(),r){case 13:t();break;case 27:e.value=""}}),!1)},t.fixScreen=function(){a.F__(),window.scrollTo(0,0)},t.setCaretPosition=function(e,i){var r;if(a.F__(),e.style.zIndex=5e3,e.setSelectionRange){t.focus(e);try{e.setSelectionRange(i,i)}catch(e){}}else e.createTextRange&&((r=e.createTextRange()).collapse(!0),r.moveEnd("character",i),r.moveStart("character",i),r.select())},t.setValueIfNotActive=function(e,t){document.activeElement!=e&&(e.value=t)},t.hideKeyboard=function(e){var t;t=document.activeElement,a.F__(),"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName||(t.blur(),t.ownerDocument.defaultView.focus(),e&&(e===t.ownerDocument.body||t.ownerDocument.body.contains(e))&&e.focus())},t.smartHover=function(e){var t,i;function r(e,t){e.documentElement.setAttribute("ciq-last-interaction",t)}e||(e=document),e&&!e.documentElement.hasAttribute("ciq-last-interaction")&&(t=!1,e.addEventListener("touchend",(function(e){"t",a.F__(),"o","uch",clearTimeout(i),t=!0,"touch"!=this.documentElement.getAttribute("ciq-last-interaction")&&r(this,"touch");i=setTimeout((function(){a.F__(),t=!1}),500)}),!1),e.addEventListener("mouseover",(function(e){var i;i=2;for(var n=1;1138615358!==a.j7j(n.toString(),n.toString().length,83437);n++)t||r(this,"mouse"),i+=2;-1283674650!==a.p_V(i.toString(),i.toString().length,42806)&&-t&&r(this,"")}),!1),r(e,""))},t.translatableTextNode=function(e,t,i){var r;return a.I_9(),e.translationCallback?("c","q-tr","ansla","te",(r=document.createElement("cq-translate")).setAttribute("original",t),r.innerHTML=e.translationCallback(t,i),r):document.createTextNode(t)},t.climbUpDomTree=function(e,t){var i;if(!e||!e.matches)return null;for(i=[];e;)t&&!e.matches(t)||i.push(e),e=e.parentElement;return i},t.guaranteedSize=function(e){var t,i;if(a.F__(),e.defaultView&&(e=e.defaultView),!e.nodeType)return{width:e.innerWidth,height:e.innerHeight};if(!e||e.nodeType>1)return{};for(t=e.offsetWidth,i=e.offsetHeight;!t||!i;){if("BODY"===e.tagName||!e.parentElement){t=(e=(e.ownerDocument||{}).defaultView||e).innerWidth,i=e.innerHeight;break}t=(e=e.parentElement).offsetWidth,i=e.offsetHeight}return{width:t,height:i}},t.trulyVisible=function(e){function i(e){return"0"!==e.opacity&&("none"!==e.display&&("hidden"!==e.visibility&&(0!==parseInt(e.width,10)&&(0!==parseInt(e.height,10)||"hidden"!=e.overflowY))))}return a.I_9(),!e||!!i(e.style)&&(!!i(getComputedStyle(e))&&t.trulyVisible(e.parentElement))},t.elementDimensions=function(e,t){var i,r,n,s,o;if("con","t","ent-bo","x",!e||1!==e.nodeType)return{};for(var l in i=getComputedStyle(e),r={width:parseFloat(i.width),height:parseFloat(i.height)},s=["width","height"],n={margin:{},border:{},padding:{}})o="border"==l?"Width":"",n[l]={width:parseFloat(i[l+"Left"+o])+parseFloat(i[l+"Right"+o]),height:parseFloat(i[l+"Top"+o])+parseFloat(i[l+"Bottom"+o])};return t&&t.margin&&s.forEach((function(e){var t;t=2;for(var i=1;2138528899!==a.j7j(i.toString(),i.toString().length,32890);i++)r[e]/=n.margin[e],t+=2;514342690!==a.p_V(t.toString(),t.toString().length,86970)&&(r[e]+=n.margin[e])})),t&&"content-box"===i.boxSizing?(t.padding&&s.forEach((function(e){a.I_9(),r[e]+=n.padding[e]})),t.border&&s.forEach((function(e){a.I_9(),r[e]+=n.border[e]}))):"border-box"===i.boxSizing&&(t&&t.padding||s.forEach((function(e){a.F__(),r[e]-=n.padding[e]})),t&&t.border||s.forEach((function(e){a.I_9(),r[e]-=n.border[e]}))),r},t.resizeDetectInterval=-1,t.resizeObserver=function(e,i,r,n){var s,o,l,h,c,u=a;u.o7G(77),s=u.l__(typeof n,"number"),o=t.resizeDetectInterval>=0,u.o7G(78),l=u.l__(typeof ResizeObserver,"undefined"),h=2;for(var d=1;1378974394!==u.p_V(d.toString(),d.toString().length,32973);d++)c=594,h+=2;return-1135076421!==u.j7j(h.toString(),h.toString().length,85486)&&(c=500),s||(n=o?t.resizeDetectInterval:l?-1:c),n<0&&(r||(r=new ResizeObserver((()=>{t.ChartEngine&&t.ChartEngine.useAnimation?requestAnimationFrame(i):setTimeout(i,0)}))).observe(e)),n>0&&(r&&clearInterval(r),r=setInterval(i,n)),r&&0===n&&(r instanceof ResizeObserver?r.disconnect():clearInterval(r),r=null),r},t.getLines=function(e,t,i){var a,r,n,s,o;a=t.split(" "),r=[],n="",s=!1;for(var l=0;l<a.length;l++)if(o=a[l],e.measureText(n+o).width<i?(s&&(n+=" "),s=!0,n+=o):(r.push(n),n=o),l===a.length-1){r.push(n);break}return r},t.alert=function(e){a.I_9(),"undefined"!=typeof window?window.alert(e):console.log(e)};try{"undefined"!=typeof localStorage&&(t.localStorage=localStorage)}catch(e){}t.localStorage||(t.localStorage={items:{},getItem:function(e){return a.I_9(),t.localStorage.items[e]||null},setItem:function(e,i){t.localStorage.items[e]=i},removeItem:function(e){a.I_9(),delete t.localStorage.items[e]}}),t.privateBrowsingAlert=!1,t.localStorageSetItem=function(e,i){try{t.localStorage.setItem(e,i)}catch(e){t.privateBrowsingAlert||("No storage space available.  Possible causes include browser being in Private Brow","sing mode, or maximum storage space has been reached.",t.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),t.privateBrowsingAlert=!0)}}},p=e=>{var t,i;(t=e.CIQ).ChartEngine=function(e){var r,n=a;for(var s in e?"undefined"!=typeof HTMLDivElement&&e.constructor==HTMLDivElement&&(e={container:e}):e={container:null},i)this[s]=t.clone(t.ChartEngine.prototype[s]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,n.V6T(20),this.grabStartY=n.u$p("0",0),this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},n.o7G(79),this.moveA=-n.l__(0,"1"),this.moveB=-1,n.V6T(21),this.touchStartTime=-n.l__(0,"1"),this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,n.I_9(),this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),this.chart=new t.ChartEngine.Chart,(r=this.chart).name="chart",r.yAxis.name="chart",r.canvas=null,r.tempCanvas=null,r.container=e.container,t.Market&&(r.market=new t.Market),this.charts.chart=r,t.extend(this,e),e.container&&(this.registerHTMLElements&&this.registerHTMLElements(),r.width=r.container.clientWidth-r.yAxis.width,this.setCandleWidth(this.layout.candleWidth,r),r.canvasHeight=r.container.clientHeight),this.construct()},t.ChartEngine.drawingLine=!1,t.ChartEngine.resizingPanel=null,t.ChartEngine.crosshairX=0,t.ChartEngine.crosshairY=0,t.ChartEngine.useAnimation=!0,t.ChartEngine.enableCaching=!1,t.ChartEngine.ignoreTouch=!1,t.ChartEngine.useOldAndroidClear=!0,t.ChartEngine.currentVectorParameters={},t.ChartEngine.defaultDisplayTimeZone=null,t.ChartEngine.pluginBasePath="plugins/",t.ChartEngine.registeredContainers=[],t.ChartEngine.globalEventHandlers=[],t.ChartEngine.registerHelpers=function(e){a.F__(),t.ChartEngine.helpersToRegister.forEach((function(t){a.I_9(),t(e)}))},t.ChartEngine.helpersToRegister=[],t.ChartEngine.prototype.construct=function(){this.createChartPanel&&(this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,this.micropixels=0,a.I_9(),this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingComplete:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},t.ChartEngine.registerHelpers(this)},i={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:100,minimumZoomTicks:9,allowZoom:!0,allowDrawingZoom:!1,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(e){return a.I_9(),e},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:t.isMobile||t.isSurface&&t.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,xAxisAsFooter:!0,xaxisHeight:40,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(e,t,i){a.F__(),e(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:t.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:t.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:t.YEAR,periodicity:1,interval:"day"},{rangeInMS:t.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*t.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:t.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*t.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*t.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*t.MINUTE},{interval:"day",rangeInMS:t.DAY},{interval:"month",rangeInMS:t.MONTH},{interval:"year",rangeInMS:t.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1,animation:!0},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},t.extend(t.ChartEngine.prototype,i),a.o7G(79),t.ChartEngine.NONE=a.u$p(64,"0"),t.ChartEngine.CLOSEUP=1,t.ChartEngine.CLOSEDOWN=2,t.ChartEngine.CLOSEEVEN=4,t.ChartEngine.CANDLEUP=8,t.ChartEngine.CANDLEDOWN=16,t.ChartEngine.CANDLEEVEN=32},g=e=>{var t;(t=e.CIQ).convertFutureMonth=function(e){var t;if("1","0",a.I_9(),(t=e.toString()).length<=0||t.length>2)return"";switch(t){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"1","1","11";case"Z":return"1","2","12"}return t},t.money=function(e,i,r){return r||(r="$"),3==r.length&&(r+=" "),a.F__(),i||0===i||(i=2),r+t.commas((Math.round(1e4*e)/1e4).toFixed(i))},t.convertCurrencyCode=function(e){return"S","$","k","r","HK","$","k","r","C","A",a.I_9(),"$",{JPY:"¥",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN¥",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"£",HKD:"HK$",HUF:"Ft",ILS:"₪",INR:"₹",KRW:"₩",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"zł",RUB:"руб",SAR:"﷼",SEK:"kr",SGD:"S$",THB:"฿",TRY:"₺",TWD:"NT$",VND:"₫",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[e]||e},t.commas=function(e){return a.F__(),e.toString().replace(/\B(?=(\d{3}){1,4}(?!\d))/g,",")},t.cleanPeriodicity=function(e,t,i){var r=a;return"y","ea","r","m","inute",isNaN(e)&&(e=1),t||(t=1),!isNaN(t)&&i?("sec","o","n","d","hour"!=i&&"minute"!=i&&"second"!=i&&"millisecond"!=i&&(t=i,i=null)):"tick"==t?i=null:i||isNaN(t)||(i="minute"),r.F__(),"hour"==i&&(i="minute",r.o7G(27),t=r.u$p(60,t)),"year"==t&&("mon","th",t="month",e||(e=1),r.V6T(27),e=r.u$p(12,e)),{period:e,interval:t,timeUnit:i}},t.readablePeriodicity=function(e){var i,r,n,s=a;if("numb","e","r",i=e.layout.periodicity,r=e.layout.interval,"number"==typeof e.layout.interval&&e.layout.timeUnit?(i=e.layout.interval*e.layout.periodicity,r=e.layout.timeUnit):"number"!=typeof e.layout.interval||e.layout.timeUnit||(i=e.layout.interval*e.layout.periodicity,r="minute"),i%60==0&&"minute"==r){57759941,1460492133,n=2;for(var o=1;57759941!==s.p_V(o.toString(),o.toString().length,61514);o++)i+=12,r="",n+=2;1460492133!==s.p_V(n.toString(),n.toString().length,3250)&&(i/=60,r="hour")}s.V6T(80);var l=s.l__(16,5357,37558,8,7);s.o7G(46);s.u$p(7481,9355,5);s.V6T(23);var h=s.l__(3611,19);s.o7G(81);s.l__(16,1088,18,4,13341);return i+(l===h?503.98:" ")+e.translateIf(t.capitalize(r))},t.fixPrice=function(e){var t;if(!e&&0!==e)return null;for(var i=(t=e.toFixed(10)).length-1;i>1&&"0"==t.charAt(i);i--);return a.o7G(28),t=t.substring(0,a.l__(0,i,"1")),parseFloat(t)},t.condenseInt=function(e){var t,i=a;if("n","/","a",null==e)return"";if(e===1/0||e===-1/0)return"n/a";if(i.o7G(82),t=i.u$p(0,e),isNaN(e))e=e.toString();else if((e=Math.abs(e))>1e12){i.o7G(6);var r=i.l__(20,30);i.o7G(83);i.u$p(8,11,658,82,19);i.V6T(84);i.l__(2110,7,2127,14770);i.V6T(85);i.l__(15,3,18,76,61333);i.o7G(86);i.u$p(14,10,1446,364,1470);e=Math.round(e/1e11)/r+"t"}else if(e>1e11){i.o7G(23);var n=i.u$p(90909091,909090909);e=Math.round(e/n)+"b"}else if(e>1e10){i.V6T(87);var s=i.u$p(7,4,240,18,14);i.o7G(23);i.u$p(2642,3);i.V6T(1);var o=i.l__(172,19,0,9,5);i.o7G(88);var l=i.u$p(7,853,861,853);i.V6T(7);var h=i.l__(15,2,755,6792,128);i.V6T(89);i.u$p(9,108,634,12,12);i.o7G(50);var c=i.u$p(284,25,4);i.V6T(6);i.u$p(11,710);i.V6T(90);var u=i.u$p(6279,9447,8,3);e=(Math.round(e/1e8)/10).toFixed(s)+(398.81<=o?l:235.87===h?c>810.48?"C":u:"b")}else if(e>1e9){i.V6T(69);var d=i.u$p(14,1510,12,9);i.V6T(50);i.u$p(8,9836,4);i.o7G(13);var p=i.u$p(923,1,908,923);i.V6T(60);var g=i.u$p(220,9,191);i.o7G(91);var m=i.u$p(13,17,2929,8,611);i.o7G(92);var f=i.l__(41850,4,5,33481);e=(Math.round(e/1e7)/100).toFixed(d)+(p>=9150?("949"|g)!==m?"X":f:"b")}else if(e>1e8){i.o7G(6);var y=i.l__(13,5153);e=Math.round(e/1e6)+(5800<y?"R":"m")}else if(e>1e7){i.o7G(48);var v=i.u$p(9,0,14,4);e=(Math.round(e/1e5)/10).toFixed(v)+"m"}else if(e>1e6){i.o7G(75);i.u$p(4784,18,267,2);i.V6T(13);i.l__(823,823,3289,1);i.o7G(93);i.u$p(8480,10,5,21);i.o7G(6);var b=i.u$p(150660,159030);i.V6T(4);var x=i.u$p(16,2562,38422);i.o7G(6);i.u$p(3,5924);i.V6T(94);var S=i.l__(9733,17,15,14,136715);i.V6T(17);var C=i.u$p(4,104804,111350);i.o7G(47);i.u$p(9,3418,777,2,11);i.o7G(23);var w=i.l__(2643,5287);e=(Math.round(e/1e4)/100).toFixed(2)+(b>=x?177.03<=S?"m":C:w)}else if(e>1e5){i.V6T(4);var k=i.l__(13,13e3,168e3);i.V6T(23);var T=i.u$p(4128,2);i.o7G(58);var D=i.u$p(5399,102610,20,20);i.V6T(4);var _=i.l__(13,7268,87214);i.o7G(4);var A=i.l__(19,175230,3319635);i.o7G(60);var M=i.l__(136884,2,128830);e=Math.round(e/k)+(T<D?"k":_!==A?M:"Q")}else if(e>1e4){i.o7G(49);var F=i.u$p(7,113,16);i.V6T(23);i.l__(211,1689);i.o7G(17);var P=i.u$p(11,123941,131220);i.o7G(95);var L=i.u$p(240,19,230);i.V6T(7);i.l__(20,6,12,229,13);i.o7G(4);var O=i.l__(2,29,26);i.o7G(60);i.u$p(14600,20,13120);e=(Math.round(e/100)/10).toFixed(F)+(312.75==P?L>"1430">>O?858.38:"Z":"k")}else if(e>1e3){i.o7G(57);var E=i.u$p(12,3680,2,18386);i.o7G(69);i.u$p(14,559117,15,2665);i.V6T(96);var I=i.l__(8,15,412,21,20);e=(Math.round(e/10)/100).toFixed(2)+(E!=="746.03"*I?"k":423.04)}else e=e.toString();return t&&(i.V6T(23),e=i.u$p("-",e)),e},t.calculateTradingDecimalPlaces=function(e){var t,i,r,n,s,o,l,h,c;if(i=2,50,(r=(t=e.chart).masterData)&&r.length>50)for(var u=2;u<50&&("n","u","mb","er",!((n=r.length-u)<0));u++)if((s=r[n]).Close&&"number"==typeof s.Close&&-1!=(l=(o=s.Close.toString()).indexOf("."))){a.o7G(97);var d=a.u$p(2,12,15);(h=o.length-l-d)>i&&(i=h)}return i>(c=t.yAxis.maxDecimalPlaces)&&null!==c&&(i=c),i},t.minMax=function(e,t,i,r){var n,s,o,l,h,c,u;n=Number.MAX_VALUE,a.o7G(8);var d=a.u$p(4,5);s=Number.MAX_VALUE*d,i||(i="Close"),o=r?"High":i,l=r?"Low":i,a.F__();for(var p=0;p<e.length;p++)"ob","ject","o","bj","e","ct",(h=e[p])&&((c=h[t])||0===c)&&(u=c,"object"==typeof c&&(u=c[o]),isNaN(u)||!u&&0!==u||(s=Math.max(s,u)),"object"==typeof c&&(u=c[l]),isNaN(u)||!u&&0!==u||(n=Math.min(n,u)));return[n,s]},t.symbolEqual=function(e,t){var i,r;return"ob","j","e","ct",!(!e||!t)&&("object"!=typeof e&&(e={symbol:e}),"object"!=typeof t&&(t={symbol:t}),"function"==typeof e.equals?e.equals(t):(a.I_9(),i=e.symbol,r=t.symbol,i&&(i=i.toUpperCase()),r&&(r=r.toUpperCase()),i==r&&e.source==t.source))},t.addMemberToMasterdata=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T=a;function D(e,t){var i;if("obj","ect",!e||"object"!=typeof e)return e=t;for(var a in i={Close:e.Close,High:e.High,Low:e.Low,Open:e.Open,Volume:e.Volume},e=t,i)null===e.Close?void 0!==e[a]&&(e[a]=null):"number"!=typeof e[a]?e[a]=i[a]:"number"==typeof i[a]&&("V","olum","e","Lo","w","Open"==a?e.Open=i.Open:"Low"==a&&e.Low>i.Low?e.Low=i.Low:"High"==a&&e.High<i.High?e.High=i.High:"Volume"==a&&(e.Volume+=i.Volume));return e}function _(e,i){var a,n,h,c;if(s&&s.length)if("*"==s[0])t.extend(e,i);else for(var u=0;u<s.length;u++)e[s[u]]=i[s[u]];else if(o){if(void 0!==i.Value)return void(e[r]=i.Value);e[r]="aggregate"==o?D(e[r],i):i,"number"==typeof(a=e[r]).Close&&("number"!=typeof a.Open&&(a.Open=a.Close),n=Math.max(a.Open,a.Close),h=Math.min(a.Open,a.Close),("number"!=typeof a.High||a.High<n)&&(a.High=n),("number"!=typeof a.Low||a.Low>h)&&(a.Low=h)),a.Volume&&"number"!=typeof a.Volume&&(a.Volume=parseInt(a.Volume,10))}else if(l){-1966079959,-1539989998,c=2;for(var d=1;-1966079959!==T.j7j(d.toString(),d.toString().length,8285);d++)e[r]=i[l],c+=2;-1539989998!==T.j7j(c.toString(),c.toString().length,37158)&&(e[r]=i[l])}else v&&y&&void 0!==i[y]?e[r]=i[y]:g.adj&&void 0!==i.Adj_Close?e[r]=i.Adj_Close:void 0!==i.Close?e[r]=i.Close:void 0!==i.Value?e[r]=i.Value:e[r]=i[r]}function A(e){var t,i,a;t=u,T.o7G(92);var r=T.l__(0,7,19,11);if(i=p.length-r,p[i].DT<e)return T.o7G(23),void(u=T.l__(i,1));if(+p[i].DT!=+e){for(u++,a=0;++a<100;){switch(+p[u].DT==+e?(T.o7G(20),T.u$p("0",0)):p[u].DT<e?1:p[u-1].DT>e?-1:(+p[u-1].DT==+e&&u--,T.I_9(),0)){case 0:return;case 1:t=u;break;case-1:i=u}T.V6T(36),u=Math.round(T.u$p(i,t,2))}if(a>=100){"!!!Warning: addMemberToMasterdata() did ","not find insertion point.",console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),T.V6T(98);var n=T.u$p(0,15,3,17,3);u=p.length-n}}else u=i}if(e.constructor===t.ChartEngine&&(e={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),i=e.stx,r=e.label,n=e.data,s=e.fields,o=e.createObject,l=e.fieldForLabel,h=e.chart?e.chart:i.chart,e.noCleanupDates||i.doCleanupDates(n,i.layout.interval),T.F__(),c=[],i.getSeries&&(c=i.getSeries({symbol:r,chart:h})),n&&n.constructor==Object&&(n=[n]),n&&n.length){for(u=0,d=0,p=h.masterData,g=i.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=i.mainSeriesRenderer&&!i.mainSeriesRenderer.highLowBars,b=g.chartType,!v&&b&&(x=t.Renderer.produce(b,{}))&&(v=!x.highLowBars),S=t.yyyymmddhhmmssmmm;u<p.length&&d<n.length;){if(f=n[d],m=p[u],f.DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=t.strToDateTime(f.Date),0===d)for(var M=0;M<c.length;M++)(!c[M].endPoints.begin||c[M].endPoints.begin>f.DT)&&(c[M].endPoints.begin=f.DT);+f.DT!=+m.DT?f.DT<m.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):A(f.DT):(_(m,f),d++,u++)}if(u>=p.length)for(;d<n.length;)(f=n[d]).DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=t.strToDateTime(f.Date),_(m={DT:f.DT,Date:f.Date},f),p.push(m),d++;if(e.fillGaps&&p.length)if(C={noCleanupDates:!0,cleanupGaps:e.fillGaps},s)for(var F=0;F<s.length;F++)C.field=s[F],i.doCleanupGaps(p,h,C);else C.field=r,i.doCleanupGaps(p,h,C);for(var P=0;P<c.length;P++)(!(w=c[P].endPoints).end||!r||w.end<=m[r].DT)&&(w.end=r?m[r].DT:m.DT,k=r||c[P].parameters&&c[P].parameters.field||h.defaultPlotField,c[P].lastQuote=i.getFirstLastDataRecord(p,k,!0));i.setMasterData(p,h,{noCleanupDates:!0})}}},m=e=>{var t;(t=e.CIQ).xor=function(e,t){var i,r;return i=!e,r=!t,a.I_9(),a.V6T(78),a.l__(i,r)},t.round=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},t.countDecimals=function(e){var i;if("nu","mb","er","number"!=typeof e||isNaN(e))return 0;if(Math.floor(e)===Number(e))return 0;if((i=e.toString().split("e-")).length>1){a.V6T(71);var r=a.l__(10,303,17,19,11);return t.countDecimals(Number(i[0]))+Number(i[r])}return i[0].indexOf(".")>-1?i[0].split(".")[1].length:0},t.isValidNumber=function(e){return a.I_9(),isFinite(e)&&+e===e},t.log10=function(e){return Math.log(e)/Math.LN10},t.random=function(){return crypto?("random",a.I_9(),crypto?crypto.getRandomValues(new Uint8Array(1))[0]/255:Math.random()):console.warn("Browser does not support WebCrypto")},t.boxIntersects=function(e,t,i,r,n,s,o,l,h){var c,u,d,p,g,m,f,y;function v(e,t){return a.V6T(99),a.l__(n,o,e,s,n,t,l,s)}if(c="l",c+="i",c+="n",c+="e",void 0!==arguments[9]&&(u="CIQ.boxIntersects() no longer supports ",u+="isLog argument, please be sure arguments are passed in as pixels.",console.warn(u)),d=Math.min(e,i),p=Math.max(e,i),g=Math.min(t,r),m=Math.max(t,r),a.V6T(100),f=a.u$p("ray",h),isNaN(n)||isNaN(o)||isNaN(s)||isNaN(l))return!1;if(h!=c){if(n<d&&o<d&&(!f||n>o))return!1;if(n>p&&o>p&&(!f||n<o))return!1;if(s<g&&l<g&&(!f||s>l))return!1;if(s>m&&l>m&&(!f||s<l))return!1}return!((y={a:v(e,t),b:v(e,r),c:v(i,t),d:v(i,r)}).a>0&&y.b>0&&y.c>0&&y.d>0)&&!(y.a<0&&y.b<0&&y.c<0&&y.d<0)},t.linesIntersect=function(e,t,i,r,n,s,o,l,h){var c,u,d,p,g,m=a;if(m.o7G(99),c=m.l__(n,t,s,o,e,l,r,i),m.V6T(99),u=m.u$p(o,i,l,n,o,s,e,n),m.o7G(99),d=m.u$p(i,i,r,e,o,t,e,n),0===c)return 0===u&&0===d;if(m.V6T(32),p=m.u$p(u,c),m.o7G(32),g=m.l__(d,c),"segment"==h){if(p>=0&&p<=1&&g>=0&&g<=1)return!0}else if("line"==h||"horizontal"==h||"vertical"==h){if(p>=0&&p<=1)return!0}else if("ray"==h&&p>=0&&p<=1&&g>=0)return!0;return!1},t.yIntersection=function(e,t){var i,r,n,s,o,l,h,c,u,d,p=a;if(p.F__(),i=e.x0,r=e.x1,n=t,s=t,o=e.y0,l=e.y1,p.o7G(20),h=p.u$p("0",0),1e4,p.o7G(99),c=p.u$p(n,r,s,h,i,1e4,l,o),p.V6T(99),u=p.l__(h,o,1e4,n,h,s,i,n),p.o7G(32),d=p.l__(u,c),0===c){if(0!==u)return null;d=1}return p.V6T(101),p.l__(o,d,l,o)},t.xIntersection=function(e,t){var i,r,n,s,o,l,h,c,u,d=a;if(i=e.x0,r=e.x1,0,1e4,n=e.y0,s=e.y1,o=t,l=t,d.o7G(99),h=d.l__(0,r,1e4,o,i,l,s,n),d.o7G(99),c=d.u$p(o,n,l,0,o,1e4,i,0),d.o7G(32),u=d.l__(c,h),0===h){if(0!==c)return null;u=1}return d.V6T(101),d.l__(i,u,r,i)},t.intersectLineLineX=function(e,t,i,r,n,s,o,l){var h,c,u,d=a;return d.V6T(99),h=d.u$p(o,i,l,n,o,s,e,n),d.F__(),d.o7G(99),c=d.u$p(n,t,s,o,e,l,r,i),d.o7G(32),u=d.u$p(h,c),d.o7G(101),d.u$p(e,u,t,e)},t.intersectLineLineY=function(e,t,i,r,n,s,o,l){var h,c,u,d=a;return d.I_9(),d.V6T(99),h=d.u$p(o,i,l,n,o,s,e,n),d.o7G(99),c=d.u$p(n,t,s,o,e,l,r,i),d.o7G(32),u=d.u$p(h,c),d.V6T(101),d.u$p(i,u,r,i)}},f=e=>{var t;(t=e.CIQ).deleteRHS=function(e,t){var i;for(var r in a.I_9(),i=!1,e)e[r]==t&&(delete e[r],i=!0);return i},t.scrub=function(e,t){for(var i in a.I_9(),e)void 0===e[i]&&delete e[i],t&&null===e[i]&&delete e[i]},t.dataBindSafeAssignment=function(e,i){for(var a in t.extend(e,i),e)void 0===i[a]&&(e[a]=void 0)},t.clone=function(e,i){var a;if(null===e||"object"!=typeof e)return e;if((a=e.constructor)==Date||a==RegExp||a==String||a==Number||a==Boolean)return new a(e.valueOf());if(a==Function)return function(){return e.apply(this,arguments)};if(!i)try{i=new a}catch(t){i=Object.create(Object.getPrototypeOf(e))}for(var r in e)i[r]=i[r]!==e[r]?t.clone(e[r],null):i[r];return i},t.shallowClone=function(e){var t;if(!e)return e;if(e.constructor==Array){t=new Array(e.length);for(var i=0;i<e.length;i++)t[i]=e[i];return t}for(var r in t={},a.F__(),e)t[r]=e[r];return t},t.ensureDefaults=function(e,t){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return a.I_9(),e},t.transferObject=function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&delete e[i];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},t.equals=function(e,i,r){if(a.F__(),e===i)return!0;if(!e&&i)return!1;if(e&&!i)return!1;if(typeof e!=typeof i)return!1;for(var n of[...new Set(Object.keys(e).concat(Object.keys(i)))])if(!r||!r[n]){if("object"==typeof e[n]){if(t.equals(e[n],i[n]))continue;return!1}if(i[n]!=e[n])return!1}return!0},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.first=function(e){for(var t in e)return t;return null},t.last=function(e){var t;for(var i in t=null,e)t=i;return t},t.objLength=function(e){var t;if(!e)return a.V6T(27),a.l__(1,"0");for(var i in t=0,a.I_9(),e)t++;return t},t.deriveFromObjectChain=function(e,t){var i,a;if(-1==t.indexOf("."))return{obj:e,member:t};i=t.split(".");for(var r=0;r<i.length-1;r++)e[a=i[r]]||0===e[a]||(e[a]={}),e=e[a];return{obj:e,member:i[r]}},t.createObjectChainNames=function(e,t){var i;a.I_9(),i=[];for(var r=0;r<t.length;r++)i.push(e+"--\x3e"+t[r]);return i},t.getObjectChainRoot=function(e){return e?(a.F__(),e.split("--\x3e")[0]):null},t.existsInObjectChain=function(e,t){var i,a;if(-1==t.indexOf("--\x3e"))return(i=e[t])||0===i?{obj:e,member:t}:null;a=t.split("--\x3e");for(var r=0;r<a.length;r++){if(!(i=e[a[r]])&&0!==i)return null;if(!(r<a.length-1))return{obj:e,member:a[r]};e=i}},t.derivedFrom=function(e,t){return!!t.isPrototypeOf(e)||e instanceof t},t.replaceFields=function(e,i){var r,n,s,o,l;if(!e)return e;for(var h in r={},a.I_9(),e)if(n=e[h],(s=i[h])||(s=h),n&&"object"==typeof n)if(n.constructor==Array){o=r[s]=new Array(n.length);for(var c=0;c<o.length;c++)l=n[c],o[c]="object"==typeof l?t.replaceFields(l,i):l}else r[s]=t.replaceFields(n,i);else r[s]=n;return r},t.removeNullValues=function(e){var i;for(var a in i=t.clone(e))i[a]||delete i[a];return i},t.reverseObject=function(e){var t;for(var i in t={},e)t[e[i]]=i;return a.F__(),t},t.getFromNS=(e,t,i)=>{var r,n,s,o,l=a;if(l.F__(),e){-487434131,820053647,l.o7G(19),r=l.u$p(0,"2");for(var h=1;-487434131!==l.j7j(h.toString(),h.toString().length,14475);h++)n=e,s=t.split(""),r+=2;820053647!==l.p_V(r.toString(),r.toString().length,74133)&&(n=e,s=t.split("")),n=e,s=t.split(".");for(var c=0;c<s.length&&void 0!==n[o=s[c]];c++)n=n[o];if(c===s.length)return n}return i},t.getFnFromNS=(e,i,r)=>(a.F__(),t.getFromNS(e,i,(function(){return r}))),t.get=(e,i)=>(a.F__(),t.getFromNS(t,e,i)),t.getFn=(e,i)=>t.getFromNS(t,e,(function(){return a.I_9(),i}))},y=e=>{var t;(t=e.CIQ).Plotter=function(){var e,t,i=a;this.seriesArray=[],i.o7G(27),i.I_9(),e=-i.l__(1,"1918547550"),t=2;for(var r=1;i.p_V(r.toString(),r.toString().length,86285)!==e;r++)this.seriesMap={},t+=2;-1750286360!==i.j7j(t.toString(),t.toString().length,55797)&&(this.seriesMap={})},t.extend(t.Plotter.prototype,{Series:function(e,i,a,r,n,s){this.name=e,this.strokeOrFill=i,this.color=a,this.moves=[],this.text=[],(!r||r>1||r<0)&&(r=1),this.opacity=r,(!n||n>25||n<1)&&(n=1),this.width=n,this.pattern=t.borderPatternToArray(n,s)},newSeries:function(e,i,r,n,s){var o;o=r.constructor==String?new this.Series(e,i,r,n,s):new this.Series(e,i,r.color,r.opacity,s>=0?s:t.stripPX(r.width),r.borderTopStyle),a.I_9(),this.seriesArray.push(o),this.seriesMap[e]=o},reset:function(e){var t;for(var i in this.seriesMap)e&&e!=i||(t=this.seriesMap[i])&&(t.moves=[],t.text=[])},moveTo:function(e,t,i){this.seriesMap[e].moves.push({action:"moveTo",x:t,y:i})},lineTo:function(e,t,i){var r,n;a.I_9(),n=(r=this.seriesMap[e]).pattern,r.moves.push({action:"lineTo",x:t,y:i,pattern:n})},dashedLineTo:function(e,t,i,a){this.seriesMap[e].moves.push({action:"lineTo",x:t,y:i,pattern:a})},quadraticCurveTo:function(e,t,i,a,r){var n,s;s=(n=this.seriesMap[e]).pattern,n.moves.push({action:"quadraticCurveTo",x0:t,y0:i,x:a,y:r,pattern:s})},bezierCurveTo:function(e,t,i,a,r,n,s){var o,l;l=(o=this.seriesMap[e]).pattern,o.moves.push({action:"bezierCurveTo",x0:t,y0:i,x1:a,y1:r,x:n,y:s,pattern:l})},addText:function(e,t,i,a,r,n,s){this.seriesMap[e].text.push({text:t,x:i,y:a,bg:r})},drawText:function(e,t){for(var i,a,r,n,s=0;s<t.text.length;s++)(i=t.text[s]).bg&&(a=i.width?i.width:e.measureText(i.text).width,r=i.height?i.height:12,n=e.fillStyle,e.fillStyle=i.bg,"right"==e.textAlign?e.fillRect(i.x,i.y-r/2,-a,-r):e.fillRect(i.x,i.y-r/2,a,r),e.fillStyle=n),e.fillText(i.text,i.x,i.y)},draw:function(e,t){var i,a,r,n,s,o,l;i=e.lineWidth,a=e.fillStyle,r=e.strokeStyle,n=e.globalAlpha;for(var h=0;h<this.seriesArray.length;h++)if("st","rok","e",s=this.seriesArray[h],!t||s.name==t){e.beginPath(),e.lineWidth=s.width,e.globalAlpha=s.opacity,e.fillStyle=s.color,e.strokeStyle=s.color,e.save(),o=[0,0];for(var c=0;c<s.moves.length;c++)"bezierCur","veTo",(l=s.moves[c]).pattern||(l.pattern=[]),JSON.stringify(e.getLineDash())!==JSON.stringify(l.pattern)&&(e["fill"==s.strokeOrFill?"fill":"stroke"](),e.beginPath(),e.moveTo(o[0],o[1])),e.setLineDash(l.pattern),e.lineDashOffset=0,"quadraticCurveTo"==l.action?e[l.action](l.x0,l.y0,l.x,l.y):"bezierCurveTo"==l.action?e[l.action](l.x0,l.y0,l.x1,l.y1,l.x,l.y):e[l.action](l.x,l.y),o=[l.x,l.y];e["fill"==s.strokeOrFill?"fill":"stroke"](),e.closePath(),e.restore(),this.drawText(e,s),e.lineWidth=1}e.lineWidth=i,e.fillStyle=a,e.strokeStyle=r,e.globalAlpha=n}},!0)},v=e=>{var t;(t=e.CIQ).Renderer=function(){},t.Renderer.produce=function(e,i){var a,r;if(a=null,e)for(var n in t.Renderer)if((r=t.Renderer[n]).requestNew&&(a=r.requestNew(e.split("_"),i)),a)return a;return i.type="line",new t.Renderer.Lines({params:i})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(e,i){a.I_9(),t.Renderer.colorFunctions[e]=i},t.Renderer.unregisterColorFunction=function(e){delete t.Renderer.colorFunctions[e]},t.Renderer.prototype.init={},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(e,t){},t.Renderer.prototype.construct=function(e){var i;a.I_9(),e||(e={}),i=e.params?e.params:{},this.init&&t.ensureDefaults(i,this.init),i.name||(i.name=t.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new t.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=e.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f=a;if(!(r=this.stx))return this;if((n=r.chart.series[e])||(n={parameters:{}}),s=this.params,o=n.parameters,l={id:e,chartType:s.type,display:o.display,border_color_up:s.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:s.opacity,border_color_down:s.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:s.opacity,color:o.color,symbol:o.symbol,symbolObject:t.clone(o.symbolObject)},"string"==typeof i)l.color=l.fill_color_down=l.fill_color_up=i;else if("object"==typeof i){for(var y in i)l[y]=i[y];if(h=l.color,c=l.border_color,h){l.fill_color_up||(l.fill_color_up=h),-1388348786,f.o7G(6),u=f.u$p(0,"1747596713"),d=2;for(var v=1;-1388348786!==f.p_V(v.toString(),v.toString().length,73599);v++)-l.fill_color_down&&(l.fill_color_down=h),~l.fill_color_even&&(l.fill_color_even=h),d+=2;f.p_V(d.toString(),d.toString().length,48985)!==u&&(+l.fill_color_down&&(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)),l.fill_color_down||(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)}c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=t.uniqueID()),p=0;p<this.seriesParams.length;++p)if(this.seriesParams[p].id===l.id){this.removeSeries(l.id,!0);break}return this.seriesParams.splice(p,0,l),l.fill_color_up!=l.fill_color_down?(" ","dn",f.V6T(23),this.colors[f.l__(e," up")]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":e+" up"},f.o7G(23),this.colors[f.l__(e," dn")]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":e+" down"}):this.colors[e]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:e},g=s.panel,r.panels[g]?s.yAxis?(s.yAxis=r.addYAxis(r.panels[g],s.yAxis),s.yAxis.needsInitialPadding=!0,o.yAxis=s.yAxis,r.resizeChart()):l.yAxis&&(s.yAxis=l.yAxis):((m=s.yAxis)||((m=new t.ChartEngine.YAxis).needsInitialPadding=!0),m.name=g,r.createPanel(g,g,null,null,m)),this},t.Renderer.prototype.removeSeries=function(e,t){var i,r,n,s,o,l,h,c,u=a;for(var d in i=null,r=!1,(s=(n=this.stx).chart).seriesRenderers){o=s.seriesRenderers[d];for(var p=0;p<o.seriesParams.length;p++)(l=o.seriesParams[p]).id==e&&this===o?i=p:!l.isComparison||l.panel!=s.panel.name||l.yAxis&&l.yAxis!=s.yAxis||(r=!0)}if(null!==i&&(s.forcePercentComparison&&!r&&this.seriesParams[i].isComparison&&"linear"!=n.layout.chartScale&&n.setChartScale(),this.seriesParams.splice(i,1)),u.o7G(23),delete this.colors[u.u$p(e," up")],u.V6T(23),delete this.colors[u.l__(e," dn")],u.F__(),delete this.colors[e],!t){for(var g in s.seriesRenderers){c=s.seriesRenderers[g];for(var m=0;m<c.seriesParams.length;m++){if(c.seriesParams[m].id==e){h=!0;break}h=!1}if(h)break}!1!==h&&null===i||n.deleteSeries&&n.deleteSeries(e,s)}return n.deleteYAxisIfUnused(n.panels[this.params.panel],this.params.yAxis),n.resizeChart(),this},t.Renderer.prototype.modifyRenderer=function(e){var i;this.params,a.I_9();var{stx:r}=this;for(var n in e)switch("baseli","ne",i=e[n],n){case"baseline":i?("o","b","jec","t","object"==typeof i&&(this.params.baseline=t.ensureDefaults(i,t.ChartEngine.Chart.prototype.baseline)),r.registerBaselineToHelper(this)):r.removeBaselineFromHelper(this);break;case"type":this.params.type=i;break;case"style":this.params.style=i}},t.Renderer.prototype.getDependents=function(e){var t,i;for(var r in t=[],a.I_9(),e.chart.seriesRenderers)(i=e.chart.seriesRenderers[r]).params.dependentOf==this.params.name&&t.push(i);return t},t.Renderer.prototype.undraggable=function(e){return this==e.mainSeriesRenderer||this.params.dependentOf==e.mainSeriesRenderer.params.name},t.Renderer.prototype.removeAllSeries=function(e){var t;if(e||this===this.stx.mainSeriesRenderer){t=[];for(var i=0;i<this.seriesParams.length;i++)t.push(this.seriesParams[i].id);for(var a=0;a<t.length;a++)this.removeSeries(t[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},t.Renderer.prototype.getYAxis=function(e){var t,i;if(a.I_9(),this.params)if(this.params.yAxis)t=this.params.yAxis;else{if(!(i=e.panels[this.params.panel]))return!1;t=i.yAxis}else t=e.chart.panel.yAxis;return t},t.Renderer.prototype.ready=function(){return this.stx.createDataSet(),a.I_9(),this.stx.draw(),this},t.Renderer.Lines=function(e){this.construct(e);var{params:i}=this;if(i.type||(i.type="line"),!i.style)if("stx_","m","ountain_","chart","mountain"===i.type)i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";else i.style="stx_line_chart";a.F__(),this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var{baseline:r}=i;r&&"object"==typeof r&&t.ensureDefaults(i.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(e,i){var r,n,s,o,l,h;r=null,n=i.step,s=i.colored,o=i.baseline,l=i.vertex,a.F__();for(var c=0;c<e.length;c++)switch("d","e","l","ta","ver","t","e","x","s","t","e","p","c","h","a","nnel","wav","e","moun","ta","i","n",h=e[c]){case"line":case"mountain":case"wave":case"channel":r=h;break;case"baseline":o=!0;break;case"colored":s=!0;break;case"step":n=!0;break;case"vertex":l=!0;break;case"delta":break;default:return null}return null!==r||o||n?new t.Renderer.Lines({params:t.extend(i,{type:r,step:n,colored:s,baseline:o,vertex:l})}):null},t.Renderer.Lines.prototype.draw=function(){var e,i,r,n,s,o,l,h,c,u;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,r={},s=this.seriesParams,o=this.params.colorFunction,a.F__(),n=0;n<s.length;n++){if(l=s[n],this.params.colored){h=["_color_up","_color_down","_color"];for(var d=0;d<h.length;d++)(c=l["border"+h[d]])&&"auto"!=c&&(l["fill"+h[d]]=c);o||(o=p(l)),this.params.colorFunction=o}u={},i.series[l.id]&&(u=t.clone(i.series[l.id].parameters)),r[l.id]={parameters:t.extend(t.extend(u,this.params),l),yValueCache:this.caches[l.id]},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(r[l.id].parameters.colorFunction=i.customChart.colorFunction)}function p(t){var i,r,n;return a.I_9(),"stx_line_c","hart","s","tx_lin","e_down","stx","_l","i","ne_up",i=t.fill_color_up||e.getCanvasColor("stx_line_up"),r=t.fill_color_down||e.getCanvasColor("stx_line_down"),n=t.color||e.getCanvasColor("stx_line_chart"),function(e,t,s){return t.iqPrevClose||0===t.iqPrevClose?t.Close>t.iqPrevClose?i:t.Close<t.iqPrevClose?r:(a.F__(),n):n}}for(n in e.drawSeries(i,r,this.params.yAxis,this),r)this.caches[n]=r[n].yValueCache},t.Renderer.Lines.prototype.drawIndividualSeries=function(e,i){var r,n,s,o,l;if(!i.invalid&&(r=this.stx,n=e.context,s=null,o=i.colorFunction,l=r.panels[i.panel]||e.panel,"string"!=typeof o||(o=t.Renderer.colorFunctions[o])))return i.vertex&&(n.save(),n.lineJoin="bevel"),a.I_9(),"wave"==i.type?s=r.drawWaveChart(l,i):i.baseline?(s=r.drawBaselineChart(l,i),r.positionBaselineHandle(this)):"mountain"==i.type?(i.returnObject=!0,s=r.drawMountainChart(l,i,o)):"channel"==i.type?(i.returnObject=!0,s=r.drawChannelChart(l,o,i)):(i.returnObject=!0,s=r.drawLineChart(l,i.style,o,i)),i.vertex&&(r.scatter(l,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),n.restore()),s},t.Renderer.OHLC=function(e){var t;this.construct(e),(t=this.params).type||(t.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.histogram&&(t.type="candle",this.highLowBars=!1,t.volume=t.hollow=!1),"bar"==t.type&&(t.volume=t.hollow=t.histogram=!1),"candle"==t.type&&(t.hlc=t.colored=!1),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,!1),t.Renderer.OHLC.requestNew=function(e,i){var a,r,n;a=null,r=i.histogram;for(var s=0;s<e.length;s++)switch("h","istog","ram",n=e[s]){case"candle":a=n;break;case"histogram":r=!0,a="candle";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,histogram:r})})},t.Renderer.OHLC.getChartParts=function(e,t){var i;return"f","il","l_colo","r_down","bo","rder_color_up","fill_co","lor_up","c","andl","e","can","dl","e","stx_candle","_shadow","_down","s","hadow","c","and","l","e","stx","_candle_s","had","ow","bord","er_color","_even","st","x_histog","ram_","even","hist","o","gram","hist","og","r","am","hist",a.I_9(),"og","r","am",a.o7G(6),16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:i=a.u$p(0,"8"),fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:i,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:i,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},t.Renderer.OHLC.prototype.draw=function(){var e,i,r,n,s,o,l;for(a.F__(),e=this.stx,i=this.stx.panels[this.params.panel].chart,r={},s=this.seriesParams,n=0;n<s.length;n++)o=s[n],l={},i.series[o.id]&&(l=t.clone(i.series[o.id].parameters)),r[o.id]={parameters:t.extend(t.extend(l,this.params),o)},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(r[o.id].parameters.colorFunction=i.customChart.colorFunction);for(n in e.drawSeries(i,r,this.params.yAxis,this),r)r[n].yValueCache&&(this.caches[n]=r[n].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(e,i,a,r,n,s){var o,l,h,c,u;return o=s||a.color,l=this.params.yAxis||i.yAxis,r&&!(o=s||a.borderLeftColor||a["border-left-color"])?null:n?(h=e.pixelFromTransformedValue(l.highValue,i),isNaN(h)&&(h=0),c=a.backgroundColor,o&&!t.isTransparent(o)?((u=e.chart.context.createLinearGradient(0,h,0,2*l[l.flipped?"top":"bottom"]-h)).addColorStop(0,o),u.addColorStop(1,c),u):c):o},t.Renderer.OHLC.prototype.drawIndividualSeries=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M;if("o","p","e","n","stri","ng",!i.invalid&&(r=this.stx,n=e.context,s=i.colorFunction,o=r.panels[i.panel]||e.panel,"string"!=typeof s||(s=t.Renderer.colorFunctions[s]))){if(l=r.layout.candleWidth-e.tmpWidth<=2&&e.tmpWidth<=3,1,2,4,8,a.o7G(20),a.u$p("16",16),32,e.state.chartType||(e.state.chartType={}),h=e.state.chartType.pass={},c=r.colorByCandleDirection,i.colorBasis&&(c="open"==i.colorBasis),u=i.histogram,d=i.type,p=i.hollow,g=r.noWicksOnCandles[d],r.startClip(o.name),m=null,f={colors:[],cache:[]},y=[],s)"b","a","r",v={isHistogram:u,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},u||"bar"!=d?("candle"!=d||g||r.drawShadows(o,s,v),f=r.drawCandles(o,s,v),v.isOutline=!0,!p&&l||r.drawCandles(o,s,v)):(v.type=i.hlc?"hlc":"bar",f=r.drawBarChart(o,"stx_bar_chart",s,v));else{b=u&&!1!==i.gradient,x=t.Renderer.OHLC.getChartParts(i.style,c);for(var F=0;F<x.length;F++)if(!(S=x[F]).skipIfPass||h.even){if(u){if("histogram"!=S.type)continue}else if("bar"==d){if("bar"!=S.type)continue;if(i.colored&&!S.condition)continue;if(!i.colored&&S.condition)continue}else if(p){if("hollow"!=S.type)continue;if("shadow"==S.drawType&&g)continue}else{if("candle"!=d)continue;if("c","andle","candle"!=S.type)continue;if("shadow"==S.drawType){if("stx_candle_shadow_d","own","stx","_candl","e_shado","w_up",g)continue;if(C=i.border_color_up||r.getCanvasColor("stx_candle_shadow_up"),w=i.border_color_down||r.getCanvasColor("stx_candle_shadow_down"),k=i.border_color_even||r.getCanvasColor("stx_candle_shadow_even"),t.colorsEqual(C,w)&&t.colorsEqual(C,k)&&t.colorsEqual(C,r.defaultColor)){if(S.condition)continue}else if(!S.condition)continue}}T=r.canvasStyle(S.style),D=this.getColor(r,o,T,!1,!1,i[S.fill]),_=this.getColor(r,o,T,!1,b,i[S.fill]),A=this.getColor(r,o,T,S.useBorderStyleProp&&!l,b,i[S.border]),"candle"==S.drawType&&("hollow"==S.type?(!t.isTransparent(_)&&t.colorsEqual(A,_)&&(A=S.useColorInMap?"transparent":_),S.useColorInMap||(_=r.containerColor)):"candle"==S.type&&l&&(t.isTransparent(_)?_=A:A=_)),n.globalAlpha=i.opacity,y.push(r.drawBarTypeChartInner({fillColor:_,borderColor:A,condition:S.condition,style:S.style,type:"bar"==d&&i.hlc?"hlc":S.drawType,panel:o,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),m||(m={}),S.useColorInMap&&(m[D]=1)}}for(var P in r.endClip(),m)i.hollow&&t.equals(P,r.containerColor)||f.colors.push(P);for(P=0;P<y.length;P++)for(var L=0;L<y[P].cache.length;L++)((M=y[P].cache[L])||0===M)&&(f.cache[L]=M);return f}},t.Renderer.Candles=function(e){var t;this.construct(e),(t=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.colored=t.histogram=!1,t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(e){var t;this.construct(e),(t=this.params).type="candle",t.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,t.hlc=t.colored=t.hollow=t.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)},b=e=>{var t;(t=e.CIQ).capitalize=function(e){if(!e)return"";a.V6T(56);var t=a.u$p(154,19,9,16);return e.charAt(0).toUpperCase()+e.slice(t)},t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(e){return a.F__(),e.replace(t.camelCaseRegExp,(function(e){return a.F__(),e[1].toUpperCase()}))},t.uniqueID=function(e){var t,i,r,n,s;return e?crypto.randomUUID?crypto.randomUUID():(t=e=>e.toString(16).padStart(2,0),i=e=>(a.F__(),crypto.getRandomValues(new Uint8Array(e))),n=e=>(a.I_9(),`4${e.slice(1)}`),`${(r=e=>{var a;return a=i(e),[...a].map(t).join("")})(4)}-${r(2)}-${n(r(2))}-${r(2)}-${r(6)}`):(s=(new Date).getTime().toString(36),(s+=crypto.getRandomValues(new Uint8Array([1])).toString(36)).toUpperCase())}},x=e=>{a.I_9()},S=e=>{var t,i=a;i.F__(),(t=e.CIQ).getHostName=function(e){i.F__();try{return e.match(/:\/\/(.[^/]+)/)[1]}catch(e){return""}},t.qs=function(e){var t,a,r,n,s;t={},i.I_9(),a=2;for(var o=1;66154681!==i.p_V(o.toString(),o.toString().length,45341);o++)e||(e=window.location.search.substring(1)),r=e.split("&"),a+=2;-1276231799!==i.j7j(a.toString(),a.toString().length,26669)&&(+e&&(e=window.location.search.substring(3)),r=e.split("&"));for(var l=0;l<r.length;l++)(n=r[l].indexOf("="))>0?(s=r[l].substring(0,n),i.o7G(23),t[s]=r[l].substring(i.l__(n,1))):t[s=r[l]]=null;return t},t.postAjax=function(e,a,r,n,s){var o,l,h,c,u,d,p;if("string"==typeof e&&(e={url:e,payload:a,cb:r,contentType:n,noEpoch:s,method:null,responseHeaders:!1}),o=e.url,l=e.cb,h=e.payload,l||(l=function(){}),e.ungovernable||!t.Extras||!t.Extras.RequestLimiter||!t.Extras.RequestLimiter.hitRequestLimit(o)){if(!(c=new XMLHttpRequest))return!1;if(u=new Date,e.noEpoch||(-1==o.indexOf("?")?o+="?ciqrandom="+u.getTime():o+="&ciqrandom="+u.getTime()),d=e.method,p=e.headers,d||(d=h?"POST":"GET"),c.open(d,o,!0),e.contentType||(e.contentType="application/x-www-form-urlencoded"),h&&c.setRequestHeader("Content-Type",e.contentType),p)for(var g in p)c.setRequestHeader(g,p[g]);e.timeout&&(c.timeout=e.timeout),c.ontimeout=function(){i.I_9(),l(408,null,{})},c.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),l(this.status,this.responseText,function(t){var i,a,r;if(i={},e.responseHeaders){a=t.getAllResponseHeaders().split("\n");for(var n=0;n<a.length;n++){for(r=a[n].split(":");r[1]&&" "==r[1].charAt(0);)r[1]=r[1].substring(1);""!==r[0]&&(i[r.shift()]=r.join(":"))}return i}}(this))},c.onerror=function(){l("0",null,{})};try{c.send(h)}catch(e){l("0",e,{})}return!0}l(429,null,{})},t.loadUI=function(e,a,r){var n,s,o,l,h,c;if(a&&"function"!=typeof a||(r=a,a=document.body),n=a.ownerDocument,i.V6T(42),o=function(){var e,i,n,s;e=null;try{e=this.contentDocument}catch(e){return r(e)}if(e&&!e.title){"di","v",i=e.body.innerHTML,n=document.createElement("div"),t.innerHTML(n,i);for(var o=0;o<n.children.length;o++)s=n.children[o].cloneNode(!0),a.appendChild(s);r(null)}else"iFrame not fo","und or document has a title",r(new Error("iFrame not found or document has a title"))},s=n.querySelector(i.u$p('iframe[original-url="','"]',e))){l=null;try{l=s.contentDocument}catch(e){return r(e)}"complete"===l.readyState&&l.location&&"about:blank"!==l.location.href?o.call(s):s.addEventListener("load",o)}else{"original","-u","rl",(s=document.createElement("iframe")).setAttribute("original-url",e),i.V6T(46);var u=i.l__(6771,3387,1129);i.V6T(23);var d=i.u$p(164,18);i.o7G(18);var p=i.u$p(2384,11,11,126);i.o7G(17);i.l__(7,87927,96712);i.o7G(2);var g=i.u$p(3961,5,1992,2);i.V6T(102);var m=i.u$p(5941,11,112900,20,1);i.V6T(23);i.u$p(4579,7);s.src=e+(-1===e.indexOf(u!==d?418.67<p?"?":"R":g)?"?":m<887.74?5470:"&")+t.uniqueID(),i.V6T(27),h=i.u$p(1,"2008913943"),1773104144,c=2;for(var f=1;i.j7j(f.toString(),f.toString().length,46832)!==h;f++)"l","o","a","d",s.hidden=!0,s.addEventListener("load",o),c+=2;1773104144!==i.p_V(c.toString(),c.toString().length,54493)&&(s.hidden=!1,s.addEventListener("",o)),n.body.appendChild(s)}},t.loadScript=function(e,a,r,n){var s,o,l,h;if("SCRI","PT",t.loadedScripts||(t.loadedScripts={}),t.loadedScripts[e])a&&a();else{if(s=document.createElement("SCRIPT"),r){s.type="module",-1411905376,1347694121,o=2;for(var c=1;-1411905376!==i.j7j(c.toString(),c.toString().length,82471);c++)s.crossOrigin="",o+=2;1347694121!==i.p_V(o.toString(),o.toString().length,55360)&&(s.crossOrigin=""),s.crossOrigin="use-credentials"}else s.async=!0;if(s.onload=function(){t.loadedScripts[e]=!0,a&&a()},-1==(l=e).indexOf("?")){i.o7G(6);var u=i.u$p(100440,106020);i.V6T(17);i.u$p(12,29,8587);i.o7G(85);var d=i.u$p(17,15,17,2008,8702676);i.o7G(53);var p=i.l__(9,4,36,330);i.o7G(46);var g=i.u$p(195,200,20);i.o7G(23);i.l__(2200,14);i.o7G(17);var m=i.u$p(6,24,19);i.V6T(103);var f=i.u$p(15,9,4,12,0);l=l+(u<445.73?827.36:315==d?p:g!=="4340"*m?"?":"0x1bf5"*f)+Date.now()}else l=l+"&"+Date.now();s.src=l,(h=(n||document).getElementsByTagName("script")[0])?h.parentNode.insertBefore(s,h.nextSibling):(n||document).body.append(s)}},t.loadStylesheet=function(e,t,a){var r,n,s;(r=document.createElement("link")).rel="stylesheet",r.type="text/css",r.media="screen",i.V6T(50);var o=i.l__(1406,139,12);i.o7G(4);var l=i.l__(4,987,2964);i.V6T(66);i.u$p(5,14,7226,7,28897);i.V6T(46);var h=i.u$p(9737,609,203);i.V6T(4);var c=i.u$p(13,5,66);i.o7G(11);i.u$p(9,11,7068,16,1010711);i.o7G(104);i.u$p(9,1225045,6,136980,19);i.o7G(105);i.u$p(3,157,83,11);i.o7G(50);i.u$p(2,8889,9);i.V6T(4);i.l__(19,506,3032);i.V6T(106);var u=i.u$p(13,15,16,8980);i.F__(),i.o7G(17);var d=i.l__(17,30,2444);r.href=e+(e.indexOf(o>l?"?":h)===c?"?":373.62!=u?"&":d)+Date.now(),r.onload=function(){this.loaded||(i.I_9(),this.loaded=!0,t&&t())},(s=(n=(a||document).getElementsByTagName("link"))[n.length-1])?s.parentNode.insertBefore(r,s.nextSibling):(a||document).head.append(r)},t.loadWidget=function(e,a,r,n){var s;a&&"function"!=typeof a||(r=a,a=document.body),s=a.ownerDocument,i.o7G(23),t.loadStylesheet(i.l__(e,".css"),(function(){i.V6T(23),i.I_9(),t.loadUI(i.u$p(e,".html"),a,(function(a){a?r(a):(i.o7G(23),t.loadScript(i.u$p(e,".js"),r,n,s))}))}),s)},t.waitForPlugins=function(e,a,r){var n,s,o,l;if(n=0,s=e.length){for(var h=0;h<s;h++)o="cq-"+e[h],(l=(r||document).getElementsByTagName(o)[0])&&l.hasAttribute("loaded")&&n++;if(s!==n)return setTimeout((function(){i.F__(),t.waitForPlugins(e,a,r)}),0);a()}else a()},t.addInternalStylesheet=function(e,t,i){var a;e&&(e.default&&(e=e.default),"string"==typeof e&&(t&&(i||document).querySelector('style[path="'+t+'"]')||((a=document.createElement("style")).setAttribute("type","text/css"),a.setAttribute("path",t||""),a.innerText=e,(i||document).head.appendChild(a))))}},C=e=>{var t;(t=e.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var e,i,r,n,s,o,l=a;for(var h in e=this.chart.container,t.ChartEngine.htmlControls)if("un","def","i","ned",void 0===this.chart[h]&&void 0===this.controls[h]){if(!this.allowZoom&&"chartControls"==h)continue;if(l.o7G(23),i=e.querySelector(l.l__(".",h)))this.chart[h]=i,this.controls[h]=i;else{if(!(r=t.ChartEngine.htmlControls[h]))continue;(n=document.createElement("DIV")).innerHTML=r.replace(/[\t\n\r]/gm,""),i=n.firstChild,e.appendChild(i),this.chart[h]=i,this.controls[h]=i,i.classList.add(h)}}var c,u,d,{chartControls:p,home:g}=this.controls;p&&(".s","tx-z","oom-in",s=p.querySelector(".stx-zoom-in"),o=p.querySelector(".stx-zoom-out"),t.safeClickTouch(s,(u=this,function(e){!u.allowZoom||u.activeDrawing&&!u.allowDrawingZoom||(l.F__(),u.zoomIn(e)),e.stopPropagation()})),t.safeClickTouch(o,(c=this,l.I_9(),function(e){!c.allowZoom||c.activeDrawing&&!c.allowDrawingZoom||c.zoomOut(e),e.stopPropagation()})),t.touchDevice||(this.makeModal(s),this.makeModal(o))),g&&(t.safeClickTouch(g,(d=this,function(e){e.stopPropagation(),d.isHistoricalMode()?(delete d.layout.range,d.loadChart(d.chart.symbol,(function(){l.F__(),d.home({animate:!1})}))):d.home({animate:!0})})),t.touchDevice||this.makeModal(g)),this.allowDragControls&&this.allowDragControls()},t.ChartEngine.prototype.home=function(e){var t,i,r,n,s,o,l=a;function h(e){var t;for(var i in e.panels){t=e.panels[i].yaxisLHS.concat(e.panels[i].yaxisRHS);for(var a=0;a<t.length;a++)t[a].lockScale||e.calculateYAxisMargins(t[a])}}if(l.F__(),this.swipe.amplitude=0,t=this.layout,"object"!=typeof e&&(e={maintainWhitespace:e}),void 0===e.maintainWhitespace&&(e.maintainWhitespace=!0),this.chart.draggingControls=null,this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var c in this.micropixels=0,i=Math.floor(this.chart.width/t.candleWidth),this.charts)if(r=this.charts[c],!e.chart||e.chart==r){for(n=0,e.maintainWhitespace&&this.preferences.whitespace>=0&&(n=this.preferences.whitespace),(e.whitespace||0===e.whitespace)&&(n=e.whitespace),(s=this.getLabelOffsetInPixels(r,t.chartType))>n&&(n=s),o=Math.min(i,r.dataSet.length),this.chart.allowScrollPast&&(o=i),this.micropixels=this.chart.width-o*t.candleWidth-n,this.preferences.whitespace=n;this.micropixels>t.candleWidth;)o++,this.micropixels-=t.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=t.candleWidth;if(this.micropixels-=t.candleWidth,o++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){l.V6T(18);var u=l.u$p(1,19,4,16);this.micropixels+=t.candleWidth/u}e.animate?(this,this.scrollTo(r,o,d(this,r,o))):(r.scroll=o,h(this))}this.draw()}else this.draw();function d(e,t,i){return l.F__(),function(){h(e),t.scroll=i,l.F__(),e.draw()}}},t.ChartEngine.prototype.headsUpHR=function(){var e,i,r,n,s;function o(e){a.F__(),t.efficientDOMUpdate(r,"innerHTML",e)}this.runPrepend("headsUpHR",arguments)||(e=this.currentPanel)&&(i=e.chart,this.updateFloatHRLabel(e),r=this.controls.floatDate,a.F__(),r&&!i.xAxis.noDraw&&(n=this.barFromPixel(this.cx),(s=i.xaxis[n])&&s.DT?o(t.displayableDate(this,i,s.DT)):s&&s.index?o(s.index):o("")),this.runAppend("headsUpHR",arguments))},t.ChartEngine.prototype.modalBegin=function(){a.F__(),this.openDialog="modal",this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(e){var t;t=this,e.onmouseover=function(e){t.modalBegin()},e.onmouseout=function(e){a.F__(),t.modalEnd()}},t.ChartEngine.prototype.updateChartAccessories=function(){var e,i,r,n,s,o,l,h,c,u,d,p=a;if(e="updateChartA",e+="ccessories",null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)this.accessoryTimer=setTimeout((d=this,p.I_9(),function(){d.updateChartAccessories()}),10);else if(this.chart.dataSet&&!this.runPrepend(e,arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(i=this.controls.floatDate)&&((r=this.currentPanel)||(r=this.chart.panel),r)){n="p",n+="x",s="bo",s+="tt",s+="om",o="l",o+="eft",l=r.chart,h=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-r.chart.bottom,p.V6T(48);var g=p.l__(11,9,11,7);if(c=i.offsetWidth/g-.5,(u=this.pixelFromTick(this.crosshairTick,l)-c)<0)u=0;else if(u>this.width-2*c-1){p.o7G(106);var m=p.u$p(18,4,12,0);p.o7G(107);var f=p.u$p(0,13,241,12,7);u=this.width-m*c-f}t.efficientDOMUpdate(i.style,o,u+"px"),t.efficientDOMUpdate(i.style,s,h+n)}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},t.ChartEngine.prototype.positionSticky=function(e){var i,r,n,s=a;i=Math.max(this.cy-e.offsetHeight-60,0),r=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-e.offsetWidth),n=e.style,s.V6T(23),t.efficientDOMUpdate(n,"top",s.u$p(i,"px")),t.efficientDOMUpdate(n,"left","auto"),s.o7G(23),t.efficientDOMUpdate(n,"right",s.u$p(r,"px"))},t.ChartEngine.prototype.displaySticky=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A=a;if(i="n",i+="o_ed",i+="it",(r=this.controls.mSticky)&&(A.F__(),n=r.querySelector(".mStickyInterior"))){s=r.querySelector(".overlayTrashCan"),o=r.querySelector(".overlayEdit"),l=r.querySelector(".overlayText"),h=r.querySelector(".mouseDeleteInstructions"),c=r.querySelector(".stickyLongPressText"),u=r.querySelector(".customInstructions"),h.classList.remove(i),e&&"object"==typeof e||(e={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]});var{forceShow:M,noDelete:F,noEdit:P,type:L,noText:O}=e,{message:E,backgroundColor:I}=e;if(M||E){g="inline",g+="-block",E||(E="");var{defaultColor:N,highlightedDraggable:H}=this;"auto"==I&&(I=N),M&&!E?(n.style.backgroundColor="",n.style.color="",n.style.display="none"):I?(m="inl",m+="ine-b",m+="lock",n.style.backgroundColor=I,n.style.color=t.isTransparent(I)?N:t.chooseForegroundColor(I),n.style.display=m):(n.style.backgroundColor="",n.style.color="",n.style.display="inline-block"),n.innerHTML=E,(f=r.querySelector(".mStickyRightClick")).className="mStickyRightClick",L&&(A.o7G(23),f.classList.add(A.u$p("rightclick_",L))),f.style.display="",r.style.display=g,(!H||H&&H.undraggable&&H.undraggable(this))&&(c.style.display="none"),F||!0===this.bypassRightClick||this.bypassRightClick[L]?f.style.display="none":this.highlightViaTap||this.touches.length?(y="h",y+="id",y+="e",v="a",v+="dd",b="n",b+="on",b+="e",x="inline-bloc",x+="k",S="i",S+="nl",S+="i",S+="ne-block",C="inl",C+="ine-",C+="block",s&&(s.style.display=C),o&&!P&&(o.style.display=S),l&&!O&&(l.style.display=x),h&&(h.style.display=b),c&&(c.style.display="none"),r.classList[""===E?v:"remove"](y)):(P&&h.classList.add("no_edit"),h&&(h.style.display="block"),c&&(c.style.display="none",(w=this.preferences.dragging)&&e.panel&&!e.panel.noDrag&&(k="ser",k+="ies",(!0!==w&&!w.study||"study"!=L)&&(!0!==w&&!w.series||L!=k)||(c.style.display="block")))),u&&L&&(T="no",T+="ne",A.o7G(42),D=u.querySelector(`${A.l__("[t","e=","yp")}${L}]`),u.style.display=D?"block":T),_=L||"default",r.setAttribute("cq-sticky-type",_),(e.positioner||this.positionSticky).call(this,r)}else d="n",d+="o",d+="ne",p="no",p+="n",p+="e",n.innerHTML="",r.style.display="none",s&&(s.style.display="none"),o&&(o.style.display="none"),l&&(l.style.display=p),h&&(h.style.display=d),c&&(c.style.display="none")}},t.ChartEngine.prototype.displayNotification=function(e,t,i={}){var r,n,s,o,l=a;if(this.controls.notificationTray){var{callback:h,dismissalListeners:c}=i;n=(r=this.controls.notificationTray).querySelector("template").content.cloneNode(!0),(s=n.firstElementChild).className=e,s.querySelector(".message").textContent=t,l.I_9(),h&&(o=window.PointerEvent?"pointerup":"touchend",s.handler=s.addEventListener(o,h)),c&&(s.listeners={},c.forEach((t=>{var i,a;l.o7G(27),i=-l.u$p(1,"436250469"),a=2;for(var r=1;l.p_V(r.toString(),r.toString().length,16095)!==i;r++)s.listeners[e]=this.addEventListener(t.type,t.callback),a+=2;883220995!==l.j7j(a.toString(),a.toString().length,73004)&&(s.listeners[e]=this.addEventListener(t.type,t.callback))}))),this.makeModal(s),r.appendChild(s)}},t.ChartEngine.prototype.removeNotification=function(e){var t,i;if(this.controls.notificationTray&&(i=(t=this.controls.notificationTray).querySelector(`.${e}`))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),t.removeChild(i)}},t.ChartEngine.prototype.setMeasure=function(e,t,i,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w=a;if(!this.runPrepend("setMeasure",arguments)){if(o=(this.drawingContainer||document).querySelector(".mMeasure"),l="",e||0===e){if(!1!==t&&(h=(h=Math.round(Math.abs(e-t)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?l+=this.internationalizer.numbers.format(h):l+=h,e>0&&t>0)){if(u=" ",u+="(",w.V6T(35),c=w.u$p(t,e,e),Math.abs(c)>.1){d=744938570,p=-489128448,g=2;for(var k=1;w.p_V(k.toString(),k.toString().length,3214)!==d;k++)w.o7G(23),c=Math.round(w.u$p(c,720)),g+=2;w.j7j(g.toString(),g.toString().length,11644)!==p&&(w.V6T(27),c=Math.round(w.l__(100,c)))}else if(Math.abs(c)>.01){w.o7G(17);var T=w.l__(17,0,983);w.V6T(13);var D=w.u$p(160,8,5,4);c=Math.round(c*T)/D}else{w.o7G(23);var _=w.u$p(9998,2);w.V6T(48);var A=w.l__(16,9,113,6);c=Math.round(c*_)/A}this.internationalizer?(w.o7G(32),c=this.internationalizer.percent.format(w.u$p(c,100))):(w.V6T(23),c=w.u$p(c,"%")),w.V6T(42),l+=w.l__(u,")",c)}if(!1!==r){m="B",m+="a",m+="rs",w.o7G(6),f=Math.abs(w.u$p(i,r)),w.o7G(108);var M=w.l__(19,5,253,13);f=Math.round(f)+M,y=this.translateIf(m),w.o7G(75),l+=w.u$p(y,f," "," ")}o&&(o.innerHTML=l)}else this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure();w.F__(),this.activeDrawing||((o=this.controls.mSticky)&&(v=o.querySelector(".mStickyInterior"),n?(b="hid",b+="e",x="r",x+="e",x+="mov",x+="e",o.style.display="inline-block",v&&(S="in",S+="lin",S+="e-b",S+="lock",v.style.display=S,(e||0===e)&&(v.innerHTML=l)),o.classList[""===l?"add":x](b),this.positionSticky(o)):(C="no",C+="n",C+="e",o.style.display=C,v&&(v.innerHTML=""))),this.runAppend("setMeasure",arguments))}},t.ChartEngine.prototype.clearMeasure=function(){var e;(e=(this.drawingContainer||document).querySelector(".mMeasure"))&&(e.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(e,i){var r,n,s,o,l,h,c=a;if(i||(i=this.chart),i.dataSet){if(e=this.constrainCandleWidth(e),"none"!=i.tempCanvas.style.display&&t.clearCanvas(i.tempCanvas,this),!(r=this.mainSeriesRenderer||{}).params||!r.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<i.dataSet.length)n=this.crosshairTick||this.tickFromPixel(this.cx,i);else if(this.isHome()){c.o7G(6);var u=c.u$p(10,11);n=i.dataSet.length-u}else n=i.scroll>i.dataSet.length?0:"zoom-x"==this.grabMode?this.tickFromPixel(this.chart.width,i):this.tickFromPixel(this.chart.width/2,i);this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),c.V6T(2);var d=c.l__(0,20,3,10);s=i.dataSet.length-d-n,o=i.scroll,c.V6T(8);var p=c.u$p(2,1);i.scroll=Math.round((this.pixelFromTick(n,i)-i.left)/e)+("1"|p)+s,this.micropixels+=(o-s)*this.layout.candleWidth-(i.scroll-s)*e}this.setCandleWidth(e),i.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),c.o7G(6),l=c.l__(0,"30268365"),-771310216,h=2;for(var g=1;c.j7j(g.toString(),g.toString().length,60268)!==l;g++)this.updateChartAccessories(),h+=2;-771310216!==c.p_V(h.toString(),h.toString().length,73097)&&this.updateChartAccessories()}}},w=e=>{var t,i=a;(t=e.CIQ).ChartEngine.prototype.currentBaseline=null,i.F__(),t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push((function(e){i.I_9(),e.baselineHelper=new Map})),t.ChartEngine.prototype.registerBaselineToHelper=function(e){var t,a;if(e.params.baseline){var r,n,{baselineHelper:s}=this;if(t=this,!s.has(e)){var{name:o}=e.params;a=this.controls.baselineHandle,s.set(e,{styleCache:null,display:!1,handle:"_main_series"===o&&a?a:(r=o,r=r.replace(" ","_"),(n=document.createElement("cq-baseline-handle")).classList.add("stx-baseline-handle",r),t.container.append(n),i.V6T(23),t.controls[`${r}${i.l__(" cq-baselin","e-handle")}`]=n,n)})}}},t.ChartEngine.prototype.removeBaselineFromHelper=function(e){var t,a,{baselineHelper:r}=this;i.F__(),r.has(e)&&("_main_series"!==(t=e.params.name.replace(" ","_"))&&(a=r.get(e).handle,delete this.controls[`${t} cq-baseline-handle`],this.container.removeChild(a)),r.delete(e))},t.ChartEngine.prototype.findBaselineHandle=function(e,t){for(var i of this.baselineHelper){var[a,r]=i,{handle:n}=r;if(e.target===n||e.composedPath&&e.composedPath().includes(n))return t&&(this.repositioningBaseline={lastDraw:Date.now(),handle:n,renderer:a},n.classList.add("stx-grab")),this.currentBaseline=a,!0}return!1},t.ChartEngine.prototype.setBaselines=function(e){var t;e||(e=this.chart),t=this;var{baselineHelper:a}=this;a.forEach((function(r,n){var s,o,l,h,c,{baseline:u}=n.params;i.V6T(77),(s=i.u$p(u,!0))&&(u=e.baseline);var{defaultLevel:d,userLevel:p}=u;(o=n.getYAxis(t))&&(h=(l=t.getYAxisBaselineRenderer(o))&&l!=t.mainSeriesRenderer&&l.seriesParams.length&&l.seriesParams[0].id,u.actualLevel=p||0===p?p:d,u.actualLevel||0===u.actualLevel||null!==(c=function(a,r){var n,s,o,l,h,c,u,{dataSegment:d,dataSet:p,defaultPlotField:g}=e;n=g,r||(n=a);if(!(s=t.getFirstLastDataRecord(d,"tick")))return null;o=s.tick;for(;;){if(l=p[o])if(h="C",h+="lo",h+="s",h+="e",r&&n==h){if(l.iqPrevClose||0===l.iqPrevClose)return l.iqPrevClose}else if(i.o7G(6),(c=p[i.l__(1,o)])&&(c[n]||0===c[n]))return"object"==typeof(u=c[n])?u[g]:u;if(--o<0)break}}(h,s))&&(u.actualLevel=c),r.display=l===n,a.set(n,r))}))},t.ChartEngine.prototype.setBaselineUserLevel=function(){var e,i,a,{chart:r,currentPanel:n}=this,{lastDraw:s,renderer:o}=this.repositioningBaseline;if(o.params.panel==n.name){var{baseline:l}=r;e="object"==typeof o.params.baseline?o.params.baseline:l,i=o.getYAxis(this),a=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),n,i),e.userLevel=this.adjustIfNecessary(n,this.crosshairTick,a),Date.now()-s>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},t.ChartEngine.prototype.setBaselineMinMax=function(e,t){var a,r,n;i.I_9();var{baselineHelper:s,chart:o,repositioningBaseline:l}=this,{baseline:h,seriesRenderers:c}=o;if(a=o.transformFunc&&t===o.panel.yAxis,!(r=t.renderers.find((e=>(i.I_9(),s.get(c[e]))))))return e;var{baseline:u,type:d}=c[r].params;if("mountain"===d)return e;u="object"==typeof u?u:h;var{actualLevel:p}=u;return(p||0===p)&&(a&&(p=o.transformFunc(this,o,p)),n=Math.max(p-e[0],e[1]-p),e[0]=l?t.lowValue:p-n,i.V6T(6),e[i.l__(0,"1")]=l?t.highValue:p+n),e},t.ChartEngine.prototype.positionBaselineHandle=function(e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f;if("stx-g","r","a","b",this.manageTouchAndMouse){var{baselineHelper:y,chart:v,panels:b}=this,{baseline:x,panel:S}=e.params;a=e.params.yAxis||e.getYAxis(this);var{display:C,handle:w,styleCache:k}=y.get(e);if(!0===x&&(x=v.baseline),!1!==x.userLevel&&C){r=b[S],n=w.classList.contains("stx-grab"),s="block",o=x.actualLevel,a===v.yAxis&&v.transformFunc&&(o=v.transformFunc(this,v,o)),o>a.high?(o=a.high,n||(s="none")):o<a.low&&("n","o","ne",o=a.low,n||(s="none")),a===v.yAxis&&v.untransformFunc&&(o=v.untransformFunc(this,v,o)),l=this.pixelFromPrice(o,r,a),k||(k=getComputedStyle(w)),h=t.stripPX(k.width),i.V6T(109);var T=i.l__(266,20,4,0,13);if(c=l-t.stripPX(k.height)/T+"px",d=this.baselineHandleBuffer||2,p=r.yaxisRHS.indexOf(a)+1)g=1===p?d:d*p,u=v.right-h*p-g+"px";else{i.o7G(110);var D=i.u$p(10,10,0,20,19);f=1===(m=r.yaxisLHS.slice(0).reverse().indexOf(a)+D)?d:d*m,u=v.left+h*m+f-h+"px"}Object.assign(w.style,{display:s,top:c,left:u})}else w.style.display="none"}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(e){var t,a,r;if(!e.renderers.length)return null;var{baselineHelper:n,chart:s}=this;t=e.renderers.find((e=>(i.F__(),n.get(s.seriesRenderers[e])))),i.o7G(79),a=i.u$p(32,"2134827836"),i.I_9(),r=2;for(var o=1;i.j7j(o.toString(),o.toString().length,85891)!==a;o++){if(-t)return 1;r+=2}return-1690660506===i.p_V(r.toString(),r.toString().length,96405)||t?s.seriesRenderers[t]:null},t.ChartEngine.prototype.getYAxisBaseline=function(e){var t;i.F__();var{baseline:a}=this.chart;if(!(t=this.getYAxisBaselineRenderer(e)))return a;var{baseline:r}=t.params;return"object"==typeof r?r:a}},a.F__(),k=e=>{var t;(t=e.CIQ).ChartEngine.Chart=function(){var e;this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},e=2;for(var i=1;-1537631426!==a.j7j(i.toString(),i.toString().length,62171);i++)this.xaxis=[],this.state={},this.endPoints={},e+=2;648952768!==a.p_V(e.toString(),e.toString().length,14638)&&(this.xaxis=[],this.state={},this.endPoints={}),this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=t.clone(this.baseline),this.panel=void 0},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},yaxisMarginMultiplier:2.5,allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces,width:null,height:null,top:null,bottom:null,left:null,right:null,context:null,endPoints:null},!0)},T=e=>{var t,i,r=a;t=2;for(var n=1;1794373298!==r.j7j(n.toString(),n.toString().length,59555);n++)i=e.CIQ,t+=2;351124312!==r.p_V(t.toString(),t.toString().length,12466)&&(i=e.CIQ),(i=e.CIQ).ChartEngine.prototype.resolveY=function(e){return this.top+e},i.ChartEngine.prototype.resolveX=function(e){return r.I_9(),this.left+e},i.ChartEngine.prototype.backOutY=function(e){return r.I_9(),Math.max(0,Math.min(this.height,e-this.top))},i.ChartEngine.prototype.backOutX=function(e){return r.F__(),Math.max(0,Math.min(this.width,e-this.left))},i.ChartEngine.prototype.dateFromTick=function(e,t,a,n="dataSet"){var s,o,l,h,c,u;return t||(t=this.chart),u=!1,0===(o=(s=t[n]).length)&&(s[0]={},s[0].DT=new Date,o=s.length,u=!0),e<0?l=(h=this.standardMarketIterator(s[0].DT))?h.previous(Math.abs(e)):s[0].DT:e>=o?(h=this.standardMarketIterator(s[o-1].DT))?(r.o7G(111),l=h.next(r.l__(1,e,o))):l=s[o-1].DT:l=s[e].DT,a?c=new Date(l.getTime()):(r.V6T(19),c=i.yyyymmddhhmmssmmm(l).substr(r.u$p(0,"0"),12)),r.I_9(),u&&delete s[0].DT,c},i.ChartEngine.prototype.tickFromDate=function(e,t,a,n,s="dataSet"){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(t||(t=this.chart),!(o=t[s])||!o.length)return 0;if(a||(a=0),l=e.constructor==Date?e:i.strToDateTime(e),i.ChartEngine.isDailyInterval(this.layout.interval)||l.setMinutes(l.getMinutes()+a),h=l.getTime(),t.tickCache[s]||(t.tickCache[s]={}),(c=t.tickCache[s][h])||0===c)return n?Math.ceil(c):Math.floor(c);if(u=o[0].DT,r.I_9(),d=o[o.length-1].DT,l>=u&&l<=d){for(p=0,g=o.length,r.o7G(19),m=r.u$p(64,"0");++m<100;){if(r.V6T(36),+(y=o[f=Math.floor(r.u$p(g,p,2))].DT)==+l)return t.tickCache[s][h]=f,f;if(y<l&&(p=f),y>l){if(o[f-1].DT<l)return r.V6T(6),t.tickCache[s][h]=r.u$p(.5,f),n?f:f-1;if(+o[f-1].DT==+l)return r.o7G(112),t.tickCache[s][h]=r.u$p(1,"1",f),r.o7G(6),r.u$p(1,f);g=f}}if(m>=100)return"!!!Warning: tickFromDate(",") did not find"," match.",console.log("!!!Warning: tickFromDate() did not find match."),o.length}return r.o7G(82),b=(v=r.u$p(u,l))?u:d,S=(x=this.standardMarketIterator(b))?x.futureTick({end:l}):0,c=v?-1*S:o.length-1+S,t.tickCache[s][h]=c,c},i.ChartEngine.prototype.pixelFromBar=function(e,t){var i,a;return t||(t=this.chart),i=0,i=(a=this.chart.segmentImage)&&a[e]&&"number"==typeof a[e].leftOffset?a[e].leftOffset:(e+.5)*this.layout.candleWidth,i=t.panel.left+Math.floor(i+this.micropixels)-1},i.ChartEngine.prototype.barFromPixel=function(e,t){var i,a,n,s,o,l,h,c,u,d,p,g,m;if(r.F__(),t||(t=this.chart),i=this.chart.segmentImage,a=this.micropixels,n=this.layout.candleWidth,i){s=e-t.panel.left-a,o=2,h=i.length,r.o7G(32),c=Math.round(r.u$p(h,o)),r.o7G(17);var f=r.u$p(15,26,12);r.V6T(23);var y=r.l__(1,1);if(s>(p=i[h-1].leftOffset+i[h-f].candleWidth/y))return h+Math.floor((e-p-t.panel.left-a)/n);for(var v=1;v<h&&(o*=2,l=i[c]);v++){u=l.leftOffset,r.V6T(107);var b=r.u$p(0,6,232,10,17);if(d=l.candleWidth/b,r.o7G(6),g=r.u$p(d,u),r.o7G(23),m=r.l__(u,d),0===c||s>=g&&s<m)break;s<g?c-=Math.max(1,Math.round(h/o)):c+=Math.max(1,Math.round(h/o)),c=Math.max(0,Math.min(h-1,c))}if(!i[c])for(v=0;v<h;v++)if(l=i[v]){if(s<(u=l.leftOffset)-(d=l.candleWidth/2))return r.V6T(6),Math.max(0,r.l__(1,v));if(s<u+d)return v;if(s>=u+d)return r.o7G(23),r.u$p(v,1)}return c}return Math.floor((e-t.panel.left-a)/n)},i.ChartEngine.prototype.tickFromPixel=function(e,t){var i;return t||(t=this.chart),i=t.dataSet.length-t.scroll,t.segmentImage?i+=this.barFromPixel(e,t):i+=Math.floor((e-t.panel.left-this.micropixels)/this.layout.candleWidth),i},i.ChartEngine.prototype.pixelFromTick=function(e,t){var i,a,n,s,o,l,h,c,u,d,p;if(t||(t=this.chart),i=t.dataSegment,a=t.dataSet,n=t.segmentImage,s=this.micropixels,o=i?i.length:0,l=t.panel,h=t.scroll,c=e-a.length+h,u=o?i[c]:null,n&&(u=n[c]),u&&"number"==typeof u.leftOffset)return l.left+Math.floor(u.leftOffset+s);if(r.V6T(21),d=r.u$p(0,"0"),p=0,u=o?i[o-1]:null,n&&(r.V6T(113),u=n[r.u$p(o,"1")]),u&&"number"==typeof u.leftOffset&&o<=e-a.length+h){r.V6T(114);var g=r.l__(16,1,1,1,16);d=u.leftOffset+u.candleWidth/g,p=o}return d+l.left+Math.floor((e-p-a.length+h+.5)*this.layout.candleWidth+s)},i.ChartEngine.prototype.pixelFromDate=function(e,t,i,a){return this.pixelFromTick(this.tickFromDate(e,t,i,a),t)},i.ChartEngine.prototype.transformedPriceFromPixel=function(e,t,i){var a,r,n;if(t||(t=this.chart.panel),e=(a=i||t.yAxis).bottom-e,a.semiLog)n=e*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,r=Math.pow(10,n);else{if(!a.multiplier)return null;r=e/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},i.ChartEngine.prototype.priceFromPixel=function(e,t,i){var a;return t||(t=this.chart.panel),a=this.transformedPriceFromPixel(e,t,i),this.charts[t.name]&&t.chart.untransformFunc&&(i&&i!=t.yAxis||(a=t.chart.untransformFunc(this,t.chart,a,i))),a},i.ChartEngine.prototype.valueFromPixel=function(e,t,i){var a;return t||(t=this.whichPanel(e)),t||(a=Object.values(this.panels))&&a.length&&(t=e<=0?a.shift():a.pop()),this.priceFromPixel(e,t,i)},i.ChartEngine.prototype.valueFromInterpolation=function(e,t,a,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b;return"un","de","f","ined","o","bje","c","t","o","bject",null===e||e<0||!t?null:(n||(n=this.chart.panel),s||(s=n.yAxis),a||(a=this.chart.defaultPlotField),(o=this.getPreviousBar(this.chart,t,e))?((h=i.existsInObjectChain(o,t))&&(l=h.obj[h.member]),"object"==typeof l&&(l=l[a]),(c=this.getRendererFromSeries(t))&&c.params.step||"step"===this.layout.chartType?l:(u=this.getNextBar(this.chart,t,e),(h=i.existsInObjectChain(u,t))&&(d=h.obj[h.member]),"object"==typeof d&&(d=d[a]),u?null==l||null==d?null:(p=this.pixelFromPrice(l,n,s),g=this.pixelFromPrice(d,n,s),m=o.tick,f=u.tick,r.V6T(115),y=r.l__(g,m,p,f),v=this.chart.dataSegment[e].tick,r.V6T(116),b=r.u$p(p,m,y,v),this.priceFromPixel(b,n,s)):null)):null)},i.ChartEngine.prototype.pixelFromTransformedValue=function(e,t,i){var a,r,n,s,o;return t||(t=this.chart.panel),r=((a=i||t.yAxis).high-e)*a.multiplier,a.semiLog&&(n=Math.max(e,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},i.ChartEngine.prototype.pixelFromPrice=function(e,t,i){return t||(t=this.chart.panel),this.charts[t.name]&&t.chart.transformFunc&&(i&&i!=t.yAxis||(e=t.chart.transformFunc(this,t.chart,e,i))),this.pixelFromTransformedValue(e,t,i)},i.ChartEngine.prototype.pixelFromValueAdjusted=function(e,t,i,a){var n,s;return this.layout.adj||!this.charts[e.name]?this.pixelFromPrice(i,e,a):(r.F__(),(n=Math.round(t))>0&&n<e.chart.dataSet.length&&(s=e.chart.dataSet[n].ratio)?(r.o7G(27),this.pixelFromPrice(r.l__(s,i),e,a)):this.pixelFromPrice(i,e,a))},i.ChartEngine.prototype.adjustIfNecessary=function(e,t,i){var a,n;return this.layout.adj?i:(r.I_9(),e&&this.charts[e.name]&&(a=Math.round(t))>0&&a<e.chart.dataSet.length&&(n=e.chart.dataSet[a].ratio)?(r.o7G(32),r.l__(i,n)):i)}},D=e=>{var t;(t=e.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var e,t,i,r,n,s,o,l,h,c=a;if(e="positionCrosshai",e+="rsAtPointer",t="posit",t+="io",t+="nCrosshairsAtPointer",(i=this.currentPanel)&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||this.runPrepend(t,arguments))){r=i.chart,n=this.container.getBoundingClientRect(),this.top=n.top,this.left=n.left,this.right=this.left+this.width,this.bottom=this.top+this.height,s=this.crosshairTick=this.tickFromPixel(this.backOutX(this.crosshairX),r),c.V6T(98),c.F__();var u=c.u$p(0,10,8,12,8);(o=this.pixelFromTick(s,r)-u)>=i.right||o<=i.left?this.undisplayCrosshairs():(this.controls.crossX&&(c.V6T(23),this.controls.crossX.style.left=c.l__(o,"px")),l="chart"==i.name?this.preferences.horizontalCrosshairField:i.horizontalCrosshairField,h=r.dataSet,l&&h&&s<h.length&&s>-1&&(this.crossYActualPos=this.pixelFromPrice(h[s][l],i)),this.crossYActualPos>=i.yAxis.bottom&&this.crossYActualPos<=i.bottom?this.undisplayCrosshairs():(this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend(e,arguments)))}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var e,i;if(e="doDis",e+="playCr",a.I_9(),e+="osshairs",!this.runPrepend("doDisplayCrosshairs",arguments)){if(this.displayInitialized){var{floatCanvas:r,controls:n,layout:s}=this,{crossX:o,crossY:l,floatDate:h}=n,{vectorType:c}=this.currentVectorParameters;""===c||!s.crosshair&&!c||t.Drawing&&t.Drawing[c]&&(new t.Drawing[c]).dragToDraw||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(o&&""!==o.style.display&&(o.style.display="",l&&(l.style.display=""),this.magnetizedPrice&&c?(this.container.classList.remove("stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):this.container.classList.add("stx-crosshair-on")),h&&!this.chart.xAxis.noDraw&&(h.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),r&&(i="b",i+="l",i+="ock","none"==r.style.display&&t.clearCanvas(r,this),r.style.display=i))}this.runAppend(e,arguments)}},t.ChartEngine.prototype.undisplayCrosshairs=function(){var e,i,a,r,n,s,o;e="stx-cr",e+="osshair-on",this.runPrepend("undisplayCrosshairs",arguments)||(a=(i=this.controls).crossX,r=i.crossY,a&&"none"!=a.style.display&&(a.style.display="none",r&&(r.style.display="none")),this.displayInitialized&&i.floatDate&&(i.floatDate.style.visibility="hidden"),this.container.classList.remove(e),(n=this.floatCanvas)&&n.isDirty&&"none"!=n.style.display&&(s="n",s+="on",s+="e",t.clearCanvas(n,this),"none"!=n.style.display&&(n.style.display=s)),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(o=this.chart.tempCanvas)&&"none"!=o.style.display&&(o.style.display="none"),this.runAppend("undisplayCrosshairs",arguments))},t.ChartEngine.prototype.hideCrosshairs=function(){this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}},_=e=>{var t,i,r=a;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.loadChart=function(e,i,a){var n,s,o,l,h,c,u,d;a||"function"!=typeof i?Array.isArray(i)&&(i={masterData:i}):(a=i,i={}),i||(i={});var{chart:p,periodicity:g,range:m,span:f}=i,{layout:y,quoteDriver:v}=this;function b(){var e;if("symbolCh","an","ge","s","y","mbolImport",h.layout.symbols=h.getSymbols({"include-parameters":!0,"exclude-studies":!0}),h.dispatch(h.currentlyImporting?"symbolImport":"symbolChange",{stx:h,symbol:p.symbol,symbolObject:p.symbolObject,prevSymbol:w,prevSymbolObject:o,action:"master"}),r.I_9(),g){1353223269,-582313918,e=2;for(var t=1;1353223269!==r.p_V(t.toString(),t.toString().length,31465);t++)h.dispatch("",{stx:h,differentData:!1,prevPeriodicity:n}),e+=2;-582313918!==r.p_V(e.toString(),e.toString().length,8536)&&h.dispatch("periodicity",{stx:h,differentData:!0,prevPeriodicity:n})}v&&v.paused&&v.resume()}n={periodicity:y.periodicity,interval:y.interval,timeUnit:y.timeUnit},g&&(s=t.cleanPeriodicity(g.period?g.period:g.periodicity,g.interval,g.timeUnit),y.interval=s.interval,y.periodicity=s.period,y.timeUnit=s.timeUnit),p||(p=this.chart);var{dataSet:x,market:S,masterData:C,symbol:w,moreAvailable:k,upToDate:T}=p;if(o=t.clone(p.symbolObject),p.dataSet=[],p.masterData=[],p.moreAvailable=null,p.upToDate=null,e?"object"==typeof e?e.symbol.toUpperCase&&"CIQINFO"===e.symbol.toUpperCase()?t.logPackageInfo():(p.symbol=e.symbol,p.symbolObject=e):e.toUpperCase&&"CIQINFO"===e.toUpperCase()?t.logPackageInfo():(p.symbol=e,p.symbolObject.symbol=e):(p.symbol=null,p.symbolObject={symbol:null}),p.inflectionPoint=null,this.marketFactory&&(l=this.marketFactory(p.symbolObject),this.setMarket(l,p)),this.setMainSeriesRenderer(!0),m||f||!y?m&&f&&(f={}):(f=y.range?{}:y.setSpan,m=y.range||{}),this.clearCurrentMarketData(p),h=this,!i.masterData&&v)if(c=function(e){r.I_9(),e&&"orphaned"!=e&&(p.symbol=w,p.symbolObject=o,p.market=S,h.masterData=p.masterData=C,p.dataSet=x,p.moreAvailable=k,p.upToDate=T),b(),a&&a.call(h,e)},m&&Object.keys(m).length&&this.setRange){if(delete i.span,delete y.setSpan,this.chart.masterData=null,this.displayInitialized=!1,g){1439660541,1387760037,u=2;for(var D=1;1439660541!==r.j7j(D.toString(),D.toString().length,98593);D++)m.periodicity=g,u+=2;1387760037!==r.p_V(u.toString(),u.toString().length,78277)&&(m.periodicity=g),m.periodicity=g}m.forceLoad=!0,this.setRange(m,c)}else f&&f.base&&this.setSpan?(f.multiplier=f.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,g&&(f.maintainPeriodicity=!0),f.forceLoad=!0,this.setSpan(f,c)):v.newChart({symbol:p.symbol,symbolObject:p.symbolObject,chart:p,initializeChart:!0},(function(e){e||(h.adjustPanelPositions(),v.updateSubscriptions(),i.stretchToFillScreen&&h.fillScreen()),c.apply(h,arguments)}));else i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),p.symbol||(p.symbol=""),this.initializeChart(),d=this.doCleanupGaps(i.masterData,p),this.setMasterData(d,p,{noCleanupDates:!0}),p.endPoints={},d&&d.length&&(p.endPoints={begin:d[0].DT,end:d[d.length-1].DT}),this.createDataSet(),m&&Object.keys(m).length&&this.setRange?this.setRange(m):f&&f.multiplier&&f.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:f.multiplier,base:f.base}):i.stretchToFillScreen?this.fillScreen():d&&d.length?this.home():this.clear(),this.adjustPanelPositions(),b(),a&&a.call(h);t.logVersion()},t.ChartEngine.prototype.loadBlankChart=function(){r.F__(),this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(e){var t,i,a;for(var r in"Lo","w","C","lose",e||(e=this.chart),t=e.defaultPlotField||"Close",(i=["Open","High","Low"]).push(t),e.series)a=e.series[r].parameters,i.push(a.symbol);return i},r.F__(),t.ChartEngine.prototype.cleanMasterData=function(e,t){var i,a,n,s,o;function l(e,t){r.F__();for(var i=0;i<t.length;i++)if(void 0!==e[t[i]])return!1;return!0}if(i=e.symbol,(a=t.masterData)&&a.length){n=this.getDataFields(t),s=0;do{delete(o=a[s])[i],l.call(this,o,n)?a.splice(s,1):s++}while(s<a.length);a=this.doCleanupGaps(a,t,{noCleanupDates:!0}),this.setMasterData(a,t,{noCleanupDates:!0}),r.F__(),this.clearCurrentMarketData(t,i)}},t.ChartEngine.prototype.calculateATR=function(e,t,i){var a,n,s,o,l,h;i||(i=e.dataSet),(a=e.state.calculations.atr)||(a=e.state.calculations.atr={}),t||(t=20),n=[],a.accum&&(n=a.accum);for(var c=0;c<i.length;c++)if(o=i[c],s=c?i[c-1]:a.q1){if(l=Math.max(o.High-o.Low,Math.abs(o.High-s.Close),Math.abs(o.Low-s.Close)),n.length<t){if(n.push(l)==t){h=0;for(var u=0;u<n.length;u++)h+=n[u];r.o7G(32),o.atr=r.u$p(h,t)}}else{r.o7G(23);var d=r.u$p(5,59);o.atr=(s.atr*(t-("1"<<d))+l)/t}o.trueRange=l}e.state.calculations.atr={accum:n,q1:s}},t.ChartEngine.prototype.calculateMedianPrice=function(e,t){var i;r.F__(),t||(t=e.dataSet);for(var a=0;a<t.length;++a){"hl","/","2",i=t[a],r.o7G(58);var n=r.l__(1,6,4,4);i["hl/2"]=(i.High+i.Low)/n}},t.ChartEngine.prototype.calculateTypicalPrice=function(e,t){var i;r.F__(),t||(t=e.dataSet);for(var a=0;a<t.length;++a){i=t[a],r.o7G(117);var n=r.u$p(237,1,16,15);i["hlc/3"]=(i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.calculateWeightedClose=function(e,t){var i;r.F__(),t||(t=e.dataSet);for(var a=0;a<t.length;++a){i=t[a],r.o7G(5);var n=r.u$p(39,8,3,30);r.V6T(56);var s=r.l__(995,56,18,9);i["hlcc/4"]=(i.High+i.Low+n*i.Close)/s}},t.ChartEngine.prototype.calculateOHLC4=function(e,t){var i;r.F__(),t||(t=e.dataSet);for(var a=0;a<t.length;++a){i=t[a],r.o7G(6);var n=r.u$p(40,44);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.currentQuote=function(e){var t;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!e)return this.chart.dataSet[i];if((t=this.chart.dataSet[i][e])||0===t)return this.chart.dataSet[i]}return null},t.ChartEngine.prototype.mostRecentClose=function(e){var t,i;if(r.I_9(),!this.chart.dataSet)return null;for(var a=this.chart.dataSet.length-1;a>=0;a--)if("n","um","be","r","numb","er","ob","j","ec","t",(t=this.chart.dataSet[a])&&(!e||(t=t[e])||0===t)){if(i=t.iqPrevClose,"object"==typeof t&&(t=t.Close),"number"==typeof t)return t;if("number"==typeof i)return i}return null},t.ChartEngine.prototype.createDataSegment=function(e){var i,a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if(!this.runPrepend("createDataSegment",arguments)){for(var S in this.charts){i=this.charts[S],e&&(i=e),t.Comparison&&i.isComparison&&t.Comparison.createComparisonSegmentInner(this,i),a=i.dataSet,n=i.baseline,s=i.scroll,o=i.maxTicks,h=(l=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,c=n.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),d=0,p=i.dataSegment=[],r.o7G(17);var C=r.l__(15,19,5);r.V6T(17);var w=r.l__(18,34,17);g=a.length-C-s-w,m=i.defaultPlotField;for(var k=-1;k<s&&k<o;k++)g++,(-1!=k||c)&&(g<a.length&&g>=0?((u=a[g]).candleWidth=null,u&&(d+=u.Volume||1),p.push(u),null===n.actualLevel&&k>=0&&(m&&"Close"!=m?(r.o7G(118),(f=a[r.u$p("1",g,0)])&&(f[m]||0===f[m])&&(n.actualLevel=f[m])):(u.iqPrevClose||0===u.iqPrevClose)&&(n.actualLevel=u.iqPrevClose))):g<0&&p.push(null));if(i.segmentImage=null,(y=this.mainSeriesRenderer||{}).params&&y.params.volume){r.o7G(30);var T=r.u$p(5,11,1,0,7);v=i.width-(o-p.length-T)*l.candleWidth,b=0,i.segmentImage=[];for(var D=0;D<p.length;D++)if(u=p[D],i.segmentImage[D]={},x=null,u){if(u.Volume){u.candleWidth=v*u.Volume/d,r.V6T(119);var _=r.u$p(86,1,17,6,3);x=b+u.candleWidth/_,b+=u.candleWidth}else u.candleWidth=h,r.o7G(40),x=r.l__(h,2,b),b+=h;i.segmentImage[D]={tick:u.tick,candleWidth:u.candleWidth,leftOffset:x}}else i.segmentImage[D]={tick:null,candleWidth:h,leftOffset:b+h/2},b+=h}if(e)break}i&&i.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(e){var t,i,a;return e||(e=this.chart),(t=e.dataSegment)&&t.length?(i=0,a=t.length,this.pixelFromBar(i,e)<e.panel.left&&i++,this.pixelFromBar(a-1,e)>e.panel.right&&a--,t.slice(i,a)):[]},t.ChartEngine.prototype.setMasterData=function(e,i,a){var r,n,s,o,l;if(i||(i=this.chart),this.marketFactory&&(r=this.marketFactory(i.symbolObject),this.setMarket(r,i)),a||(a={}),a.noCleanupDates||this.doCleanupDates(e,this.layout.interval),i.masterData=e,"chart"==i.name&&(this.masterData=e),s=null,e)for(n=0;n<e.length;n++)"nu","m","be","r","setMas","terData : Missing DT and Date on masterD","ata object",o=e[n],null===s&&("number"==typeof o.Close?s="Close":"number"==typeof o.Value&&(s="Value")),"Value"===s&&"number"==typeof o.Value&&(o.Close=o.Value),o.DT?("[object Date]"!=Object.prototype.toString.call(o.DT)&&(o.DT=new Date(o.DT)),o.Date&&17==o.Date.length||(o.Date=t.yyyymmddhhmmssmmm(o.DT))):o.Date?o.DT=t.strToDateTime(o.Date):console.log("setMasterData : Missing DT and Date on masterData object"),o.Volume&&"number"!=typeof o.Volume&&(o.Volume=parseInt(o.Volume,10)),e.length-n<50&&this.updateCurrentMarketData(o,i,null,{fromTrade:!0});for(n in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(e),i.roundit=Math.pow(10,i.decimalPlaces),this.plugins)(l=this.plugins[n]).display&&l.setMasterData&&l.setMasterData(this,i)},t.ChartEngine.prototype.setMasterDataRender=function(e,t,i){var a;if(i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(t,i),t&&(i.endPoints={},t.length&&(i.endPoints={begin:t[0].DT,end:t[t.length-1].DT},i.symbol=e)),this.createDataSet(),this.initializeChart(),this.draw(),!t||!t.length){772707701,-243707447,a=2;for(var n=1;772707701!==r.j7j(n.toString(),n.toString().length,34641);n++)i.symbol=1,this.clear(),a+=2;-243707447!==r.p_V(a.toString(),a.toString().length,48510)&&(i.symbol=null,this.clear())}this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(e){var i,a,n,s,o,l,h;for(var c in e||(e={}),i=[],n=this.layout,this.charts){s=this.charts[c];var{symbol:u,symbolObject:d}=s;for(var p in d&&d.symbol&&(e.static?d.static&&i.push(S(u,d,n)):i.push(S(u,d,n))),s.series){"include","-st","atic";var{parameters:g}=s.series[p];if(e["include-static"]||e.static||!g.data||g.data.useDefaultQuoteFeed){var{symbol:m,symbolObject:f}=g;(a=S(m,f,n)).id=p,e["include-parameters"]&&(a.parameters=t.clone(g),a.parameters.yAxis&&delete a.parameters.yAxis.yAxisPlotter),e["exclude-studies"]&&"study"==g.bucket||e["exclude-generated"]&&f.generator||(e.static?f.static&&i.push(a):i.push(a))}}}if(r.I_9(),e["breakout-equations"]){o={};for(var y=0;y<i.length;y++){var{symbol:v}=i[y];if(this.isEquationChart(v)){if(l=t.formatEquation(v)){h=l.symbols;for(var b=0;b<h.length;b++)o[h[b]]=S(h[b],i[y].symbolObject,i[y])}}else o[v]=S(v,i[y].symbolObject,i[y])}for(var x in i=[],o)i.push(o[x])}function S(e,t,i){return{symbol:e,symbolObject:t,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}return i},t.ChartEngine.prototype.setDisplayDate=function(e){var a,n,s;if(!t.ChartEngine.isDailyInterval(this.layout.interval)){a=e.DT,r.o7G(120);var o=r.u$p(2224,250,2,13);n=a.getSeconds()*o+a.getMilliseconds(),i.Date&&this.displayZone&&(s=new i.Date(a.getTime(),this.displayZone),a=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),a=new Date(a.getTime()+n)),r.F__(),e.displayDate=a}},t.ChartEngine.prototype.setDisplayDates=function(e){var i;if(e&&(r.F__(),!t.ChartEngine.isDailyInterval(this.layout.interval)))for(var a=0;a<e.length;a++)(i=e[a]).DT&&this.setDisplayDate(i)},t.ChartEngine.prototype.setTimeZone=function(e,t){var a,n,s,o,l;if("prefere","nces",i.Date){for(var h in s=n=(a=new Date).getTimezoneOffset(),o=n,e&&(this.dataZone=e),this.dataZone&&(s=new i.Date(a,this.dataZone).getTimezoneOffset()),t&&(this.displayZone=t),this.displayZone&&(o=new i.Date(a,this.displayZone).getTimezoneOffset()),r.o7G(121),this.timeZoneOffset=r.l__(o,n,s,n),this.charts)l=this.charts[h],this.setDisplayDates(l.masterData);this.preferences.timeZone=t,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},t.ChartEngine.prototype.updateChartData=function(e,i,a={}){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T;i||(i=this.chart),n=this;var{layout:D}=this;function _(){var s,o,l,h,c,u,d,p,g;if(r.I_9(),"we","e","k","mo","nth","market.","market_def.market_tz",t.Market&&i.market)if(s={market_tz:t.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(o=D.interval)&&"week"!=o||(n.dontRoll||(o="day"),s=n.chart.market.market_def),l=new t.Market(s),h={begin:L&&L.length?L[L.length-1].DT:e.DT,interval:o,periodicity:1,timeUnit:D.timeUnit},u=(c=l.newIterator(h)).next(),L){if(e.DT<u){for(d=0,g=c.previous(),p=e.DT,a.appending=!0;p<g&&d<1e3;)a.appending=!1,g=c.previous(),d++;e.DT=g,a.updating=!a.appending}else if(e.DT>=u){for(d=0,p=e.DT;p>u&&d<1e3;)e.DT=u,u=c.next(),d++;a.appending=!0}}else e.DT=new Date(+c.previous())}var{animationEntry:A,secondarySeries:M}=a;function F(){var t;if("t","i","ck","[objec","t D","ate]",s=!0,a.useAsLastSale&&a.useAsLastSale.aggregatedVolume&&(o=!0),e.constructor===Array){r.V6T(4);var i=r.l__(4,5,19);t=e[e.length-i],(e={}).DT=t.DT,e.Close=t.Close,e.Volume=t.Volume}else e.Last&&(e.Close=e.Last,delete e.Last);e.DT&&"[object Date]"!=Object.prototype.toString.call(e.DT)&&(e.DT=new Date(e.DT)),e.DT&&"Invalid Date"!=e.DT||(e.DT=new Date),"tick"!=D.interval&&_(),e.Open=e.Close,e.High=e.Close,e.Low=e.Close}var{isValidNumber:P}=t,{masterData:L}=i;function O(e,t){var a,s;if(M)delete L[e][M],n.cleanupGaps&&("ga","p",a={DT:t,Close:null},"gap"!=n.cleanupGaps&&L[e-1]&&L[e-1][M]&&(a.Close=L[e-1][M].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0),L[e][M]=a);else{for(l in a={DT:(s=L.splice(e,1)[r.u$p(0,"0",r.V6T(6))]).DT,Close:null,needed:!1},i.series)"u","ndefin","ed",void 0!==s[h=i.series[l].parameters.symbolObject.symbol]&&(a[h]=s[h],delete a.needed);n.cleanupGaps&&"gap"!=n.cleanupGaps&&("g","a","p",delete a.needed,"gap"!=n.cleanupGaps&&L[e-1]&&(a.Close=L[e-1].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0)),!1!==a.needed&&(r.V6T(79),L.splice(e,r.l__(0,"0"),a),n.setDisplayDate(a))}}function E(){n.createDataSet(null,null,a),n.draw({animationEntry:A}),n.updateChartAccessories(),n.streamParameters.count=0,r.F__(),n.streamParameters.timeout=-1}if(s=!1,o=!1,a.noCleanupDates||this.doCleanupDates(e,D.interval),(a.useAsLastSale||e.constructor==Object&&(e.Last||0===e.Last))&&F(),e&&e.constructor==Object&&(e=[e]),e&&e.length&&!this.runPrepend("appendMasterData",[e,i,a])&&!this.runPrepend("updateChartData",[e,i,a])){L||(L=[]),r.o7G(60);var I=r.l__(14,5,8);if(c=L.length-I,u=!1,a.fillGaps&&R(),e.length){for(var N=0;N<e.length;N++){for(p=(d=e[N]).DT,g=d.Date,p&&"[object Date]"!=Object.prototype.toString.call(p)&&(d.DT=p=new Date(p)),p&&(g&&17==g.length||(d.Date=t.yyyymmddhhmmssmmm(d.DT))),p||(p=d.DT=t.strToDateTime(g)),!P(d.Close)&&P(d.Value)&&(d.Close=d.Value);c>=0&&c<L.length;){if((m=L[c].DT)||(m=t.strToDateTime(L[c].Date)),m.getTime()<=p.getTime()){if(u=!0,r.o7G(21),f=r.l__(0,"0"),m.getTime()<p.getTime()){if(c<L.length-1&&(L[c+1].DT||t.strToDateTime(L[c+1].Date)).getTime()<=p.getTime()){c++;continue}f=1}if(a.deleteItems){f||O(c,p);break}"tick"==D.interval&&!1!==a.firstLoop&&(f=1),f||Y(c,d),P(d.Close)&&(P(d.Open)||(d.Open=d.Close),y=Math.max(d.Open,d.Close),v=Math.min(d.Open,d.Close),(!P(d.High)||d.High<y)&&(d.High=y),(!P(d.Low)||d.Low>v)&&(d.Low=v)),d.Volume&&!P(d.Volume)&&(d.Volume=parseInt(d.Volume,10)),c+=f,M?(e.length-N<50&&this.updateCurrentMarketData(d,i,M,{fromTrade:!0,animationEntry:A}),"tick"==D.interval&&void 0===d.Close||(f&&(L.splice(c,0,{DT:d.DT}),this.setDisplayDate(L[c])),L[c][M]=d)):(b="t",b+="ick",e.length-N<50&&this.updateCurrentMarketData(d,i,null,{fromTrade:!0,animationEntry:A}),D.interval==b&&void 0===d.Close||(L.splice(c,f?0:1,d),this.setDisplayDate(d)));break}c+=u?1:-1}c<0&&(M?(this.updateCurrentMarketData(d,i,M,{fromTrade:!0,animationEntry:A}),"tick"==D.interval&&void 0===d.Close||(r.V6T(19),L.splice(0,r.l__(64,"0"),{DT:d.DT}),this.setDisplayDate(L[0]),L[0][M]=d)):(this.updateCurrentMarketData(d,i,null,{fromTrade:!0,animationEntry:A}),"tick"==D.interval&&void 0===d.Close||(r.o7G(27),L.splice(r.l__(1,"0"),r.u$p(0,"0",r.o7G(79)),d),this.setDisplayDate(d))),u=!0,c=0)}L.length&&(this.masterData=i.masterData=L),this.maxMasterDataSize&&(L=i.masterData=this.masterData=L.slice(-this.maxMasterDataSize)),x=M?this.getSeries({symbol:M,chart:i}):[i];for(var H=0;H<x.length;H++)(!(S=x[H]).endPoints.begin||S.endPoints.begin>e[0].DT)&&(S.endPoints.begin=e[0].DT),(!S.endPoints.end||S.endPoints.end<e[e.length-1].DT)&&(S.endPoints.end=e[e.length-1].DT),C=S.parameters&&S.parameters.field||i.defaultPlotField,(w=this.getFirstLastDataRecord(e,C,!0))&&(!S.lastQuote||S.lastQuote.DT<=w.DT)&&(S.lastQuote=w),M&&a.deleteItems&&(S.lastQuote=this.getFirstLastDataRecord(L,M,!0)[M]);for(var V in this.plugins)(k=this.plugins[V]).display&&k.appendMasterData&&k.appendMasterData(this,e,i);this.masterData&&this.masterData.length||(this.masterData=L),a.noCreateDataSet||(++(T=this.streamParameters).count>T.maxTicks||a.bypassGovernor?(clearTimeout(T.timeout),E()):-1==T.timeout&&(T.timeout=setTimeout(E,T.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)}}function R(){var t,a,s;if(t=null,a=0,L.length&&(t=n.getFirstLastDataRecord(L,M||i.defaultPlotField,!0))){if(e[e.length-1].DT<=t.DT)return;for(;a<e.length;a++){if(+e[a].DT==+t.DT){n.getFirstLastDataRecord([e[a]],M||i.defaultPlotField)&&(t=null);break}if(e[a].DT>t.DT)break}}s=e.slice(a),r.F__(),t&&s.unshift(M?t[M]:t),s=n.doCleanupGaps(s,i),t&&s.shift(),e=e.slice(0,a).concat(s)}function Y(e,t){var n,c,u;if(n=L[e],M&&(n=n[M]||{}),null===t.Close)void 0!==n.Open&&(t.Open=null),void 0!==n.High&&(t.High=null),void 0!==n.Low&&(t.Low=null),void 0!==n.Volume&&(t.Volume=null);else for(l in c="A",c+="sk",u="B",u+="i",u+="d",s?(t.Volume&&(t.Volume=parseInt(t.Volume,10)),o||(t.Volume+=n.Volume)):!P(t.Volume)&&n.Volume&&(t.Volume=n.Volume),a.allowReplaceOHL||(P(n.Open)&&(t.Open=n.Open),P(n.High)&&P(t.High)&&n.High>t.High&&(t.High=n.High),P(n.Low)&&P(t.Low)&&n.Low<t.Low&&(t.Low=n.Low)),["Close","Open","High","Low",u,c].forEach((function(e){r.I_9(),P(t[e])||(t[e]=n[e])})),i.series)h=i.series[l].parameters.symbolObject.symbol,void 0===t[h]&&void 0!==n[h]&&(t[h]=n[h])}},t.ChartEngine.prototype.updateCurrentMarketData=function(e,i,a,n={}){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if(s="u",s+="pdate",s+="CurrentMarketData",o="tic",o+="k",e&&e.DT){i||(i=this.chart);var{fromTrade:S}=n;if(r.F__(),l=e.DT,!S&&this.layout.interval!=o&&i.market){if(i.market.market_def){h=1513221775,c=-731026186,u=2;for(var C=1;r.p_V(C.toString(),C.toString().length,18897)!==h;C++){if(-i.market.isMarketDate(e.DT))return;r.V6T(20),u+=r.l__("2",2)}if(r.p_V(u.toString(),u.toString().length,77532)!==c&&!i.market.isMarketDate(e.DT))return;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(e.DT))return}d={begin:e.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},p=new t.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&p.enableAllAvailableSessions(),(g=p.newIterator(d)).next(),e.DT=g.previous()}if(!this.runPrepend(s,arguments)){m=S?"DT":"Timestamp";var{currentMarketData:w}=i;f=!1,a&&(w[a]||(w[a]={}),w=w[a]),["Last","Bid","Ask"].forEach((function(t){var i;e[t]&&"number"==typeof e[t]&&(!(i=w[t])||!i[m]||i[m]<=(S?e.DT:l))&&("S","i","z","e",w[t]={DT:e.DT,Price:e[t],Size:e[t+"Size"],Timestamp:l},f=!0)})),["BidL2","AskL2"].forEach((function(t){var i;e[t]&&e[t]instanceof Array&&(!(i=w[t])||!i[m]||i[m]<=(S?e.DT:l))&&(w[t]={DT:e.DT,Price_Size:e[t],Timestamp:l},f=!0)})),e.Close&&(!w.Last||w.Last.Timestamp<=(e.LastTime||l))&&(y="ti",y+="ck",v=e.Close,((b=n&&n.finalClose)||0===b)&&(v=b),w.Last={DT:e.DT,Price:v,Size:void 0===e.LastSize&&this.layout.interval==y?e.Volume:e.LastSize,Timestamp:e.LastTime||l},f=!0),f&&!n.animationEntry&&(x=new Date,clearTimeout(w.assignLastTouchAsync),w.assignLastTouchAsync=setTimeout((()=>{w.touched=x,r.I_9()}))),S||delete e.Last,this.runAppend("updateCurrentMarketData",arguments)}}},t.ChartEngine.prototype.clearCurrentMarketData=function(e,t){var i,a,n;if(!this.runPrepend("clearCurrentMarketData",arguments)){if(a=[],e)a.push(e);else for(i in this.charts)a.push(this.charts[i]);for(r.F__(),i=0;i<a.length;i++)if(n=a[i].currentMarketData,t)delete n[t];else for(var s in n)n[s]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}},A=e=>{var t,i=a;(t=e.CIQ).ChartEngine.prototype.changeOccurred=function(e){var t,a,r,n;if(t={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==e&&this.dispatch("theme",t),!this.currentlyImporting)if("layout"==e)"lay","ou","t",this.dispatch("layout",t);else if("vector"==e){i.V6T(27),a=i.u$p(1,"257044404"),i.o7G(79),r=i.l__(64,"1094224867"),n=2;for(var s=1;i.p_V(s.toString(),s.toString().length,57756)!==a;s++)this.dispatch("drawing",t),n+=2;i.j7j(n.toString(),n.toString().length,73176)!==r&&this.dispatch("",t)}else"preferences"==e&&this.dispatch("preferences",t)},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),i.F__(),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(e){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(e),{fc:e}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(e){for(var t=0;t<this.asyncCallbacks.length;t++)if(this.asyncCallbacks[t]==e.fc)return void this.asyncCallbacks.splice(t,1)},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(i.F__(),this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var e=0;e<this.asyncCallbacks.length;e++)this.asyncCallbacks[e]()},t.ChartEngine.prototype.completeAsyncAction=function(){this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(e,t,a,r){i.I_9(),e.addEventListener(t,a,r),this.eventListeners.push({element:e,event:t,function:a,options:r})},t.ChartEngine.prototype.addEventListener=function(e,t){var i;if("*"===e)for(var a in this.callbackListeners)this.callbackListeners[a].push(t);else if(e instanceof Array)for(var r=0;r<e.length;r++)this.callbackListeners[e[r]].push(t);else{if(!(i=this.callbackListeners[e]))throw new Error("Attempted to add an invalid listener.");i.push(t)}return{type:e,cb:t}},i.I_9(),t.ChartEngine.prototype.removeEventListener=function(e,t){var a,r;if(e&&"object"==typeof e||(e={type:e,cb:t}),a=function(e,t){i.F__();for(var a=0;a<e.length;a++)if(e[a]===t)return void e.splice(a,1)},i.I_9(),r=this.callbackListeners,"*"!==e.type){if(!r[e.type])throw new Error("Attempted to remove an invalid listener.");a(r[e.type],e.cb)}else for(var n in r)a(r[n],e.cb)},t.ChartEngine.prototype.dispatch=function(e,t){var i;if(i=this.callbackListeners[e])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,t))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,t))return!0;return!1},t.ChartEngine.prototype.updateListeners=function(e){var t;for(var a in i.I_9(),this.plugins)(t=this.plugins[a]).display&&t.listener&&t.listener(this,e)},t.ChartEngine.registerGlobalEvent=function(e,a,r,n){Array.isArray(e)||(e=[e]),e.forEach((e=>{i.I_9(),t.ChartEngine.globalEventHandlers.push({event:e,listener:a,options:r||!1,isWindow:n,applied:[]})})),t.ChartEngine.attachGlobalEventHandlers()},t.ChartEngine.attachGlobalEventHandlers=function(){t.ChartEngine.registeredContainers.forEach((e=>{var{ownerDocument:a}=e;i.I_9(),t.ChartEngine.globalEventHandlers.forEach((function(e){var{event:t,listener:i,options:r,isWindow:n,applied:s}=e;-1===s.indexOf(a)&&((n?a.defaultView:a).addEventListener(t,i,r),s.push(a))}))}))}},M=e=>{var t,i=a;t=e.CIQ,i.F__(),t.ChartEngine.prototype.prepend=function(e,a){var r,n,s,o;if(i.V6T(23),r=i.l__("prepend",e),this instanceof t.ChartEngine)n=this.hasOwnProperty(r)?this[r]:[],this[r]=[a].concat(n);else{i.o7G(21),s=-i.l__(0,"1136490702"),252791032,o=2;for(var l=1;i.j7j(l.toString(),l.toString().length,74963)!==s;l++)n=t.ChartEngine.prototype[r]||[],o+=2;252791032!==i.j7j(o.toString(),o.toString().length,49452)&&(n=t.ChartEngine.prototype[r]&&[]),t.ChartEngine.prototype[r]=[a].concat(n)}return{method:r,func:a}},t.ChartEngine.prototype.append=function(e,a){var r,n;return i.I_9(),"a","ppe","nd",i.o7G(23),r=i.u$p("append",e),this instanceof t.ChartEngine?(n=this.hasOwnProperty(r)?this[r]:[],this[r]=n.concat(a)):(n=t.ChartEngine.prototype[r]||[],t.ChartEngine.prototype[r]=n.concat(a)),{method:r,func:a}},t.ChartEngine.prototype.runPrepend=function(e,a,r){var n,s,o;if("pr","ep","en","d",i.V6T(23),n=i.l__("prepend",e),!(s=(s=this.hasOwnProperty(n)?this[n]:[]).concat(t.ChartEngine.prototype[n]||[])).length)return!1;r||(r=this);for(var l=0;l<s.length;l++)if(o=s[l].apply(r,a))return o;return!1},t.ChartEngine.prototype.runAppend=function(e,a,r){var n,s,o;if("a","pp","end",i.V6T(23),n=i.u$p("append",e),!(s=(s=this.hasOwnProperty(n)?this[n]:[]).concat(t.ChartEngine.prototype[n]||[])).length)return!1;r||(r=this);for(var l=0;l<s.length;l++)if(o=s[l].apply(r,a))return o;return!1},t.ChartEngine.prototype.removeInjection=function(e){var a,r,n;a=e.method,i.I_9(),r=2;for(var s=1;2002908772!==i.j7j(s.toString(),s.toString().length,60295);s++)r+=2;if(i.j7j(r.toString(),r.toString().length,19417),this instanceof t.ChartEngine){if(!this[a])return;for(n=0;n<this[a].length;n++)if(this[a][n]==e.func)return void this[a].splice(n,1)}else{if(!t.ChartEngine.prototype[a])return;for(n=0;n<t.ChartEngine.prototype[a].length;n++)if(t.ChartEngine.prototype[a][n]==e.func)return void t.ChartEngine.prototype[a].splice(n,1)}},t.ChartEngine.prototype.remove=function(e){i.I_9(),this instanceof t.ChartEngine?(i.V6T(23),delete this[i.l__("append",e)],i.V6T(23),delete this[i.u$p("prepend",e)]):("a","p","pen","d",i.V6T(23),delete t.ChartEngine.prototype[i.u$p("append",e)],i.o7G(23),delete t.ChartEngine.prototype[i.l__("prepend",e)])}},F=e=>{var t,i;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(e){var i;return(e||0===e)&&this.dataZone&&(i=t.convertTimeZone(e,null,this.dataZone),e=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),e},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(e,i){var r,n,s;e=e||5,r=(new Date).getTime(),a.I_9(),n=0,s=this,a.V6T(42),console.log(a.u$p("Running fps() for "," seconds",e)),function o(){var l,h,c=a;c.V6T(42);var u=c.u$p(71,920,9);if((l=((new Date).getTime()-r)/u)>e)return c.V6T(32),h=c.l__(n,l),c.o7G(23),console.log(c.l__("FPS=",h)),void(i&&i(h));s.draw(),n++,t.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}()},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(e){var t,i;if(t=this.layout,i=this.chart,"ohlc"!=t.aggregationType&&(t.aggregationType="ohlc",i.canvas&&this.createDataSet()),t.chartType=e,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(e);i.defaultChartStyleConfig={type:e},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(e){a.F__(),e||(e="linear"),this.layout.chartScale=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var e,t;if(!this.runPrepend("checkLogScale",arguments))return"log"===this.layout.chartScale&&(e=!1,this.chart.yAxis.lowValue<=0&&(t="lo",t+="gdeactivated",this.setChartScale("linear"),this.dispatch("notification",t),e=!0),this.runAppend("checkLogScale",arguments),e)},t.ChartEngine.prototype.setAdjusted=function(e){this.layout.adj=e,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(e,t){var i,r,n,s,o=a;if(0!==e&&(!e||"number"!=typeof e))return"";if(t||0===t||(t=e),o.V6T(23),r=0,(i=o.u$p("",t)).indexOf(".")>-1){o.o7G(72);var l=o.l__(14,14,0,0);r=i.substring(i.indexOf(".")).length-l}return t>=1e3?(o.V6T(19),r=Math.max(r,o.u$p(32,"0"))):t<2?(o.V6T(21),r=Math.max(r,o.u$p(0,"4"))):r=Math.max(r,2),(n=this.internationalizer)?(r>=(s=n.priceFormatters.length)&&(o.o7G(6),r=o.u$p(1,s)),e=n.priceFormatters[r].format(e)):e=e.toFixed(r),e},t.ChartEngine.prototype.formatPrice=function(e,t){var i,r,n,s,o=a;if(0!==e&&(!e||void 0===e))return"";if(t||(t=this.currentPanel),t||(t=this.chart.panel),!t)return e.toString();if(o.F__(),!(i=t.decimalPlaces)&&0!==i){1711633591,1590067972,r=2;for(var l=1;1711633591!==o.j7j(l.toString(),l.toString().length,38119);l++)i=t.chart.decimalPlaces,r+=2;1590067972!==o.p_V(r.toString(),r.toString().length,36976)&&(i=t.chart.decimalPlaces),i=t.chart.decimalPlaces}return i||0===i?((n=this.internationalizer)?(i>=(s=n.priceFormatters.length)&&(o.V6T(6),i=o.u$p(1,s)),e=n.priceFormatters[i].format(e)):e=e.toFixed(i),e):e.toString()},t.ChartEngine.prototype.determineMinMax=function(e,i,r,n,s,o,l,h,c){var u,d,p,g,m,f,y,v,b,x,S;a.o7G(9);var C=a.u$p(7,13,21);u=Number.MAX_VALUE*C,d=Number.MAX_VALUE,p=!1,g=e.length,c||(c=[]),m=[],s&&(g=s);for(var w=0;w<=g+1;w++)if(i.length&&(f=w==g?this.getPreviousBar(this.chart,i[0],0):w==g+1?this.getNextBar(this.chart,i[0],g-1):e[w]),f){if(!n)if(f.transform)p=!0,f=f.transform;else if(p)continue;y=0;for(var k=0;k<i.length;k++)if(v=t.existsInObjectChain(f,i[k])){"number"==typeof(b=v.obj[v.member])&&(b=[b]);for(var T=0;T<b.length;T++)x=b[T],o&&x instanceof Array&&(x=x[0]),(x||0===x)&&(!0===r||r instanceof Array&&r.indexOf(i[k])>-1?((y+=x)>u&&(u=y),y<d&&(d=y)):(x>u&&(u=x),x<d&&(d=x),m.push({value:x,quote:f})))}(!0===r||r instanceof Array&&r.indexOf(i[k])>-1)&&m.push({value:y,quote:f})}return S=[d,u],c.forEach((function(e){S=e(m,l,h)||S})),S[1]==-1*Number.MAX_VALUE&&(S[1]=0),S[0]==Number.MAX_VALUE&&(S[0]=0),S},t.ChartEngine.prototype.initializeDisplay=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=a;if(i="Clos",i+="e",r="O",r+="p",r+="e",r+="n",n="Cl",n+="o",n+="s",n+="e",!this.runPrepend("initializeDisplay",arguments)){s=[],o=[],l=!1,h=this,c=[n,r,"High","Low"],u=[e.defaultPlotField||i];var{mainSeriesRenderer:S}=this,{dataSegment:C,seriesRenderers:w}=e;if(p=null,g=Math.floor((e.width-this.micropixels)/this.layout.candleWidth),e.scroll>e.maxTicks&&e.maxTicks>g+1){x.o7G(4);var k=x.u$p(11,13,142);p=C.length-k}for(var T in m=[],this.panels){m=(f=this.panels[T]).yaxisLHS.concat(f.yaxisRHS);for(var D=0;D<m.length;D++)y=m[D],s=[],o=[],v=e.transformFunc&&y==e.panel.yAxis,M(y,f),this.currentlyImporting||y.renderers.length||y.studies.length?(d=S&&S.determineMax?S.determineMax(C,s,o,!v,p,l,f,y):this.determineMinMax(C,s,o,!v,p,l,f,y),this.baselineHelper&&(d=this.setBaselineMinMax(d,y)),x.V6T(20),y.lowValue=d[x.u$p("0",0)],y.highValue=d[1],y==e.panel.yAxis&&(e.lowValue=y.lowValue,e.highValue=y.highValue)):this.deleteYAxisIfUnused(f,y)}if((b=e.state.aggregation)&&b.box){x.V6T(8);var _=x.u$p(3,1);e.lowValue-=b.box/_,x.V6T(49);var A=x.u$p(7,135,19);e.highValue+=b.box/A}this.runAppend("initializeDisplay",arguments)}function M(i,a){var r,n,d,p,g,m,f,y,v;if(x.F__(),r=!1,(n=h.layout&&h.layout.studies&&h.layout.studies[i.name])&&(!a||a.name==n.panel)){for(var b in n.outputMap)s.push(b),n.study&&(n.study.renderer?s=s.concat(t.createObjectChainNames(b,c)):n.study.seriesFN||(s=s.concat(t.createObjectChainNames(b,u))));for(var S=0;S<=2;S++)s.push(n.name+"_hist"+(S||""));r=!0}if(a){for(var C in i.studies=[],i.renderers=[],r&&i.studies.push(i.name),w)if(g=(p=(d=w[C]).params).panel,(p.yAxis||!h.panels[g]||h.panels[g].yAxis)==i&&g==a.name){m=d.highLowBars?c:u,l=d.bounded;for(var k=0;k<d.seriesParams.length;k++)(f=d.seriesParams[k]).hidden||(x.o7G(6),y=void x.u$p(0,"0"),f.subField?y=t.createObjectChainNames(f.symbol,[f.subField]).concat(f.symbol):f.symbol?y=t.createObjectChainNames(f.symbol,m).concat(f.symbol):f.field?y=f.field:i==e.panel.yAxis&&(y=m),y&&(s=s.concat(y)),d.useSum&&(o=o.concat(y)));i.renderers.push(C)}for(var T in h.overlays)(v=h.overlays[T]).panel==a.name&&v.name!=i.name&&v.getYAxis(h)==i&&(i.studies.push(v.name),e.includeOverlaysInMinMax&&M({name:v.name}))}}},t.ChartEngine.prototype.setMarket=function(e,i){if(t.Market)for(var a in i||(i=this.chart),i.market=new t.Market(e),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},t.ChartEngine.prototype.setMarketFactory=function(e){a.F__(),this.marketFactory=e},t.ChartEngine.prototype.setResizeTimer=function(e){var i;i=()=>{var{canvas:e,container:i}=this.chart;e&&!t.isAndroid&&(e.height===Math.floor(this.devicePixelRatio*i.clientHeight)&&e.width===Math.floor(this.devicePixelRatio*i.clientWidth)||this.resizeChart())},this.resizeHandle=t.resizeObserver(this.chart.container,i,this.resizeHandle,e)},t.ChartEngine.prototype.getRenderedItems=function(){var e,i,r,n,s,o,l,h;if("Cl","ose",e=this.chart,i=this.currentPanel,a.I_9(),i){for(var c in r=["Open","High","Low","Close"],n=["Close"],s=[],this.overlays)this.overlays[c].panel===i.name&&(s=s.concat(Object.keys(this.overlays[c].outputMap)));for(var u in e.seriesRenderers)if((o=e.seriesRenderers[u]).params.panel==i.name)for(var d in o.seriesParams)l=o.seriesParams[d],h=o.highLowBars?r:n,l.subField?s=s.concat(t.createObjectChainNames(l.symbol,[l.subField])).concat(l.symbol):l.symbol?s=s.concat(t.createObjectChainNames(l.symbol,h)).concat(l.symbol):l.field?s.push(l.field):i==e.panel&&(s=s.concat(h));return s}},t.ChartEngine.prototype.setTransform=function(e,t,i){a.F__(),e.transformFunc=t,e.untransformFunc=i},t.ChartEngine.prototype.unsetTransform=function(e){a.F__(),delete e.transformFunc,delete e.untransformFunc;for(var t=0;e.dataSet&&t<e.dataSet.length;t++)e.dataSet[t].transform=null},t.ChartEngine.prototype.isEquationChart=function(e){return a.I_9(),!(!e||"="!=e[0])&&(!(!this.allowEquations||!t.fetchEquationChart)||(console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},t.ChartEngine.prototype.correctIfOffEdge=function(e){var t,i,r,n,s,o,l,h,c,u=a;if(!this.runPrepend("correctIfOffEdge",arguments)){for(var d in this.charts)if(i=(t=this.charts[d]).dataSet,r=t.maxTicks,n=this.layout,s=this.minimumLeftBars,o=Math.min(s,r),t.allowScrollPast?(u.o7G(6),l=u.l__(o,r),o>i.length&&(l=r-i.length),t.scroll-l>=i.length&&(t.scroll=i.length+l-1,this.micropixels=0),t.scroll<=o&&(t.scroll=o,this.micropixels=0)):(t.scroll<o&&(t.scroll=o),t.scroll>i.length&&(t.scroll=i.length)),!1===t.allowScrollFuture){h=this.getLabelOffsetInPixels(t,n.chartType)+n.candleWidth*t.whiteSpaceFutureTicks,u.V6T(5);var p=u.u$p(35,11,6,19);c=r-Math.round(h/n.candleWidth)-p,(this.micropixels<0?t.scroll-1:t.scroll)<c&&(t.scroll=c,this.micropixels=0)}this.runAppend("correctIfOffEdge",arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){for(var e=0;e<this.chart.dataSegment.length;e++)if(this.chart.dataSegment[e])return e;return 0},t.ChartEngine.prototype.setStartDate=function(e){a.F__();for(var t=0;t<this.chart.dataSet.length;t++)if(this.chart.dataSet[t].DT.getTime()==e.getTime())return this.chart.scroll=this.chart.dataSet.length-t,void this.draw()},t.ChartEngine.prototype.clearPixelCache=function(){var e;for(var t in a.I_9(),this.panels)(e=this.panels[t]).cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,e.cacheRight=-1;this.chart.pixelCacheExpired=!0},t.ChartEngine.prototype.adjustBackingStore=function(e,i){var r,n,s,o,l,h=a;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),r=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,n=this.devicePixelRatio/r,this.useBackingStore)(!t.isAndroid||t.is_chrome||t.isFF)&&("p","x","p","x",o=e.width,l=e.height,h.V6T(27),e.width=h.l__(n,o),h.V6T(27),e.height=h.u$p(n,l),h.o7G(23),e.style.width=h.l__(o,"px"),h.o7G(23),e.style.height=h.l__(l,"px"),i.scale(n,n),this.adjustedDisplayPixelRatio=n,this.backing={ratio:n,width:e.width,height:e.height,styleWidth:o,styleHeight:l});else{1022438252,1219802692,s=2;for(var c=1;1022438252!==h.p_V(c.toString(),c.toString().length,29919);c++)this.devicePixelRatio=this.adjustedDisplayPixelRatio=8,e.style.width=e.style.height="",s+=2;1219802692!==h.p_V(s.toString(),s.toString().length,76924)&&(h.V6T(21),this.devicePixelRatio=this.adjustedDisplayPixelRatio=h.u$p(0,"1"),e.style.width=e.style.height="")}},t.ChartEngine.prototype.reconstituteBackingStore=function(){var e,t,i,r=a;e=2;for(var n=1;1178842408!==r.j7j(n.toString(),n.toString().length,29082);n++){if(!this.useBackingStore||!this.backing)return;r.o7G(27),e+=r.l__(1,"2")}99845235!==r.j7j(e.toString(),e.toString().length,27469)&&-this.useBackingStore&&-this.backing||(t=[this.chart.canvas],this.useBackgroundCanvas&&t.push(this.chart.backgroundCanvas),r.F__(),i=this.backing,t.forEach((function(e){e.width!=i.width&&(e.width=i.width,e.height=i.height,r.I_9(),e.context.scale(i.ratio,i.ratio))})),this.adjustedDisplayPixelRatio=i.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var e,t,i=a;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,i.I_9(),e.forEach((function(e){i.F__(),e.width!=t.styleWidth&&(e.width=t.styleWidth,e.height=t.styleHeight,i.o7G(21),e.context.scale(1,i.l__(0,"1")))})),this.adjustedDisplayPixelRatio=1,this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(e){return a.F__(),e||(e=this.chart),this.useBackgroundCanvas?e.backgroundCanvas:e.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var e,t,i,r,n,s,o,l;for(var h in e=this.chart.canvas,t=this.chart.context,e&&t&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=e.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=e.width=this.chart.container.clientWidth,this.adjustBackingStore(e,t),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,a.F__(),this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0!==this.width||this.container.dimensionlessCanvas||!this.container.closest("html")||this.container.closest("cq-context-wrapper")||console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,void 0===(r=this.layout.candleWidth)&&(r=8),this.charts){n=this.charts[h],this.setCandleWidth(r,n),n.scroll<n.width/r&&(n.scroll=Math.floor(n.width/r),s=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=s),o=10;try{l=2*t.measureText("10:00").width}catch(e){a.o7G(27),l=a.l__(1,"100")}for(;o>1&&!(this.chart.width/l>o);)o/=1.5;n.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/o),n.xAxis.autoComputedTickSizePixels<1&&(n.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(e,t){t||(t=this.chart),e=this.constrainCandleWidth(e),this.layout.candleWidth=e,t.maxTicks=Math.round(t.width/e)+1},t.ChartEngine.prototype.constrainCandleWidth=function(e){var t,i,r;return t=this.minimumCandleWidth,a.F__(),i=this.maximumCandleWidth,r=this.animations.zoom,t&&e<t&&(e=t,r&&r.running&&r.stop()),i&&e>i&&(e=i,r&&r.running&&r.stop()),e},t.ChartEngine.prototype.resizeChart=function(e){var t;this.runPrepend("resizeChart",arguments)||(!1!==e&&(e=!0),e&&this.preAdjustScroll(),t=this.chart.canvasHeight,this.resizeCanvas(),e&&this.postAdjustScroll(),a.I_9(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===t)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var e;for(var i in this.displayInitialized=!1,this.layout.studies)"Studie","s.remo","veStudy",e=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,e);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var e,t,i,r,n;e=this.chart,t=this.layout.candleWidth,i=e.width-this.preferences.whitespace,(r=e.dataSet.length)*t>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||r--,a.V6T(32),n=a.l__(i,r),this.setCandleWidth(n,e),this.home({maintainWhitespace:!0}))},t.ChartEngine.prototype.setMaxTicks=function(e,t){var i,r,n;a.F__(),t||(t={}),(e=Math.round(e))<2&&(e=2),i=t.padding?t.padding:0,n=((r=this.chart).width-i)/(e-1)||8,this.setCandleWidth(n,r),(t.padding||0===t.padding)&&(r.scroll=e)},t.ChartEngine.prototype.initializeChart=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k=a;if(i="initial",i+="izeChar",i+="t",!this.runPrepend(i,arguments)){for(var T in(r=this.chart).symbolObject.symbol||(r.symbolObject.symbol=r.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),k.V6T(27),this.micropixels=k.u$p(1,"0"),e?r.container=e:e=r.container,e.stx=this,e.CIQRegistered||(e.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(e),t.ChartEngine.attachGlobalEventHandlers()),this.registerHTMLElements&&this.registerHTMLElements(),n=r.canvas,s=r.backgroundCanvas,o=r.tempCanvas,l=this.floatCanvas,h=r.canvasShim,this.setCandleWidth(this.layout.candleWidth),r.backgroundCanvas||(c="canva",c+="s",s=r.backgroundCanvas=document.createElement("canvas"),e.appendChild(s),F(s),(h=r.canvasShim=document.createElement("div")).className="stx-canvas-shim",e.appendChild(h),n=r.canvas=document.createElement("canvas"),e.appendChild(n),F(n),r.context=n.context,o=r.tempCanvas=document.createElement(c),e.appendChild(o),F(o,!0),l=this.floatCanvas=document.createElement("canvas"),e.appendChild(l),F(l,!0)),this.resizeCanvas(),t.isAndroid&&(u=function(e){e.preventDefault&&e.preventDefault()},o.addEventListener("touchstart",u,{passive:!1}),l.addEventListener("touchstart",u,{passive:!1})),d=this.panels,r.panel.display=r.symbol,r.symbolDisplay&&(r.panel.display=r.symbolDisplay),this.adjustPanelPositions(),r.panel=d[r.name],d){p=d[T].yaxisLHS.concat(d[T].yaxisRHS);for(var D=0;D<p.length;D++)p[D].height=d[T].yAxis.height,this.calculateYAxisMargins(p[D])}var _;for(var A in this.initialWhitespace=this.preferences.whitespace,r.dataSet&&r.dataSet.length>0&&(r.scroll=Math.floor(r.width/this.layout.candleWidth),g=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=g),t.touchDevice&&(m=e.querySelector(".overlayEdit"),f=e.querySelector(".overlayText"),y=e.querySelector(".overlayTrashCan"),v=e.querySelector(".vectorTrashCan"),b=function(e,t,i,a){return k.I_9(),function(r){k.I_9(),e.deleteHighlighted(t,i,a)}},f&&t.safeClickTouch(f,b(this,!0,!1,!0)),m?(t.safeClickTouch(m,b(this,!0,!0,!1)),y&&t.safeClickTouch(y,b(this,!1))):y&&t.safeClickTouch(y,b(this,!0)),v&&t.safeClickTouch(v,b(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(e.onmouseout=(_=this,function(e){k.I_9(),_.handleMouseOut(e)}),t.smartHover(e.ownerDocument)),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],d)(x=d[A]).markerHolder&&(e.removeChild(x.markerHolder),x.markerHolder=null);for(var M in this.plugins)(S=this.plugins[M]).display&&S.initializeChart&&S.initializeChart(this);this.resizeListenerInitialized||(C=this,this.resizeListenerInitialized=!0,w=function(){return k.F__(),function(e){C.resizeChart()}},this.addDomEventListener(e.ownerDocument.defaultView,"resize",w(),!0)),r.baseline.userLevel&&(r.baseline.userLevel=null),this.setResizeTimer(),this.runAppend("initializeChart",arguments)}function F(e,t){var i;e.context=e.getContext("2d"),e.context.lineWidth=1,(i=e.style).position="absolute",i.left="0px",t&&(i.display="none")}},t.ChartEngine.prototype.destroy=function(){var e,i,r,n;this.setResizeTimer(0),this.detachQuoteFeed&&this.detachQuoteFeed(),this.styles={};for(var s=0;s<this.eventListeners.length;s++)(e=this.eventListeners[s]).element.removeEventListener(e.event,e.function,e.options);if(this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),a.F__(),(r=(i=t.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1){-632774730,986251915,n=2;for(var o=1;-632774730!==a.j7j(o.toString(),o.toString().length,82210);o++)i.splice(r,1),n+=2;986251915!==a.p_V(n.toString(),n.toString().length,8886)&&i.splice(r,2)}this.destroyed=!0,this.slider&&this.slider.slider.destroy(),this.marketDepth&&this.marketDepth.marketDepth.destroy()},t.ChartEngine.registerGlobalEvent("unload",(function(){var e=a;e.F__(),t.ChartEngine.registeredContainers.slice(0).forEach((t=>{if(e.F__(),t.ownerDocument===this.document)try{t.stx.destroy(),t.stx=null}catch(e){}})),t.ChartEngine.globalEventHandlers.forEach((t=>{var i,a;e.o7G(21),i=e.u$p(0,"2");for(var r=1;-150162621!==e.p_V(r.toString(),r.toString().length,32410);r++)a=t.applied.indexOf(this.document),i+=2;if(-177449457!==e.j7j(i.toString(),i.toString().length,61527)&&(a=t.applied.indexOf(this.document)),a>-1)try{t.applied.splice(a)}catch(e){}})),this.document.body.innerHTML=""}),!1,!0),t.ChartEngine.prototype.preAdjustScroll=function(e){a.I_9(),e||(e=this.chart),this.previousAdjust={chart:e,scroll:e.scroll,maxTicks:e.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){var e;this.previousAdjust&&((e=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(e.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(e){return this.translationCallback?this.translationCallback(e,this.preferences.language):(a.I_9(),e)},t.ChartEngine.prototype.doCleanupDates=function(e,r){var n,s,o,l,h;if(a.I_9(),e&&e.length)for(var c=0;c<e.length;c++)if("[object S","t","ring]",(s=(n=e[c]).DT)||n.Date){if(n.DT&&"[object String]"==Object.prototype.toString.call(s)&&s.length<=10)(s=new Date(s)).setMinutes(s.getMinutes()+s.getTimezoneOffset());else{if(o=!0,n.DT||(s=t.strToDateTime(n.Date),n.Date.length<=10&&(o=!1)),"[object Date]"!=Object.prototype.toString.call(s)&&(s=new Date(s)),i.Date&&this.dataZone&&o){l=new i.Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),this.dataZone),a.V6T(6);var u=a.u$p(17e3,18e3);h=s.getSeconds()*u+s.getMilliseconds(),s=new Date(l.getTime()+h)}t.ChartEngine.isDailyInterval(r)&&s.setHours(0,0,0,0)}n.DT||(n.Date=t.yyyymmddhhmmssmmm(s)),n.DT=s}},t.ChartEngine.prototype.doCleanupGaps=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v=a;if("t","i","c","k",!e||!e.length)return e;function b(e,i){var a,n,s,l,u;for(void 0===(n=(a=r.field)?c[a]:c)&&(n={}),s=o?null:n[g],l=o?null:n.Adj_Close;+e<+i;)u={DT:e},a||(h.push(u),t.extend(u,{Open:s,High:s,Low:s,Close:s,Volume:0,Adj_Close:l})),e=p.next()}if(n=this.layout.interval,r=r||{},i||(i=this.chart),!t.Market||!i.market)return e;if(r.noCleanupDates||this.doCleanupDates(e,n),!1===(s=r.cleanupGaps))return e;function x(e,i){var a,n,s;if("u","ndefine","d",a=r.field)return"undef","ined",void(void 0!==e[a]&&void 0===i[a]&&(i[a]=o?null:e[a]));o||(n=e[g],s=i[g],void 0!==n&&void 0===s&&t.ensureDefaults(i,{Close:n,Open:n,High:n,Low:n,Volume:0,Adj_Close:e.Adj_Close}))}if(s&&!0!==s||(s=this.cleanupGaps||s),v.o7G(100),o=v.l__("gap",s),!s)return e;if("tick"==n)return e;if("month"==n||"week"==n){if("d","a","y",this.dontRoll)return e;n="day"}l=function(e){var i;if(v.I_9(),e.DT){911958722,566160616,i=2;for(var a=1;911958722!==v.p_V(a.toString(),a.toString().length,5040);a++){if("[","object D","a","te]","[object Date]"!=Object.prototype.toString.call(e.DT))return new Date(e.DT);i+=2}return 566160616!==v.j7j(i.toString(),i.toString().length,71423)&&""!==Object.prototype.toString.call(e.DT)?new Date(e.DT):new Date(+e.DT)}return t.strToDateTime(e.Date)},h=[],c=e[0],h.push(c),u={begin:l(c),interval:n,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),g=i.defaultPlotField;for(var S=0;S<e.length&&void 0===e[S][g];S++)if(void 0!==e[S].Value){"Val","ue",g="Value";break}for(var C=1;C<e.length;C++){for(f=e[C],(m=p.next())<(y=l(f))&&(b(m,y),m=p.market._convertFromMarketTZ(p.begin,p.outZone));y<m;){if(++C==e.length)return h;x(c,f),h.push(f),c=f,y=l(f=e[C])}m<y?(C--,m=p.previous()):(x(c,f),h.push(f),c=f)}return h},t.ChartEngine.prototype.getCreatingLibrary=function(){return a.I_9(),e}},P=e=>{var t;(t=e.CIQ).ChartEngine.Panel=function(e,i){this.yAxis=i||new t.ChartEngine.YAxis,a.F__(),this.name=e,this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(e){var t;for(var i in a.F__(),this.panels)if(!(t=this.panels[i]).hidden&&e>=t.top&&e<t.bottom)return t;return null},t.ChartEngine.prototype.panelExists=function(e){for(var t in this.panels)if(this.panels[t].name==e)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var e,t;for(var i in this.layout||(this.layout={}),(e=this.layout).panels={},this.panels)t=this.panels[i],e.panels[t.name]={percent:t.percent,display:t.display,yAxis:t.yAxis}},t.ChartEngine.prototype.savePanels=function(e){this.storePanels(),!1!==e&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(e){var t,i;for(var a in this.layout.studies)(t=this.layout.studies[a]).panel==e.name&&this.cleanupRemovedStudy(t);for(var r in delete this.panels[e.name],this.overlays)this.overlays[r].panel==e.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in this.chart.series)this.chart.series[n].parameters.panel==e.name&&this.removeSeries(this.chart.series[n],this.chart);if(e.holder&&(this.chart.container.removeChild(e.holder),this.getMarkerArray)){"pan","e","l","Name",i=this.getMarkerArray("panelName",e.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}e.handle&&e.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(e){var t,i,r,n;for(var s in a.F__(),t=[],i=e,"object"==typeof e&&(i=e.name),this.layout.studies)i===(r=this.layout.studies[s]).panel&&t.push(r);for(var o in this.chart.seriesRenderers)i===(n=this.chart.seriesRenderers[o]).params.panel&&t.push(n);return t},t.ChartEngine.prototype.checkForEmptyPanel=function(e,t,i){var a,r;if(!e)return!1;if(a=e,"object"==typeof e&&(a=e.name),a===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],r=this.plotsInPanel(e);for(var n=0;n<r.length;n++)if(-1==i.indexOf(r[n]))return!1;return t||this.panelClose(this.panels[a]),!0},t.ChartEngine.prototype.panelClose=function(e){var i;if(e&&!this.runPrepend("panelClose",arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.soloing&&this.panelSolo(e),this.charts[e.name]){for(var r in this.panels)(i=this.panels[r]).chart.name==e.name&&this.privateDeletePanel(i);delete this.charts[e.name]}else this.privateDeletePanel(e);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),a.I_9(),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var e;for(var t in this.panels)e=this.panels[t],this.privateDeletePanel(e);this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(e){var i,r,n,s;for(n in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a.o7G(21),r=a.u$p(0,"0"),this.panels){if(n==e.name)break;r++}if(r){for(n in s=0,this.panels)s==r-1&&(i[e.name]=e),n!=e.name&&(i[n]=this.panels[n],s++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(e){var i,r,n,s,o;for(n in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},r=0,this.panels){if(n==e.name)break;r++}for(n in s=0,this.panels)s++;if(r!=s-1){for(n in o=0,this.panels)n!=e.name?(i[n]=this.panels[n],o==r+1&&(i[e.name]=e),o++):o++;this.panels=i,this.adjustPanelPositions(),a.I_9(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(e){var i,r,n;if(a.I_9(),this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,e.soloing){if("stx_","solo_","li","t",i=!1,e.soloing=!1,e.solo.classList.remove("stx_solo_lit"),e.percent=e.oldPercent,"chart"!=e.name)if(this.soloPanelToFullScreen){if(1==e.percent)for(r in this.panels)(n=this.panels[r])!=e&&(e.percent-=n.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else e.soloing=!0,e.solo.classList.add("stx_solo_lit"),e.oldPercent=e.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=e.name&&(this.soloPanelToFullScreen?this.xAxisAsFooter=!0:(this.chart.panel.oldPercent=this.chart.panel.percent,e.percent=1-this.chart.panel.percent));for(r in this.panels)"c","hart",e!==this.panels[r]&&("chart"!==r||this.soloPanelToFullScreen)&&(this.panels[r].hidden=i);this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(e){var t;a.I_9(),t=e.bottom-e.top,e.percent=t/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var e,i,r,n,s,o,l=a;if(l.F__(),t.ChartEngine.resizingPanel){for(var h in s=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top),this.panels){if(this.panels[h]==t.ChartEngine.resizingPanel)break;this.panels[h].hidden||(e=this.panels[h])}if(o=this.backOutY(t.ChartEngine.crosshairY),s)for(r=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),n=0;n<r.length;n++){l.V6T(58);var c=l.u$p(170,2377,7,14);i=r[n].initialMarginTop+r[n].initialMarginBottom+c,o>r[n].bottom-i&&(o=r[n].bottom-i)}else for(r=e.yaxisLHS.concat(e.yaxisRHS),n=0;n<r.length;n++){l.V6T(59);var u=l.l__(18,80,36,16);i=r[n].initialMarginTop+r[n].initialMarginBottom+u,o<r[n].top+i&&(o=r[n].top+i)}t.ChartEngine.crosshairY=this.resolveY(o),e.bottom=o,t.ChartEngine.resizingPanel.top=o,this.calculatePanelPercent(e),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(e){for(var t in a.F__(),this.panels){if("ch","a","r","t","chart"==t)return!1;if(t==e.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w=a;w.F__(),e="adjustPanelPosi",e+="tions";var{chart:k,panels:T}=this;if(k.tempCanvas&&t.clearCanvas(k.tempCanvas,this),!this.runPrepend(e,arguments)){for(h in i=0,r=k.canvasHeight,n=!1,s=0,o=0,l=!1,T)c=T[h],(isNaN(c.percent)||c.percent<=0)&&(w.V6T(6),c.percent=w.u$p(0,"0.05")),c.hidden||(s+=c.percent,o++,c.soloing&&(l=!0));for(h in T)if(u=0,(c=T[h]).hidden)c.markerHolder&&(c.markerHolder.style.display="none");else{if(this.manageTouchAndMouse&&(c.up&&(n?(p="stx-s",p+="how",this.displayIconsUpDown&&c.up.classList.add(p)):(d="stx-",d+="show",n=!0,c.up.classList.remove(d))),c.solo&&(l?(g="stx-s",g+="h",g+="o",g+="w",c.soloing&&this.displayIconsSolo?c.solo.classList.add("stx-show"):c.solo.classList.remove(g)):1==o?c.solo.classList.remove("stx-show"):2!=o||this.soloPanelToFullScreen?this.displayIconsSolo&&c.solo.classList.add("stx-show"):c.solo.classList.remove("stx-show")),c.down&&(1==o?c.down.classList.remove("stx-show"):this.displayIconsUpDown&&c.down.classList.add("stx-show")),c.edit&&(m="stx-sh",m+="o",m+="w",c.editFunction?c.edit.classList.add(m):c.edit.classList.remove("stx-show")),c.close&&(this.displayIconsClose?c.close.classList.add("stx-show"):c.close.classList.remove("stx-show"))),c.percent=c.percent/s,c.top=i,c.bottom=c.top+r*c.percent,c.height=c.bottom-c.top,c.chart.name==c.name&&(c.chart.top=c.top,c.chart.bottom=c.bottom,c.chart.height=c.height),i=c.bottom,c.yaxisLHS){f=c.yaxisLHS.concat(c.yaxisRHS);for(var D=0;D<f.length;D++)(y=f[D]).zoom&&y.height>0&&(u=y.zoom/y.height),this.adjustYAxisHeightOffset(c,y),y.height=y.bottom-y.top,u&&(y.scroll*=u*y.height/y.zoom,y.zoom=u*y.height,y.zoom>y.height&&(y.zoom=0,y.scroll=0)),y.high||0===y.high||(y.high=100,y.low=0,y.shadow=100),y.multiplier=y.height/y.shadow,"none"===y.position&&this.calculateYAxisMargins(y)}c.holder&&(v="p",v+="x",b="p",b+="x",c.holder.style.right="0px",c.holder.style.top=c.top+b,c.holder.style.left="0px",c.holder.style.height=c.height+v,c.subholder.style.left=c.left+"px",c.subholder.style.width=c.width+"px",c.subholder.style.top="0px",c.yAxis.height>=0&&(c.subholder.style.height=c.yAxis.height+"px"))}if(h&&T[h].down&&T[h].down.classList.remove("stx-show"),this.manageTouchAndMouse&&2==o&&!l&&k.panel.solo&&k.panel.solo.classList.add("stx-show"),k.panel){if(l&&this.soloPanelToFullScreen){w.V6T(17);var _=w.l__(13,133,132);x=k.canvasHeight-c.yAxis.bottom+_}else{w.o7G(46);var A=w.l__(11,1,1);x=k.canvasHeight-k.panel.yAxis.bottom+A}S=this.controls;var{chartControls:M,home:F,notificationTray:P}=S;C=this.width-k.panel.right,M&&(w.o7G(23),M.style.bottom=w.l__(x,"px")),F&&(w.o7G(23),F.style.bottom=w.l__(x,"px"),w.V6T(23),F.style.marginRight=w.l__(C,"px")),P&&(w.o7G(23),P.style.bottom=w.l__(x,"px"),w.o7G(23),P.style.marginRight=w.l__(C,"px"))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},t.ChartEngine.prototype.createPanel=function(e,t,i,r,n,s){var o,l,h,c,u,d=a;if(d.I_9(),!this.runPrepend("createPanel",arguments)){for(var p in r||(r="chart"),o=this.chart.canvasHeight,i||(d.o7G(122),i=d.l__(o,"0.2")),i>o&&(d.V6T(27),i=d.u$p(.5,o)),d.o7G(32),l=d.u$p(i,o),d.o7G(6),h=d.l__(l,1),c=!1,this.panels)(u=this.panels[p]).percent*=h,u.soloing&&(c=!0);return this.stackPanel(e,t,l,r,n),this.panels[t].hidden=c,this.panels[t].exportable=!s,this.calculateYAxisMargins(this.panels[t].yAxis),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[t]}},t.ChartEngine.prototype.modifyPanel=function(e,i){var a,r,n,s,o,l,h,c;a=e.name;var{studies:u}=this.layout,{series:d}=this.chart,{name:p,display:g,yAxis:m}=i||{};for(var f in p||(p=t.uniqueID()),g||(g=p),m||((m=e.yAxis).name=p),r={},this.panels)f===e.name?((n=this.panels[f]).name=p,n.display=g,n.yAxis=m,e=r[p]=n,this.moveMarkers&&a!==p&&this.moveMarkers(a,p)):r[f]=this.panels[f];for(var y in this.panels=r,s=!1,u)(o=u[y]).panel===a&&(o.panel=p,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=p));for(var v in d)d[v].parameters.panel===a&&(s=!0,l={panel:p},d[v].parameters.yAxis&&d[v].parameters.yAxis.name===a&&(l.yAxis=m),this.modifySeries(v,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var b=0;b<this.drawingObjects.length;b++)a===(c=this.drawingObjects[b]).panelName&&(c.panelName=p,h=!0);h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(e,t){var i,r,n,s,o=a;if(t){Object.values(this.panels).slice(-1)[0]===e&&(t+=this.xaxisHeight);var{canvasHeight:l}=this.chart,{percent:h}=e;o.o7G(32),i=o.l__(t,l),o.V6T(60),r=o.u$p("1",0,h),o.V6T(6),n=o.l__(i,1),o.o7G(32),o.F__(),s=o.l__(r,n),Object.values(this.panels).forEach((e=>{e.percent/=s})),e.percent=i,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(e,i){var r,n,s,o,l,h,c,u,d=a;if("string"==typeof e&&(e=this.panels[e]),n=e.yAxis,e&&e!=this.chart.panel){if((o=(s=e.yAxis).studies[0])&&o!=n.name||(o=s.renderers[0]),o&&o!=n.name||(o=s.studies[1]),o||(d.o7G(19),o=s.renderers[d.u$p(64,"1")]),i)s=e.yAxis=i,r=i.name;else if(o)(s=this.addYAxis(e,new t.ChartEngine.YAxis({name:o,position:s.position}))).renderers=e.yAxis.renderers,s.studies=e.yAxis.studies,r=o;else if(e.yaxisLHS){l=e.yaxisRHS.concat(e.yaxisLHS).filter((function(e){return e.name!=n.name})),d.V6T(20),h=l[d.u$p("0",0)];for(var p=0;p<l.length;p++)if(!l[p].position){h=l[p];break}h&&(s=e.yAxis=h,r=h.studies[0]||h.renderers[0])}r?(o=r,n.name!=e.name&&(o=e.name),(u=this.layout.studies)&&u[r]&&(c=u[r].inputs.display),this.modifyPanel(e,{name:o,display:c||r,yAxis:s}),this.deleteYAxisIfUnused(e,n),this.panels[o].yAxis.lockScale||this.calculateYAxisMargins(this.panels[o].yAxis)):this.checkForEmptyPanel(e)}return r},t.ChartEngine.prototype.configurePanelControls=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f=a;(".st","x-ico-c","l","ose",".st","x-ico-edit",".","stx-ico-focus","i","consTe","m","plate","stx","-sho","w",i=e.icons)&&(r=e.name==e.chart.name,i.classList.add("stx-show"),i.classList.remove("iconsTemplate"),e.title=i.querySelector(".stx-panel-title"),f.F__(),e.up=i.querySelector(".stx-ico-up"),e.up&&(e.up=e.up.parentNode),e.solo=i.querySelector(".stx-ico-focus"),e.solo&&(e.solo=e.solo.parentNode),e.down=i.querySelector(".stx-ico-down"),e.down&&(e.down=e.down.parentNode),e.edit=i.querySelector(".stx-ico-edit"),e.edit&&(e.edit=e.edit.parentNode),e.close=i.querySelector(".stx-ico-close"),e.close&&(e.close=e.close.parentNode),e.title&&(e.title.innerHTML="",e.display&&e.title.appendChild(document.createTextNode(e.display)),r&&(e.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),t.touchDevice&&!t.isSurface||this.makeModal(i),e.handle&&("touch","start",t.touchDevice&&!t.isSurface||(e.handle.onmouseover=(o=this,function(){o.hideCrosshairs()})),t.touchDevice&&!t.isSurface||(e.handle.onmouseout=(s=this,function(){s.showCrosshairs()})),n=function(e,i){return f.F__(),function(a){f.F__(),t.ChartEngine.resizingPanel||""!==e.openDialog||e.grabHandle(i)}},t.isSurface?e.handle.onpointerdown=n(this,e):e.handle.onmousedown=n(this,e),t.touchDevice&&e.handle.addEventListener("touchstart",n(this,e),{passive:!1})),e.up&&t.safeClickTouch(e.up,(l=this,h=e,function(){l.panelUp(h)})),e.down&&t.safeClickTouch(e.down,(c=this,u=e,function(){c.panelDown(u)})),e.solo&&t.safeClickTouch(e.solo,(d=this,p=e,function(){d.panelSolo(p)})),e.close&&("chart"==e.name?("n","o","n","e",e.close.style.display="none"):t.safeClickTouch(e.close,(g=this,m=e,f.F__(),function(){g.panelClose(m)}))))},t.ChartEngine.prototype.stackPanel=function(e,i,r,n,s){var o,l,h,c,u,d,p,g,m;o="stx",o+="-pan",o+="el-s",o+="tudy",l="stx-sub",l+="ho",l+="lder",h="d",h+="i",h+="v",c="d",c+="i",c+="v",this.runPrepend("stackPanel",arguments)||(n||(n="chart"),u=this.charts[n],a.V6T(100),(d=a.u$p(n,i))&&(e=u.symbol,u.symbolDisplay&&(e=u.symbolDisplay),s||(s=u.yAxis)),p=this.panels[i]=new t.ChartEngine.Panel(i,s),!d&&u.yAxis&&p.yAxis.position==u.yAxis.position&&(p.yAxis.width=u.yAxis.width),d&&!u.panel&&(u.panel=p),p.percent=r,a.I_9(),p.chart=u,p.display=e,p.holder=t.newChild(this.container,c,"stx-holder"),p.subholder=t.newChild(p.holder,h,l),p.subholder.style.zIndex=1,p.holder.panel=p,g=d?"stx-panel-chart":o,p.holder.classList.add(g),this.controls.handleTemplate&&this.manageTouchAndMouse&&(m="h",m+="andleTempl",m+="ate",p.handle=this.controls.handleTemplate.cloneNode(!0),p.handle.classList.remove(m),this.container.appendChild(p.handle),p.handle.panel=p),this.controls.iconsTemplate&&(p.icons=this.controls.iconsTemplate.cloneNode(!0),p.subholder.appendChild(p.icons),this.configurePanelControls(p)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(e,i){e.editFunction=i,e.edit&&t.safeClickTouch(e.edit,i),a.I_9(),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,g,m;if(!this.runPrepend("drawPanels",arguments)){for(var f in e=!1,this.panels)t="s",t+="egmen",t+="t",i="stx-sh",i+="o",i+="w",(a=this.panels[f]).state={},r=this.translateIf(a.display),a.title&&a.title.textContent!=r&&(a.title.innerHTML="",a.title.appendChild(document.createTextNode(r))),a.icons&&a.icons.classList.add(i),a.hidden?(a.icons&&a.icons.classList.remove("stx-show"),a.handle&&(a.handle.style.display="none"),a.holder.style.display="none"):(n="ch",n+="ar",n+="t",a.name!=n&&(s="no",s+="n",s+="e",o="n",o+="o",o+="n",o+="e",l="n",l+="o",l+="n",l+="e",h="no",h+="ne",c=this.manageTouchAndMouse,a.up&&(a.up.style.display=this.displayIconsUpDown&&c?"":h),a.down&&(a.down.style.display=this.displayIconsUpDown&&c?"":l),a.solo&&(a.solo.style.display=this.displayIconsSolo&&c?"":o),a.close&&(a.close.style.display=this.displayIconsClose&&c?"":"none"),a.edit&&(a.edit.style.display=a.editFunction&&c?"":s)),a.holder.style.display="block",a.displayEdgeIfPadded&&(u=Math.round(a.left)+.5,d=a.yAxis.top-.5,p=a.yAxis.bottom+.5,a.yaxisCalculatedPaddingLeft&&!a.yaxisTotalWidthLeft&&this.plotLine(u,u,d,p,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1}),u=Math.round(a.right)+.5,a.yaxisCalculatedPaddingRight&&!a.yaxisTotalWidthRight&&this.plotLine(u,u,d,p,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),e?(m=a.top,m=Math.round(m)+.5,this.plotLine(a.left-.5,a.right+.5,m,m,this.canvasStyle("stx_panel_border"),t,this.chart.context,!1,{}),a.handle&&(this.displayPanelResize?a.handle.style.display="":a.handle.style.display="none",a.handle.style.top=m-a.handle.offsetHeight/2+"px")):(g="n",g+="o",g+="n",g+="e",a.handle&&(a.handle.style.display=g),e=!0));this.runAppend("drawPanels",arguments)}}},L=e=>{var t;(t=e.CIQ).ChartEngine.isDailyInterval=function(e){return"day"==e||("week"==e||"month"==e)},t.ChartEngine.prototype.setPeriodicity=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=a;function S(){l.dispatch("periodicity",h),i&&i(null)}if(r="la",r+="y",r+="o",r+="ut",n="ob",n+="jec",x.I_9(),n+="t",!this.runPrepend("setPeriodicity",arguments)){if(typeof arguments[0]!==n){e={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},x.o7G(123);var C=x.u$p(1,3,0,9,3);i=arguments[arguments.length-C],3===arguments.length&&(e.timeUnit=void 0)}var{period:w,interval:k,timeUnit:T}=e;"function"!=typeof i&&(i=null),({period:w,interval:k,timeUnit:T}=t.cleanPeriodicity(w,k,T));var{layout:D}=this;D.setSpan={},D.range={},this.chart.inflectionPoint=null,s=!1,this.chart.symbol&&(s=this.needDifferentData({period:w,interval:k,timeUnit:T}));var{candleWidth:_,periodicity:A,interval:M,timeUnit:F}=D;if(o={prvPeriodicity:A,prvInterval:M,prvTimeUnit:F},D.periodicity=w,D.interval=k,D.timeUnit=T,h={stx:l=this,differentData:s,prevPeriodicity:o},s){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var P in this.charts)(c=this.charts[P]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:c.symbol,symbolObject:c.symbolObject,chart:c},S):this.loadChart(c.symbol,{chart:c},S));else this.dataCallback?(this.dataCallback(),S()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home()}else{for(var L in this.charts){u=this.charts[L];var{dataSegment:O,dataSet:E,maxTicks:I,scroll:N}=u;if(d=O?O.length:0,p=E?E.length:0,g=void 0,m=Math.round(u.maxTicks/2),this.setCandleWidth(_,u),f=!0,y=!1,N<=I?f=!1:O&&!O[m]&&(f=!1,x.V6T(6),y=x.l__(p,N)),f&&d>0&&(I<(Math.round(this.chart.width/_-.499)-1)/2&&(x.o7G(6),m=x.u$p(1,d)),m>=d?(g=O[d-1].DT,x.V6T(6),m=x.l__(1,d)):g=O[m].DT),this.createDataSet(),f){if(d>0)for(var H=p-1;H>=0;H--)if(E[H].DT.getTime()<g.getTime()){x.o7G(48),u.scroll=x.l__(H,p,m,1);break}}else y?u.scroll=E.length+y:(v=Math.round(this.preferences.whitespace/_),x.o7G(60),u.scroll=x.u$p(I,v,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred(r),this.quoteDriver)for(var V in this.charts)!(b=this.charts[V]).symbol||!b.moreAvailable&&b.upToDate||this.quoteDriver.checkLoadMore(b);S(),this.runAppend("setPeriodicity",arguments)}}},t.ChartEngine.prototype.needDifferentData=function(e){var i,r,n,s,o;i=this.layout,r=t.ChartEngine.isDailyInterval(e.interval),n=t.ChartEngine.isDailyInterval(i.interval),s=2;for(var l=1;1390175296!==a.j7j(l.toString(),l.toString().length,25036);l++)o=!1,s+=2;return 1551433410!==a.p_V(s.toString(),s.toString().length,88439)&&(o=!0),this.dontRoll||!n?i.interval!=e.interval&&(o=!0):r!=n&&(o=!0),r||e.timeUnit||(e.timeUnit="minute"),n||i.timeUnit||(i.timeUnit="minute"),e.timeUnit!=i.timeUnit&&(o=!0),this.masterData&&this.masterData.length||(o=!0),o},t.ChartEngine.prototype.getPeriodicity=function(){var e,t,i;return a.I_9(),t=(e=this.layout).interval,(i=e.timeUnit)||(i=t,t=1),{period:e.periodicity,interval:t,timeUnit:i}}},O=e=>{var t,i=a;(t=e.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var e,a,r,n,s,o;return e=new Date,a=!0,r=this.masterData,!!this.isHistoricalModeSet&&(r.length&&("D","T",n=this.getFirstLastDataRecord(r,"DT",!0),(a=((s=this.standardMarketIterator(n.DT))?s.next():n.DT)<=e)&&t.ChartEngine.isDailyInterval(s.interval)&&(o=this.chart.market.getOpen())&&e<o&&(i.V6T(27),e.setHours(0,0,i.l__(1,"0"),0),+e==+s.begin&&(a=!1))),a)},t.ChartEngine.prototype.isHome=function(){var e,t,a;t=(e=this.chart).dataSet,a=e.animatingHorizontalScroll,i.F__(),i.V6T(124);var r=i.l__(30,5,4,18);return this.pixelFromTick(t.length-(a?2:r),e)<e.width+e.panel.left},t.ChartEngine.prototype.getPreviousBar=function(e,t,i){return this.getNextBarInternal(e,t,i,-1)},t.ChartEngine.prototype.getNextBar=function(e,t,i){return this.getNextBarInternal(e,t,i,1)},i.I_9(),t.ChartEngine.prototype.getNextBarInternal=function(e,a,r,n){var s,o,l,h;if(s=e.dataSegment&&e.dataSegment[r],i.I_9(),s)for(o=s.tick;o>0&&o<e.dataSet.length;)if(i.o7G(23),o=i.u$p(o,n),(l=e.dataSet[o])&&(h=t.existsInObjectChain(l,a))&&h.obj[h.member])return l;return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(e,t,a){var r;if(e&&e.length)for(r=a?e.length-1:0;r>=0&&r<e.length;){if(e[r]&&void 0!==e[r][t])return e[r];a?r--:r++}return i.F__(),null},t.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(e,t,a){var r;return t||(t=1),!1!==a&&(a=!0),(r=this.standardMarketIterator(e,a?this.dataZone:this.displayZone))?t<1?(i.o7G(22),r.previous(i.l__(t,1))):r.next(t):e},t.ChartEngine.prototype.standardMarketIterator=function(e,t,i){var a,r;return"t","i","c","k",(a=i||this.chart).market?(r={begin:e,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:t},a.market.newIterator(r)):null}},E=e=>{var t,i,r=a;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.draw=function(e){var i,a,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(i="d",i+="ra",i+="w",a="o",a+="verlay",n="Studies.display",n+="Studies",s="Studi",s+="es.displayS",s+="tu",s+="dies",o="u",o+="nde",o+="rlay",this.debug(),!this.destroyed&&(l=this.chart,h=this.layout,l.canvas&&l.dataSet&&l.canvasHeight)){r.V6T(6);var b=r.l__(12,14);if(this.offset=h.candleWidth*this.candleWidthPercent/b,t.clearCanvas(l.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(l),d=this.createXAxis(l),this.initializeDisplay(l),this.drawXAxis(l,d);try{this.renderYAxis(l)}catch(e){if(e&&"reboot draw"===e.message)return this.draw();throw e}for(c in this.currentHRParams=this.getCurrentHRParams(),this.drawCurrentPriceLine(),l.tmpWidth=Math.floor(h.candleWidth*this.candleWidthPercent),l.tmpWidth%2==0&&(l.tmpWidth+=1,l.tmpWidth>h.candleWidth&&(l.tmpWidth-=2)),l.tmpWidth<.5&&(l.tmpWidth=.5),this.plugins)(u=this.plugins[c]).display&&u.drawUnder&&u.drawUnder(this,l);for(c in l.legend&&(l.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(l,o),t.getFn(s)(this,l,!0),this.displayChart(l),t.getFn(n)(this,l,!1),this.rendererAction(l,a),l.legend&&l.legend.colorMap&&l.legendRenderer&&l.legendRenderer(this,{chart:l,legendColorMap:l.legend.colorMap,coordinates:{x:l.legend.x,y:l.legend.y+l.panel.yAxis.top}}),this.plugins)(u=this.plugins[c]).display&&u.drawOver&&u.drawOver(this,l);for(var x in this.panels)this.panels[x].hidden||this.plotYAxisText(this.panels[x]);for(var S=0;S<this.yAxisLabels.length;S++)p="s",p+="er",p+="ies",(g=this.yAxisLabels[S]).src==p&&g.args[6]&&!1===g.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,g.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.currentHRParams=null,this.displayInitialized=!0,(m=this.controls)&&(f=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),m.home&&(m.home.style.display=f&&!this.isHome()?"block":"none"),m.chartControls&&(y="blo",y+="ck",v="bl",v+="oc",v+="k",m.chartControls.style.display=this.manageTouchAndMouse&&"hidden"!==m.chartControls.style.visibility?v:"none",m.chartControls.style.display===y&&t.efficientDOMUpdate(m.chartControls.style,"left",l.left+l.width/2+"px"))),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(l),this.runAppend(i,arguments),this.makeAsyncCallbacks()}}},t.ChartEngine.prototype.setSeriesRenderer=function(e){var{baseline:t,name:i,panel:a,yAxis:r}=e.params;return this.chart.seriesRenderers[i]?this.chart.seriesRenderers[i]:(r&&(e.params.yAxis=this.addYAxis(this.panels[a],r),this.resizeChart()),e.stx=this,this.chart.seriesRenderers[i]=e,t&&this.registerBaselineToHelper(e),e)},t.ChartEngine.prototype.setMainSeriesRenderer=function(e){var i,a,n;var{chartType:s,aggregationType:o}=this.layout,{chart:l}=this,{custom:h}=l;i=this.mainSeriesRenderer,a=this.displayInitialized,i&&(e&&this.setMasterData(),this.displayInitialized=!1,i.removeAllSeries(),this.removeSeriesRenderer(i),i=this.mainSeriesRenderer=null),h&&h.chartType&&(s=h.chartType),"none"!=s&&(o&&"ohlc"!=o&&(s=o),(n=t.Renderer.produce(s,{panel:l.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(n).attachSeries(null,{display:l.symbol}),i=this.mainSeriesRenderer=n),this.displayInitialized=a,["highLowBars","standaloneBars","barsHaveWidth"].forEach(function(e){var t;t=2;for(var i=1;-1637027857!==r.p_V(i.toString(),i.toString().length,95273);i++)l[e]=this.mainSeriesRenderer||this.mainSeriesRenderer[e],t+=2;-1744474383!==r.j7j(t.toString(),t.toString().length,17308)&&(l[e]=this.mainSeriesRenderer||this.mainSeriesRenderer[e]),l[e]=this.mainSeriesRenderer&&this.mainSeriesRenderer[e]}.bind(this)))},t.ChartEngine.prototype.removeSeriesRenderer=function(e){var t,i;r.F__();var{baseline:a,name:n}=e.params;if(t=this.controls[`${n} baseline-handle`],a&&(this.removeBaselineFromHelper(e),t)){this.container.removeChild(t),-1032502872,530675982,i=2;for(var s=1;-1032502872!==r.p_V(s.toString(),s.toString().length,63736);s++)this.controls[t],i+=2;530675982!==r.j7j(i.toString(),i.toString().length,26774)&&delete this.controls[t]}delete this.chart.seriesRenderers[n]},t.ChartEngine.prototype.getSeriesRenderer=function(e){return this.chart.seriesRenderers[e]},t.ChartEngine.prototype.getRendererFromSeries=function(e){var t;for(var i in t=this.chart.seriesRenderers,r.I_9(),t)for(var a in t[i].seriesParams)if(t[i].seriesParams[a].id==e)return t[i];return null},t.ChartEngine.prototype.startClip=function(e,t){var i,a,r,n,s;e||(e=this.chart.panel.name),a=(i=this.panels[e]).yAxis,(r=this.chart).context.save(),r.context.beginPath(),n=i.left,s=i.width,t?(n=0,s=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(n++,s--),r.context.rect(n,a.top,s,a.height),r.context.clip()},r.I_9(),t.ChartEngine.prototype.endClip=function(){r.F__(),this.chart.context.restore()},t.ChartEngine.prototype.setLineStyle=function(e,i){var a,n,s;if(a={},e&&"object"==typeof e){1832456338,-948379421,n=2;for(var o=1;1832456338!==r.p_V(o.toString(),o.toString().length,66238);o++)a=e,n+=2;-948379421!==r.j7j(n.toString(),n.toString().length,2026)&&(a=e),a=e}else a.color=e;a.color||a.pattern||a.width||a.baseColor||(a=null),i||(i=this.chart),s=1,a&&a.width&&(s=a.width),a&&a.pattern&&(a.pattern=t.borderPatternToArray(s,a.pattern)),i.lineStyle=a},t.ChartEngine.prototype.setGapLines=function(e,i){var a,n;a=2;for(var s=1;675670786!==r.p_V(s.toString(),s.toString().length,47157);s++)i||(i=this.chart),a+=2;if(356727486!==r.j7j(a.toString(),a.toString().length,12588)&&~i&&(i=this.chart),n={},e&&"object"==typeof e)n=e;else{if("boolean"==typeof e)return i.gaplines=e;n.color=e}n.color||n.pattern||n.fillMountain||(n=null),n&&n.pattern&&(n.pattern=t.borderPatternToArray(n.width,n.pattern)),n&&n.width<=0&&(n.width=null),i.gaplines=n},t.ChartEngine.prototype.getGapColorFunction=function(e,t,i,a,n){return r.I_9(),"object"!=typeof i&&(i={color:i}),function(s,o,l){var h,c;return r.F__(),(h=n?n(s,o,l):i).color&&(h=h.color),(c=o[e])||0===c||(c=o[t]),l||!c&&0!==c?a?("object"!=typeof a&&(a="string"==typeof a?{color:a}:{}),{color:a.color||h,pattern:a.pattern||i.pattern,width:a.width||i.width}):null:{color:h,pattern:i.pattern,width:i.width}}},t.ChartEngine.prototype.drawLineChart=function(e,i,a,n){var s,o,l,h,c,u,d,p,g,m,f;return"Clo","se",o=(s=this.chart).context,l=s.lineStyle||{},h=this.canvasStyle(i),n||(n={}),this.startClip(e.name),(c=n.width||l.width||h.width)&&parseInt(c,10)<=25?o.lineWidth=Math.max(1,t.stripPX(c)):(r.V6T(20),o.lineWidth=r.l__("1",1)),n.pattern=n.pattern||l.pattern||h.borderTopStyle,n.pattern=t.borderPatternToArray(o.lineWidth,n.pattern),this.canvasColor(i),u=n.color||l.color,r.F__(),u&&("a","ut","o","auto"==u&&(u=this.defaultColor),n.opacity&&1!==n.opacity&&(u=t.hexToRgba(t.colorToHex(u),parseFloat(n.opacity))),o.strokeStyle=u),n.skipProjections=!0,d=n.field||s.defaultPlotField,p=n.subField||s.defaultPlotField||"Close",(g=n.gapDisplayStyle)||!1===g||(g=n.gaps),g||!1===g||(g=s.gaplines),g||(g="transparent"),n.gapDisplayStyle=g,m=this.getGapColorFunction(d,p,{color:o.strokeStyle,pattern:n.pattern,width:o.lineWidth},g,a),e.chart.tension&&(n.tension=e.chart.tension),(f=this.plotDataSegmentAsLine(d,e,n,m)).colors.length||f.colors.push(o.strokeStyle),o.lineWidth=1,this.endClip(),n.returnObject?f:f.colors},t.ChartEngine.prototype.drawChannelChart=function(e,i,a){var n,s,o,l,h,c,u,d,p,g;for("Cl","os","e","sub","Fi","el","d","f","i","el","d","subFi","e","ld",(n=Object.assign({},a)).color=a.color,s=this.drawLineChart(e,n.style,i,n),o=n.border_color_up||this.getCanvasColor("stx_channel_up"),l=n.border_color_down||this.getCanvasColor("stx_channel_down"),n[a.field?"subField":"field"]=n.field_high||"High",n.color=o,h=this.drawLineChart(e,n.style,i,n),n[a.field?"subField":"field"]=n.field_low||"Low",n.color=l,c=this.drawLineChart(e,n.style,i,n),n[a.field?"subField":"field"]=a.subField||this.chart.defaultPlotField||"Close",d=[],p=[],u=0;u<h.points.length;u+=2)d.push([h.points[u],h.points[u+1]]);for(u=0;u<c.points.length;u+=2)p.push([c.points[u],c.points[u+1]]);r.o7G(17);var m=r.u$p(17,15,0);for(g=this.chart.context.lineWidth/m,u=s.points.length-2;u>=0;u-=2)d.push([s.points[u],s.points[u+1]-g]),p.push([s.points[u],s.points[u+1]+g]);return this.startClip(e.name),n.color=o,t.fillArea(this,d,n),n.color=l,t.fillArea(this,p,n),r.F__(),this.endClip(),s.colors=s.colors.concat(h.colors).concat(c.colors),a.returnObject?s:s.colors},t.ChartEngine.prototype.connectTheDots=function(e,i,a,n,s,o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_;if("undefin","ed",r.I_9(),o||(o={}),"none"!=o.pattern&&(!0===s&&(s=this.chart.panel),null==n&&(n=this.chart.context),!(e.length<4))){if(r.o7G(27),l=r.u$p(1,"0"),h=this.chart.canvasHeight,0,c=this.chart.width,s&&(h=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,"object"==typeof i)n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:n.globalAlpha=1,n.lineWidth=t.stripPX(i.width);else if(!i||"auto"==i||t.isTransparent(i))n.strokeStyle=this.defaultColor;else{-1072358650,-1253861109,u=2;for(var A=1;-1072358650!==r.j7j(A.toString(),A.toString().length,89018);A++)n.strokeStyle=i,u+=2;-1253861109!==r.j7j(u.toString(),u.toString().length,9851)&&(n.strokeStyle=i)}o.opacity&&(n.globalAlpha=o.opacity),o.lineWidth&&(n.lineWidth=o.lineWidth),d=t.borderPatternToArray(n.lineWidth,o.pattern),n.beginPath();for(var M=0;M<e.length-2;M+=2){if(p=e[M],r.V6T(23),g=e[r.l__(M,1)],r.V6T(23),m=e[r.u$p(M,2)],r.V6T(23),f=e[r.u$p(M,3)],isNaN(p)||isNaN(m)||isNaN(g)||isNaN(f))return;y=0,v=1,r.V6T(6),b=r.u$p(p,m),r.o7G(6),x=r.l__(g,f);for(var F=0;F<4;F++){if(0===F&&(S=-b,r.o7G(6),C=-r.l__(p,0)),1==F&&(S=b,r.V6T(6),C=r.u$p(p,c)),2==F&&(S=-x,r.o7G(6),C=-r.u$p(g,l)),3==F&&(S=x,r.V6T(6),C=r.u$p(g,h)),r.V6T(32),w=r.u$p(C,S),(f||0===f)&&0===S&&C<0)return!1;if(S<0){if(w>v)return!1;w>y&&(y=w)}else if(S>0){if(w<y)return!1;w<v&&(v=w)}}r.V6T(125),k=r.l__(b,y,p),r.V6T(125),T=r.u$p(x,y,g),r.o7G(125),D=r.l__(b,v,p),r.V6T(125),_=r.l__(x,v,g);try{n.setLineDash(d&&d.length?d:[]),n.moveTo(k,T),n.lineTo(D,_)}catch(e){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},t.ChartEngine.prototype.plotSpline=function(e,a,r,n,s,o,l){var h;l||(l={}),"none"!=l.pattern&&(!0===o&&(o=this.chart.panel),null==s&&(s=this.chart.context),s.save(),s.lineWidth=1.1,"object"==typeof r?(s.strokeStyle=r.color,r.opacity?s.globalAlpha=r.opacity:s.globalAlpha=1,s.lineWidth=t.stripPX(r.width)):!r||"auto"==r||t.isTransparent(r)?s.strokeStyle=this.defaultColor:s.strokeStyle=r,l.opacity&&(s.globalAlpha=l.opacity),l.lineWidth&&(s.lineWidth=l.lineWidth),h=t.borderPatternToArray(s.lineWidth,l.pattern),l.pattern&&s.setLineDash&&(s.setLineDash(h),s.lineDashOffset=0),s.beginPath(),i.plotSpline(e,a,s),s.stroke(),s.closePath(),s.restore())},t.ChartEngine.prototype.rawWatermark=function(e,t,i,a){this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,e.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",e.fillText(a,t,i),e.globalAlpha=1},t.ChartEngine.prototype.watermark=function(e,t){var i,a,n,s,o,l;if(i="l",i+="ef",i+="t",a="o",a+="b",a+="jec",a+="t",t&&typeof t!=a&&(t={h:arguments[1],v:arguments[2],text:arguments[3]}),(n=(t={h:t.h||i,v:t.v||"bottom",text:t.text||"",hOffset:0==t.hOffset?0:t.hOffset||10,vOffset:0==t.vOffset?0:t.vOffset||20,context:t.context||this.chart.context}).context)&&(s=this.panels[e])&&!s.hidden){if(o=s.yAxis.bottom-t.vOffset,"top"==t.v)o=s.top+t.vOffset;else if("middle"==t.v){r.o7G(6);var h=r.u$p(26,28);o=(s.top+s.yAxis.bottom)/h}if(n.save(),this.canvasFont("stx_watermark",n),this.canvasColor("stx_watermark",n),n.textBaseline="alphabetic",l=s.left+t.hOffset,"right"==t.h)l=s.right-t.hOffset;else if("center"==t.h){r.V6T(5);var c=r.u$p(19,6,15,0);l=(s.right+s.left-n.measureText(t.text).width)/c}n.globalAlpha=.5,this.highlightedDraggable&&(n.globalAlpha*=.3),n.fillText(t.text,l,o),n.restore()}},t.ChartEngine.prototype.displayErrorAsWatermark=function(e,t){var i,a,n,s,o,l,h,c,u,d;r.F__(),t&&(e||(e="chart"),(i=this.panels[e])&&!i.hidden&&((a=i.state)||(i.state=a={}),(n=a.studyErrors)||(a.studyErrors=n=new Set),n.has(t)||(s=a.watermarkOffset||10,10,o=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(l=i.yAxis.bottom,h=this.chart.chartControls,r.V6T(6),c=r.u$p(s,l),r.o7G(6),u=r.l__(o,c),(c>h.offsetTop&&c<h.offsetTop+h.offsetHeight||u>h.offsetTop&&u<h.offsetTop+h.offsetHeight)&&(s=l-h.offsetTop+10)),n.add(t),d={h:"center",v:"bottom",text:t,vOffset:s},r.o7G(23),s+=r.u$p(o,10),a.watermarkOffset=s,this.watermark(e,d))))},t.ChartEngine.prototype.displayChart=function(e){var t,i;t="m",t+="a",t+="in",i="d",i+="is",i+="playCh",i+="art",this.runPrepend(i,arguments)||(this.rendererAction(e,t),this.runAppend("displayChart",arguments))}},I=e=>{var t;(t=e.CIQ).ChartEngine.prototype.cloneStyle=function(e){var i,r,n,s,o,l,h;function c(e){return e[1].toUpperCase()}for(var u in a.F__(),i={},r=!1,e)if(n=e[u],"backgroundAttachment"==u&&(r=!0),r)n&&n.constructor==String&&isNaN(u)&&(i[u]=n);else if(isNaN(u))i[u.replace(t.camelCaseRegExp,c)]=n;else if(s=e.getPropertyValue(n)){for(o=0,l=(n=n.split("-")).length,h=n[0];++o<l;)h+=n[o].charAt(0).toUpperCase()+n[o].slice(1);i[h]=s}return i},t.ChartEngine.prototype.canvasStyle=function(e){var t,i,r;return a.I_9(),(t=this.styles[e])||((i=document.createElement("div")).className=e,this.container.appendChild(i),r=getComputedStyle(i),t=this.styles[e]=this.cloneStyle(r),this.container.removeChild(i),r||(this.styles[e]=null)),t},t.ChartEngine.prototype.colorOrStyle=function(e){return-1!=e.indexOf("#")||-1!=e.indexOf("(")||"transparent"==e?e:(a.I_9(),this.canvasStyle(e))},t.ChartEngine.prototype.clearStyles=function(){this.styles={},a.F__(),this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(e,i,a){this.styles[e]||this.canvasStyle(e),this.styles[e]||(this.styles[e]={}),this.styles[e][t.makeCamelCase(i)]=a},t.ChartEngine.prototype.canvasFont=function(e,t){var i,r,n=a;if("u","nd","efi","ned",t||(t=this.chart.context),i=this.canvasStyle(e)){n.V6T(23);n.l__(3715,20);n.V6T(126);var s=n.u$p(5423,773,6,773,8);n.o7G(56);n.u$p(137422,9816,15,11);n.o7G(127);n.u$p(9,8217,11,2048,256);n.V6T(4);n.l__(19,8782,158058);n.V6T(128);n.u$p(1,1,79,8,7);n.V6T(53);var o=n.u$p(9,8,270572,30296);n.o7G(60);var l=n.u$p(58478,12,50112);n.V6T(117);var h=n.u$p(14,6,5,18);-1==(r=i.fontStyle+(5270!==s?" ":44.15)+i.fontWeight+(174.95===o?905.74!==l||"377.90"*h:" ")+i.fontSize+" "+i.fontFamily).indexOf("undefined")?t.font=r:("bad css"," style for"," class ",this.styles[e]=null,n.V6T(23),console.log(n.u$p("bad css style for class ",e)))}},t.ChartEngine.prototype.canvasColor=function(e,t){var i,r,n;t||(t=this.chart.context),(i=this.canvasStyle(e))&&((r=i.color)||(r=this.defaultColor),t.globalAlpha=1,t.fillStyle=r,t.strokeStyle=r,n=i.opacity,a.I_9(),void 0!==n&&(t.globalAlpha=n))},t.ChartEngine.prototype.getCanvasFontSize=function(e){var i;return"1",a.F__(),"2",(i=this.canvasStyle(e).fontSize)||(i="12"),parseInt(t.stripPX(i),10)},t.ChartEngine.prototype.getCanvasColor=function(e){return a.F__(),this.canvasStyle(e).color},t.ChartEngine.prototype.getDefaultColor=function(){var e,i,a,r;for(this.defaultColor="#000000",e=null,i=this.chart.container;!e||t.isTransparent(e);){if(!(a=getComputedStyle(i)))return;if(e=a.backgroundColor,t.isTransparent(e)&&(e="transparent"),!(i=i.parentNode)||!i.tagName)break}e?("transparent"==e&&(e="#FFFFFF"),this.containerColor=e,t.isTransparent(e)?this.defaultColor="#000000":("#0","0","0000",r=t.hsv(e)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):this.containerColor="#FFFFFF"}},N=e=>{var t;(t=e.CIQ).ChartEngine.XAxis=function(e){for(var t in a.F__(),e)this[t]=e[t]},t.ChartEngine.XAxis.setPropertiesForInterval={year:(e,t,i,a)=>{e.level=Number(e.raw)%5==0?0:1},month:(e,i,r,n)=>{var s,o;if(s=Number(e.raw),o=i.DT.getFullYear(),e.level=0===s?o%5==0?0:1:s%3==0?2:3,a.I_9(),e.text=t.monthAsDisplay(s,!1,n),"boundary"===e.grid){" ","'",e.boundaryOnlyText=s?e.text:o.toString(),a.o7G(17);var l=a.u$p(19,21,4);e.text+=" '"+o.toString().substring(l),s||(e.alwaysAsBoundary=!0)}},week:null,day:(e,i,r,n)=>{var s,o,l,h,c,u,d=a;if(o=(s=i.DT).getDay(),l=s.getDate(),h=s.getMonth(),c=s.getFullYear(),"boundary"===e.grid){if(r&&r.isFirstMarketDayOfMonth(s))return u=t.monthAsDisplay(h,!1,n),d.o7G(129),e.text=d.u$p(c,100," '",u),e.boundaryOnlyText=h?u:c.toString(),e.alwaysAsBoundary=!0,void(e.level=h?h%3==0?1:2:0);n.internationalizer?e.text=n.internationalizer.monthDay.format(s):(d.V6T(75),e.text=d.l__(l,1,h,"/"))}d.F__(),r&&r.isFirstMarketDayOfWeek(s)||!r&&0===o?e.level=4:o>0?e.level=6:(d.V6T(6),e.level=d.u$p(0,"7"))},minute:(e,i,r,n)=>{var s,o,l;s=i.DT,o=Number(e.raw)+(e.marketOpenOffset||0),l=[720,360,120,60,30,15,5],e.level=l.length;for(var h=0;h<l.length;h++)if(o%l[h]==0){e.level=h;break}if(e.text=t.timeAsDisplay(i.DT,n,t.MINUTE),"boundary"===e.grid&&0===o)if(e.alwaysAsBoundary=!0,n.internationalizer)e.text=n.internationalizer.monthDay.format(s);else{a.V6T(130);var c=a.u$p(3,13,2,13);e.text=s.getMonth()+("1"|c)+"/"+s.getDate()}},second:(e,i,r,n)=>{var s,o,l=a;s=[30,15,5],e.level=s.length;for(var h=0;h<s.length;h++)if(Number(e.raw)%s[h]==0){e.level=h;break}l.o7G(42);var c=l.l__(2469,9,9);l.V6T(17);l.l__(4,3,0);l.V6T(6);l.l__(12,2612);l.o7G(23);var u=l.l__(730,2);l.V6T(2);var d=l.u$p(94240,15,5889,94225);if(e.text=e.raw+(44.15!=c?"s":586>=u?870.47:d),"boundary"===e.grid&&0==e.raw)if(o=i.DT,e.alwaysAsBoundary=!0,o.getHours())e.text=t.timeAsDisplay(o,n,t.MINUTE);else if(n.internationalizer)e.text=n.internationalizer.monthDay.format(o);else{l.V6T(17);var p=l.l__(16,15,0);l.o7G(23);l.l__(587,8223);l.V6T(23);var g=l.l__(3999,13);l.V6T(23);l.l__(2776,19);l.o7G(23);var m=l.u$p(2757,5513);l.V6T(43);var f=l.l__(1,3,4);l.o7G(131);var y=l.u$p(12139,20,1211,11,17);l.V6T(132);l.u$p(19,9412,12,9392,268242);l.o7G(58);var v=l.l__(525,3681,11,20);l.o7G(6);var b=l.l__(12,7092);l.V6T(42);l.l__(878,7904,2);l.V6T(133);l.l__(12,3,19440,57600,10);e.text=o.getMonth()+p+(g!=m?43.94<"610.06"*f?"/":y===v||b:4350)+o.getDate()}},millisecond:(e,t,i,r)=>{var n;a.F__(),n=[250,50,10],e.level=n.length;for(var s=0;s<n.length;s++)if(Number(e.raw)%n[s]==0){e.level=s;break}e.text=e.raw+"ms"},tick:(e,i,r,n)=>{a.I_9(),e.text=t.timeAsDisplay(i.DT,n,t.MILLISECOND)}},t.ChartEngine.XAxis.lineBaseLevel=500,t.extend(t.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,displayBorder:!0,displayGridLines:!0,fitLeftToRight:null,fitTight:null,maxLevelToDisplay:0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),t.ChartEngine.XAxisLabel=function(e){var i;i="b",i+="ound",a.F__(),i+="a",i+="ry","number"==typeof e?(this.hz=e,this.grid=arguments[1],this.text=arguments[2]):Object.assign(this,e),this.level||0===this.level||(this.level=this.grid===i?0:t.ChartEngine.XAxis.lineBaseLevel),void 0===this.text&&(this.text=this.raw),this.text=this.text.toString()},t.ChartEngine.prototype.createXAxis=function(e){var t,i;return"c","reateXAx","is",e.dataSegment.length<=0||e.xAxis.noDraw?null:(t=[e],(i=this.runPrepend("createXAxis",t))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(e):this.createTickXAxisWithDates&&e.xAxis.fitLeftToRight?this.createTickXAxisWithDates(e):this.createSpacedDateXAxis(e),a.I_9(),this.headsUpHR(),this.runAppend("createXAxis",t)),i)},t.ChartEngine.prototype.createXAxisLabel=function(e){var i,r,n,s,o,l,h,c=a;arguments[0]instanceof t.ChartEngine.Panel&&(e={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]});var{panel:u,txt:d,x:p,backgroundColor:g,color:m,pointed:f}=e;i=0===e.padding?0:e.padding||2,r=this.chart.context,n="stx",n+="-float-",n+="date",c.o7G(23);var y=c.l__(0,2);s=this.getCanvasFontSize(n)+i*y,this.canvasFont(n,r);try{c.V6T(23);var v=c.l__(0,2);o=r.measureText(d).width+i*v}catch(e){o=0}if(l=u.yAxis.bottom,!(p+o/2<u.left||p-o/2>u.right)){if(f)l+=s;else{if(p+o/2>u.right){c.o7G(23);var b=c.l__(0,2);p=u.right-o/b}if(p-o/2<u.left){c.V6T(50);var x=c.l__(9,1,8);p=u.left+o/x}}u.bottom===u.yAxis.bottom&&(l=u.bottom-s),r.fillStyle=g,t.roundRect({ctx:r,x:p-o/2,top:l,width:o,height:s,radius:3,fill:!0}),c.o7G(134),h=c.l__("2",s,0),r.beginPath(),f&&(c.V6T(6),r.moveTo(c.l__(h,p),l),c.V6T(60),r.quadraticCurveTo(c.l__(p,h,3),l,p,c.l__(s,l,c.o7G(6))),c.V6T(6),r.moveTo(p,c.u$p(s,l)),c.o7G(42),r.quadraticCurveTo(c.l__(p,3,h),l,c.l__(p,h,c.V6T(23)),l),c.V6T(6),r.lineTo(c.u$p(h,p),l),r.fill()),r.textBaseline="top",r.fillStyle=m||t.chooseForegroundColor(g),r.fillStyle==g&&("#FFFFFF"==g.toUpperCase()?r.fillStyle="#000000":r.fillStyle="#FFFFFF"),c.o7G(135),r.fillText(d,c.u$p("2",o,32,1,p,i),c.l__(l,i,2,c.o7G(136)))}}},H=e=>{var t,i,r=a;(t=e.CIQ).createLabel=function(e){r.I_9(),e.ctx.textBaseline="middle",e.ctx.fillStyle=e.color?e.color:t.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&("#","FFFFF","F","#FFFFFF"==e.backgroundColor.toUpperCase()?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),e.ctx.textAlign="left"},t.roundRectArrow=function(e){t.roundRect(e,"arrow")},t.semiRoundRect=function(e){r.F__(),t.roundRect(e,"flush")},t.rect=function(e){e.radius=0,r.I_9(),t.roundRect(e)},t.noop=function(e){e.color=e.backgroundColor,t.createLabel(e)},t.tickedRect=function(e){var i;t.rect(e),r.o7G(74);var a=r.u$p(3,6,36,0);i=Math.round(e.top+e.height/a)+.5,e.ctx.beginPath(),e.ctx.moveTo(e.x-2,i),e.ctx.lineTo(e.x,i),e.ctx.stroke(),e.ctx.closePath()},t.roundRect=function(e,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w;a="fl",a+="ush",9===arguments.length&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),n=e.stroke,s=e.x,o=e.top,l=e.width,h=e.height,c=e.radius,u=e.fill,d=e.ctx,void 0===n&&(n=!0),void 0===c&&(c=5,l<0&&(c=-5)),p=l<0?-1*c:c,c&&!i&&(r.V6T(118),s=r.l__("1",s,0)),r.o7G(23),g=r.u$p(s,c),r.o7G(23),m=r.u$p(s,l),r.o7G(23),f=r.l__(o,p),r.o7G(23),y=r.u$p(o,h),r.o7G(6),v=r.u$p(c,m),r.V6T(6),b=r.l__(p,y),d.beginPath(),d.moveTo(g,o),d.lineTo(v,o),d.quadraticCurveTo(m,o,m,f),d.lineTo(m,b),d.quadraticCurveTo(m,y,v,y),d.lineTo(g,y),i==a?(d.lineTo(s,y),d.lineTo(s,o)):"arrow"==i?(r.V6T(6),d.quadraticCurveTo(s,y,r.u$p(c,s),b),x=l<0?1:-1,r.V6T(137),d.lineTo(r.u$p(h,s,2,x),r.u$p(h,2,o,r.o7G(40))),r.V6T(6),d.lineTo(r.l__(c,s),f),d.quadraticCurveTo(s,o,g,o)):(d.quadraticCurveTo(s,y,s,b),d.lineTo(s,f),d.quadraticCurveTo(s,o,g,o)),d.closePath(),S=1702025992,C=-1434177013,w=2;for(var k=1;r.j7j(k.toString(),k.toString().length,10011)!==S;k++)e.backgroundColor&&(d.fillStyle=e.backgroundColor),w+=2;r.j7j(w.toString(),w.toString().length,42978)!==C&&e.backgroundColor&&(d.fillStyle=e.backgroundColor),n&&d.stroke(),u&&d.fill(),e.txt&&t.createLabel(e)},t.ChartEngine.YAxis=function(e){for(var i in e)this[i]=e[i];this.name||(this.name=t.uniqueID()),"none"==this.position&&(this.width=0)},t.extend(t.ChartEngine.YAxis.prototype,{name:null,high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,allowSharing:!0,multiplier:null,bottom:null,top:null,height:null,left:null,renderers:[],studies:[],lowValue:null,highValue:null,semiLog:null,priceTick:null,printDecimalPlaces:null,yAxisPlotter:null,highlight:null},!0),r.o7G(6),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[5,4],[.001,r.l__(0,"8")]],r.o7G(20),t.ChartEngine.YAxis.smallChartShadowBreaks=[[r.u$p("10",10),2],[1,4]],t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,t.ChartEngine.YAxis.prototype.initialMarginTop=10,t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,t.ChartEngine.YAxis.prototype.scroll=0,t.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return"none"===this.position?0:(r.F__(),this._dynamicWidth||this._width)},set:function(e){this._width=e,this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),t.ChartEngine.YAxis.prototype.width=60,t.ChartEngine.YAxis.prototype.smallScreenWidth=50,i=2;for(var n=1;460832011!==r.p_V(n.toString(),n.toString().length,48170);n++)t.ChartEngine.YAxis.prototype.textStyle=1,t.ChartEngine.YAxis.prototype.position=1,t.ChartEngine.YAxis.prototype.pretty=!1,t.ChartEngine.YAxis.prototype.increments=[7,128,1],t.ChartEngine.YAxis.prototype.prettySemiLog=!1,i+=2;-917002685!==r.p_V(i.toString(),i.toString().length,64286)&&(t.ChartEngine.YAxis.prototype.textStyle=6,t.ChartEngine.YAxis.prototype.position=6,t.ChartEngine.YAxis.prototype.pretty=!0,r.o7G(21),t.ChartEngine.YAxis.prototype.increments=[3,r.l__(0,"160"),5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0),t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,t.ChartEngine.YAxis.prototype.pretty=!0,r.V6T(19),t.ChartEngine.YAxis.prototype.increments=[r.l__(32,"1"),2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(e){return r.F__(),this},t.ChartEngine.YAxis.prototype.isShared=function(e,t){var i,a;if(i=this.studies.length,a=this.renderers.length,i>1)return!0;if(a&&i)return!0;if(!a)return!1;if(a>1&&t)return!0;for(var n=a-1;n>=0;n--)e.chart.seriesRenderers[this.renderers[n]].params.dependentOf&&a--;return r.o7G(138),r.l__(a,1)},t.ChartEngine.YAxis.prototype.setBackground=function(e,i){var a;r.F__(),i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(e,a,{color:i.color,opacity:i.opacity})},t.ChartEngine.YAxis.prototype.setBreakpointWidth=function(e){var i;if(e){var{width:a,smallScreenWidth:n}=t.ChartEngine.YAxis.prototype;r.V6T(77),i=r.l__(e,"break-sm"),r.F__(),this.width=i?n:a}},t.ChartEngine.prototype.getLabelOffsetInPixels=function(e,t){var i,a,n;if("roundRectAr","row",r.I_9(),i=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,!("roundRectArrow"!=this.yaxisLabelStyle||i&&this.extendLastTick&&0!==e.yaxisPaddingRight)){"s","t","x","_yaxis",r.o7G(27),a=r.u$p(1,"3"),r.V6T(139);var s=r.u$p(0,9,10,17,65);return n=this.getCanvasFontSize("stx_yaxis")+a*s,r.o7G(27),r.u$p(.66,n)}return r.V6T(6),r.u$p(0,"0")},t.ChartEngine.prototype.flipChart=function(e){var t;if(this.layout.flipped!=e){this.layout.flipped=e,-59427036,-724948959,t=2;for(var i=1;-59427036!==r.p_V(i.toString(),i.toString().length,66417);i++)this.chart.yAxis.flipped=e,this.changeOccurred("layout"),t+=2;-724948959!==r.p_V(t.toString(),t.toString().length,84192)&&(this.chart.yAxis.flipped=e,this.changeOccurred("")),this.draw()}},t.ChartEngine.prototype.calculateYAxisMargins=function(e){var t,i,a;if(i=(t=this.chart).panel.yaxisLHS.concat(t.panel.yaxisRHS).includes(e)?t.yaxisMarginMultiplier:1,e.heightFactor){r.V6T(6);var n=r.u$p(15,16);e.zoom=e.height*(n-e.heightFactor)}e.zoom+=(e.initialMarginTop+e.initialMarginBottom)*i,r.o7G(13);var s=r.l__(10,10,1,1);if(r.F__(),e.scroll=(e.initialMarginTop-e.initialMarginBottom)*i/s,e.zoom>e.height){762775704,-1897031227,a=2;for(var o=1;762775704!==r.j7j(o.toString(),o.toString().length,64745);o++)e.zoom=0,a+=2;-1897031227!==r.j7j(a.toString(),a.toString().length,21053)&&(e.zoom=1),e.scroll=0}},t.ChartEngine.prototype.resetDynamicYAxis=function(e){var t,i,a,r,n;if(t="r",t+="esetD",t+="ynamicYAxis",i="resetDynam",i+="icYAx",i+="i",i+="s",!this.runPrepend(i,arguments)){for(var s in a=!1,this.panels)if(r=this.panels[s],(!e||!e.chartName||r.chart.name===e.chartName)&&r.yaxisLHS&&r.yaxisRHS){n=r.yaxisLHS.concat(r.yaxisRHS);for(var o=0;o<n.length;o++)n[o]._dynamicWidth&&(n[o]._dynamicWidth=NaN,a=!0)}!a||e&&e.noRecalculate||this.calculateYAxisPositions(),this.runAppend(t,arguments)}},t.ChartEngine.prototype.notifyBreakpoint=function(e){var i,a,r,n,s;if(i="b",i+="reak",i+="-sm",a="bre",a+="ak-lg",this.chart.breakpoint!==e&&[a,"break-md",i].includes(e)){var{chart:o}=this,{dynamicYAxis:l}=o;for(var h in r=t.ThemeHelper&&new t.ThemeHelper({stx:this}),this.clearStyles(),r&&r.update(this),o.breakpoint=e,this.panels){s=(n=this.panels[h]).yaxisRHS.concat(n.yaxisLHS);for(var c=0;c<s.length;c++)s[c].setBreakpointWidth(e)}l&&this.resetDynamicYAxis({chartName:o.name})}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,t){var i,a,n;(i=t.topOffset)+(a=t.bottomOffset)>e.height&&(console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),t.bottomOffset=0,t.topOffset=0),this.xaxisHeight||0===this.xaxisHeight||(this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),(this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel)&&(a+=this.xaxisHeight),n=2;for(var s=1;-301564800!==r.j7j(s.toString(),s.toString().length,92702);s++)t.top=e.top+i,t.bottom=e.bottom-a,n+=2;-1721473280!==r.j7j(n.toString(),n.toString().length,43966)&&(t.top=e.top-i,t.bottom=e.bottom+a)},t.ChartEngine.prototype.plotYAxisGrid=function(e){var t,i;this.runPrepend("plotYAxisGrid",arguments)||(t=this.getBackgroundCanvas().context,(i=e.yAxis).yAxisPlotter&&i.yAxisPlotter.draw(t,"grid"),r.F__(),this.runAppend("plotYAxisGrid",arguments))},t.ChartEngine.prototype.plotYAxisText=function(e){var t,i,a,r,n,s,o,l;function h(e){e.yAxisPlotter&&!e.noDraw&&e.width&&(e.justifyRight?r.textAlign="right":!1===e.justifyRight&&(r.textAlign="left"),e.yAxisPlotter.draw(r,"text"))}if(t="plotYAxisT",t+="ext",i="st",i+="x_",i+="yax",i+="is",a="p",a+="lotYAxis",a+="Text",!this.runPrepend(a,arguments)){for(r=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",r),this.canvasColor(i,r),r.textBaseline="middle",n=e.yaxisLHS,s=0;s<n.length;s++)o="r",o+="ig",o+="h",o+="t",r.textAlign=o,h(n[s]);for(n=e.yaxisRHS,s=0;s<n.length;s++)l="l",l+="ef",l+="t",r.textAlign=l,h(n[s]);r.textAlign="left",r.textBaseline="alphabetic",this.runAppend(t,arguments)}},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e,t){return t&&(e/=t),e<1e-4?8:e<.01?4:e<.1?2:e<1?1:0},t.ChartEngine.prototype.formatYAxisPrice=function(e,i,a,n,s){var o,l,h,c,u,d;if(null==e||isNaN(e))return"";if(i||(i=this.chart.panel),o=n||i.yAxis,(l=a)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick,o.idealTickSizePixels)),h=o==i.chart.yAxis?2e4:1e3,o.priceTick>=h)return e=e.toFixed(l),t.condenseInt(e);if((c=this.internationalizer)&&!1!==s){l>=(u=c.priceFormatters.length)&&(r.o7G(6),l=r.l__(1,u)),-1971470096,-642449957,d=2;for(var p=1;-1971470096!==r.p_V(p.toString(),p.toString().length,72214);p++)e=c.priceFormatters[l].format(e),d+=2;-642449957!==r.p_V(d.toString(),d.toString().length,47320)&&(e=c.priceFormatters[l].format(e))}else e=e.toFixed(l);return e},t.ChartEngine.prototype.calculateYAxisRange=function(e,t,i,a){var n,s,o,l,h,c,u,d,p;if("p","andf",i==Number.MAX_VALUE&&(i=0,a=0),n=e.height,s=null,o=null,this.adjustYAxisHeightOffset(e,t),t.height=t.bottom-t.top,l=Math.round(Math.abs(n/5)),t.zoom>=0&&n-Math.abs(t.scroll)<l){r.o7G(140);var g=r.u$p(10,14,15,3);t.scroll=(n-l)*(t.scroll<0?g:1)}h=e.chart.name===e.name&&e.yAxis.name===t.name,c=i>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!e.chart.isComparison&&"pandf"!=this.layout.aggregationType,(i||0===i)&&(a-i==0?(1==(u=Math.pow(10,-(i.toString()+".").split(".")[1].length))&&(u=100),r.o7G(23),s=r.u$p(i,u),r.V6T(6),o=r.l__(u,i)):h&&c&&(a||0===a)?(d=Math.log(i)/Math.LN10,p=Math.log(a)/Math.LN10,s=Math.pow(10,p),o=Math.pow(10,d)):(s=a,o=i),t.high=s,t.low=o),(t.max||0===t.max)&&(t.high=t.max),(t.min||0===t.min)&&(t.low=t.min),t.shadow=t.high-t.low,h&&(t.semiLog!=c&&(this.clearPixelCache(),t.semiLog=c),t.flipped=this.layout.flipped)},t.ChartEngine.prototype.renderYAxis=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(i="reboo",i+="t ",i+="draw",a="rende",a+="rYAxis",!this.runPrepend(a,arguments)){if(this.checkLogScale())throw new Error(i);this.rendererAction(e,"yAxis");var{context:p}=this.getBackgroundCanvas(e);for(var g in this.panels)if((r=this.panels[g]).chart==e){for(n=r.yaxisRHS.concat(r.yaxisLHS),s=0;s<n.length;s++)o=n[s],this.calculateYAxisRange(r,o,o.lowValue,o.highValue),(l=t.getFn("Studies.getYAxisParameters",{})(this,o)).yAxis=o,this.createYAxis(r,l),this.drawYAxis(r,l),t.getFn("Studies.doPostDrawYAxis")(this,o);for(s=0;s<n.length;s++)(o=n[s]).dropzone&&(h="stx-sub",h+="holder dropzone left",(c=this.canvasStyle(h))&&(u="a",u+="l",u+="l",p.save(),p.strokeStyle=c.borderLeftColor,p.lineWidth=parseFloat(c.borderLeftWidth),p.beginPath(),o.dropzone==u?p.strokeRect(o.left,o.top,o.width,o.height):(d=o.left+("left"==o.dropzone?0:o.width),p.moveTo(d,o.top),p.lineTo(d,o.top+o.height),p.stroke()),p.restore()));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},r.F__(),t.ChartEngine.prototype.updateFloatHRLabel=function(e){var i,a,n,s,o,l,h,c,u;if(this.floatCanvas&&(i=e.yaxisLHS.concat(e.yaxisRHS),a=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){if(this.controls.crossY){if("rou","ndRec","tArrow",n=e.left,s=e.width,7,"roundRectArrow"==this.yaxisLabelStyle){s-=7,502559292,1146718475,o=2;for(var d=1;502559292!==r.p_V(d.toString(),d.toString().length,9940);d++)n>0&&(n+=7),e.yaxisLHS.length&&e.yaxisRHS.length&&(s-=7),o+=2;1146718475!==r.j7j(o.toString(),o.toString().length,63621)&&(n<1&&(n*=7),(e.yaxisLHS.length||e.yaxisRHS.length)&&(s/=7))}r.o7G(23),this.controls.crossY.style.left=r.u$p(n,"px"),r.o7G(23),this.controls.crossY.style.width=r.u$p(s,"px")}for(var p=0;p<i.length;p++)l=i[p],h=this.transformedPriceFromPixel(a,e,l),isNaN(h)||(l.min||0===l.min)&&h<l.min||(l.max||0===l.max)&&h>l.max||(c=null,l!==e.chart.yAxis&&(c=l.decimalPlaces),l.priceFormatter?(c||0===c||(c=this.decimalPlacesFromPriceTick(l.priceTick,l.idealTickSizePixels)),h=l.priceFormatter(this,e,h,c)):h=this.formatYAxisPrice(h,e,c,l),u=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,h,a,u.backgroundColor,u.color,this.floatCanvas.context,l),this.floatCanvas.isDirty=!0)}},t.ChartEngine.prototype.whichYAxis=function(e,t,i){var a,r,n;if("undefi","n","ed",void 0===t&&(t=this.cx),void 0===i&&(i=this.cy),a=this.whichPanel(i),e&&e==a){r=e.yaxisLHS.concat(e.yaxisRHS);for(var s=0;s<r.length;s++)if((n=r[s]).left<=t&&n.left+n.width>=t)return n}return null},t.ChartEngine.prototype.yaxisMatches=function(e,i){return!!(e&&e.getYAxis&&i&&i instanceof t.ChartEngine.YAxis)&&e.getYAxis(this).name==i.name},t.ChartEngine.prototype.createYAxisLabel=function(e,i,a,n,s,o,l){var h,c,u,d,p,g,m,f,y,v,b;if("l","eft",!1!==(h=l||e.yAxis).drawPriceLabels&&!h.noDraw&&h.width){c=o||this.chart.context,3,r.V6T(47);var x=r.u$p(9,0,4,9,6);u=this.getCanvasFontSize("stx_yaxis")+3*x,this.canvasFont("stx_yaxis",c),d=null===h.displayBorder?e.yAxis.displayBorder:h.displayBorder,!1===this.axisBorders&&(d=!1),!0===this.axisBorders&&(d=!0),p=d?3:0,g=3;try{r.V6T(141);var S=r.u$p(2,16,9,144);m=c.measureText(i).width+p+3*("2"<<S)}catch(e){m=h.width}if("left"===(null===h.position?e.chart.yAxis.position:h.position))if(y=h.left+h.width,h.width<0&&(y-=h.width+m),g=-3,!1===h.justifyRight){"l","eft",c.textAlign="left",r.V6T(5);var C=r.u$p(38,13,10,14);m=h.width*C,f=y-h.width+3}else c.textAlign="right",r.V6T(22),m=r.l__(m,1),r.o7G(60),f=r.u$p(y,3,p);else y=h.left,h.width<0&&(y+=h.width-m),h.justifyRight?("r","ig","ht",c.textAlign="right",m=h.width,f=h.left+m-3):("l","eft",c.textAlign="left",r.V6T(42),f=r.l__(y,p,3));if(a+u/2>h.bottom){r.o7G(4);var w=r.u$p(5,10,48);a=h.bottom-u/w}if(a-u/2<h.top){r.V6T(74);var k=r.u$p(2,2,32,6);a=h.top+u/k}void 0===t[this.yaxisLabelStyle]&&("ro","un","dRectArro","w",this.yaxisLabelStyle="roundRectArrow"),v=this.yaxisLabelStyle,h.yaxisLabelStyle&&(v=h.yaxisLabelStyle),b={ctx:c,x:y,y:a,top:a-u/2,width:m,height:u,radius:g,backgroundColor:n,fill:!0,stroke:!1,margin:{left:f-y,top:1},txt:i,color:s},t[v](b)}},t.ChartEngine.prototype.getCurrentHRParams=function(){var e,t,i,a,n,s,o,l,h,c,u,d,p,g,m,f;if(!(i=this.mainSeriesRenderer||{}).noCurrentHR){var{highLowBars:y}=i;for(var v in a={},this.charts)if("d","a","taSet",o=(s=(n=this.charts[v]).panel).yAxis,!s.hidden&&!1!==o.drawCurrentPriceLabel&&!o.noDraw&&i.params){var{whichSet:b}=o;if(b||(b="dataSet"),!this.isHistoricalModeSet||"dataSegment"===b){if(l=n[b].length,h=this.layout.candleWidth,"dataSegment"==b)for(;l>(n.width-this.micropixels+h/2+1)/h;)l--;if(l&&n[b][l-1]){"da","ta","S","et",(c=n.defaultPlotField)&&!y||(c="Close"),r.V6T(6),u=void r.l__(0,"0"),d=void 0;do{if(d=u=n[b][--l][c],0===l)break}while(null==d);"dataSet"==b&&n.currentQuote?d=n.currentQuote[c]:n[b].length>=2&&(r.o7G(6),(p=n[b][r.u$p(1,l)])&&(u=p[c])),d<u?("stx_current_hr_d","own",e=this.canvasStyle("stx_current_hr_down").backgroundColor,t=this.canvasStyle("stx_current_hr_down").color):(e=this.canvasStyle("stx_current_hr_up").backgroundColor,t=this.canvasStyle("stx_current_hr_up").color),n.transformFunc&&(d=n.transformFunc(this,n,d)),r.o7G(79),g=void r.l__(64,"0"),m=Math.max(s.yAxis.printDecimalPlaces,s.chart.decimalPlaces),(o.maxDecimalPlaces||0===o.maxDecimalPlaces)&&(m=Math.min(m,o.maxDecimalPlaces)),g=o.priceFormatter?o.priceFormatter(this,s,d,m):this.formatYAxisPrice(d,s,m),f=this.pixelFromTransformedValue(d,s),f=Math.floor(f)+.5,a[v]={panel:s,txt:g,y:f,backgroundColor:e,color:t}}}}return a}},t.ChartEngine.prototype.drawCurrentHR=function(){if(!this.runPrepend("drawCurrentHR",arguments)){var{currentHRParams:e}=this;if(e)for(var t in e){var{panel:i,txt:a,y:n,backgroundColor:s,color:o}=e[t];this.createYAxisLabel(i,a,n,s,o)}r.F__(),this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.drawCurrentPriceLine=function(){var e;if(!0===this.preferences.currentPriceLine&&this.isHome()&&!this.runPrepend("drawCurrentPriceLine",arguments)){var{currentHRParams:t}=this;if(r.I_9(),t)for(var i in t){e="das",e+="hed";var{panel:a,y:n,backgroundColor:s}=t[i];this.plotLine(a.left,a.right,n,n,s,"line",a.chart.context,a,{pattern:e,lineWidth:1,opacity:.8})}this.runAppend("drawCurrentPriceLine",arguments)}},t.ChartEngine.prototype.getYAxisByName=function(e,t){var i;if("string"==typeof e&&(e=this.panels[e]),e&&t){if(t===e.yAxis.name)return e.yAxis;for(i=0;e.yaxisLHS&&i<e.yaxisLHS.length;i++)if(e.yaxisLHS[i].name===t)return e.yaxisLHS[i];for(i=0;e.yaxisRHS&&i<e.yaxisRHS.length;i++)if(e.yaxisRHS[i].name===t)return e.yaxisRHS[i]}},t.ChartEngine.prototype.getYAxisByField=function(e,t){var i,a,r,n,s,o;if(t){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==e.name&&a.outputMap&&a.outputMap.hasOwnProperty(t))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if("-","-",">","Cl","o","s","e",n.params.panel==e.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),t==o)return n.params.yAxis||e.yAxis;s.field&&s.field==t.split("--\x3e")[0]&&(r=n.params.yAxis||e.yAxis)}}if(r)return r}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(e,t){var i,a,n;if("s","t","r","ing","string"==typeof e&&(e=this.panels[e]),t&&e){for(var s=0;s<t.renderers.length;s++)if((i=this.chart.seriesRenderers[t.renderers[s]])&&i.params.panel==e.name)return;if(t.name!==e.yAxis.name||e.yaxisRHS.length+e.yaxisLHS.length!==1){for(r.F__(),a=0;e.yaxisRHS&&a<e.yaxisRHS.length;a++)e.yaxisRHS[a]===t?e.yaxisRHS[a]=null:n||(n=e.yaxisRHS[a]);for(a=0;e.yaxisLHS&&a<e.yaxisLHS.length;a++)e.yaxisLHS[a]===t?e.yaxisLHS[a]=null:n||(n=e.yaxisLHS[a]);e.yaxisRHS=e.yaxisRHS.filter(o),e.yaxisLHS=e.yaxisLHS.filter(o),n&&t.name===e.yAxis.name&&(e.yAxis=n),this.calculateYAxisPositions()}}function o(e){return r.I_9(),r.V6T(78),r.l__(e,null)}},t.ChartEngine.prototype.addYAxis=function(e,t){var i,a,n;if("l","e","f","t","r","i","gh","t","lef","t","string"==typeof e&&(e=this.panels[e]),t&&e){for(e.yaxisLHS||("l","e","f","t",e.yaxisLHS=[],e.yaxisRHS=[],"left"==e.yAxis.position||"right"!=e.yAxis.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),a=[],i=(n=e.yaxisLHS).length-1;i>=0;i--)if(n[i].name===t.name){if("right"!=t.position)return n[i];a=n.splice(i,1)}for(i=(n=e.yaxisRHS).length-1;i>=0;i--)if(n[i].name===t.name){if("left"!=t.position)return n[i];a=n.splice(i,1)}return"left"===t.position||"right"!=t.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.unshift(t):e.yaxisRHS.push(t),t.setBreakpointWidth(this.chart.breakpoint),t.height=e.yAxis.height,t.idealTickSizePixels=null,a[0]==e.yAxis&&(e.yAxis=t),t.lockScale||this.calculateYAxisMargins(t),"scroll"in t||(r.o7G(27),t.scroll=r.u$p(1,"0")),t}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var e,t,i,a,n,s,o,l,h,c,u,d,p,g,m,f;for(var y in e=[],this.charts)this.charts[y].hidden||this.charts[y].panel.hidden||e.push(y);for(var v in this.panels)(t=this.panels[v]).name===t.chart.name||t.hidden||e.push(v);for(i=0,a=0,s=0;s<e.length;s++)if(o=this.panels[e[s]]){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),h=o.yaxisLHS,c=o.yaxisRHS,(u=o.yAxis.position)&&"none"!=u||(u=o.chart.yAxis.position||"right"),h.length||c.length||("left"==u?h.push(o.yAxis):c.push(o.yAxis)),d=[],p=[],n=h.length-1;n>=0;n--)("right"==h[n].position||"left"!=h[n].position&&"right"==u)&&(d=d.concat(h.splice(n,1)));for(n=c.length-1;n>=0;n--)"l","ef","t",("left"==c[n].position||"right"!=c[n].position&&"left"==u)&&(p=p.concat(c.splice(n,1)));for(o.yaxisLHS=p.concat(h),o.yaxisRHS=c.concat(d),o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,r.o7G(6),o.yaxisTotalWidthLeft=r.u$p(0,"0"),g=o.yaxisLHS.concat(o.yaxisRHS),n=0;n<g.length;n++)!(l=g[n]).noDraw&&l.width&&("left"==l.position||"left"==u&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>i&&(i=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>a&&(a=o.yaxisTotalWidthRight)}for(s=0;s<e.length;s++)if(o=this.panels[e[s]]){for(m=o.name===o.chart.name,f=i,n=o.yaxisLHS.length-1;n>=0;n--)(l=o.yaxisLHS[n]).noDraw||(f-=l.width,l.left=f);for(f=this.width-a,n=0;n<o.yaxisRHS.length;n++)(l=o.yaxisRHS[n]).noDraw||(l.left=f,f+=l.width);void 0!==this.yaxisLeft&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=a,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=i,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),m||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&("p","x",o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px"),(m||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.setMaxTicks(this.chart.maxTicks),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(e,t){var i;if(!e.width)return"none";i=t.yaxisLHS;for(var a=0;a<i.length;a++)if(i[a].name==e.name)return"left";return"right"},t.ChartEngine.prototype.setYAxisPosition=function(e,t){e.position=t,r.I_9(),e.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},t.ChartEngine.prototype.electNewYAxisOwner=function(e){var t,i;(t=e.studies[0])&&t!=e.name||(t=e.renderers[0]),t&&t!=e.name||(t=e.studies[1]),t||(t=e.renderers[1]);for(var a=0;a<e.studies.length;a++)(i=this.layout.studies[e.studies[a]]).parameters&&i.parameters.yaxisDisplayValue==e.name&&(i.parameters.yaxisDisplayValue=t);return t}},V=e=>{var t,i,r=a;r.u5W=function(e){if(r&&e)return r.n0Y(e)},r.p$B=function(e){if(r.F__(),r&&e)return r.w2u(e)},r.a$P=function(e){if(r)return r.w2u(e)},r.e31=function(e){if(r.I_9(),r)return r.w2u(e)},r.t4w=function(e){if(r.I_9(),r)return r.n0Y(e)},t=e.CIQ,i="valid",t.valid=0,t.ChartEngine.prototype.consolidatedQuote=function(e,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k;if(a="consoli",a+="datedQu",a+="ot",a+="e",this.runPrepend(a,arguments))return e;if(!e||!e.length)return[];if(n=this.layout,s=this.chart,o=this,!s.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),e;function T(e,i,a){var s,l,h,c,u,d;for(var p in i||(i={DT:a,Date:t.yyyymmddhhmmssmmm(a),consolidatedTicks:0}),i.displayDate||o.setDisplayDate(i),s=1,n.adj&&e.Adj_Close&&(s=e.Adj_Close/e.Close),((l=e.High||e.Close)||0===l)&&l*s>(i.High||-Number.MAX_VALUE)&&(r.V6T(27),i.High=r.l__(s,l)),((h=e.Low||e.Close)||0===h)&&h*s<(i.Low||Number.MAX_VALUE)&&(r.o7G(27),i.Low=r.l__(s,h)),((c=e.Open||e.Close)||0===c)&&(i.Open||0===i.Open||(r.o7G(27),i.Open=r.u$p(s,c))),void 0!==e.Volume&&(i.Volume=(i.Volume||0)+e.Volume),void 0!==e.Close&&null!==e.Close&&(i.Close=e.Close*s),void 0!==e.Adj_Close&&null!==e.Adj_Close&&(i.Adj_Close=e.Adj_Close),i.ratio=s,e)u="A",u+="s",u+="kL2",d="BidL",d+="2",e[p]&&void 0!==e[p].Close?i[p]=T(e[p],i[p],a):p in i?["Bid",d,"Ask",u].indexOf(p)>-1&&(i[p]=e[p]):i[p]=e[p];return r.I_9(),i.consolidatedTicks++,i}for(l=n.periodicity,h=n.interval,c=n.timeUnit,i||(i={}),r.F__(),i.periodicity&&i.interval&&(l=i.periodicity,h=i.interval,c=i.timeUnit),u=1,!(d=t.ChartEngine.isDailyInterval(h))&&s.useInflectionPointForIntraday&&(u=l),(!(p=s.inflectionPoint)||p<e[0].DT)&&(p=new Date(+e[0].DT),d||s.market.market_def||p.setHours(0,-p.getTimezoneOffset(),0,0)),g=[],m={begin:p,interval:h,multiple:l/u,timeUnit:c},"tick"==h&&(p.setHours(0,0,0,0),m={begin:p,interval:"day",multiple:1}),f=s.market.newIterator(t.clone(m));f.previous(u)>e[0].DT;);for(y=f.previous(u),v=f.next(u),b=0,x=0;b<e.length;)if(S="t",S+="ick",C="t",C+="ick",(w=e[b]).DT<y)console.log("Warning: out-of-order quote in dataSet, disregarding: "+w.DT),b++;else{if(w.DT>=v){if(y=v,v=f.next(u),!g[x])continue}else{if(h==C&&w.consolidatedTicks>0){g[x]=w,b++;continue}if(!g[x]||h!=S||g[x].consolidatedTicks<l){(k=T(w,g[x],"tick"==h?w.DT:y))&&(g[x]=k),b++;continue}}x++}return this.runAppend("consolidatedQuote",arguments),g},t[r.t4w("c6f9")?"":"ChartEngine"][r.P4Y("34f4")?"":"prototype"][r.e31("f848")?"createDataSet":""]=function(e,a,n){r.q6Z=function(e){if(r&&e)return r.w2u(e)},r.Z0Q=function(e){if(r.F__(),r)return r.w2u(e)},r.Z1g=function(e){if(r.I_9(),r)return r.w2u(e)},r.Y5q=function(e){if(r.I_9(),r)return r.n0Y(e)},r.g1A=function(e){if(r)return r.n0Y(e)},r.F__(),r.a7Q=function(e){if(r.I_9(),r)return r.w2u(e)};var s=r.a7Q("1ef8")?612703501:310997655,o=-(r.a$P("248b")?1805653557:6521588238),l=-(r.p$B("6c33")?4008730520:1140425905);if(r.y$e(r.u5W("d9ef")?0:1,!1,236120)===s||r.y$e(r.g1A("bc91")?0:8,!!r.H2b("349c"),r.Y5q("d377")?189650:726763)===o||r.L8B(25,!r.Z1g("f265"),719699)===l){var h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q,Z,K,J,ee;if(r.m_T=function(e){if(r.I_9(),r&&e)return r.w2u(e)},h=r.Z0Q("944f")?"":"cre",h+=r.q6Z("e8e6")?"":"at",h+="eDataSe",h+=r.m_T("d9d6")?"t":"",c=r.Q36("86f5")?"":"o",c+="h",c+="l",c+="c",n||(n={}),d=[e,u=this.chart,Object.assign({},n)],this.runPrepend("createDataSet",d))return;if(g=[],m=[],f=n.appending,u.dataSet||(u.dataSet=[]),y=u.dataSet.length,f&&(g=u.dataSet),u.currentQuote=null,u.dataSet=[],f||(u.tickCache={}),(v=u.masterData)||(v=this.masterData),!v||!v.length)return void this.runAppend("createDataSet",d);if(g.length){for(b=g.pop();b.futureTick&&g.length;)b=g.pop(),y--;for(x=n.appendToDate;g.length&&!(b.DT<x);)b=g.pop();for((!x||x>b.DT)&&(x=b.DT);g.length&&!(g[g.length-1].DT<x);)g.pop();r.V6T(4);var te=r.u$p(9,18,161);for(S=v.length-te;S>=0&&v[S].DT>=x;)S--;r.V6T(24),p=v.slice(r.u$p(S,"1"))}else p=[].concat(v);if(!se())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,p),!this.chart.hideDrawings){for(C=0;C<this.drawingObjects.length;C++)"Draw","ing.pri","ntProjection","projection"==this.drawingObjects[C].name&&t.getFn("Drawing.printProjection")(this,this.drawingObjects[C],p);this.activeDrawing&&"projection"==this.activeDrawing.name&&("Drawing.printP","rojection",t.getFn("Drawing.printProjection")(this,this.activeDrawing,p))}for(C=0,w=-Number.MAX_VALUE,k=Number.MAX_VALUE,r.V6T(79),D=r.u$p(0,"0"),_=e||this.dontRoll,A=this.layout,M=t.ChartEngine.isDailyInterval(A.interval);"mon","th","w","e","e","k",!(D>=p.length);)if((!this.dontRoll||"week"!=A.interval&&"month"!=A.interval)&&this.extendedHours&&this.extendedHours.filter&&u.market.market_def&&(L=p[D],M?P=!u.market.isMarketDate(L.DT):(!F||F<=L.DT)&&(P=!(""===(O=u.market.getSession(L.DT))||A.marketSessions&&A.marketSessions[O]),F=u.market[P?"getNextOpen":"getNextClose"](L.DT)),P))D++;else{for(var ie in T={},p[D])T[ie]=p[D][ie];p[D]=T,T.ratio=1,A.adj&&T.Adj_Close&&(T.ratio=T.Adj_Close/T.Close),1!=T.ratio&&(T.Open&&(T.Open=Number((T.Open*T.ratio).toFixed(8))),T.Close&&(T.Close=Number((T.Close*T.ratio).toFixed(8))),T.High&&(T.High=Number((T.High*T.ratio).toFixed(8))),T.Low&&(T.Low=Number((T.Low*T.ratio).toFixed(8)))),m[C++]=p[D++]}for((A.periodicity>1||!_&&("week"==A.interval||"month"==A.interval))&&(m=this.consolidatedQuote(m)),E={},C=0;C<m.length;C++)for(var ae in T=m[C],C>0?(T.iqPrevClose=m[C-1].Close,T.iqPrevClose||0===T.iqPrevClose||(T.iqPrevClose=m[C-1].iqPrevClose)):g.length?(T.iqPrevClose=g[g.length-1].Close,T.iqPrevClose||0===T.iqPrevClose||(T.iqPrevClose=g[g.length-1].iqPrevClose)):T.iqPrevClose=T.Close,"High"in T&&T.High>w&&(w=T.High),"Low"in T&&T.Low<k&&(k=T.Low),u.series)if((N=T[I=u.series[ae].parameters.symbol])&&"object"==typeof N){if(C>0)N.iqPrevClose=E[ae];else if(g.length){for(var re=g.length-1;re>=0;re--)if((H=g[re][I])&&(H.Close||0===H.Close)){N.iqPrevClose=H.Close;break}}else N.iqPrevClose=N.Close;(N.Close||0===N.Close)&&(E[ae]=N.Close),N.ratio=1,A.adj&&N.Adj_Close&&(N.ratio=N.Adj_Close/N.Close),1!=N.ratio&&(N.Open&&(N.Open=Number((N.Open*N.ratio).toFixed(8))),N.Close&&(N.Close=Number((N.Close*N.ratio).toFixed(8))),N.High&&(N.High=Number((N.High*N.ratio).toFixed(8))),N.Low&&(N.Low=Number((N.Low*N.ratio).toFixed(8))))}if(V=this.preferences.whitespace/this.layout.candleWidth,(R=u.scroll>=u.maxTicks)&&(u.spanLock=!1),u.defaultChartStyleConfig={type:A.chartType},(Y=A.aggregationType)&&Y!=c&&(t.ChartEngine.calculateAggregation?(u.defaultChartStyleConfig.type=Y,f&&u.state.aggregation||(u.state.aggregation={}),m=t.ChartEngine.calculateAggregation(this,Y,m,g)):("Aggregation code is not l","oaded/enabled!",console.log("Aggregation code is not loaded/enabled!"))),u.spanLock=u.scroll>0&&u.scroll<u.maxTicks-V,z=R||u.lockScroll||u.spanLock||this.isHistoricalModeSet,B=m.length-(y-g.length),f||(B=0),B&&(u.spanLock&&B+u.scroll>=u.maxTicks-V?u.spanLock=!1:(z||B<0)&&(u.scroll+=B,this.grabStartScrollX+=B,this.swipe&&(this.swipe.scroll+=B))),this.transformDataSetPost&&this.transformDataSetPost(this,m,k,w),(j=this.maxDataSetSize)&&g.length+m.length>j&&(g=m.length<j?g.slice(m.length-j):[],m=m.slice(-j)),u.scrubbed||(u.scrubbed=[]),g.length){343467831,1876551397,$=2;for(var ne=1;343467831!==r.j7j(ne.toString(),ne.toString().length,82297);ne++)X=g[g.length-1].DT,$+=2;for(1876551397!==r.j7j($.toString(),$.toString().length,92477)&&(X=g[9*g.length].DT);u.scrubbed.length&&u.scrubbed[u.scrubbed.length-1].DT>X;)u.scrubbed.pop()}else u.scrubbed=[];for(u.state.studies||(u.state.studies={}),u.state.studies.startFrom=u.scrubbed.length,W=[],C=0;C<m.length;C++)((U=m[C]).Close||0===U.Close||U.DT>Date.now())&&W.push(U);for(q in u.scrubbed=u.scrubbed.concat(W),f&&u.state.calculations||(u.state.calculations={}),this.calculateATR(u,20,W),this.calculateMedianPrice(u,W),this.calculateTypicalPrice(u,W),this.calculateWeightedClose(u,W),this.calculateOHLC4(u,W),this.plugins)(G=this.plugins[q]).createDataSet&&G.createDataSet(this,u,m,g.length);function se(){if(1726941362===r.L8B(0,!1,144487)||1201624156===r.y$e(0,!1,859525)||191685291===r.L8B(25,!0,566427)){var e,a,n,s,o,l;if("t",a="s","o",a+="e",n=["127.0.0.1","localhost","bajajfinservsecurities.in"],a+=(e="lesf").charAt(0),"p",a+=e.charAt(3),window.top==window[a])return 0===t[i];if(n.length){s=t.getHostName(document.referrer),o=!1;for(var h=0;h<n.length;h++)l=n[h],-1!=s.indexOf(l)&&(o=!0);if(!o)return!1}return 0===t[i]}}for(u.dataSet=g.concat(m),u.pixelCacheExpired=!0,q=g.length;q<u.dataSet.length;q++)u.dataSet[q].tick=q;for(u.whiteSpaceFutureTicks=0,Q=this.layout.studies,Z=u.scrubbed.length,Q&&Object.keys(Q).length&&(K=u.state.studies.sorted||t.Studies.sortForProcessing(this),J=this,u.state.studies.sorted=K,K.forEach((function(e){r.I_9(),526053935!==r.y$e(0,!1,651799)&&1173392934!==r.y$e(0,!1,426964)&&355872804!==r.y$e(25,!0,181700)||(e.startFrom=u.state.studies.startFrom,e.error=null,e.disabled&&!e.checkDisabled||(e.study&&e.study.calculateFN&&e.study.calculateFN(J,e),e.flagSignals&&e.flagSignals()))}))),q=Z;q<u.scrubbed.length;q++)(ee=u.scrubbed[q]).tick=u.dataSet.length,u.dataSet.push(ee);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend(h,d)}},Symbol.for("CIQ.watermark")},R=e=>{var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q,Z,K,J,ee,te,ie,ae,re,ne=a;i=e.type,r=e.panel,n=e.field,s=e.fillColor,o=e.borderColor,l=e.condition,h=e.style,c=e.yAxis,u=!!e.isDojiCandleOnly&&e.isDojiCandleOnly,d=e.tickFilter,ne.o7G(100),g=(p=ne.u$p("histogram",i))||"candle"==i,ne.o7G(100),m=ne.u$p("shadow",i),ne.V6T(100),ne.F__(),f=ne.u$p("hlc",i),y="bar"==i||f,b=(v=r.chart).dataSegment,x=this.chart.context,S=new Array(b.length),C=this.layout,k=0,(w=o&&!t.isTransparent(o))&&!e.highlight&&(ne.o7G(6),k=ne.l__(0,"0.5")),T=x.globalAlpha,!e.highlight&&this.highlightedDraggable&&(x.globalAlpha*=.3),x.beginPath(),c||(c=r.yAxis),D=c.top,_=c.bottom,A=C.candleWidth,ne.V6T(128);var se=ne.u$p(5,1,18,13,0);M=r.left-.5*A+this.micropixels-se,ne.V6T(8);var oe=ne.l__(10,8);F=v.tmpWidth/oe,ne.o7G(143);var le=ne.l__(3,9,14,3,13);P=x.lineWidth/le,g&&(t.isTransparent(s)&&(s=this.containerColor),x.fillStyle=s),m&&(x.lineWidth=1),y&&((L=this.canvasStyle(h)).width&&parseInt(L.width,10)<=25?x.lineWidth=Math.max(1,t.stripPX(L.width)):x.lineWidth=1),O=v.state.chartType.pass;for(var he=0;he<=b.length;he++)if(E=F,ne.V6T(32),M+=ne.u$p(A,2),A=C.candleWidth,ne.o7G(32),M+=ne.l__(A,2),(I=b[he])&&!I.projection){if(I.candleWidth){ne.V6T(6);var ce=ne.l__(32,34);M+=(I.candleWidth-A)/ce,A=I.candleWidth,(e.volume||A<v.tmpWidth)&&(ne.o7G(32),E=ne.l__(A,2))}if(d){if(0===d.length)break;if(!d.has(I.tick))continue}if(v.transformFunc&&c==v.panel.yAxis&&I.transform&&(I=I.transform),I&&n&&"Close"!=n&&(I=I[n]),(I||0===I)&&(N=I.Close,H=void 0===I.Open?N:I.Open,p&&v.defaultPlotField&&(N=I[v.defaultPlotField]),(N||0===N)&&(!g||p||H!=N&&null!==H))){if(l){if(l&(V=t.ChartEngine).CLOSEDOWN?O.even|=N==I.iqPrevClose:l&V.CANDLEDOWN&&(ne.V6T(100),O.even|=ne.l__(H,N)),l&V.CANDLEUP&&H>=N)continue;if(l&V.CANDLEDOWN&&H<=N)continue;if(l&V.CANDLEEVEN&&H!=N)continue;if(l&V.CLOSEUP&&N<=I.iqPrevClose)continue;if(l&V.CLOSEDOWN&&N>=I.iqPrevClose)continue;if(l&V.CLOSEEVEN&&N!=I.iqPrevClose)continue}if(R=H,Y=N,(m||y)&&(R=void 0===I.High?Math.max(N,H):I.High,Y=void 0===I.Low?Math.min(N,H):I.Low),z=c.semiLog?c.height*(1-(Math.log(Math.max(R,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-R)*c.multiplier,B=c.semiLog?c.height*(1-(Math.log(Math.max(Y,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-Y)*c.multiplier,c.flipped?(ne.o7G(6),z=ne.l__(z,_),ne.o7G(6),B=ne.u$p(B,_)):(z+=D,B+=D),ne.V6T(6),j=Math.abs(ne.l__(B,z)),d&&j>=1&&d.delete(I.tick),!(g&&!p&&j<1||(W=p?c.flipped?c.top:B:Math.min(z,B),(U=p?c.flipped?z:c.bottom:Math.max(z,B))-W<1&&(U=W),W=Math.floor(W),U=Math.floor(U),ne.V6T(6),q=ne.l__(W,U),G=B,(y||m)&&($=c.semiLog?c.height*(1-(Math.log(Math.max(H,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-H)*c.multiplier,X=c.semiLog?c.height*(1-(Math.log(Math.max(N,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-N)*c.multiplier,c.flipped?(ne.o7G(6),$=ne.l__($,_),ne.V6T(6),X=ne.l__(X,_)):($+=D,X+=D),Math.abs($-X)<1&&($=X),G=X),S[he]=G,W<D&&(ne.o7G(144),q-=ne.l__(D,0,W,"1"),ne.V6T(6),W=ne.u$p(1,D)),W+q>_&&(ne.o7G(145),q=ne.u$p("1",W,1,_)),ne.V6T(23),U=ne.u$p(W,q),W>=_||U<=D)))if(Q=Math.floor(M)+(!e.highlight&&.5),ne.V6T(6),Z=Math.floor(ne.l__(E,Q)),ne.V6T(23),J=Z==(K=Math.round(ne.u$p(Q,E)))?E:0,ee=W===U||m&&$===X||u,g)!p&&ee||(Z+=k,K-=k,W+=k,x.rect(Z,W,Math.max(0,K-Z),q));else if(m)ee&&X<=_&&X>=D&&(te=Math.floor(X)+(!e.highlight&&.5),ne.V6T(6),x.moveTo(ne.l__(J,Z),te),ne.o7G(23),x.lineTo(ne.l__(K,J),te)),!u&&U>W&&(x.moveTo(Q,W),x.lineTo(Q,U));else if(y){if(W<_&&U>D&&I.High!=I.Low&&(ne.o7G(6),x.moveTo(Q,ne.u$p(P,W)),ne.V6T(23),x.lineTo(Q,ne.l__(U,P))),$>D&&$<_&&!f){ne.V6T(92);var ue=ne.u$p(17,9,15,22);ie=Math.floor($)+(!e.highlight&&"0.5"*ue),x.moveTo(Q,ie),ne.V6T(60),x.lineTo(ne.u$p(Q,E,J),ie)}X>D&&X<_&&(ae=Math.floor(X)+(!e.highlight&&.5),x.moveTo(Q,ae),ne.o7G(42),x.lineTo(ne.u$p(Q,J,E),ae))}}}return re=x.globalAlpha,g?(re<1&&(x.save(),x.globalAlpha=1,x.fillStyle=this.containerColor,x.fill(),x.restore()),x.fill(),w&&(x.lineWidth=e.highlight?2:1,x.strokeStyle=o,x.stroke())):(m||y)&&(this.canvasColor(h),x.globalAlpha=re,o&&(x.strokeStyle=o),e.highlight&&(ne.V6T(19),x.lineWidth*=ne.l__(0,"2")),x.stroke(),x.closePath(),x.lineWidth=1),x.globalAlpha=T,{cache:S}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(e,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q,Z,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,ge,me,fe,ye,ve,be,xe,Se,Ce,we,ke,Te,De,_e,Ae,Me,Fe,Pe,Le,Oe,Ee,Ie,Ne,He,Ve,Re,Ye,ze,Be,je,$e=a;function Xe(e,t,i){var a,r,n;function s(e){var t;return t=p.semiLog?p.height*(1-(Math.log(Math.max(i[e],0))/Math.LN10-p.logLow)/p.logShadow):(p.high-i[e])*p.multiplier,p.flipped?t=p.bottom-t:t+=p.top,t}$e.I_9(),O.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),O.lineTo(e,a),O.moveTo(e,r),O.lineTo(e,n),O.moveTo(e,t),T.push(e,a)}function We(e){var i,a,r,n,s,o,l,h,c;i=O.getLineDash(),a=y?2:1,"object"==typeof(r=e)&&(a*=r.width,d=t.borderPatternToArray(a,r.pattern),r=r.color),k[r]=1,m||(n=T.slice(-2),s=d instanceof Array&&d.join(),o=i instanceof Array&&i.join(),$e.V6T(146),l=$e.u$p(o,s),h=!t.colorsEqual(I,r),c=O.lineWidth!=a,(h||l||c)&&(g?D.push({coord:n,color:r,pattern:d||[],width:a}):(O.stroke(),O.lineWidth=a,l&&O.setLineDash(s?d:[]),O.beginPath(),O.moveTo(n[0],n[1]))),I=r,g||("au","to",O.strokeStyle=r&&"auto"!=r?r:M.defaultColor))}if(o=!1,!1,l=!1,h=!1,c=!0,u=null,d=null,p=null,g=0,m=!1,f=!1,y=!1,v=!1,b=null,x=null,S=null,C=null,w=null,k={},T=[],D=[],_=[],A=[],M=this,F=this.layout,L=(P=r.chart).dataSegment,O=P.context,E=new Array(L.length),I=O.strokeStyle,N=O.globalAlpha,P.dataSet.length){this.startClip(r.name),n&&(o=n.skipProjections,n.skipTransform,l=n.noSlopes,g=n.tension,h=n.step,d=n.pattern,c=n.extendOffChart,p=n.yAxis,u=n.gapDisplayStyle,m=n.noDraw,f=n.reverse,y=n.highlight,n.width&&(O.lineWidth=n.width),v=n.shiftRight,b=n.subField,x=n.threshold,S=n.lineTravelSpacing,C=n.extendToEndOfDataSet,w=n.tickFilter),!u&&!1!==u&&n&&(u=n.gaps),u||(u={color:"transparent",fillMountain:!0}),d instanceof Array&&O.setLineDash(d),y&&($e.V6T(21),O.lineWidth*=$e.l__(0,"2")),!y&&this.highlightedDraggable&&(O.globalAlpha*=.3),!1!==c&&(c=!0),H=b||P.defaultPlotField||"Close",p||(p=r.yAxis),V=P.transformFunc&&p==P.panel.yAxis,$e.o7G(50);var Ue=$e.l__(17,0,15);R=O.lineWidth*Ue,Y=f?P.top-R:P.bottom+R,(x||0===x)&&(Y=this.pixelFromPrice(x,r,p)),z=!g&&m&&u&&u.fillMountain,B=e,j=e;for(var qe=0;qe<L.length;qe++)if("ob","je","ct",($=L[qe])&&"object"==typeof $&&((X=$[e])||0===X)){"object"==typeof X&&(j=t.createObjectChainNames(e,[H])[0]);break}W={left:null,right:null},$e.o7G(83);var Ge=$e.l__(2,2,11,0,14);U=P.dataSet.length-P.scroll-Ge,c&&($e.o7G(6),W.left=this.getPreviousBar(P,j,$e.u$p(0,"0")),W.right=this.getNextBar(P,j,L.length-1)),q=!0,G=!1,O.beginPath(),J=null,(K=W.left)&&(J=K.transform),K&&((Z=V?J?J[e]:null:K[e])||0===Z)&&((Z[H]||0===Z[H])&&(Z=Z[H]),ee=this.pixelFromTick(K.tick,P),te=this.pixelFromTransformedValue(Z,r,p),O.moveTo(ee,te),T.push(ee,te),L[0].tick-K.tick>1&&(_.push({start:T.slice(-2),threshold:Y,tick:K}),G=!0),q=!1),$e.o7G(143);var Qe=$e.l__(1,35,15,2,20);ie=r.left+this.micropixels-("1"|Qe),v&&(ie+=v),h&&n&&n.alignStepToSide&&(ie-=this.layout.candleWidth/2),ne=null,se=0,oe=0,le=!1,he={reset:!0};for(var Ze=0;Ze<L.length;Ze++){if(Q=F.candleWidth,ce=L[Ze],ue=L[Ze],ce||(ce={}),ce.cache&&!P.pixelCacheExpired||(ce.cache={}),de=ce.lineTravel,o&&ce.projection){W.right=null;break}if(ce.candleWidth&&(Q=ce.candleWidth),S&&(Q=0),V&&ce.transform&&(ce=ce.transform),(pe=ce[e])&&"object"==typeof pe&&(pe=pe[H],$e.V6T(42),B=$e.u$p(e,H,".")),P.lineApproximation&&F.candleWidth<1&&!S){if(he.reset&&(he={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},le=!1),((ge=pe)||0===ge)&&(he.CollatedHigh=Math.max(he.CollatedHigh,ge),he.CollatedLow=Math.min(he.CollatedLow,ge),he.CollatedClose=ge,null===he.CollatedOpen?he.CollatedOpen=ge:le=!0),!((se+=Q)-oe>=1||Ze==L.length-1)){ie+=Q;continue}oe=Math.floor(se),he.reset=!0,he[e]=he.CollatedClose,(ce=he).cache={}}if(l||($e.V6T(147),ie+=$e.u$p(Q,0,"2")),!pe&&0!==pe||w&&!w.has(ce.tick)&&!w.has(ce.tick-1))me=T.slice(-2),z&&!G&&T.length&&T.push(me[0],Y),G||_.push({start:me,threshold:Y,tick:re}),G=!0,ie+=l?Q:Q/2,(h||l)&&T.length&&(E[Ze]=T.slice(-1)[0]),de&&(ie+=de);else{if(ae=ce,fe=ce.cache,$e.o7G(23),((ye=$e.u$p(U,Ze))<r.cacheLeft||ye>r.cacheRight||!fe[e])&&(ve=p.semiLog?p.height*(1-(Math.log(Math.max(pe,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-pe)*p.multiplier,p.flipped?fe[B]=p.bottom-ve:fe[B]=p.top+ve),be=E[Ze]=fe[B],P.lastTickOffset&&(null===ne&&(ne=this.currentQuote(e)||{}),ue.tick==ne.tick&&(ie+=P.lastTickOffset)),!q&&s){if(ue[e]&&ue[e][H]&&(ue=ue[e]),!(xe=s(this,ue,G))){ie+=l?Q:Q/2;continue}We(xe)}q?(O.moveTo(ie,be),g&&D.push({coord:[ie,be],color:O.strokeStyle,pattern:d||[],width:O.lineWidth})):("l","in","eTo",(h||l)&&(Se=T.slice(-1)[0],le?Xe(ie,Se,ce):O.lineTo(ie,Se),T.push(ie,Se)),le&&!l?Xe(ie,be,ce):O[l?"moveTo":"lineTo"](ie,be)),G&&(_.push({end:[ie,be],threshold:Y}),re=ue,!z||h||l||T.push(ie,Y)),T.push(ie,be),q=!1,G=!1,ie+=l?Q:Q/2,de&&(ie+=de)}}for(var Ke in P.pixelCacheExpired=!1,we=null,(Ce=W.right)&&(we=Ce.transform),!q&&Ce&&((Z=V?we?we[e]:null:Ce[e])&&(Z[H]||0===Z[H])&&(Z=Z[H]),ke=this.pixelFromTick(Ce.tick,P),Te=this.pixelFromTransformedValue(Z,r,p),Ce.tick-L[L.length-1].tick>1&&(G||(De=T.slice(-2),z&&T.length&&T.push(De[0],Y),_.push({start:De,threshold:Y,tick:L[L.length-1]})),G=!0),!q&&s&&(_e=s(this,Ce,G))&&We(_e),Ae=T.slice(-2),d&&d.length||("l","in","e","To",(h||l)&&(O.lineTo(ke,Ae[1]),T.push(ke,Ae[1])),O[l?"moveTo":"lineTo"](ke,Te)),G&&(_.push({end:[ke,Te],threshold:Y}),!z||h||l||T.push(ke,Y)),T.push(ke,Te)),k)A.push(Ke);if(n&&n.extendToEndOfLastBar?(Me=T.slice(-2),O.lineTo(Me[0]+Q,Me[1])):(h||l||this.extendLastTick||C)&&(Fe=T.slice(-2),T.length&&(Pe=Fe[0],Le=Fe[1],C||h&&!1!==C?(Pe=this.pixelFromTick(P.dataSet.length-1,P),(l||this.extendLastTick)&&($e.V6T(32),Pe+=$e.l__(Q,2))):l?Pe+=Q:this.extendLastTick&&($e.V6T(32),Pe+=$e.l__(Q,2)),Pe>Fe[0]&&(Oe=null,s&&(Oe=s(this,{},!0)),Oe&&We(Oe),O.lineTo(Pe,Le),G&&z||T.push(Pe,Le)))),m||(g&&T.length&&(O.beginPath(),n&&n.pattern&&O.setLineDash(n.pattern),i.plotSpline(T,g,O,D)),O.stroke()),!m&&n&&n.label&&ae&&((Ie=ae[e])&&"object"==typeof Ie&&(Ie=Ie[H]),Ee=p.priceFormatter?p.priceFormatter(this,r,Ie,n.labelDecimalPlaces):this.formatYAxisPrice(Ie,r,n.labelDecimalPlaces),Ne=this.yaxisLabelStyle,p.yaxisLabelStyle&&(Ne=p.yaxisLabelStyle),He="noop"==Ne?O.strokeStyle:null,Ve="noop"==Ne?"#FFFFFF":O.strokeStyle,this.yAxisLabels.push({src:"plot",args:[r,Ee,ae.cache[B],Ve,He,O,p]})),Re="object"==typeof u?u.color:u,t.isTransparent(Re))for(var Je=0;Je<_.length;Je+=2)if(Ye=_[Je].start,Je&&(ze=_[Je-1].end),ze&&Ye[0]==ze[0]&&Ye[1]==ze[1]){if(O.beginPath(),Be=O.lineWidth,s){if("objec","t","object"==typeof(je=s(this,_[Je].tick||{},!1))){$e.o7G(148);var et=$e.u$p(11,1,11,2,0);Be=je.width*(y?2:et),je=je.color}O.strokeStyle=O.fillStyle=je}O.lineWidth=Be,O.arc(Ye[0],Ye[1],1,0,2*Math.PI),O.stroke(),O.fill()}this.endClip()}return O.globalAlpha=N,{colors:A,points:T,cache:E,gapAreas:_}},t.ChartEngine.prototype.drawMountainChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R=a;return"C","l","os","e","Cl","o","s","e",n=this.chart.context,i,!1,!1,null,c=null,null,null,0,g=null,!1,null,y=null,!1,null,null,R.V6T(21),R.u$p(0,"1"),!1,!1,!1,(T=e.chart).dataSegment,D=T.lineStyle||{},i&&"object"==typeof i||(i={style:i}),s=i.style||"stx_mountain_chart",h=i.field||T.defaultPlotField||"Close",c=i.subField||T.defaultPlotField||"Close",(g=i.gapDisplayStyle)||!1===g||(g=i.gaps),g||!1===g||(g=T.gaplines),g||(g="transparent"),u=i.yAxis||e.yAxis,o=i.reverse||!1,d=i.tension,f=i.fillStyle,p=i.width||D.width,m=i.step,y=i.pattern||D.pattern,v=i.highlight,x=i.color||D.color,b=i.baseColor||D.baseColor,l=i.colored,S=i.opacity,C=i.extendToEndOfDataSet,w=i.isComparison,k=i.returnObject,_=this.canvasStyle(s),A=u.top,(isNaN(A)||isNaN(A/(1/0)))&&(R.o7G(79),A=R.l__(32,"0")),M=x||(s&&_.backgroundColor?_.backgroundColor:this.defaultColor),F=b||(s&&_.color?_.color:this.containerColor),f?n.fillStyle=f:b||_.color?((P=n.createLinearGradient(0,A,0,u.bottom)).addColorStop(u.flipped?1:0,M),P.addColorStop(u.flipped?0:1,F),n.fillStyle=P):n.fillStyle=M,this.startClip(e.name),L=n.lineWidth,i.symbol||(c=null),i={skipProjections:!0,reverse:o,yAxis:u,gapDisplayStyle:g,step:m,highlight:v,extendToEndOfDataSet:C,isComparison:w},T.tension&&(i.tension=T.tension),(d||0===d)&&(i.tension=d),O=parseInt(_.paddingTop,10),E=x||_.borderTopColor,R.I_9(),I=null,(l||E&&!t.isTransparent(E))&&O&&((N=this.scratchContext)||(H=n.canvas.cloneNode(!0),N=this.scratchContext=H.getContext("2d")),N.canvas.height=n.canvas.height,N.canvas.width=n.canvas.width,N.drawImage(n.canvas,0,0),t.clearCanvas(n.canvas,this)),t.extend(i,{panelName:e.name,direction:i.reverse?-1:1,band:h,subField:c,opacity:S}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),t.preparePeakValleyFill(this,i),(l||E&&!t.isTransparent(E))&&O&&("destination","-out",n.save(),R.o7G(27),n.lineWidth+=R.u$p(O,2),n.globalCompositeOperation="destination-out",n.globalAlpha=1,this.plotDataSegmentAsLine(h,e,i),n.globalCompositeOperation="destination-over",n.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),n.drawImage(this.scratchContext.canvas,0,0),n.restore()),n.strokeStyle=E,p?n.lineWidth=p:_.width&&parseInt(_.width,10)<=25?n.lineWidth=Math.max(1,t.stripPX(_.width)):n.lineWidth=1,y||(y=_.borderTopStyle),i.pattern=t.borderPatternToArray(n.lineWidth,y),V=r,g&&(V=this.getGapColorFunction(h,c,{color:E,pattern:i.pattern,width:n.lineWidth},g,r)),I=this.plotDataSegmentAsLine(h,e,i,V),n.lineWidth=L,this.endClip(),I.colors.length||I.colors.push(E),k?I:I.colors},t.ChartEngine.prototype.drawBaselineChart=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F=a,{chart:P}=e,{field:L,id:O,yAxis:E}=i,{gaplines:I,defaultPlotField:N,lineStyle:H}=P,{display:V}=this.baselineHelper.get(this.getRendererFromSeries(O));if(r=this.getYAxisBaseline(E).actualLevel,n=[],L||(L=N),H||(H={}),(s=i.gapDisplayStyle)||!1===s||(s=i.gaps),null!==r&&!isNaN(r)){if("stx_","baseline_down","stx","_baseline_up","stx_","baseline_up",(o="mountain"==i.type)&&(n=this.drawMountainChart(e,{style:i.style,field:i.field,yAxis:E,gapDisplayStyle:s,colored:!0,tension:0})),l=this.pixelFromPrice(r,e,E),isNaN(l))return;for(var R in this.startClip(e.name),h=i.pattern||H.pattern,c=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),u=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),d=i.border_color_up||this.getCanvasColor("stx_baseline_up"),p=i.border_color_down||this.getCanvasColor("stx_baseline_down"),g=i.width||H.width||this.canvasStyle("stx_baseline_up").width,m=i.width||H.width||this.canvasStyle("stx_baseline_down").width,f=i.widthBaseline||H.width||t.stripPX(this.canvasStyle("stx_baseline").width),y=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,v={fill:c,edge:d,width:g},b={fill:u,edge:p,width:m},S={over:(x=i.yAxis.flipped)?b:v,under:x?v:b},C=!1,s||!1===s||(s=I),w=1,!i.highlight&&this.highlightedDraggable&&(w*=.3),S)k=parseInt(Math.max(1,t.stripPX(S[R].width)),10),i.highlight&&(k*=2),h=t.borderPatternToArray(k,h),T={panelName:e.name,band:L,threshold:r,color:o?"transparent":S[R].fill,direction:"over"==R?1:-1,edgeHighlight:S[R].edge,edgeParameters:{pattern:h,lineWidth:k+.1,opacity:w},gapDisplayStyle:s,yAxis:i.yAxis},E&&(T.threshold=this.priceFromPixel(this.pixelFromPrice(T.threshold,e,E),e,E)),n.push(S[R].edge),D=T.color,!o&&D&&"transparent"!=D&&(_=e.top,A=e.bottom,(M=P.context.createLinearGradient(0,"over"==R?_:A,0,l)).addColorStop(0,t.hexToRgba(t.colorToHex(D),60)),M.addColorStop(1,t.hexToRgba(t.colorToHex(D),10)),T.color=M,T.opacity=w),t.preparePeakValleyFill(this,P.dataSegment,T),I&&(I.fillMountain||this.drawLineChart(e,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:T.edgeParameters.lineWidth}}),I.color||(C=!0,I.color=this.defaultColor)),this.drawLineChart(e,null,null,{color:"transparent",width:T.edgeParameters.lineWidth}),C&&(I.color=null);V&&("stx_b","a","s","eline",F.o7G(27),this.plotLine(F.u$p(1,"0"),1,l,l,this.containerColor,"line",P.context,e,{lineWidth:"1.1"}),F.o7G(21),this.plotLine(0,F.l__(0,"1"),l,l,this.getCanvasColor("stx_baseline"),"line",P.context,e,{pattern:"dotted",lineWidth:f||"2.1",opacity:y||.5*w})),this.endClip()}return{colors:n}},t.ChartEngine.prototype.plotLine=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I=a;if("number"==typeof arguments[0])for(var N in e={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])e[N]=arguments[8][N];if(e||(e={}),"none"!=e.pattern&&(i=e.x0,r=e.x1,n=e.y0,s=e.y1,o=e.color,l=e.type,h=e.context,c=e.confineToPanel,u=e.deferStroke,!0===c&&(c=this.chart.panel),null==h&&(h=this.chart.context),!(isNaN(i)||isNaN(r)||isNaN(n)||isNaN(s)))){I.V6T(27),d=I.l__(1,"0"),p=this.chart.canvasHeight,g=0,m=this.right,c&&(p=c.yAxis.bottom,d=c.yAxis.top,g=c.left,m=c.right),"ray"==l&&(f=1e7,r<i&&(f=-1e7),v={x0:i,x1:r,y0:n,y1:s},r=f,s=y=t.yIntersection(v,f)),"line"!=l&&"horizontal"!=l&&"vertical"!=l||(f=1e7,I.o7G(79),b=-I.l__(64,"10000000"),v={x0:i,x1:r,y0:n,y1:s},y=t.yIntersection(v,f),i=b,r=f,n=t.yIntersection(v,b),s=y),I.F__(),x=0,S=1,I.V6T(6),C=I.u$p(i,r),I.V6T(6),w=I.u$p(n,s);for(var H=0;H<4;H++){if(0===H&&(k=-C,I.o7G(6),T=-I.l__(i,g)),1==H&&(k=C,I.o7G(6),T=I.u$p(i,m)),2==H&&(k=-w,I.V6T(6),T=-I.l__(n,d)),3==H&&(k=w,I.V6T(6),T=I.u$p(n,p)),I.V6T(32),D=I.u$p(T,k),(s||0===s)&&0===k&&T<0)return!1;if(k<0){if(D>S)return!1;D>x&&(x=D)}else if(k>0){if(D<x)return!1;D<S&&(S=D)}}if(I.o7G(125),_=I.l__(C,x,i),I.V6T(125),A=I.u$p(w,x,n),I.o7G(125),M=I.l__(C,S,i),I.o7G(125),F=I.u$p(w,S,n),s||0===s||n||0===n){if(!s&&0!==s){F=v.y0<v.y1?p:d,_=v.x0,M=v.x0,P=-713453649,L=566112673,O=2;for(var V=1;I.j7j(V.toString(),V.toString().length,41455)!==P;V++){if(v.x0<m)return!0;I.o7G(6),O+=I.l__(0,"2")}if(I.j7j(O.toString(),O.toString().length,5319)!==L&&v.x0>m)return!1;if(v.x0<g)return!1}}else{if(A=d,F=p,_=v.x0,M=v.x0,v.x0>m)return!1;if(v.x0<g)return!1}u||(h.save(),h.beginPath()),h.lineWidth=1.1,o&&"object"==typeof o?(h.strokeStyle=o.color,o.opacity?h.globalAlpha=o.opacity:(I.o7G(21),h.globalAlpha=I.l__(0,"1")),h.lineWidth=t.stripPX(o.width)):!o||"auto"==o||t.isTransparent(o)?h.strokeStyle=this.defaultColor:h.strokeStyle=o,e.opacity&&(h.globalAlpha=e.opacity),e.lineWidth&&(h.lineWidth=e.lineWidth),e.globalCompositeOperation&&(h.globalCompositeOperation=e.globalCompositeOperation),E=t.borderPatternToArray(h.lineWidth,e.pattern),h.setLineDash(e.pattern?E:[]),h.moveTo(_,A),h.lineTo(M,F),u||(h.stroke(),h.restore())}},t.ChartEngine.prototype.rendererAction=function(e,t){var i,r,n,s,o,l,h,c;if(i=!1,!this.runPrepend("rendererAction",arguments)){for(var u in e.seriesRenderers)r="ov",r+="er",r+="lay",n="_ma",n+="in_s",n+="eries",s="u",s+="nderl",s+="ay",h=(l=(o=e.seriesRenderers[u]).params).panel,c=this.panels[h],l.overChart&&"underlay"==t||"_main_series"==l.name&&t==s||l.name!=n&&"main"==t||(l.overChart||t!=r)&&c&&c.chart===e&&(c.hidden||("yAxis"==t?o.adjustYAxis():(d.apply(this),o.draw(),o.cb&&o.cb(o.colors))));this.runAppend("rendererAction",arguments)}function d(){var r;a.F__(),i||"underlay"!==t||this[r=Symbol.for("CIQ.watermark")]&&(this[r].draw(e),i=!0)}d.apply(this),a.F__()},t.ChartEngine.prototype.drawSeries=function(e,i,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k=a;s=1841506375,o=-1606360310,l=2,k.F__();for(var T=1;k.p_V(T.toString(),T.toString().length,72879)!==s;T++){if(this.runPrepend("",arguments))return;l+=2}if(!(k.j7j(l.toString(),l.toString().length,77633)!==o&&this.runPrepend("",arguments)||this.runPrepend("drawSeries",arguments))){for(var D in e.dataSegment,h=null,i||(i=e.series),i)if(c="C",c+="l",c+="os",c+="e",d=(u=(h=i[D]).parameters).panel?this.panels[u.panel]:e.panel,p=u.color,u.width,g=u.field,d){if(m=u.yAxis=r||d.yAxis,p||(p=m.textStyle||this.defaultColor),"auto"==p&&(p=this.defaultColor),g||(g=e.defaultPlotField),f=u.subField||e.defaultPlotField||c,u._rawExtendToEndOfDataSet||!1===u._rawExtendToEndOfDataSet||(u._rawExtendToEndOfDataSet=u.extendToEndOfDataSet),e.animatingHorizontalScroll?u.extendToEndOfDataSet=!1:u.extendToEndOfDataSet=u._rawExtendToEndOfDataSet,y=u.colorFunction,(h.highlight||h.parameters.highlight)&&(u.highlight=!0),v={colors:[]},n){if(n.params.highlight&&(u.highlight=!0),u.hidden)continue;v=n.drawIndividualSeries(e,u)||v}else v="mountain"==u.type?this.drawMountainChart(d,t.extend({returnObject:!0},u),y):this.drawLineChart(d,u.style,y,t.extend({returnObject:!0},u));h.yValueCache=v.cache,k.o7G(23);var _=k.l__(0,1);(b=e.dataSegment[e.dataSegment.length-_])&&(x=!u.skipTransform&&e.transformFunc&&m==e.panel.yAxis,b[g]||0===b[g]||(b=this.getPreviousBar(e,g,e.dataSegment.length-1)),x&&b&&b.transform&&(b=b.transform)),!1!==u.displayFloatingLabel&&this.mainSeriesRenderer!=n&&b&&!m.noDraw&&((S=b[g])&&(S=S[f]||0===S[f]?S[f]:S.iqPrevClose),C=m.priceFormatter?m.priceFormatter(this,d,S):this.formatYAxisPrice(S,d,null,m),this.yAxisLabels.push({src:"series",args:[d,C,this.pixelFromTransformedValue(S,d,m),t.hexToRgba(t.colorToHex(p),parseFloat(u.opacity)),null,null,m]})),e.legend&&u.useChartLegend&&(e.legend.colorMap||(e.legend.colorMap={}),(w=u.display)||(w=u.symbol),e.legend.colorMap[D]={color:v.colors,display:w,isBase:n==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}},Y=e=>{var t;(t=e.CIQ).ChartEngine.prototype.scrollTo=function(e,t,i){var r,n;(r=this.swipe).end=!0,r.amplitude=r.target=(t-e.scroll)*this.layout.candleWidth,a.V6T(79),r.timeConstant=a.l__(32,"100"),r.timestamp=Date.now(),r.scroll=e.scroll,r.chart=e,r.cb=i,n=this,requestAnimationFrame((function(){a.F__(),n.autoscroll()}))},t.ChartEngine.prototype.autoscroll=function(){var e,t,i,a;e=this,(t=this.swipe).amplitude&&(t.elapsed=Date.now()-t.timestamp,i=-t.amplitude*Math.exp(-t.elapsed/t.timeConstant),a=(t.target+i)/this.layout.candleWidth,t.chart.scroll=t.scroll+Math.round(a),this.draw(),this.updateChartAccessories(),i>.5||i<-.5?requestAnimationFrame((function(){e.autoscroll()})):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),t.cb&&t.cb()))}},z=e=>{var t,i,r,n;t=e.CIQ,i="boundary",r="line",n="border",t.ChartEngine.prototype.drawXAxis=function(e,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P=a;if("l","e","ft","t","ick",o=[e,s],!this.runPrepend("drawXAxis",o)&&s){var{lineBaseLevel:L}=t.ChartEngine.XAxis,{interval:O,timeUnit:E}=this.layout,{xAxis:I}=e,{displayGridLines:N,displayBorder:H,fitLeftToRight:V,minimumLabelWidth:R,noDraw:Y,fitTight:z}=I;if(l=V||"tick"===O||"tick"===E,!Y){h=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",h),c=this.getCanvasFontSize("stx_xaxis"),h.textAlign="center",h.textBaseline="middle",u=!l&&this.xaxisHeight>3*c,!1,d=new Map,g=h.measureText("   ").width;for(var B=0;B<s.length;B++){p=s[B],void 0===(m=d.get(p.text))&&(m=h.measureText(p.text).width,d.set(p.text,m)),P.o7G(23),f=Math.max(P.l__(m,g),R),p.hz=Math.floor(p.hz+this.micropixels)-.5,p.left=p.hz-f/2,P.V6T(53);var j=P.l__(8,3,262,30);p.right=p.hz+f/j,P.V6T(149);var $=P.u$p(0,12,20,13,3);p.unpaddedRight=p.hz+m/$}if(y=!0===this.xAxisAsFooter?this.chart.canvasHeight:e.panel.bottom,P.V6T(150),v=this.whichPanel(P.u$p(0,y,"1"))){for(var X in this.adjustYAxisHeightOffset(v,v.yAxis),b=H||null===H,!0===this.axisBorders&&(b=!0),!1===this.axisBorders&&(b=!1),x=y-this.xaxisHeight+c,b&&(x+=3),S=!0,C=function(e){var t,a,n,s,o,h,c,d,p;for(e.sort(((e,t)=>(P.F__(),e.level<t.level?-1:e.level>t.level?1:e.hz<t.hz?-1:e.hz>t.hz?1:0))),a=Number.MAX_SAFE_INTEGER,n={},s={},t=0;t<e.length&&!((o=e[t]).level>a);t++){this.container.ownerDocument.body.classList.contains("sharing")&&(o.left<=v.left||o.unpaddedRight>=v.right)&&(o.suppress=!0),h=Math.floor(o.left),c=Math.ceil(o[z?"unpaddedRight":"right"]);for(var g=h;g<=c;g++){if((d=n[g]||{}).level<=o.level)if(d.alwaysAsBoundary&&d.level<a&&!o.alwaysAsBoundary||d.grid===i&&o.grid===r||l){if("l","ef","t","r","ig","h","t",d.left<h&&d[u?"hz":"right"]>=h||d.left>h&&d[u?"hz":"left"]<=c){o.suppress=!0;break}}else if(o.level){a=o.level-1,delete s[o.level];break}n[g]=o,g===c&&(s[o.level]||(P.V6T(6),s[o.level]=P.l__(0,"0")),s[o.level]++)}}return(p=Object.entries(s).reverse()).length>1&&!l&&p[0][0]>=L&&p[1][0]<L&&1===p[0][1]&&(p[1][1]>1||p.length>2)&&p.shift(),p.length&&(a=Number(p[0][0])),a}.call(this,s),e.xAxis.maxLevelToDisplay=C,P.o7G(151),w=P.l__(L,C),this.panels)if("st","x","_grid","_border","str","o","ke",!(k=this.panels[X]).hidden&&!1!==k.shareChartXAxis&&(P.o7G(100),T=P.u$p(v,k),D=k.yAxis)){h.save(),h.beginPath(),h.rect(k.left,k.top+(S?0:1),k.width,k.height-1),h.clip(),S=!1,(_=new t.Plotter).newSeries(r,"stroke",this.canvasStyle("stx_grid")),_.newSeries(i,"stroke",this.canvasStyle("stx_grid_dark")),_.newSeries(n,"stroke",this.canvasStyle("stx_grid_border"));for(var W=0;W<s.length&&!((p=s[W]).level>C);W++)p.suppress||Math.floor(p.left)<=k.right&&(A=u&&p.grid===i&&(p.alwaysAsBoundary&&p.level<C||w),Math.floor(p.hz)>k.left&&(N&&(_.moveTo(p.grid,p.hz,D.top),_.lineTo(p.grid,p.hz,D.bottom)),T&&b&&(_.moveTo(n,p.hz,D.bottom+.5),_.lineTo(n,p.hz,D.bottom+6),A&&_.dashedLineTo(n,p.hz,D.bottom+6+c+3,[1,3]))),T&&p.right>k.left&&(this.canvasColor(p.grid==i&&w||p.alwaysAsBoundary&&p.level<C?"stx_xaxis_dark":"stx_xaxis",h),!w&&p.boundaryOnlyText&&(p.text=p.boundaryOnlyText),h.fillText(p.text,p.hz,x+(A?c+3:0))));b&&(M=Math.round(D.bottom)+.5,F=Math.round(k.right)+.5,_.moveTo(n,k.left,M),_.lineTo(n,F,M)),_.draw(h),h.restore()}h.textAlign="left",this.runAppend("drawXAxis",o)}}}},t.ChartEngine.prototype.createSpacedDateXAxis=function(e){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b=a;e||(e=this.chart);var{lineBaseLevel:x}=t.ChartEngine.XAxis,{dataSegment:S,lineApproximation:C,market:w,maxTicks:k,xaxis:T,xAxis:D}=e,{candleWidth:_,interval:A,timeUnit:M}=this.layout;T.length=0;for(var F=0;F<k;F++){if((s=S[F])&&F&&!T.length){w&&(n=this.standardMarketIterator(s.DT,D.adjustTimeZone?this.displayZone:null));for(var P=F;P>0;P--)o={},!n||C&&_<1||(o.DT=n.previous()),T.unshift(o);n=null}if(s||F&&T.length){if(l=s&&s.DT,s&&s.displayDate&&D.adjustTimeZone&&(l=s.displayDate),!l){if(!w)continue;if("tick"==A&&!D.futureTicksInterval)break;if(C&&_<1)break;if(!D.futureTicks)break;n||(n=this.standardMarketIterator(S[F-1].DT,D.adjustTimeZone?this.displayZone:null)),l=n.next()}h={DT:l,data:null},F<S.length&&(h.data=s),T.push(h)}}c=[],e.tzOffsetCache||(e.tzOffsetCache=new Map),e.tzOffsetCache.size>2e4&&e.tzOffsetCache.clear(),u=e.tzOffsetCache,p=((d=w&&w.market_def||{}).normal_daily_open||"00:00").split(":"),b.o7G(152);var L=b.l__(8,57,3,57,65);return g=Number(p[0])*L,d.hour_aligned||(g+=Number(p[1])),m=a=>{var n,s,o,l,h,d;n="year"===a||A!==a&&M!==a?i:r,s=t.ChartEngine.XAxis.setPropertiesForInterval[a],o=e.left,T.forEach(((e,i)=>{var p,m,f,y,v,S,C;if(p=e.data&&e.data.candleWidth||_,m=e.DT)switch("s","ec","on","d",a){case"year":f=m.getFullYear();break;case"month":f=m.getMonth();break;case"week":case"day":f=m.getDate();break;case"minute":f=60*m.getHours()+m.getMinutes();break;case"second":f=m.getSeconds();break;case"millisecond":case"tick":f=m.getMilliseconds()}if(n===r&&(b.V6T(32),o+=b.u$p(p,2)),void 0!==f&&(n===r||l!==f)){if(y=new t.ChartEngine.XAxisLabel({hz:o,grid:n,raw:f}),"minute"===a){if((!h||h.getDate()!==m.getDate())&&(h=m,S=`${+m}|${v=w&&w.market_tz}|${this.displayZone}`,void 0===(d=u.get(S)))){d=(t.convertTimeZone(m,this.displayZone,v).getTime()-m)/6e4,1747173135,-132831371,b.o7G(21),C=b.l__(0,"2");for(var k=1;1747173135!==b.j7j(k.toString(),k.toString().length,47740);k++)u.set(S,d),C+=2;-132831371!==b.p_V(C.toString(),C.toString().length,75619)&&u.set(S,d)}b.o7G(6),y.marketOpenOffset=b.l__(g,d)}s&&s(y,e,w,this),y.grid==r&&y.level<x&&(y.level+=x),(i||n===r)&&c.push(y),l=f}n===r?(b.V6T(32),o+=b.u$p(p,2)):o+=p}))},(v=(y=["year","month","week","month","day","minute","second","millisecond","tick"]).indexOf(f=M||A))>0&&("tick"!==f&&m(y[v-1]),m(y[v])),c}},B=e=>{var t,i=a;(t=e.CIQ).ChartEngine.prototype.createYAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if(r="c",r+="reat",r+="eYAxis",!this.runPrepend(r,arguments)){if(n=e.chart,s=e.name==n.name,a||(a={}),a.noChange=!1,o=a.yAxis?a.yAxis:e.yAxis,t.ChartEngine.enableCaching&&o.high==e.cacheHigh&&o.low==e.cacheLow){i.V6T(58);var w=i.u$p(15,230,6,15);l=n.dataSet.length-n.scroll-w,i.V6T(50);var k=i.l__(1,19,19);h=l+n.maxTicks+k,e.cacheLeft=l,e.cacheRight=h,a.noChange=!0}else i.o7G(6),e.cacheLeft=i.u$p(0,"1000000"),e.cacheRight=-1,e.cacheHigh=o.high,e.cacheLow=o.low;if(c=n.xAxis.idealTickSizePixels||n.xAxis.autoComputedTickSizePixels,o.goldenRatioYAxis&&o.idealTickSizePixels!=c/1.618&&(a.noChange=!1),!a.noChange){if(this.adjustYAxisHeightOffset(e,o),d=o.height=o.bottom-o.top,p=(o.high-o.low)/(d-o.zoom),!o.semiLog)if(a.ground)o.high=o.high+o.zoom*p;else{i.V6T(53);var T=i.u$p(15,3,193,10);o.high=o.high+(o.zoom/T+o.scroll)*p,i.o7G(88);var D=i.u$p(20,7,21,7);o.low=o.low-(o.zoom/D-o.scroll)*p}(o.min||0===o.min)&&(o.low=o.min),(o.max||0===o.max)&&(o.high=o.max),o.shadow=o.high-o.low,!o.semiLog||this.activeDrawing&&"projection"==this.activeDrawing.name||(g=function(){var e;o.logHigh=Math.log(o.high)/Math.LN10,e=Math.max(o.low,1e-9),i.I_9(),o.logLow=Math.log(e)/Math.LN10,o.low<=0&&(o.logLow=0),o.logShadow=o.logHigh-o.logLow},o.semiLog&&g(),m=o.height/(o.height-o.zoom),o.flipped?(o.high=this.transformedPriceFromPixel(o.bottom+m*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.top-m*(o.zoom/2-o.scroll),e,o)):(o.high=this.transformedPriceFromPixel(o.top-m*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.bottom+m*(o.zoom/2-o.scroll),e,o)),o.shadow=o.high-o.low,o.semiLog&&g()),o.goldenRatioYAxis&&s&&o==e.yAxis?(i.V6T(32),o.idealTickSizePixels=i.l__(c,1.618),0===o.idealTickSizePixels&&(f=this.getCanvasFontSize("stx_yaxis"),i.o7G(27),o.idealTickSizePixels=i.l__(5,f))):o.idealTickSizePixels||(f=this.getCanvasFontSize("stx_yaxis"),s?(i.V6T(27),o.idealTickSizePixels=i.u$p(5,f)):(i.o7G(27),o.idealTickSizePixels=i.u$p(2,f))),y=Math.round(d/o.idealTickSizePixels),u=a.range?a.range[1]-a.range[0]:o.shadow,i.o7G(32),o.priceTick=Math.floor(i.u$p(u,y)),v=1;for(var _=0;_<10&&!(o.priceTick>0);_++)v*=10,o.priceTick=Math.floor(u/y*v)/v;if(10==_&&(i.o7G(6),o.priceTick=i.l__(0,"0.00000001")),o.priceTick=Math.round(u/y*v)/v,b=Math.round(u/o.priceTick),a.range&&b<u&&!o.noEvenDivisorTicks){for(;b>=1&&u%b!=0;)b--;i.o7G(32),o.priceTick=i.u$p(u,b)}if(o.minimumPriceTick){x=o.minimumPriceTick,f=this.getCanvasFontSize("stx_yaxis");for(var A=0;A<100&&(i.V6T(32),d/i.u$p(u,x)<2*f);A++)x+=o.minimumPriceTick;A<100&&(o.priceTick=x)}}if((o.priceTick<=0||o.priceTick===1/0)&&(o.priceTick=1),o.multiplier=o.height/o.shadow,o.multiplier==1/0&&(o.multiplier=0),o.decimalPlaces||0===o.decimalPlaces)o.printDecimalPlaces=o.decimalPlaces;else if(s){S=0;for(var M=0;M<e.yAxis.shadowBreaks.length;M++)C=e.yAxis.shadowBreaks[M],e.yAxis.shadow<C[0]&&(S=C[1]);o.printDecimalPlaces=S}else o.printDecimalPlaces=null;this.runAppend("createYAxis",arguments)}},t.ChartEngine.prototype.drawYAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X;if(a||(a={}),r=a.yAxis?a.yAxis:e.yAxis,!e.hidden&&!r.noDraw&&r.width){if(t.Comparison&&r.priceFormatter==t.Comparison.priceFormat||((n=r.fractional)?(r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),n.resolution||(n.resolution=r.minimumPrice),n.formatter||(n.formatter="'"),r.priceFormatter||(r.priceFormatter=function(e,t,a){var r,s,o,l;if(n){r="",a<0&&(r="-",a=Math.abs(a)),s=Math.floor(Math.round(a/n.resolution)*n.resolution),o=Math.round((a-s)/n.resolution),l=Math.floor(o),i.o7G(6);i.u$p(64750,74e3);i.o7G(70);var h=i.u$p(4554,18,4557,1524);i.V6T(6);var c=i.l__(18,2449);i.o7G(46);i.u$p(4822,91637,91637);i.o7G(50);var u=i.l__(14,906,2);i.o7G(50);var d=i.l__(9001,529,6);i.F__(),i.V6T(2);var p=i.u$p(153710,3,8089,153707);return r+s+n.formatter+(l<10?4610>h?!(c>=2368)||"0":u:"")+l+(o-l>=.5?d<=174.26?p:"+":"")}})):r.originalPriceFormatter&&(r.priceFormatter=r.originalPriceFormatter.func,r.originalPriceFormatter=null)),s=this.colorOrStyle(r.textStyle||"stx_yaxis"),o=this.highlightedDraggable,i.o7G(19),l=i.u$p(32,"0"),o&&this.yaxisMatches(o,r)?l=.15:r.highlight&&(l=.1),l){h=s.constructor==String?s:s.color,c=-686007027,u=-452827317,d=2;for(var W=1;i.p_V(W.toString(),W.toString().length,682)!==c;W++)r.setBackground(this,{color:h,opacity:l}),d+=2;i.j7j(d.toString(),d.toString().length,59613)!==u&&r.setBackground(this,{color:h,opacity:l})}if(r.pretty)return this.drawYAxisPretty(e,a);if(!this.runPrepend("drawYAxis",arguments)){if(!a.noDraw&&!r.noDraw){if(!(p=r.yAxisPlotter)||!a.noChange){if(g="l",g+="e",g+="f",g+="t",m="l",m+="e",m+="f",m+="t",f="str",f+="oke",p=r.yAxisPlotter=new t.Plotter,y=e.chart,v=e.name==y.name&&r.name===e.yAxis.name,!r.priceTick)return;if(b=r.shadow,x=a.range){i.o7G(153);var U=i.u$p(5,13,2,11,18);b=x[U]-x[0]}if(S=b/r.priceTick,S=Math.round(S),r.semiLog&&(C=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,e))/Math.LN10,w=(r.logHigh-r.logLow)/S),p.newSeries("grid","stroke",this.canvasStyle("stx_grid")),p.newSeries("text","fill",s),p.newSeries("border",f,this.canvasStyle("stx_grid_border")),k=0,T=x?x[1]:r.high,D=x?x[0]:r.low,_=null===r.displayBorder?y.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(_=!1),!0===this.axisBorders&&(_=!0),F=(M=y.dynamicYAxis)?r.width:NaN,A=(P=this.getYAxisCurrentPosition(r,e))==m?r.left+r.width:r.left,L=Math.round(A)+.5,O=_?3:0,P==g&&(O=_?-3:0),v)if(r.shadow<1){i.V6T(43);var q=i.u$p(1,7,17);i.o7G(154);var G=i.l__(1,19,9,90,8);k=(parseInt(D/r.priceTick,q)+G)*r.priceTick-D}else k=r.priceTick-Math.round(D%r.priceTick*e.chart.roundit)/e.chart.roundit;else k=T%r.priceTick;E=this.getCanvasFontSize("stx_yaxis");for(var Q=0;Q<S;Q++)I="tex",I+="t",N="l",N+="e",N+="f",N+="t",r.semiLog?(i.V6T(125),V=i.u$p(w,Q,C),H=Math.pow(10,V)):H=v?D+Q*r.priceTick+k:T-Q*r.priceTick-k,R=this.pixelFromTransformedValue(H,e,r),(Y=Math.floor(R)+.5)+E/2>e.bottom||Y-E/2<e.top||Math.abs(Y-r.bottom)<1||(r.flipped&&(Y=r.top+r.bottom-Y),r.displayGridLines&&(z="g",z+="ri",z+="d",p.moveTo(z,e.left+1,Y),p.lineTo("grid",e.right-1,Y)),_&&(i.o7G(6),p.moveTo("border",i.u$p(.5,L),Y),i.o7G(23),p.lineTo("border",i.l__(L,O),Y)),H=r.priceFormatter?r.priceFormatter(this,e,H):this.formatYAxisPrice(H,e,null,r),B=r.textBackground?this.containerColor:null,j=3,i.o7G(42),$=i.u$p(A,j,O),P==N?($=r.left+j,!1!==r.justifyRight&&($=r.left+r.width+O-j)):r.justifyRight&&($=A+r.width),p.addText(I,H,$,Y,B,null,E),M&&(F=Math.max(F,y.context.measureText(H).width+Math.abs(O)+j)));if(_&&(X=Math.round(r.bottom)+.5,p.moveTo("border",L,r.top),p.lineTo("border",L,X),p.draw(this.getBackgroundCanvas(y).context,"border")),M&&F>r.width)throw r._dynamicWidth=F,this.calculateYAxisPositions(),new Error("reboot draw");if(!M&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:y.name}),new Error("reboot draw")}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},i.F__(),t.ChartEngine.prototype.drawYAxisPretty=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G;if(!this.runPrepend("drawYAxis",arguments)&&(a||(a={}),r=a.yAxis||e.yAxis,!e.hidden&&!r.noDraw&&r.width)){if(!a.noDraw){if(!(n=r.yAxisPlotter)||!a.noChange){if(s="f",s+="i",s+="ll",o="t",o+="e",o+="x",o+="t",n=r.yAxisPlotter=new t.Plotter,l=e.chart,!r.priceTick)return;if(isNaN(r.high)||isNaN(r.low))return;if(h=r.shadow,a.range){i.V6T(155);var Q=i.u$p(11,2,11,14,16);h=a.range[Q]-a.range[0]}c=(r.height-(a.range?r.zoom:0))/r.idealTickSizePixels,c=Math.round(c),u=r.textStyle||"stx_yaxis",n.newSeries("grid","stroke",this.canvasStyle("stx_grid")),n.newSeries(o,s,this.colorOrStyle(u)),n.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),p=(d=a.range)?d[1]:r.high,g=d?d[0]:r.low,m=null===r.displayBorder?l.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(m=!1),!0===this.axisBorders&&(m=!0),v=(y=l.dynamicYAxis)?r.width:NaN,f="left"==(b=this.getYAxisCurrentPosition(r,e))?r.left+r.width:r.left,x=Math.round(f)+.5,S=m?3:0,"left"==b&&(S=m?-3:0),C=this.getCanvasFontSize("stx_yaxis"),k=(w=r.increments).length,T=0,D=1,i.V6T(79),_=i.u$p(0,"0"),i.V6T(6),A=i.l__(0,"0"),M=0,F=Number.MAX_VALUE;for(var Z=0;Z<100&&(_=w[T]*Math.pow(10,M),i.V6T(32),D=Math.floor(i.l__(h,_)),i.o7G(6),!((P=Math.abs(i.u$p(D,c)))>F));Z++){if(F=P,D==c){A=_;break}D>c?++T>=k&&(T=0,M++):--T<0&&(i.o7G(6),T=i.u$p(1,k),M--),A=_}if(L=Math.ceil(g/A)*A,O=0,r.bottom-this.pixelFromTransformedValue(L,e,r)>r.idealTickSizePixels&&r.semiLog&&r.prettySemiLog&&p-g>10){for(E=Math.ceil(g),I=0;L-E>=1e4&&I<=15;)L/=10,E/=10,I++;for(L=Math.ceil(L),E=Math.ceil(E);E<L&&L%E!=0;++E);L*=Math.pow(10,I),(E*=Math.pow(10,I))<L&&(L===A&&(A=E,O=E),L=E)}if(r.height>r.zoom){N=0,H=Number.MAX_VALUE,l.context.save(),this.canvasFont("stx_yaxis",l.context),i.V6T(4);var K=i.l__(16,15,238);V=r.shadow/A+K;for(var J=0;J<V&&(i.o7G(125),!((R=i.u$p(A,N,L))>p));J++)if(A+=O,N++,H-(Y=this.pixelFromTransformedValue(R,e,r))<C+1&&O>0){H=Number.MAX_VALUE,A=O,O*=2,J=N=0,i.V6T(10);var ee=i.l__(4,12,4);V=r.shadow/A+ee,n.reset()}else if(H=Y,!((z=Math.floor(Y)+.5)+C/2>r.bottom||z-C/2<r.top||Math.abs(z-r.bottom)<1)){if(r.displayGridLines&&(n.moveTo("grid",e.left+1,z),n.lineTo("grid",e.right-1,z)),m&&(i.o7G(6),n.moveTo("border",i.u$p(.5,x),z),i.V6T(23),n.lineTo("border",i.u$p(x,S),z)),R=r.priceFormatter?r.priceFormatter(this,e,R):this.formatYAxisPrice(R,e,null,r),B=r.textBackground?this.containerColor:null,j=$=3,i.V6T(42),X=i.l__(f,j,S),"left"==b){i.o7G(120);var te=i.l__(118,16,5,11);X=r.left+te,!1!==r.justifyRight&&(X=r.left+r.width+S-j)}else r.justifyRight&&(X=f+r.width-$);n.addText("text",R,X,z,B,null,C),y&&(i.o7G(23),W=i.l__(R," "),v=Math.max(v,l.context.measureText(W).width+Math.abs(S)+j))}l.context.restore(),J>=V&&(i.V6T(23),console.log(i.u$p("drawYAxisPretty: assertion error. zz reached ",V)))}if(m&&(U="b",U+="or",U+="d",U+="er",q=Math.round(r.bottom)+.5,n.moveTo("border",x,r.top),n.lineTo(U,x,q),n.draw(this.getBackgroundCanvas(l).context,"border")),y&&v>r.width)throw G="reboot dra",G+="w",r._dynamicWidth=v,this.calculateYAxisPositions(),new Error(G);if(!y&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:l.name}),new Error("reboot draw")}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},s(j={}),o(),l(j),h(j),c(j),u(j),d(j),p(j),g(j),m(j),f(j),y(j),v(j),b(j),x(),S(j),C(j),w(j),k(j),T(j),D(j),_(j),A(j),M(j),F(j),P(j),L(j),O(j),E(j),I(j),N(j),H(j),V(j),R(j),Y(j),z(j),B(j);var{CIQ:$,SplinePlotter:X,timezoneJS:W,$$:U,$$$:q}=j},594:function(){let e=0,t=[],i=[],a="";function r(e,t){n(cacheSearch(e,i,"queryString","queryString2"),t)}function n(e,t){const i=document.getElementById("symbol_"+t+"_list_container");for(;i.hasChildNodes();)i.removeChild(i.firstChild);if(e&&e.length){const a=document.createElement("ul");a.setAttribute("id","the-list"),e.map((e=>{const i=document.createElement("li");i.innerHTML=e.dispSym,i.setAttribute("class","li-item"),i.setAttribute("id",t),i.setAttribute("data-value",e.dispSym),i.setAttribute("data-asset",e.sym.asset),i.setAttribute("data-exc",e.sym.exc),i.setAttribute("data-id",e.sym.id),i.setAttribute("data-instrument",e.sym.instrument),i.setAttribute("data-streamSym",e.sym.streamSym),a.appendChild(i)})),i.appendChild(a)}else s("No data found")}function s(e){$(".err-msg").text(e).css({opacity:1}),$(".err-msg").animate({opacity:"0"},1e3,(function(){$(".err-msg").text("")}))}$(".multiple-charts").click((function(){let i=$(this).attr("id");$(".multi-modal").css({display:"block"}),$(".form-elements").empty(),function(e){for(var t=1;t<=e;t++)$(".form-elements").append('<div class="chart-form-filed"><div class="chart-label">Chart '+t+':</div><div class="input-filed"><input type = "text" id='+t+' class="chart_'+t+' chart-input-type" autocomplete="off"/><div id="symbol_'+t+'_list_container" class="list-box"></div></div></div>')}(i),e=i;let a=getQueryParams(),r=a&&a.symbolObject&&a.symbolObject.dispSymbol;$(".chart_1").val(r);let n={exc:a&&a.symbolObject&&a.symbolObject.exc,streamSym:a&&a.symbolObject&&a.symbolObject.streamSym,instrument:a&&a.symbolObject&&a.symbolObject.instrument,id:a&&a.symbolObject&&a.symbolObject.id,asset:a&&a.symbolObject&&a.symbolObject.asset,precision:a&&a.symbolObject&&a.symbolObject.precision,dispSymbol:a&&a.symbolObject&&a.symbolObject.dispSymbol,chartID:"chart1"};t.push(n)})),$(".multi-charts-close").click((function(){$(".multi-modal").css({display:"none"})})),$(document).on("click",".chart-input-type",(function(e){e.stopImmediatePropagation(),e.stopPropagation()})),$(document).on("input",".chart-input-type",(function(e){let t=e&&e.target&&e.target.id,s=$(this).val();if(t&&s)if(s.length<3)i=[],a="",n([],t);else if(3===s.length){let e=s.charAt(0),o=s.charAt(1),l=s.charAt(2),h=a.charAt(0),c=a.charAt(1),u=a.charAt(2);if(e==h&&o==c&&l==u)r(s,t);else{!function(e,t){e&&e.length>2&&(a=e,$("#symbol_"+t+"_list_container").addClass("show").removeClass("hide"),postSearchRequest(e,(function(e){e&&e.length>0&&(e.map((e=>{e.queryString=getDispSymbolName(e).primaryName+" "+e.sym.exc,e.queryString2=getDispSymbolName(e).secondaryName+" "+e.sym.exc})),i=e,n(e,t))})))}(e+""+o+l,t)}}else r(s,t)})),$(document).on("click",".list-box .li-item",(function(e){let i=e&&e.target&&e.target.id;e.preventDefault();let a=getQueryParams(),r={exc:$(this).attr("data-exc"),streamSym:$(this).attr("data-streamSym"),instrument:$(this).attr("data-instrument"),id:$(this).attr("data-id"),asset:$(this).attr("data-asset"),precision:a.symbolObject.precision,dispSymbol:$(this).attr("data-value"),chartID:`chart${i}`};if(t&&t.length){let e=t.findIndex((e=>e.chartID===r.chartID));-1===e?t.push(r):t[e]=r}else t.push(r);$(".chart_"+i).val($(this).attr("data-value")),$(".li-item").css({backgroundColor:"white"}),$(this).css({backgroundColor:"green"}),$("#symbol_"+i+"_list_container").addClass("hide").removeClass("show")})),$(".btn-submit").click((function(){let i=!0;for(let t=1;t<=e;t++){if(!$(`.chart_${t}`).val()){i=!1;break}}i&&t.length==e?function(){let e=getQueryParams(),i={symbolObject:t,appID:e&&e.appID?e.appID:null,sessionID:e&&e.sessionID?e.sessionID:null,view:e.view,deviceType:e.deviceType,userMode:e.userMode,selectedTheme:e.selectedTheme,encryptionKey:e.encryptionKey,isEncryptionEnabled:e.isEncryptionEnabled,intradayURL:e.intradayURL,historicalURL:e.historicalURL,tradingURL:e.tradingURL,symbolSearchURL:e.symbolSearchURL,publicURL:e.publicURL,socketURL:e.socketURL},a=encodeURIComponent(`data=${JSON.stringify(i)}`);$(".multi-modal").hide(),t=[],window.open(`${e.publicURL}/chartiq/multiCharts.html?${a}`)}():i&&t.length!=e?s("Invalid Symbols"):s("Symbols can not be empty")})),$(document).on("click",".modal-content",(function(){for(var t=0;t<=e;t++)$("#symbol_"+t+"_list_container").hasClass("show")&&($("#symbol_"+t+"_list_container").addClass("hide").removeClass("show"),$(".chart_"+t).val(""))})),$(document).on("click",".ciq-search",(function(e){let t=$(this).closest("cq-instant-chart").attr("id");window.searchElemtId=t}))},611:function(e,t,i){"use strict";i.d(t,{$$:function(){return L.$$},$I:function(){return L.$I},$L:function(){return S},BN:function(){return v},Dg:function(){return k},Fq:function(){return T},H:function(){return h},KY:function(){return F},Kn:function(){return f},PP:function(){return d},Pz:function(){return L.Pz},TO:function(){return P},Tl:function(){return u},VO:function(){return o},aN:function(){return D},ac:function(){return y},ag:function(){return c},e4:function(){return _},hA:function(){return m},hM:function(){return L.hM},i3:function(){return l},l0:function(){return C},mD:function(){return p},qe:function(){return M},r:function(){return n},rS:function(){return w},rt:function(){return s},rx:function(){return L.rx},tO:function(){return x},tb:function(){return g},yN:function(){return A},yP:function(){return b}});var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L=i(316);function O(){}O[19588]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"kzdsm",{get:function(){for(;;)return this},configurable:!0}),(t=kzdsm).vOYq5=t,i=4;break;case 9:delete t.vOYq5,delete Object.prototype.kzdsm,i=6;break;case 4:i="undefined"==typeof vOYq5?3:9;break;case 3:throw""}}catch(e){t=window}return t}}(),function(e){function t(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0]}}function i(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 3:l[9]="finePropert",l[1]="de",l[6]=!1;try{for(var s=2;13!==s;)switch(s){case 2:l[5]={},l[8]=(0,l[0][1])(l[0][0]),l[4]=[l[8],l[8].prototype][l[0][3]],s=4;break;case 4:s=l[4].hasOwnProperty(l[0][4])&&l[4][l[0][4]]===l[4][l[0][2]]?3:9;break;case 9:l[4][l[0][4]]=l[4][l[0][2]],l[5].set=function(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];l[4][l[0][2]]=i[0][0],t=5}},l[5].get=function(){for(var e=2;13!==e;)switch(e){case 2:var t=[arguments];t[8]="ndefin",t[3]="ed",t[6]="",e=3;break;case 3:t[6]="",t[6]="u",t[5]=t[6],t[5]+=t[8],e=6;break;case 6:return t[5]+=t[3],typeof l[4][l[0][2]]==t[5]?void 0:l[4][l[0][2]]}},s=6;break;case 3:return;case 6:l[5].enumerable=l[6];try{for(var o=2;3!==o;)if(2===o)l[3]=l[1],l[3]+=l[9],l[3]+=l[2],l[0][0].Object[l[3]](l[4],l[0][4],l[5]),o=3}catch(e){}s=13}}catch(e){}n=6;break;case 2:var l=[arguments];l[2]="",l[2]="y",l[9]="",n=3}}function a(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Array}}function r(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].RegExp}}for(var n=2;120!==n;)switch(n){case 35:o[70]="",o[61]="b",o[70]="18",o[14]="",n=31;break;case 126:s(r,"test",o[40],o[56]),n=125;break;case 131:s(t,"String",o[38],o[23]),n=130;break;case 54:o[73]="l",o[78]="",o[78]="",o[78]="Ojq",o[58]="__op",n=49;break;case 62:o[36]="1ucJ",o[63]="t",o[83]="D",o[51]="",n=58;break;case 27:o[34]="o",o[74]="d",o[60]="",o[60]="N0rL",o[15]="6u",o[39]="",o[39]="NXT",n=35;break;case 58:o[51]="",o[51]="trac",o[47]="",o[47]="__abs",o[67]="",o[67]="E9",n=75;break;case 127:s(a,"map",o[40],o[24]),n=126;break;case 18:o[6]="p1K",o[21]="",o[21]="Q",o[34]="",n=27;break;case 11:o[8]="",o[8]="i4",o[3]="",o[3]="Kce",n=18;break;case 40:o[41]="",o[41]="8g",o[19]="",o[19]="p",o[73]="",n=54;break;case 130:s(h,"fromCharCode",o[38],o[79]),n=129;break;case 114:o[82]=o[21],o[82]+=o[43],o[82]+=o[3],o[79]=o[8],n=110;break;case 6:o[7]="",o[7]="r",o[4]="",o[4]="gw",n=11;break;case 121:s(l,"apply",o[40],o[97]),n=120;break;case 128:s(h,"replace",o[40],o[77]),n=127;break;case 78:o[90]+=o[69],o[90]+=o[78],o[91]=o[54],o[91]+=o[52],n=101;break;case 105:o[53]=o[6],o[53]+=o[83],o[53]+=o[1],n=133;break;case 3:o[9]="",o[9]="H5",o[2]="",o[2]="O5",n=6;break;case 75:o[76]="",o[29]="h",o[76]="B47",o[42]="",o[42]="v",o[43]="8",n=69;break;case 122:s(t,o[13],o[38],o[68]),n=121;break;case 133:var s=function(e,t,a,r){for(var n=2;5!==n;)if(2===n){var s=[arguments];i(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};n=132;break;case 69:o[27]="cSFG",o[38]=0,o[40]=1,o[97]=o[42],n=90;break;case 129:s(h,"substring",o[40],o[82]),n=128;break;case 44:o[93]="4vh",o[12]="timi",o[89]="",o[89]="urs",n=40;break;case 86:o[68]+=o[29],o[13]=o[47],o[13]+=o[51],o[13]+=o[63],n=82;break;case 101:o[91]+=o[73],o[26]=o[19],o[26]+=o[41],o[26]+=o[89],o[72]=o[58],n=96;break;case 110:o[79]+=o[4],o[79]+=o[7],o[23]=o[2],o[23]+=o[9],o[23]+=o[5],n=105;break;case 92:o[56]+=o[39],o[24]=o[60],o[24]+=o[34],o[24]+=o[74],o[77]=o[61],o[77]+=o[93],o[77]+=o[15],n=114;break;case 45:o[69]="P",o[63]="",o[63]="",o[52]="dua",n=62;break;case 90:o[97]+=o[43],o[97]+=o[27],o[68]=o[76],o[68]+=o[67],n=86;break;case 123:s(a,"push",o[40],o[37]),n=122;break;case 124:s(t,o[91],o[38],o[90]),n=123;break;case 49:o[62]="H4",o[18]="",o[54]="__resi",o[18]="c",n=45;break;case 125:s(t,o[72],o[38],o[26]),n=124;break;case 31:o[14]="",o[14]="z",o[22]="ze",o[12]="",n=44;break;case 96:o[72]+=o[12],o[72]+=o[22],o[56]=o[14],o[56]+=o[70],n=92;break;case 132:s(h,"charCodeAt",o[40],o[53]),n=131;break;case 82:o[37]=o[18],o[37]+=o[36],o[37]+=o[83],o[90]=o[62],n=78;break;case 2:var o=[arguments];o[5]="",o[5]="I",o[1]="K",n=3}function l(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Function}}function h(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].String}}}(O[19588]),O[182467]=(a=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{X9xfeQe:function(e,t,i){for(var r=3432918353,n=461845907,s=i,o=-4&t,l=0;l<o;l+=4){var h=255&e.p1KDK(l)|(255&e.p1KDK(l+1))<<8|(255&e.p1KDK(l+2))<<16|(255&e.p1KDK(l+3))<<24;h=a(h,r),s=5*(s=(524287&(s^=h=a(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,t%4){case 3:h=(255&e.p1KDK(o+2))<<16;case 2:h|=(255&e.p1KDK(o+1))<<8;case 1:h|=255&e.p1KDK(o),h=a(h,r),s^=h=a(h=(131071&h)<<15|h>>>17,n)}return s^=t,s=a(s^=s>>>16,2246822507),s=a(s^=s>>>13,3266489909),s^=s>>>16}}),O[254460]="hDF",O.A_n=function(){return"function"==typeof O[553805].k$7sqj$?O[553805].k$7sqj$.apply(O[553805],arguments):O[553805].k$7sqj$},O.w0n=function(){return"function"==typeof O[3116].h07Ms$L?O[3116].h07Ms$L.apply(O[3116],arguments):O[3116].h07Ms$L},O.D2o=function(){return"function"==typeof O[553805].J2r27iY?O[553805].J2r27iY.apply(O[553805],arguments):O[553805].J2r27iY},O.i6w=function(){return"function"==typeof O[3116].h07Ms$L?O[3116].h07Ms$L.apply(O[3116],arguments):O[3116].h07Ms$L},O[3116]={h07Ms$L:function(){var e,t=arguments;switch(r){case 40:e=t[1]-(t[0]<<t[3])+t[2];break;case 8:e=(t[2]+t[1])/t[3]*t[4]-t[0];break;case 4:e=t[0]-t[1]-t[2];break;case 74:e=t[0]*t[1];break;case 42:e=t[1]*t[3]+t[0]*t[2];break;case 27:e=t[0]<<t[1];break;case 68:e=t[0]==t[1];break;case 99:e=-t[4]/t[0]/t[3]*t[1]+t[2];break;case 79:e=t[1]<=t[0];break;case 141:e=(t[2]+t[1])/t[0]-t[3];break;case 53:e=(t[4]+t[1])*t[0]+t[3]-t[2];break;case 87:e=t[1]|t[3]|t[2]|t[4]|t[0];break;case 143:e=t[1]*t[2]*t[0];break;case 38:e=(t[1]-t[3])/t[0]+t[2];break;case 35:e=(t[0]/t[1]+t[3])*t[2]-t[4];break;case 118:e=t[1]*t[0]+t[2]+t[3];break;case 46:e=t[0]-t[1]/+t[2];break;case 41:e=t[2]+t[1]-+t[0];break;case 115:e=t[1]-(t[2]-t[3])-+t[0];break;case 39:e=(t[0]>>t[1])+t[2];break;case 66:e=(-t[0]/t[4]-t[1])*t[2]+t[3];break;case 117:e=(t[0]/t[4]-t[1])*t[2]+t[3];break;case 71:e=t[1]/t[4]*t[3]*t[2]*t[5]+t[0];break;case 77:e=t[0]>=t[1];break;case 5:e=t[4]-t[0]/(t[3]*t[2])+t[1];break;case 14:e=t[2]/t[1]+t[0]-t[3];break;case 82:e=t[0]<<t[1]-t[2];break;case 7:e=t[0]/t[1]-t[2];break;case 11:e=(t[1]+t[0])/t[2];break;case 133:e=t[2]*t[3]+t[1]-t[0];break;case 131:e=+t[1]*((t[2]-t[0])/t[4]+ +t[3]);break;case 114:e=(t[2]+t[1])*t[0]-t[3];break;case 47:e=t[0]-t[3]/(t[2]-t[1]);break;case 28:e=(t[0]-t[2])*t[1];break;case 113:e=(t[0]-t[1])*t[2]-t[3];break;case 120:e=t[2]+t[1]-t[3]+t[0];break;case 62:e=t[3]*t[2]/t[0]+t[4]-t[1];break;case 17:e=-t[1]-t[2]+t[0];break;case 29:e=t[4]+(t[2]+t[3]*t[0])*t[1];break;case 22:e=t[0]/(t[2]^t[1]);break;case 13:e=t[4]*t[2]*t[1]*t[0]-t[3];break;case 119:e=(-t[0]-t[4])*t[1]*t[3]+t[2];break;case 15:e=t[1]+t[2]+t[0];break;case 142:e=t[4]*(t[1]/t[3]-(t[0]-t[5]))+t[2];break;case 93:e=(-t[0]+t[1])*t[3]-t[2];break;case 36:e=t[0]>>t[1];break;case 26:e=(-t[3]+t[4])/t[2]/t[1]+t[0];break;case 75:e=t[1]%t[0];break;case 135:e=t[2]-t[0]*t[1];break;case 83:e=t[0]<t[1];break;case 48:e=t[0]-t[1]/t[3]-t[2];break;case 49:e=t[3]/t[0]*t[1]-t[4]-t[2];break;case 12:e=(-t[2]*t[0]-t[3])/t[4]+t[1];break;case 58:e=t[0]^t[1];break;case 122:e=(t[0]+t[3]-t[4])*t[2]-t[1];break;case 110:e=t[4]/t[1]/t[0]/t[2]+t[3];break;case 138:e=-t[3]/t[4]+t[2]+t[1]-t[0];break;case 18:e=t[0]/+t[1];break;case 20:e=t[0]*t[1]-t[2];break;case 10:e=t[1]/t[0];break;case 64:e=(t[3]+t[0])/t[1]+t[2];break;case 51:e=-t[0]/t[2]/t[4]+t[3]-t[1];break;case 116:e=t[2]/(t[0]*t[1]);break;case 50:e=-t[1]+t[0];break;case 86:e=t[1]|t[2]|t[0];break;case 132:e=(-t[4]*t[1]+t[0])*t[3]+t[2];break;case 9:e=t[1]-t[0];break;case 100:e=(-t[2]+t[3])/t[0]+t[1];break;case 124:e=t[0]*t[6]*t[4]+(+t[2]-t[5]*t[3])*t[1];break;case 19:e=-t[1]+t[2]-t[0];break;case 108:e=(t[3]/t[2]-t[0])/t[4]+t[1];break;case 76:e=t[1]+t[2]+t[0]+t[4]+t[3];break;case 67:e=t[0]*t[4]/t[2]/t[1]-t[3];break;case 16:e=t[2]-t[1]+t[0];break;case 78:e=t[0]>>t[1]<<t[2];break;case 109:e=t[2]*(t[0]/t[1]);break;case 88:e=(t[3]+t[2])*t[0]*t[4]-t[1];break;case 70:e=-t[4]/t[6]*(t[3]*(t[1]-t[2])-t[0])+t[5];break;case 106:e=t[0]*t[2]/t[1];break;case 96:e=t[0]*t[2]*t[1]-t[3];break;case 134:e=t[3]/t[4]*t[0]/t[2]+t[1];break;case 147:e=-t[0]/t[2]+t[1];break;case 34:e=t[1]-t[0]-t[3]+t[2];break;case 102:e=t[0]*t[3]/t[2]+t[1];break;case 103:e=t[3]*t[4]+t[0]+t[2]-t[1];break;case 111:e=t[3]-t[0]+t[2]-t[1];break;case 52:e=t[2]-+t[0]+t[1];break;case 94:e=(t[2]+t[3]-t[0])/t[1]-t[4];break;case 129:e=t[2]*t[0]*t[3]*t[1];break;case 80:e=t[2]-t[0]<<(t[3]^t[1]);break;case 107:e=t[4]+t[0]+t[1]-t[3]-t[2];break;case 54:e=t[3]/t[0]-t[1]+t[2];break;case 57:e=-t[3]*t[1]-t[0]+t[2];break;case 37:e=-t[1]/t[2]+t[3]-t[0];break;case 101:e=+t[2]*t[1]/(t[3]*t[4]+t[0]);break;case 23:e=t[2]+t[0]-t[1];break;case 139:e=(t[3]-t[5])*(t[0]-t[6])+(t[1]-t[4])*(t[7]-t[2]);break;case 140:e=-t[2]+t[1]+t[0];break;case 1:e=t[1]+t[0];break;case 63:e=t[3]-t[2]-t[1]-t[0];break;case 72:e=t[4]/(t[6]^t[3])*(t[5]*t[2]*t[1]+t[0])+t[7];break;case 98:e=t[3]+t[2]-t[1]-t[0];break;case 30:e=t[3]*t[4]*t[2]-t[0]-t[1];break;case 127:e=t[2]+(t[0]>>t[1]);break;case 145:e=(t[2]+t[0]/t[1])*t[3];break;case 73:e=t[2]*(t[4]*t[3]*t[1]+t[5])+t[0];break;case 112:e=(t[0]-t[2]+t[4])/t[3]+t[1];break;case 125:e=-t[2]+t[1]-t[0]+t[3];break;case 65:e=(t[0]+t[4])/t[3]-t[1]+t[2];break;case 6:e=t[2]+t[1]/t[3]-t[0];break;case 126:e=t[0]-+t[1];break;case 136:e=(t[4]*t[1]-t[3])*t[2]-t[0];break;case 104:e=t[1]/t[2]*t[0]*t[4]-t[3];break;case 69:e=t[4]/t[0]*t[2]*t[3]+t[1];break;case 0:e=t[3]+t[0]+t[2]+t[1];break;case 128:e=t[1]-t[0]/t[2];break;case 2:e=t[1]|t[0];break;case 89:e=t[1]===t[0];break;case 44:e=t[3]-t[0]/+t[1]-t[2];break;case 90:e=(t[0]-t[4])/t[1]/t[2]+t[3];break;case 56:e=t[3]*t[1]/t[2]-t[0];break;case 45:e=t[2]+t[0]*t[1];break;case 24:e=t[2]-t[1]+ +t[0];break;case 21:e=t[2]/t[0]/t[3]+t[1]-t[4];break;case 84:e=t[1]!=t[0];break;case 81:e=t[1]>t[0];break;case 60:e=(t[1]-t[2])/(t[3]-t[0]);break;case 105:e=t[3]*(t[1]+t[2]/t[0]);break;case 146:e=(t[0]-t[2]-t[4])*t[3]+t[1];break;case 61:e=t[4]+t[1]-t[3]-t[2]+t[0];break;case 32:e=t[3]-t[4]-t[0]-t[1]+t[2];break;case 121:e=t[4]/t[0]/t[3]*t[1]-t[2];break;case 59:e=t[1]+t[3]+t[0]-t[2]+t[4];break;case 3:e=t[1]*t[0];break;case 31:e=(t[0]-t[4])/t[1]*t[3]+t[2];break;case 130:e=t[0]*t[2]+t[1];break;case 25:e=t[2]/t[1]+t[0];break;case 144:e=(t[1]-t[4]/(t[0]|t[3]))*t[2];break;case 97:e=-t[2]*t[0]+t[1]+t[3];break;case 55:e=(t[0]-t[3])*t[2]+t[1];break;case 123:e=t[2]/(t[1]+ +t[0]);break;case 95:e=t[0]/t[2]*t[4]/t[1]-t[3];break;case 33:e=(t[3]+t[0])*t[4]/t[1]+t[2];break;case 91:e=t[0]-(t[2]-t[1]);break;case 137:e=t[1]/t[2]/t[0];break;case 85:e=t[1]|t[2]|t[3]|t[0];break;case 43:e=t[0]+t[1]/t[2];break;case 92:e=-t[2]*t[1]+t[0]}return e},C4_h1O3:function(e){r=e}},O.u2S=function(){return"function"==typeof O[3116].C4_h1O3?O[3116].C4_h1O3.apply(O[3116],arguments):O[3116].C4_h1O3},O.k8O=function(){return"function"==typeof O[3116].C4_h1O3?O[3116].C4_h1O3.apply(O[3116],arguments):O[3116].C4_h1O3},O.r57=function(){return"function"==typeof O[182467].X9xfeQe?O[182467].X9xfeQe.apply(O[182467],arguments):O[182467].X9xfeQe},O.d6p=function(){return"function"==typeof O[488184].K9p3iaJ?O[488184].K9p3iaJ.apply(O[488184],arguments):O[488184].K9p3iaJ},O.s0Y=function(){return"function"==typeof O[477113].b9fNb$G?O[477113].b9fNb$G.apply(O[477113],arguments):O[477113].b9fNb$G},O[19588].k9WW=O,O.u1R=function(){return"function"==typeof O[182467].X9xfeQe?O[182467].X9xfeQe.apply(O[182467],arguments):O[182467].X9xfeQe},O[553805]=function(){function e(e,n,s,o,l){for(var h=2;15!==h;)switch(h){case 12:return!1;case 9:h=o>0?8:19;break;case 8:u=(c=d.Q8Kce(e,o)).length,h=6;break;case 1:p=a[r([19,22,10,8,27,16,22,21])],!t&&(t=void 0!==p?p[r([15,22,26,27,21,8,20,12])]||" ":""),!i&&(i=void 0!==p?p[r([15,25,12,13])]:""),d=l?i:t,h=9;break;case 11:return u=(c=d.Q8Kce(g,d.length)).length,O.u1R(c,u,s);case 18:u=(c=d.Q8Kce(0,d.length)).length,h=16;break;case 2:var c,u,d,p;h=1;break;case 13:h=n&&g>0&&46!==d.p1KDK(g-1)?12:11;break;case 19:h=null===e||e<=0?18:14;break;case 6:case 16:return O.u1R(c,u,s);case 14:var g=d.length-e;h=13}}for(;;){var t,i,a=O[19588];return{J2r27iY:function(t,i,a,r){for(;;)return e(t,i,a,r)},k$7sqj$:function(t,i,a,r){for(;;)return e(t,i,a,r,!0)}}}function r(e){for(var t=2;7!==t;)switch(t){case 2:var i=3,a="";t=5;break;case 4:t=r<e.length?3:8;break;case 8:return a;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 3:a+=O5H5I.i4gwr(e[r]-i+92),t=9}}}(),O[527162]=O[477113],O.H5p=function(){return"function"==typeof O[477113].b9fNb$G?O[477113].b9fNb$G.apply(O[477113],arguments):O[477113].b9fNb$G},O.c_T=function(){return"function"==typeof O[553805].J2r27iY?O[553805].J2r27iY.apply(O[553805],arguments):O[553805].J2r27iY},O.p3g=function(){return"function"==typeof O[553805].k$7sqj$?O[553805].k$7sqj$.apply(O[553805],arguments):O[553805].k$7sqj$},O[488184]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 4:i=s--?9:3;break;case 5:u=a[e[4]],i=4;break;case 9:i=s--?7:8;break;case 17:r=t-c>n,i=19;break;case 1:i=s--?4:5;break;case 18:i=c>=0?17:16;break;case 20:r=t-c>n&&l-t>n,i=19;break;case 14:i=s--?12:13;break;case 2:var r,n,o,l,h,c,u;i=1;break;case 7:i=s--?14:6;break;case 3:n=31,i=9;break;case 8:o=e[6],i=7;break;case 16:r=l-t>n,i=19;break;case 11:c=(h||0===h)&&u(h,n),i=10;break;case 6:l=o&&u(o,n),i=14;break;case 12:i=s--?10:11;break;case 10:i=c>=0&&l>=0?20:18;break;case 13:h=e[7],i=12;break;case 19:return r}}for(var i=2;10!==i;)switch(i){case 14:e=e.N0rLod((function(e){for(var t=2;13!==t;)switch(t){case 5:i="",t=4;break;case 7:t=i?14:6;break;case 2:var i;t=1;break;case 3:t=r<e.length?9:7;break;case 14:return i;case 1:t=s--?4:5;break;case 6:return;case 9:i+=a[n][o](e[r]+98),t=8;break;case 4:var r=0;t=3;break;case 8:r++,t=3}})),i=13;break;case 2:var a,r,n,s;i=1;break;case 1:i=s--?4:5;break;case 7:n=r.b4vh6u(new a[l]("^['-|]"),"S"),i=6;break;case 6:i=s--?13:14;break;case 8:i=s--?6:7;break;case 5:a=O[19588],i=4;break;case 3:i=s--?8:9;break;case 13:i=s--?11:12;break;case 4:var o="fromCharCode",l="RegExp";i=3;break;case 11:return{K9p3iaJ:function(i){for(var r=2;6!==r;)switch(r){case 4:h=t(n),r=3;break;case 5:r=s--?3:4;break;case 1:r=n>c?5:8;break;case 3:r=s--?8:9;break;case 8:return function(t,r){for(var n=2;10!==n;)switch(n){case 2:n=void 0===t&&void 0!==i?1:5;break;case 13:o++,n=9;break;case 12:s^=h,n=13;break;case 1:t=i,n=5;break;case 9:n=o<t[r[5]]?8:11;break;case 11:return s;case 5:n=void 0===r&&void 0!==e?4:3;break;case 3:var s,o=0;n=9;break;case 4:r=e,n=3;break;case 8:var l=a[r[4]](t[r[2]](o),16)[r[3]](2),h=l[r[2]](l[r[5]]-1);n=6;break;case 6:n=0===o?14:12;break;case 14:s=h,n=13}}(void 0,void 0)?h:!h;case 2:var n=(new a[e[0]])[e[1]]();r=1;break;case 9:c=n+6e4,r=8}}};case 9:r=typeof o,i=8;break;case 12:var h,c=0;i=11}}([[-30,-1,18,3],[5,3,18,-14,7,11,3],[1,6,-1,16,-33,18],[18,13,-15,18,16,7,12,5],[14,-1,16,17,3,-25,12,18],[10,3,12,5,18,6],[-49,18,16,0,-48,8,10,-49,-41],[]]),O[477113]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[2]=void 0,t[5]={},e=4;break;case 4:return t[5].b9fNb$G=function(){for(var e=2;90!==e;)switch(e){case 34:i[78]={},e=33;break;case 44:i[85]=i[13],i[89]={},i[89].A8F=["l3b"],i[89].b5P=function(){return/\x33\u0044/.z18NXT(function(){return escape("=")}+[])},e=40;break;case 66:return 39;case 47:i[3].c1ucJD(i[58]),i[3].c1ucJD(i[4]),i[3].c1ucJD(i[6]),e=65;break;case 67:t[2]=52,e=66;break;case 68:e=68;break;case 50:i[3].c1ucJD(i[70]),i[3].c1ucJD(i[57]),i[3].c1ucJD(i[85]),e=47;break;case 75:i[50]={},i[50][i[81]]=i[20][i[23]][i[21]],i[50][i[93]]=i[55],i[47].c1ucJD(i[50]),e=71;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 15:a[4]=a[6][a[7]],a[5]=a[1][a[4]].h/a[1][a[4]].t,t=26;break;case 16:t=a[7]<a[6].length?15:23;break;case 14:t=void 0===a[1][a[2][i[81]]]?13:11;break;case 4:a[1]={},a[6]=[],a[7]=0,t=8;break;case 25:a[3]=!0,t=24;break;case 12:a[6].c1ucJD(a[2][i[81]]),t=11;break;case 7:t=a[7]<a[0][0].length?6:18;break;case 5:return;case 6:a[2]=a[0][0][a[7]],t=14;break;case 24:a[7]++,t=16;break;case 18:a[3]=!1,t=17;break;case 13:a[1][a[2][i[81]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[1]={},t[1].h=0,e=4;break;case 4:return t[1].t=0,t[1]}}.v8cSFG(this,arguments),t=12;break;case 23:return a[3];case 1:t=0===a[0][0].length?5:4;break;case 10:t=a[2][i[93]]===i[24]?20:19;break;case 2:var a=[arguments];t=1;break;case 20:a[1][a[2][i[81]]].h+=!0,t=19;break;case 26:t=a[5]>=.5?25:24;break;case 8:a[7]=0,t=7;break;case 19:a[7]++,t=7;break;case 17:a[7]=0,t=16;break;case 11:a[1][a[2][i[81]]].t+=!0,t=10}}(i[47])?68:67;break;case 54:i[3].c1ucJD(i[2]),i[3].c1ucJD(i[95]),i[3].c1ucJD(i[91]),i[3].c1ucJD(i[7]),e=50;break;case 4:i[3]=[],i[5]={},i[5].A8F=["l3b"],i[5].b5P=function(){return!/\x7c/.z18NXT(function(){return"aaaa|a".substr(0,3)}+[])},e=7;break;case 76:e=i[21]<i[20][i[23]].length?75:70;break;case 7:i[4]=i[5],i[9]={},i[9].A8F=["l3b"],i[9].b5P=function(){return/\x31/.z18NXT(function(){return"aa".lastIndexOf("a")}+[])},e=12;break;case 77:i[21]=0,e=76;break;case 40:i[95]=i[89],i[74]={},i[74].A8F=["c7D"],i[74].b5P=function(){return"function"==typeof B47E9h},i[91]=i[74],e=54;break;case 65:i[47]=[],i[24]="x7G",i[43]="B_1",i[23]="A8F",i[93]="m$9",i[16]="b5P",e=59;break;case 25:i[27].b5P=function(){return!/\x79/.z18NXT(function(){return"xy".substring(0,1)}+[])},i[57]=i[27],i[45]={},i[45].A8F=["c7D"],i[45].b5P=function(){return"function"==typeof H4POjq},i[70]=i[45],e=34;break;case 58:i[30]=0,e=57;break;case 12:i[6]=i[9],e=11;break;case 57:e=i[30]<i[3].length?56:69;break;case 5:return 25;case 70:i[30]++,e=57;break;case 59:i[81]="P2w",e=58;break;case 1:e=t[2]?5:4;break;case 16:i[8].b5P=function(){return"function"==typeof p8gurs},i[7]=i[8],i[27]={},i[27].A8F=["l3b"],e=25;break;case 30:i[13]={},i[13].A8F=["c7D"],i[13].b5P=function(){var e=!1,t=[];try{for(var i in console)t.c1ucJD(i);e=0===t.length}catch(e){}return e},e=44;break;case 33:i[78].A8F=["l3b"],i[78].b5P=function(){return!/\x30\u0078\u0036\x31/.z18NXT(function(){return String.fromCharCode(97)}+[])},i[58]=i[78],e=30;break;case 71:i[21]++,e=76;break;case 2:var i=[arguments];e=1;break;case 56:i[20]=i[3][i[30]];try{i[55]=i[20][i[16]]()?i[24]:i[43]}catch(e){i[55]=i[43]}e=77;break;case 11:i[1]={},i[1].A8F=["l3b"],i[1].b5P=function(){return/\u0061\x61\x61\x61\x61/.z18NXT(function(){return"aaaa".padEnd(5,"a")}+[])},i[2]=i[1],i[8]={},i[8].A8F=["c7D"],e=16}},t[5]}}(),O.Z9D=function(){return"function"==typeof O[488184].K9p3iaJ?O[488184].K9p3iaJ.apply(O[488184],arguments):O[488184].K9p3iaJ},O[242151]=!0,O.r_0=function(e){if(O.s0Y(),O&&e)return O.Z9D(e)},O.k4_=function(e){if(O.H5p(),O)return O.Z9D(e)},O.H5p(),O.N1P=function(e){if(O.s0Y(),O)return O.d6p(e)},O.O60=function(e){if(O.H5p(),O&&e)return O.Z9D(e)},O.e4G=function(e){if(O.s0Y(),O&&e)return O.d6p(e)},O.u7w=function(e){if(O.H5p(),O&&e)return O.d6p(e)},O.z2$=function(e){if(O.s0Y(),O)return O.Z9D(e)},O.x15=function(e){if(O)return O.d6p(e)},n=e=>{var t,i,a,r=O;r.s0Y(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=class{get(e,t){var i;r.s0Y(),i=2;for(var a=1;1343962052!==r.u1R(a.toString(),a.toString().length,52866);a++)t(""),i+=2;1304093698!==r.r57(i.toString(),i.toString().length,14863)&&t("no storage defined")}set(e,t){}remove(e){}},t.ChartEngine.create=function({container:e,config:n,deferLoad:s}={}){var o,l,h;e||(e=document.querySelector(".chartContainer")||document.body),r.H5p(),n||(n={}),o=Object.assign({container:e},n.chartEngineParams),l=new this(o);var{quoteFeeds:c,marketFactory:u,addOns:d,chartId:p,multiChartId:g,onEngineReady:m,onChartReady:f}=n;for(var y in c&&l.attachQuoteFeed&&c.forEach((({quoteFeed:e,behavior:t,filter:i})=>{l.attachQuoteFeed(e,t,i)})),u&&l.setMarketFactory(u),d&&Object.entries(d).filter((([,e])=>(r.s0Y(),!!e))).forEach((([e,i])=>{var a;if(n.enabledAddOns[e])if(a=i.moduleName||t.capitalize(e),r.H5p(),t[a]){var{cssRequired:s}=new t[a](Object.assign({stx:l},i,{config:n}));s&&t.UI&&t.UI.activatePluginUI(l,a)}else t.debug&&(r.u2S(0),console.log(`${a}${r.i6w("th ","ms:","para"," not available for addons wi")}`,i))})),h=t.ensureDefaults(n.callbacks||{},{layout:this.getSaveLayout(n),symbolChange:this.getSaveLayout(n),drawing:this.getSaveDrawings(n),preferences:this.getSavePreferences(n),newChart:this.getRetoggleEvents(n)}))h[y]&&l.addEventListener(y,h[y]);function v(){f&&setTimeout((()=>f(l)))}function b(){r.s0Y(),l.loadChart(n.initialSymbol,{masterData:n.initialData},v),l.draw()}return a=new(a=n.nameValueStore||t.NameValueStore||i),s||(m&&m(l),n.restore?(this.restorePreferences(l,p,g),this.restoreLayout(l,(e=>{r.H5p(),!l.chart.symbol&&n.initialSymbol?b():v()}),p,n)):b()),l},t.ChartEngine.getSaveLayout=function(e){return r.s0Y(),function({stx:t}){var i;e.restore&&t.exportLayout&&(i=JSON.stringify(t.exportLayout(!0)),a.set("myChartLayout"+(e.chartId||""),i))}},t.ChartEngine.restoreLayout=function(e,t,i,n){var{restoreDrawings:s}=this;function o(){s(e,e.chart.symbol,i),t&&t()}i||(i=""),r.k8O(1),a.get(r.w0n(i,"myChartLayout"),(function(t,i){var a,s;if(r.H5p(),!t){try{i=JSON.parse(i)}catch(e){}a=n&&n.restore&&!1===n.restore.symbol,i&&i.symbols&&a&&(s=null!=n.initialSymbol&&n.initialSymbol.symbol?n.initialSymbol:{symbol:n.initialSymbol},i.symbols[0]=i.symbols[0]||{},Object.assign(i.symbols[0],{symbol:s.symbol,symbolObject:s}),i.symbols=i.symbols.filter((({symbol:e},t)=>(r.H5p(),!t||e!==s.symbol)))),e.importLayout&&e.importLayout(i,{managePeriodicity:!0,cb:o}),e.crossSection&&e.setCandleWidth(1)}}))},t.ChartEngine.getSaveDrawings=function(e){return r.H5p(),function({stx:t,symbol:i}){var r,n,s;e.restore&&t.exportDrawings&&(r=t.exportDrawings(),n=e.chartId?e.chartId+"~"+i:i,s=`${e.chartId||""}_drawings`,a.get(s,((e,t)=>{var i;i=t||{},0===r.length?(a.remove(n),delete i[n]):(a.set(n,JSON.stringify(r)),i[n]=r.length),a.set(s,i)})))}},t.ChartEngine.restoreDrawings=function(e,i,n){var s;t.Drawing&&(s=n?n+"~"+i:i,a.get(s,(function(t,i){if(!t){r.s0Y();try{i=JSON.parse(i)}catch(e){}i&&(e.importDrawings(i),e.draw())}})))},t.ChartEngine.getSavePreferences=function(e){return function({stx:t}){var i;r.s0Y(),e.restore&&t.exportPreferences&&("myC","hartPreferences",i=JSON.stringify(t.exportPreferences()),a.set("myChartPreferences"+(e.multiChartId||e.chartId||""),i))}},t.ChartEngine.restorePreferences=function(e,t,i){var n;r.s0Y(),n=i||t||"",r.u2S(1),a.get(r.i6w(n,"myChartPreferences"),(function(t,i){if(r.s0Y(),!t){try{i=JSON.parse(i)}catch(e){}i&&e.importPreferences&&e.importPreferences(i)}}))},t.ChartEngine.getRetoggleEvents=function(e){return function({stx:i}){var a;r.s0Y(),(a=e.chartId&&document.getElementById(e.chartId))||(a=(t.getFn("UI.getMyContext")(i.container)||{}).topNode),a||(a=document),a.querySelectorAll(`${e.selector.markersMenuItem}.ciq-active:not(.span-event)`).forEach((function(e){e.querySelector(".ciq-switch, .ciq-checkbox, .ciq-radio").dispatchEvent(new Event("stxtap"))}))}}},s=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.drawHeatmap=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f=O;if(t&&t.length&&((i=e.panel)||(i="chart"),a=this.panels[i])){r=e.yAxis?e.yAxis:a.yAxis,n=this.chart.dataSegment,e.name||(e.name="Data"),e.widthFactor||(f.u2S(2),e.widthFactor=f.i6w(0,"1")),e.height||(e.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),s="stx-float-date",o=this.chart.context,this.canvasFont(s,o),l=this.getCanvasFontSize(s),h=1,!e.highlight&&this.highlightedDraggable&&(h=.3),c=.5,a.chart.tmpWidth<=1&&(c=0),u=null,f.s0Y(),d=null,p=this,g=null,this.startClip(i),o.globalAlpha=h;for(var y=0;y<t.length;y++)v((m=t[y]).field,m.color,m.opacity,null,e.widthFactor,m.height,m.border_color?c:-c/4,m.subField),m.border_color&&this.layout.candleWidth>=2&&v(m.field,m.border_color,m.opacity,!0,e.widthFactor,m.height,c,m.subField);o.lineWidth=1,o.globalAlpha=1,this.endClip()}function v(t,i,s,c,m,y,v,b){var x,S,C,w,k,T,D,_,A,M,F,P,L,O;o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.textAlign="center",x=p.layout.candleWidth*m,S=Math.floor(p.pixelFromBar(0,a.chart)-p.layout.candleWidth),"number"==typeof s&&(f.k8O(3),o.globalAlpha=f.i6w(h,s)),"object"==typeof s&&(k={minOpacity:s.min||0,maxOpacity:s.max||1});for(var E=0;E<n.length;E++){if((T=n[E])&&T.candleWidth){if(0===E)S+=p.layout.candleWidth;else{f.u2S(4);var I=f.i6w(18,6,10);S+=(T.candleWidth+x/m)/I}x=T.candleWidth*m}else S+=p.layout.candleWidth;if(f.u2S(5),C=f.i6w(x,v,1,"2",S),f.u2S(6),(w=f.w0n(v,x,S,2))-C<2&&(f.u2S(1),w=f.w0n(1,C)),T&&(D=T[t])){D[b]&&(D=D[b]),"number"==typeof D&&(D=[D]);for(var N=0;N<D.length;N++){if(A=0,(_=D[N])instanceof Array){if(k){f.u2S(7);var H=f.i6w(26,2,11);f.k8O(8);var V=f.w0n(9,10,0,10,10);o.globalAlpha=h*(_[H]*k.maxOpacity+(V-_[2])*k.minOpacity)}A=_[1],_=_[0]}M=p.pixelFromPrice(_,a,r),g||(y||(y=e.height),F=p.pixelFromPrice(_+y*(r.flipped?1:-1),a,r),o.lineWidth=1,f.u2S(9),u=f.w0n(M,F),f.u2S(10),d=f.i6w(2,u),g=o.lineWidth),c?(f.u2S(9),P=f.i6w(d,M),f.k8O(1),L=f.w0n(d,M),f.k8O(9),o.rect(C,P,f.w0n(C,w),f.w0n(P,L))):(f.k8O(9),o.fillRect(C,f.i6w(d,M),f.w0n(C,w),u),e.showSize&&A&&l<=u-2&&(O=o.globalAlpha,o.fillStyle=p.defaultColor,f.u2S(3),o.globalAlpha=f.i6w(h,.5),f.k8O(11),o.fillText(A,f.w0n(C,w,2),M),o.fillStyle=i,f.u2S(3),o.globalAlpha=f.i6w(h,O))),k&&_ instanceof Array&&(o.globalAlpha=0)}}}c&&o.stroke(),o.globalAlpha=h,f.H5p(),o.closePath()}},t.ChartEngine.prototype.drawCandles=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N,H,V,R,Y,z,B,j,$,X,W=O;r="obj",r+="ec",r+="t",(n=e.chart)||(n=e,e=e.chart),s=!1,o=!1,l=null,h=e.yAxis,a&&typeof a==r?(s=a.isOutline,o=a.isHistogram,l=a.field,h=a.yAxis):(s=a,o=arguments[3]),c=n.dataSegment,u=n.context,d=h.top,p=h.bottom,y=new Array(c.length),v="transparent",b="t",b+="ransp",b+="aren",b+="t",x=0,W.u2S(12);var U=W.i6w(2,4,8,5,7);S=n.dataSet.length-n.scroll-U,C={},W.k8O(9);var q=W.i6w(34,36);w=n.tmpWidth/q,k=this.layout.candleWidth,W.k8O(13);var G=W.w0n(11,3,20,9239,14);T=e.left-.5*k+this.micropixels-"1"*G;for(var Q=0;Q<=c.length;Q++)if(D="tra",D+="nspar",D+="e",D+="nt",_="sol",_+="id",A="c",A+="lose",M=w,W.u2S(10),T+=W.i6w(2,k),k=this.layout.candleWidth,W.u2S(10),T+=W.w0n(2,k),(F=c[Q])&&(F.cache&&!n.pixelCacheExpired||(F.cache={}),!F.projection)){if(F.candleWidth){W.k8O(14);var Z=W.w0n(13,19,19,12);T+=(F.candleWidth-k)/Z,k=F.candleWidth,(a.isVolume||k<n.tmpWidth)&&(W.u2S(10),M=W.i6w(2,k))}if(n.transformFunc&&h==n.panel.yAxis&&F.transform&&(F=F.transform),P=F.cache,F&&l&&(F=F[l]),(F||0===F)&&(L="open",E=A,l&&(W.u2S(15),L=W.w0n(L,l,"."),W.k8O(15),E=W.i6w(E,l,".")),I=F.Close,N=void 0===F.Open?I:F.Open,o&&n.defaultPlotField&&(I=F[n.defaultPlotField]),(I||0===I)&&(o||N!=I&&null!==N)&&(H=i(this,F,s?"outline":_)))){if(s?v=H:b=H,C[b]=1,(V=v&&!t.isTransparent(v))&&!a.highlight&&(x=.5),u.beginPath(),u.fillStyle=b,W.u2S(1),(R=W.i6w(Q,S))<e.cacheLeft||R>e.cacheRight||!P[L]){if(Y=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,z=h.semiLog?h.height*(1-(Math.log(Math.max(I,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-I)*h.multiplier,Math.abs(Y-z)<1&&(Y=z),h.flipped?(W.u2S(9),Y=W.i6w(Y,p),W.k8O(9),z=W.i6w(z,p)):(Y+=d,z+=d),y[Q]=z,g=o?z:Math.min(Y,z),m=o?h.bottom:Math.max(Y,z),g=Math.floor(g),m=Math.floor(m),W.u2S(9),f=W.i6w(g,m),g<d){if(g+f<d){P[L]=g,P[E]=g;continue}W.u2S(4),f-=W.i6w(d,g,1),W.u2S(9),g=W.w0n(1,d)}g+f>p&&(W.k8O(16),f=W.i6w(1,g,p)),P[L]=g,W.u2S(1),P[E]=W.w0n(f,g)}P[L]>=p||P[E]<=d||(B=Math.floor(T)+(!a.highlight&&.5),j=Math.floor(B-M)+x,$=Math.round(B+M)-x,u.rect(j,P[L]+x,Math.max(0,$-j),Math.max(0,P[E]-P[L])),!a.highlight&&this.highlightedDraggable&&(u.globalAlpha*=.3),b!=D&&u.fill(),V&&(W.k8O(2),u.lineWidth=W.w0n(0,"1"),a.highlight&&(u.lineWidth*=2),u.strokeStyle=v,u.stroke()))}}for(var K in n.pixelCacheExpired=!1,X={colors:[],cache:y},C)a.hollow&&t.equals(K,this.containerColor)||X.colors.push(K);return X},t.ChartEngine.prototype.drawShadows=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L=O;(a=e.chart)||(a=e,e=e.chart),r=a.dataSegment,n=this.chart.context,L.k8O(9),n.lineWidth=L.w0n(0,"1"),i.highlight&&(n.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),s=i.isHistogram,L.s0Y(),o=i.field,h=(l=i.yAxis||e.yAxis).top,c=l.bottom,L.u2S(9);var E=L.i6w(16,17);u=a.dataSet.length-a.scroll-E,d=this.layout.candleWidth,L.k8O(17);var I=L.i6w(19,2,16);p=e.left-.5*d+this.micropixels-I;for(var N=0;N<=r.length;N++)if("b","ottom","t","op","sh","a","dow",L.k8O(18),p+=L.w0n(d,"2"),d=this.layout.candleWidth,L.k8O(10),p+=L.w0n(2,d),(g=r[N])&&(g.cache&&!a.pixelCacheExpired||(g.cache={}),!g.projection)){if(g.candleWidth){L.k8O(7);var H=L.i6w(40,4,8);p+=(g.candleWidth-d)/H,d=g.candleWidth}if((m=t(this,g,"shadow"))&&(a.transformFunc&&l==a.panel.yAxis&&g.transform&&(g=g.transform),f=g.cache,g&&o&&(g=g[o]),(g||0===g)&&(y="top",v="bottom",o&&(L.u2S(15),y=L.w0n(y,o,"."),L.u2S(15),v=L.w0n(v,o,".")),b=g.Close,x=void 0===g.Open?b:g.Open,S=void 0===g.High?Math.max(b,x):g.High,C=void 0===g.Low?Math.min(b,x):g.Low,b||0===b))){if(L.k8O(1),(w=L.w0n(N,u))<e.cacheLeft||w>e.cacheRight||!f[y]){if(k=l.semiLog?l.height*(1-(Math.log(Math.max(S,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-S)*l.multiplier,T=l.semiLog?l.height*(1-(Math.log(Math.max(C,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-C)*l.multiplier,Math.abs(T-k)<1&&(T=k),k=Math.floor(k),T=Math.floor(T),L.k8O(9),D=L.i6w(k,T),l.flipped?(L.u2S(9),k=L.i6w(k,c),L.u2S(9),T=L.i6w(T,c)):(k+=h,T+=h),k<h){if(k+D<h){f[y]=k,f[v]=k;continue}L.k8O(4),D-=L.w0n(h,k,1),L.k8O(9),k=L.i6w(1,h)}k+D>c&&(L.u2S(16),D=L.i6w(1,k,c)),f[y]=k,f[v]=f[y]+D}f[y]>=c||f[v]<=h||(_=Math.floor(p)+(!i.highlight&&.5),n.beginPath(),s||b!=x||(A=this.offset,i.isVolume&&(L.k8O(10),A=L.w0n(2,d)),L.u2S(9),M=L.i6w(A,_),L.u2S(1),F=L.w0n(A,_),P=l.semiLog?l.height*(1-(Math.log(Math.max(b,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-b)*l.multiplier,P=Math.floor(P)+(!i.highlight&&.5),l.flipped?(L.u2S(9),P=L.w0n(P,c)):P+=h,P<=c&&P>=h&&(n.moveTo(M,P),n.lineTo(F,P))),S!=C&&(n.moveTo(_,f[y]),n.lineTo(_,f[v])),n.strokeStyle=m,n.stroke())}}a.pixelCacheExpired=!1},t.ChartEngine.prototype.drawBarChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N,H,V,R,Y,z,B,j=O;(n=e.chart)||(n=e,e=e.chart),s=n.dataSegment,o=new Array(s.length),l=n.context,(h=this.canvasStyle(i)).width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(h.width)):l.lineWidth=1,r.highlight&&(j.k8O(3),l.lineWidth*=j.w0n(1,"2")),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=r.field,d=(u=r.yAxis||e.yAxis).top,p=u.bottom,j.k8O(19);var $=j.i6w(1,17,19);m=n.dataSet.length-n.scroll-$,j.H5p(),f={},j.k8O(20);var X=j.i6w(12,17,202);y=n.tmpWidth/X,v=l.lineWidth/2,b=this.layout.candleWidth,j.k8O(21);var W=j.w0n(3,3,21,1,9);x=e.left-.5*b+this.micropixels-W;for(var U=0;U<=s.length;U++)if(j.u2S(10),x+=j.i6w(2,b),b=this.layout.candleWidth,j.u2S(22),x+=j.w0n(b,0,"2"),(S=s[U])&&(S.cache&&!n.pixelCacheExpired||(S.cache={}),!S.projection)){if(S.candleWidth){j.k8O(23);var q=j.w0n(3,19,18);x+=(S.candleWidth-b)/q,b=S.candleWidth}if((C=a(this,S))&&(f[C]=1,l.strokeStyle=C,l.beginPath(),n.transformFunc&&u==n.panel.yAxis&&S.transform&&(S=S.transform),w=S.cache,S&&c&&(S=S[c]),(S||0===S)&&(k="top",T="bottom",D="open",_="close",c&&(j.u2S(15),k=j.i6w(k,c,"."),j.u2S(15),T=j.i6w(T,c,"."),j.k8O(15),D=j.w0n(D,c,"."),j.u2S(15),_=j.w0n(_,c,".")),A=S.Close,M=void 0===S.Open?A:S.Open,F=void 0===S.High?Math.max(A,M):S.High,P=void 0===S.Low?Math.min(A,M):S.Low,A||0===A))){if(j.k8O(1),(L=j.w0n(U,m))<e.cacheLeft||L>e.cacheRight||!w[k]){if(E=this.pixelFromTransformedValue(F,e,u),I=this.pixelFromTransformedValue(P,e,u),E=Math.floor(E),I=Math.floor(I),j.k8O(9),g=j.i6w(E,I),w[D]=u.semiLog?u.height*(1-(Math.log(Math.max(M,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-M)*u.multiplier,w[_]=u.semiLog?u.height*(1-(Math.log(Math.max(A,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-A)*u.multiplier,Math.abs(w[_]-w[D])<1&&(w[_]=w[D]),w[D]=Math.floor(w[D]),w[_]=Math.floor(w[_]),u.flipped?(w[D]=u.bottom-w[D],w[_]=u.bottom-w[_]):(w[D]+=u.top,w[_]+=u.top),o[U]=w[_],E<d){if(E+g<d){w[k]=E,w[T]=E;continue}j.u2S(4),g-=j.w0n(d,E,1),j.k8O(9),E=j.w0n(1,d)}E+g>p&&(j.k8O(24),g=j.w0n("1",E,p)),w[k]=E,j.u2S(1),w[T]=j.i6w(g,E)}N=!r.highlight&&.5,H=Math.floor(x)+N,V=w[D]+N,R=w[_]+N,Y=w[k]+N,z=w[T]+N,Y<p&&z>d&&S.High!=S.Low&&(j.k8O(9),l.moveTo(H,j.w0n(v,Y)),j.k8O(1),l.lineTo(H,j.w0n(v,z))),"hlc"!=r.type&&V>d&&V<p&&(l.moveTo(H,V),j.u2S(9),l.lineTo(j.i6w(y,H),V)),R>d&&R<p&&(l.moveTo(H,R),j.u2S(1),l.lineTo(j.i6w(y,H),R)),l.stroke()}}for(var G in l.lineWidth=1,n.pixelCacheExpired=!1,B={colors:[],cache:o},f)t.equals(G,this.containerColor)||B.colors.push(G);return B},t.ChartEngine.prototype.drawWaveChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D=O;function _(t){return p.pixelFromTransformedValue(t,e,o)}r=(a=e.chart).dataSegment,n=new Array(r.length),s=a.context,i||(i={}),o=i.yAxis||e.yAxis,this.startClip(e.name),s.beginPath(),l=!1,h=!1,c=e.yAxis.top,u=e.yAxis.bottom,d=e.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),p=this;for(var A=0;A<=r.length;A++)if(d+=this.layout.candleWidth,g=r[A]){if(g.projection)break;if(a.transformFunc&&o==a.panel.yAxis&&g.transform&&(g=g.transform),g&&i.field&&(g=g[i.field]),(g||0===g)&&(m=g.Close,f=void 0===g.Open?m:g.Open,y=void 0===g.High?Math.max(m,f):g.High,v=void 0===g.Low?Math.min(m,f):g.Low,m||0===m)){D.k8O(1);var M=D.w0n(3,0);D.u2S(25);var F=D.i6w(6,1,2);if(b=d-M*this.layout.candleWidth/F,(x=_(f))<c){if(x=c,h){s.moveTo(b,x);continue}h=!0}else if(x>u){if(x=u,h){s.moveTo(b,x);continue}h=!0}else h=!1;if(l)s.lineTo(b,x);else{l=!0,D.u2S(7);var P=D.w0n(9,9,0);(S=a.dataSet.length-a.scroll-P)<0?s.moveTo(b,x):S>=0&&((C=a.dataSet[S]).transform&&(C=C.transform),w=_(w=C.Close),w=Math.min(Math.max(w,c),u),s.moveTo(e.left+(A-1)*this.layout.candleWidth+this.micropixels,w),s.lineTo(b,x)),s.moveTo(b,x)}D.u2S(9);var L=D.i6w(7,11);if(b+=this.layout.candleWidth/L,f<m){(x=_(v))<c&&(x=c),x>u&&(x=u),s.lineTo(b,x),D.u2S(16);var E=D.i6w(12,9,1);b+=this.layout.candleWidth/E,(x=_(y))<c&&(x=c),x>u&&(x=u),s.lineTo(b,x)}else{(x=_(y))<c&&(x=c),x>u&&(x=u),s.lineTo(b,x),D.k8O(26);var I=D.i6w(3,1,2,8,10);b+=this.layout.candleWidth/I,(x=_(v))<c&&(x=c),x>u&&(x=u),s.lineTo(b,x)}b+=this.layout.candleWidth/4,x=_(m),n[A]=x,x<c&&(x=c),x>u&&(x=u),s.lineTo(b,x)}}return k=this.canvasStyle("stx_line_chart"),D.H5p(),k.width&&parseInt(k.width,10)<=25?s.lineWidth=Math.max(1,t.stripPX(k.width)):s.lineWidth=1,i.highlight&&(s.lineWidth*=2),this.canvasColor("stx_line_chart"),i.color&&(s.strokeStyle=i.color),!i.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),s.stroke(),s.closePath(),T={colors:[s.strokeStyle],cache:n},this.endClip(),s.lineWidth=1,T},t.ChartEngine.prototype.drawHistogram=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N=O;if(i&&i.length&&((a=e.panel)||(a="chart"),r=this.panels[a])){for(n=e.yAxis?e.yAxis:r.yAxis,s=e.type,o=this.chart.dataSegment,l=!1,h=1,c=1,d=0;d<i.length;d++)l|=i[d].border_color_up&&!t.isTransparent(i[d].border_color_up),l|=i[d].border_color_down&&!t.isTransparent(i[d].border_color_down),h=i[d].opacity_up,c=i[d].opacity_down,!e.highlight&&this.highlightedDraggable&&(h*=.3,c*=.3);!1===e.borders&&(l=!1),e.name||(e.name="Data"),p=n.multiplier,e.heightPercentage||(e.heightPercentage=.7),e.widthFactor||(e.widthFactor=.8),g=0,m=0;for(var H=0;H<this.chart.maxTicks;H++)if(f=o[H])for(y=0,d=0;d<i.length;d++)((v=f[i[d].field])||0===v)&&(u=i[d].subField||this.chart.defaultPlotField||"Close","object"==typeof v&&v[u]&&(v=v[u]),"stacked"==s?y+=v:y=v,y>g&&(g=y),y<m&&(m=y));if(0!==g||0!==m){if(x=!1,e.bindToYAxis){n.baseline&&(m=n.baseline.value,x=!0),271452316,1322530976,C=2;for(var V=1;271452316!==N.r57(V.toString(),V.toString().length,89612);V++){N.k8O(30);var R=N.w0n(18,1119,9,114,2);N.k8O(16);var Y=N.w0n(416,20,99);b=Math.floor(this.pixelFromPrice(m,r,n))/(n.flipped?!R:Y),C+=2}if(1322530976!==N.u1R(C.toString(),C.toString().length,23861)){N.u2S(1);var z=N.i6w(14,901);b=Math.floor(this.pixelFromPrice(m,r,n))/(n.flipped?!z:495)}b=Math.floor(this.pixelFromPrice(m,r,n))+(n.flipped?-.5:.5)}else n.flipped?(b=Math.floor(n.top)-.5,S=Math.floor(n.bottom)-.5):(b=Math.floor(n.bottom)+.5,S=Math.floor(n.top)+.5),p=Math.abs(b-S)*e.heightPercentage/(g-m);for(this.startClip(a),w=this.layout.candleWidth<=1||!l?0:.5,k=this.chart.context,n.flipped&&(k.translate(0,2*n.top),k.scale(1,-1)),T=Math.max(0,(1-e.widthFactor)*this.layout.candleWidth/2),D=new Array(o.length),_=[],A=this,M=1,d=0;d<i.length;d++){if("sta","c","ke","d","functio","n",F=i[d],M=this.layout.candleWidth*e.widthFactor,T&&this.layout.candleWidth-M<=2&&(l=!1),P=0,"clustered"==s&&(P=d,M/=i.length),u=F.subField||this.chart.defaultPlotField||"Close","function"==typeof F.color_function){E={};for(var B=0;B<o.length;B++)if(o[B]){"s","t","ring","string"==typeof(L=F.color_function(o[B]))&&(L={fill_color:L,border_color:L}),L.hasOwnProperty("border_opacity")||(L.border_opacity=L.opacity),N.k8O(31);N.w0n(8168,815,831,19,18);N.k8O(16);var j=N.w0n(31,12,5777);N.u2S(32);var $=N.i6w(9,17,28,8326,7);N.k8O(33);var X=N.w0n(9,38549,5515,5498,14);N.k8O(34);N.i6w(9,4604,10,5);(I=L.fill_color+(j==$?9894:!(X>=136)||",")+L.border_color)in E?E[I].positions.push(B):(L.positions=[B],E[I]=L)}for(I in E)L=E[I],W(F.field,u,L.fill_color,L.opacity,null,null,P,M,L.positions),W(F.field,u,L.border_color,L.border_opacity,!0,null,P,M,L.positions)}else W(F.field,u,F.fill_color_up,h,null,!0,P,M),W(F.field,u,F.fill_color_down,c,null,null,P,M),this.layout.candleWidth>=2&&l&&(W(F.field,u,F.border_color_up,h,!0,!0,P,M),W(F.field,u,F.border_color_down,c,!0,null,P,M));"stacked"==s&&(_=t.shallowClone(D))}N.k8O(27),k.globalAlpha=N.i6w("1",0),this.endClip()}else this.displayErrorAsWatermark(a,this.translateIf(e.name+" Not Available"))}function W(e,t,i,a,n,l,h,c,u){var d,g,f,y,v,S,C,M,F,P,L,O,E;a||(N.k8O(27),a=N.w0n("1",64)),k.globalAlpha=a,k.beginPath(),N.u2S(1),d=N.w0n(.5,b),g=Math.floor(A.pixelFromBar(0,r.chart)-A.layout.candleWidth/2);for(var I=0;I<o.length;I++)"clu","st","e","red",f=_[I]||b,0===I&&(d=f),o[I]&&o[I][e]?("object"==typeof(v=(y=o[I])[e])&&v[t]&&(v=v[t]),N.k8O(28),S=N.w0n(v,p,m),isNaN(S)||(C=A.layout.candleWidth,y.candleWidth&&(C=y.candleWidth,0===I&&(g=Math.floor(A.pixelFromBar(0,r.chart)-y.candleWidth/2))),(M=Math.floor(f-S)+.5)>f&&!x&&(M=f),u&&-1==u.indexOf(I)||!u&&(l&&y.Close<y.iqPrevClose||!l&&y.Close>=y.iqPrevClose)?(d=M,g+=C):(F=C/A.layout.candleWidth,T?(N.u2S(29),P=Math.round(N.i6w(c,F,T,h,g)),N.k8O(1),L=N.w0n(n?0:w,P),O=P+Math.round(c*F)-(n?0:w)):(N.k8O(29),P=N.i6w(c,F,T,h,g),L=Math.round(P)+(n?0:w),O=Math.round(P+c*F)-(n?0:w)),O-L<2&&(N.k8O(1),O=N.w0n(1,L)),L%1==(E=n?0:.5)&&(L+=.5),O%1==E&&(O+=.5),k.moveTo(O,f),b!=f&&n&&!T&&_[I+1]&&k.moveTo(O,Math.max(M,Math.min(f,_[I+1]))),k.lineTo(O,M),k.lineTo(L,M),n&&h?(D[I]>M||0===I)&&k.lineTo(L,Math.min(f,D[I])):n&&!T&&"clustered"==s?I>0&&D[I-1]&&D[I-1]>M&&k.lineTo(L,Math.min(f,D[I-1])):n&&!T?(d>M||0===I)&&k.lineTo(L,Math.min(f,d)):k.lineTo(L,f),d=M,g+=C,("clustered"!=s||n)&&(D[I]=M)))):(d=f,g+=A.layout.candleWidth);N.H5p(),n?("au","t","o",k.strokeStyle=i&&"auto"!=i?i:A.defaultColor,k.stroke()):(k.fillStyle=i&&"auto"!=i?i:A.defaultColor,k.fill()),k.closePath()}},t.ChartEngine.prototype.scatter=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=O;a=(i=e.chart).dataSegment,r=new Array(a.length),n=this.chart.context,this.canvasColor("stx_scatter_chart"),t||(t={}),s=t.field||i.defaultPlotField,o=t.yAxis||e.yAxis,l=t.subField||i.defaultPlotField||"Close",this.startClip(e.name),n.beginPath(),x.H5p(),n.lineWidth=t.lineWidth||4,t.highlight&&(n.lineWidth*=2),!t.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),t.color&&(n.strokeStyle=t.color),h=o.top,c=o.bottom,u=this.layout.candleWidth,d=e.left-.5*u+this.micropixels-1;for(var{tickFilter:S}=t,C=0;C<=a.length;C++)if(x.k8O(10),d+=x.w0n(2,u),u=this.layout.candleWidth,x.k8O(10),d+=x.w0n(2,u),p=a[C]){if(p.candleWidth){x.u2S(35);var w=x.i6w(22,1,19,12,644);d+=(p.candleWidth-u)/w,u=p.candleWidth}if(S){if(0===S.length)break;if(!S.has(p.tick))continue;S.delete(p.tick)}if(!p.projection){"Scat","ter",i.transformFunc&&o==i.panel.yAxis&&p.transform&&(p=p.transform),(g=p[s])&&void 0!==g[l]&&(g=g[l]),g instanceof Array||(g=[g]),"Scatter"in p&&(g=p.Scatter);for(var k=0;k<g.length;k++)(g[k]||0===g[k])&&(m=g[k],f=0,g[k]instanceof Array&&(x.u2S(36),m=g[k][x.w0n("0",64)],f=g[k][2]),y=o.semiLog?o.height*(1-(Math.log(Math.max(m,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-m)*o.multiplier,o.flipped?(x.u2S(9),y=x.i6w(y,c)):y+=h,y<h||y>c||(v=2,f&&(x.u2S(3),v=x.w0n(f,u)),x.k8O(9),n.moveTo(x.i6w(v,d),y),x.u2S(1),n.lineTo(x.i6w(v,d),y),r[C]=y))}}return n.stroke(),n.closePath(),b={colors:[n.strokeStyle],cache:r},this.endClip(),n.lineWidth=1,b}},o=e=>{var t,i,a=O;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine.drawingTools={},t.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},volumeProfile:{priceBuckets:30},annotation:{font:{style:null,size:null,weight:null,family:null}}},t.ChartEngine.registerDrawingTool=function(e,i){t.ChartEngine.drawingTools[e]=i},t.ChartEngine.completeDrawing=function(e){var t,i;if(a.H5p(),"d","rawingComp","l","ete",e&&e.activeDrawing){if(t=e.activeDrawing,!e.keepDrawingToolSelected)if(e.drawingContainer&&e.drawingContainer.tool)e.drawingContainer.tool({node:null},"notool");else{-503430148,1845833146,i=2;for(var r=1;-503430148!==a.u1R(r.toString(),r.toString().length,5158);r++)e.changeVectorType(""),i+=2;1845833146!==a.r57(i.toString(),i.toString().length,22732)&&e.changeVectorType("")}e.dispatch("drawingComplete",{stx:e,drawing:t})}},t.ChartEngine.prototype.keepDrawingToolSelected=!1,t.ChartEngine.prototype.setDrawingContainer=function(e){a.s0Y(),this.drawingContainer=e},t.ChartEngine.prototype.exportDrawings=function(){var e;e=[];for(var t=0;t<this.drawingObjects.length;t++)e.push(this.drawingObjects[t].serialize());return a.s0Y(),e},t.ChartEngine.prototype.abortDrawings=function(e){var t;!1!==e&&(e=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(t=this.drawingObjects[i]).abort(!0),!e&&t.permanent||this.drawingObjects.splice(i,1)},t.ChartEngine.prototype.importDrawings=function(e){var i,a,r;if(t.Drawing)for(var n=0;n<e.length;n++)"fibonacci"==(i=e[n]).name&&(i.name="retracement"),(a=t.ChartEngine.drawingTools[i.name])||t.Drawing[i.name]&&(a=t.Drawing[i.name],t.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},t.ChartEngine.prototype.clearDrawings=function(e,i){var r,n;!1!==i&&(i=!0),r=this.exportDrawings(),this.abortDrawings(i),e?this.undoStamps=[]:this.undoStamp(r,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),a.H5p(),this.draw(),(n=this.controls.mSticky)&&(n.style.display="none",n.children[0].innerHTML="")},t.ChartEngine.prototype.createDrawing=function(e,i){var r,n;if(t.Drawing){for(var s in r=new t.Drawing[e],a.s0Y(),r.reconstruct(this,i),(n=new t.Drawing[e]).stx=this,n.copyConfig(),n)r[s]=r[s]||n[s];return this.drawingObjects.push(r),this.draw(),r}},t.ChartEngine.prototype.removeDrawing=function(e){for(var t=0;t<this.drawingObjects.length;t++)if(this.drawingObjects[t]==e)return"ve","c","to","r",this.drawingObjects.splice(t,1),this.changeOccurred("vector"),void this.draw();a.s0Y()},t.ChartEngine.prototype.undo=function(){var e,i;e="u",a.s0Y(),e+="n",e+="d",e+="o",this.runPrepend("undo",arguments)||(this.activeDrawing&&(i="stx_crosshair_drawi",i+="ng",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),t.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace(i,"stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair"),t.ChartEngine.drawingLine=!1),this.runAppend(e,arguments))},t.ChartEngine.prototype.undoStamp=function(e,t){a.s0Y(),this.undoStamps.push(e),this.dispatch("undoStamp",{before:e,after:t,stx:this})},t.ChartEngine.prototype.undoLast=function(){a.s0Y(),this.activeDrawing?this.undo():this.undoStamps.length&&("v","ector",this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},t.ChartEngine.prototype.addDrawing=function(e){var t;t=this.exportDrawings(),a.H5p(),this.drawingObjects.push(e),this.undoStamp(t,this.exportDrawings())},t.ChartEngine.prototype.repositionDrawing=function(e,i){var r,n,s,o;if(a.H5p(),this.currentPanel.name==e.panelName){if(r=this.panels[e.panelName],n=this.adjustIfNecessary(r,this.crosshairTick,e.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),r,this.getYAxisByField(r,e.field))),s=this.chart.tempCanvas,t.clearCanvas(s,this),i){this.drawingSnapshot=this.exportDrawings(),1774472846,1452586432,o=2;for(var l=1;1774472846!==a.r57(l.toString(),l.toString().length,88139);l++)e.render(s.context),o+=2;1452586432!==a.r57(o.toString(),o.toString().length,58114)&&e.render(s.context),e.render(s.context)}else e.reposition(s.context,e.repositioner,this.crosshairTick,n),this.drawingSnapshot&&this.undoStamp(t.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null;e.measure&&e.measure()}},t.ChartEngine.prototype.activateRepositioning=function(e){a.s0Y(),this.repositioningDrawing=e,e&&(this.draw(),this.repositionDrawing(e,!0)),this.chart.tempCanvas.style.display=e?"block":"none"},t.ChartEngine.prototype.activateDrawing=function(e,i){var r;function n(e){var t;e.layout.studies&&(t=e.layout.studies[i.name],a.s0Y(),t&&!t.overlay&&delete e.overlays[t.name])}return i||(i=this.currentPanel),this.drawingSnapshot=null,e?(r=t.ChartEngine.drawingTools[e],a.s0Y(),r||t.Drawing[e]&&(r=t.Drawing[e],t.ChartEngine.registerDrawingTool(e,r)),r&&(this.activeDrawing=new r,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,n(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),n(this),!0)):(this.activeDrawing=null,this.chart.tempCanvas.style.display="none",n(this),!1)},t.ChartEngine.prototype.drawingClick=function(e,i,a){var r,n,s,o,l,h,c,u;if(t.Drawing&&e&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,e))){if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw)return void(t.ChartEngine.drawingLine||this.activateDrawing(null));if(!this.activeDrawing.p0){if(r="L",r+="o",r+="w",n="O",n+="p",n+="e",n+="n",s=this.highlightedDataSetField,null!==this.magnetizedPrice&&(e!==this.chart.panel||[n,"High",r,"Close"].indexOf(this.magneticHold)<0)&&(s=t.getObjectChainRoot(this.magneticHold)),!s&&e!=this.chart.panel){for(var d in this.chart.seriesRenderers)if((o=this.chart.seriesRenderers[d]).params.panel==e.name){s=o.seriesParams[0].field;break}for(var p in this.layout.studies)if((l=this.layout.studies[p]).panel==e.name){s=Object.keys(l.outputMap)[0];break}}this.activeDrawing.field=s}return h=this.tickFromPixel(i,e.chart),c=this.panels[this.activeDrawing.panelName],u=this.magnetizedPrice||0===this.magnetizedPrice?this.adjustIfNecessary(c,h,this.magnetizedPrice):this.adjustIfNecessary(c,h,this.activeDrawing.valueFromPixel(a,c,this.getYAxisByField(c,this.activeDrawing.field))),this.activeDrawing.click(this.chart.tempCanvas.context,h,u)?this.activeDrawing&&("stx_crosshair_draw","ing","v","ect","or",t.ChartEngine.drawingLine=!1,t.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),t.ChartEngine.completeDrawing(this),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):(this.changeOccurred("drawing"),t.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0}return!1}},t.ChartEngine.prototype.rightClickDrawing=function(e,t,i){var r,n,s;r="r",r+="igh",r+="tCl",r+="ickDrawing",this.runPrepend("rightClickDrawing",arguments)||(a.H5p(),e.permanent||(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:e,forceEdit:t,forceText:i}):(n="v",n+="e",n+="ctor",e.abort()||(s=this.exportDrawings(),this.removeDrawing(e),this.undoStamp(s,this.exportDrawings())),this.changeOccurred(n)),this.runAppend(r,arguments)))},t.ChartEngine.prototype.magnetize=function(){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D;if(e="#3",e+="9",e+="8",e+="dff",i="#3",i+="98df",i+="f",r="C",r+="l",r+="os",a.H5p(),r+="e",n="ca",n+="l",n+="lout",s="fre",s+="eform",o=this,this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(l=this.currentVectorParameters.vectorType)&&"projection"!=l&&l!=s&&("annotation"!=l&&l!=n||!t.ChartEngine.drawingLine)&&(h=this.activeDrawing?this.panels[this.activeDrawing.panelName]:this.currentPanel,c=h.chart,!((u=this.crosshairTick)>c.dataSet.length)&&(d=c.dataSet[u]))){if(g=this.getRenderedItems(),m=["Open","High","Low",r],this.activeDrawing&&this.activeDrawing.penDown){if(!this.magneticHold)return;g=-1!=m.indexOf(this.magneticHold)&&-1!=g.indexOf("High")?m:[this.magneticHold]}else this.magneticHold=null;f=1e9,y=parseFloat(this.preferences.magnet);for(var _=0;_<g.length;_++)if(v=this.getYAxisByField(h,g[_])||h.yAxis,(b=c.transformFunc&&v===c.yAxis)&&d.transform&&(d=d.transform),x=d[g[_]],(S=t.existsInObjectChain(d,g[_]))&&(x=S.obj[S.member]),(x||0===x)&&(C=this.pixelFromTransformedValue(x,h,v),Math.abs(this.cy-C)<f)){if(f=Math.abs(this.cy-C),y&&y<=f)continue;this.magnetizedPrice=x,b&&function(){var e,i;e=c.untransformFunc,i=t.getObjectChainRoot(g[_]),e&&c.series[i]&&(c.untransformFunc=(t,a,r,n)=>e(t,a,r,n,i)),o.magnetizedPrice=o.valueFromPixel(C,h),c.untransformFunc=e}(),p=C,this.magneticHold=g[_]}w=this.pixelFromTick(u,c),k=p,t.clearCanvas(c.tempCanvas,this),(T=c.tempCanvas.context).beginPath(),T.lineWidth=1,a.u2S(20);var A=a.i6w(6,14,72);a.u2S(37);var M=a.w0n(10,3,3,14);D=Math.max(this.layout.candleWidth,A)/M,T.arc(w,k,Math.min(D,8),0,2*Math.PI,!1),T.fillStyle=i,T.strokeStyle=e,T.fill(),T.stroke(),T.closePath(),c.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove("stx-draggable"),this.activeDrawing&&this.activeDrawing.move(T,this.crosshairTick,this.activeDrawing.valueFromPixel(k,h,this.getYAxisByField(h,this.activeDrawing.field))),this.runAppend("magnetize",arguments)}},t.ChartEngine.prototype.changeVectorType=function(e){var i,r;if(this.currentVectorParameters.vectorType=e,t.Drawing&&t.Drawing.initializeSettings(this,e),t.ChartEngine.drawingLine&&this.undo(),a.H5p(),!this.container.classList.contains("stx-crosshair-on")&&e){var{chart:n,left:s,top:o}=this;i=n.width/2+s+n.left,a.u2S(38);var l=a.w0n(2,0,5,6);r=n.height/l+o+n.top,this.mousemoveinner(i,r)}this.doDisplayCrosshairs()},t.ChartEngine.prototype.changeVectorParameter=function(e,t){var i;if("f","on","t","p","x","fontSiz","e","axisLabel"==e)t="true"===t.toString()||Number(t);else if("lineWidth"==e)t=Number(t);else if("fontSize"==e){a.u2S(7);var r=a.i6w(130,2,55);t=parseInt(t,r)+"px"}return void 0!==(i=this.currentVectorParameters)[e]||"font"==e.substr(0,4)&&("de","fault","family"==(e=e.substr(4).toLowerCase())&&"default"==t.toLowerCase()&&(t=null),void 0!==(i=i.annotation.font)[e])?(i[e]=t,!0):(a.s0Y(),!1)},t.ChartEngine.prototype.drawVectors=function(){var e,t,i,a,r;if(!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(e={},i=0;i<this.drawingObjects.length;i++)(a=this.drawingObjects[i]).hidden||this.repositioningDrawing!==a&&(t=a.panelName,this.panels[a.panelName]&&!this.panels[a.panelName].hidden&&(e[t]||(e[t]=[]),e[t].push(a)));for(t in e){for(this.startClip(t),r=e[t],i=0;i<r.length;i++)r[i].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},t.ChartEngine.prototype.adjustDrawings=function(){var e;a.H5p();for(var t=0;t<this.drawingObjects.length;t++)e=this.drawingObjects[t],this.panels[e.panelName]&&e.adjust()},t.Drawing=t.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},t.Drawing.getDrawingParameters=function(e,i){var a,r,n,s;try{a=new t.Drawing[i]}catch(e){}if(!a)return null;a.stx=e,a.copyConfig(!0),r={},n=a.configs;for(var o=0;o<n.length;o++)r[n[o]]=a[n[o]];return(s=e.canvasStyle("stx_annotation"))&&r.font&&(r.font.size=s.fontSize,r.font.family=s.fontFamily,r.font.style=s.fontStyle,r.font.weight=s.fontWeight),r},t.Drawing.saveConfig=function(e,i){var r,n;a.s0Y(),i&&((r=e.preferences).drawings||(r.drawings={}),r.drawings[i]={},(n=new t.Drawing[i]).stx=e,t.Drawing.copyConfig(n),n.configs.forEach((function(e){a.H5p(),r.drawings[i][e]=n[e]})),e.changeOccurred("preferences"))},t.Drawing.restoreDefaultConfig=function(e,i,r){r?e.preferences.drawings=null:e.preferences.drawings[i]=null,a.H5p(),e.changeOccurred("preferences"),e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i},t.Drawing.initializeSettings=function(e,i){var a,r;(a=t.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(e)},t.Drawing.updateSource=function(e,t,i,a){var r,n;if(t){for(var s in r=!1,e.drawingObjects)(n=e.drawingObjects[s]).field&&(i?n.field==t?(n.field=i,r=!0):n.field.indexOf(t)>-1&&-1==n.field.indexOf(t+"-")&&(n.field=n.field.replace(t,i),r=!0):n.field.split("--\x3e")[0]!=t&&n.panelName!=t||(n.panelName=a,r=!0));r&&e.changeOccurred("vector")}},t.Drawing.prototype.copyConfig=function(e){a.s0Y(),t.Drawing.copyConfig(this,e)},t.Drawing.copyConfig=function(e,i){var a,r,n,s,o;for(a=e.stx.currentVectorParameters,r=e.configs,n=0;n<r.length;n++)"pa","ra","m","eters","co","lo","r","color"==(s=r[n])?e.color=a.currentColor:"parameters"==s?e.parameters=t.clone(a.fibonacci):"font"==s?e.font=t.clone(a.annotation.font):e[s]=a[s];if(i&&(o=e.stx.preferences)&&o.drawings)for(t.extend(e,o.drawings[a.vectorType]),n=0;n<r.length;n++)"color"==(s=r[n])?a.currentColor=e.color:"parameters"==s?a.fibonacci=t.clone(e.parameters):"font"==s?a.annotation.font=t.clone(e.font):a[s]=e[s]},t.Drawing.prototype.dragToDraw=!1,t.Drawing.prototype.permanent=!1,t.Drawing.prototype.chartsOnly=!1,t.Drawing.prototype.abort=function(e){},t.Drawing.prototype.measure=function(){},t.Drawing.prototype.construct=function(e,t){a.H5p(),this.stx=e,this.panelName=t.name},t.Drawing.prototype.isAllowed=function(e,t){return a.H5p(),!0},t.Drawing.prototype.render=function(e){console.warn("must implement render function!")},t.Drawing.prototype.click=function(e,t,i){console.warn("must implement click function!")},t.Drawing.prototype.move=function(e,t,i){a.H5p(),console.warn("must implement move function!")},t.Drawing.prototype.reposition=function(e,t,i,a){},t.Drawing.prototype.intersected=function(e,t,i){a.H5p(),console.warn("must implement intersected function!")},t.Drawing.prototype.reconstruct=function(e,t){console.warn("must implement reconstruct function!")},t.Drawing.prototype.serialize=function(){console.warn("must implement serialize function!")},t.Drawing.prototype.adjust=function(){a.s0Y(),console.warn("must implement adjust function!")},a.H5p(),t.Drawing.prototype.highlight=function(e){return(e&&!this.highlighted||!e&&this.highlighted)&&(this.highlighted=e),a.H5p(),this.highlighted},t.Drawing.prototype.littleCircleRadius=function(){return a.s0Y(),6,6},t.Drawing.prototype.littleCircle=function(e,i,a,r){var n,s;this.permanent||(n=this.stx.defaultColor,s=t.chooseForegroundColor(n),e.beginPath(),e.lineWidth=1,e.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),e.fillStyle=r?n:s,e.strokeStyle=n,e.setLineDash([]),e.fill(),e.stroke(),e.closePath())},t.Drawing.prototype.rotator=function(e,t,i,r){var n,s,o;this.permanent||(n=this.littleCircleRadius(),s=this.stx.defaultColor,e.beginPath(),e.lineWidth=2,r||(e.globalAlpha=.5),a.k8O(39),o=a.w0n("4",32,n),a.k8O(36),e.arc(t,i,o,a.w0n("0",64),3*Math.PI/2,!1),a.u2S(15),e.moveTo(a.w0n(o,t,2),a.w0n(2,i,a.k8O(1))),a.u2S(1),e.lineTo(a.w0n(o,t),i),a.u2S(40),e.lineTo(a.i6w("2",t,o,96),a.w0n(2,i,a.k8O(1))),a.k8O(9),e.moveTo(a.i6w(2,t),a.i6w(2,o,i,a.u2S(23))),a.u2S(9),e.lineTo(t,a.i6w(o,i)),a.u2S(9),e.lineTo(a.w0n(2,t),a.i6w(i,2,o,a.k8O(4))),e.strokeStyle=s,e.stroke(),e.closePath(),e.globalAlpha=1)},t.Drawing.prototype.mover=function(e,t,i,r){var n,s,o,l;if(!this.permanent){n=this.littleCircleRadius(),s=this.stx.defaultColor,5,a.k8O(1),o=a.w0n(1,n),e.save(),e.lineWidth=2,e.strokeStyle=s,e.translate(t,i),r||(e.globalAlpha=.5);for(var h=0;h<4;h++)e.rotate(Math.PI/2),e.beginPath(),e.moveTo(0,o),a.u2S(1),e.lineTo(0,a.w0n(5,o)),a.u2S(41),e.moveTo(-2,a.w0n("2",5,o)),a.k8O(1),e.lineTo(0,a.i6w(5,o)),a.u2S(23),e.lineTo(2,a.w0n(5,2,o)),e.closePath(),e.stroke();e.globalAlpha=1,a.s0Y(),479847298,-1754710944,l=2;for(var c=1;479847298!==a.u1R(c.toString(),c.toString().length,4277);c++)e.restore(),l+=2;-1754710944!==a.r57(l.toString(),l.toString().length,63947)&&e.restore()}},t.Drawing.prototype.resizer=function(e,t,i,r){var n,s,o,l;if(!this.permanent){n=this.littleCircleRadius(),s=this.stx.defaultColor,a.k8O(1);var h=a.w0n(2,0);o=5*Math.sqrt(h),a.k8O(1),l=a.w0n(1,n),e.save(),e.lineWidth=2,e.strokeStyle=s,e.translate(t,i),e.rotate(-t*i/Math.abs(t*i)*Math.PI/4),r||(e.globalAlpha=.5);for(var c=0;c<2;c++)e.rotate(Math.PI),e.beginPath(),e.moveTo(0,l),a.u2S(1),e.lineTo(0,a.i6w(o,l)),a.u2S(3),e.moveTo(-a.w0n(1,"2"),a.w0n(o,2,l,a.k8O(23))),a.k8O(36),e.lineTo(a.i6w("0",64),a.w0n(o,l,a.k8O(1))),a.u2S(23),e.lineTo(2,a.i6w(o,2,l)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.pointIntersection=function(e,t,i,a){var r,n;if(!(n=(r=this.stx).panels[this.panelName]))return!1;if(this.field&&!a&&(t=this.pixelFromValue(n,e,t,r.getYAxisByField(n,this.field)),e=r.pixelFromTick(e,n.chart),a=!0),a){if(e>=i.cx0&&e<=i.cx1&&t>=i.cy0&&t<=i.cy1)return!0}else if(e>=i.x0&&e<=i.x1&&t>=Math.min(i.y0,i.y1)&&t<=Math.max(i.y0,i.y1))return!0;return!1},t.Drawing.prototype.setPoint=function(e,i,r,n){var s,o,l,h,c,u,d,p,{stx:g}=this,{maxTicks:m=100,dataSet:f=[]}=n||g.chart||{};s=-m,a.u2S(34);var y=a.w0n(17,10,25,17);o=f.length-y+m,a.s0Y(),l=null,h=null,"number"==typeof i?l=i:i.length>=8?h=i:l=Number(i),(r||0===r)&&(a.k8O(1),this[a.i6w(e,"v")]=r),null!==l?(l=Math.max(l,s),l=Math.min(l,o),c=g.dateFromTick(l,n,!0),a.u2S(1),this[a.i6w(e,"tzo")]=c.getTimezoneOffset(),a.k8O(1),this[a.i6w(e,"d")]=t.yyyymmddhhmmssmmm(c),a.u2S(1),this[a.w0n(e,"p")]=[l,r]):null!==h&&("t","z","o",u=t.strToDateTime(h),this["tzo"+e]||0===this["tzo"+e]||(a.k8O(1),this[a.w0n(e,"tzo")]=u.getTimezoneOffset()),a.u2S(1),this[a.w0n(e,"d")]=h,d=this["tzo"+e]-u.getTimezoneOffset(),u.setMinutes(u.getMinutes()+d),p=!1,"freeform"==this.name||t.ChartEngine.isDailyInterval(g.layout.interval)||u.getHours()||u.getMinutes()||u.getSeconds()||u.getMilliseconds()||(p=!0),a.u2S(1),this[a.i6w(e,"p")]=[g.tickFromDate(t.yyyymmddhhmmssmmm(u),n,null,p),r])},t.Drawing.prototype.getLineColor=function(e,i){var a,r,n,s,o,l,h,c,u;if(e||(e=this.color),a=this.stx,r=e,!i&&this.highlighted)"stx_","highligh","t_vector",r=a.getCanvasColor("stx_highlight_vector");else if(t.isTransparent(r))r=a.defaultColor;else if("auto"==r&&(r=a.defaultColor,this.field)){for(n in a.layout.studies)if(o=(s=a.layout.studies[n]).outputs[s.outputMap[this.field]]){r=o.color||o;break}for(n in a.chart.seriesRenderers){h=a.chart.seriesRenderers[n];for(var d=0;d<h.seriesParams.length;d++){if("-","->",(u=(c=h.seriesParams[d]).field)||h.highLowBars||(u=this.defaultPlotField||"Close"),c.symbol&&c.subField&&(u+="--\x3e"+c.subField),this.field==u){r=c.color;break}c.field&&c.field==this.field.split("--\x3e")[0]&&(l=c.color)}}l&&(r=l)}return"auto"==r&&(r=a.defaultColor),r},t.Drawing.prototype.valueFromPixel=function(e,t,i){var r,n,s;return r=t.chart.untransformFunc,n=this.field,r&&t.chart.series[n]&&(t.chart.untransformFunc=(e,t,i,a)=>r(e,t,i,a,n)),a.s0Y(),s=this.stx.valueFromPixel(e,t,i),t.chart.untransformFunc=r,s},t.Drawing.prototype.pixelFromValue=function(e,t,i,r){var n,s,o;return n=e.chart.transformFunc,s=this.field,n&&e.chart.series[s]&&(e.chart.transformFunc=(e,t,i,r)=>(a.s0Y(),n(e,t,i,r,s))),o=this.stx.pixelFromValueAdjusted(e,t,i,r),e.chart.transformFunc=n,o},t.Drawing.prototype.boxToPixels=function(e,i,r,n){var s,o,l,h;return s=e.panels[i],o=s.chart.transformFunc,l=this.field,o&&s.chart.series[l]&&(s.chart.transformFunc=(e,t,i,r)=>(a.H5p(),o(e,t,i,r,l))),h=t.convertBoxToPixels(e,i,r,n),s.chart.transformFunc=o,h},t.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,a.H5p(),this.color=""},t.inheritsFrom(t.Drawing.BaseTwoPoint,t.Drawing),t.Drawing.BaseTwoPoint.prototype.configs=[],t.Drawing.BaseTwoPoint.prototype.lineIntersection=function(e,i,a,r,n,s,o){var l,h;return n||(n=this.p0),s||(s=this.p1),l=this.stx,!(!n||!s)&&(void 0!==a.cx0&&(h={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},o||(h=this.boxToPixels(l,this.panelName,h,l.getYAxisByField(l.panels[this.panelName],this.field))),t.boxIntersects(a.cx0,a.cy0,a.cx1,a.cy1,h.x0,h.y0,h.x1,h.y1,r)))},t.Drawing.BaseTwoPoint.prototype.boxIntersection=function(e,t,i){var r,n;if(!this.p0||!this.p1)return!1;var{x0:s,x1:o,y0:l,y1:h,cy0:c,cy1:u}=i;if(s>Math.max(this.p0[0],this.p1[0])||o<Math.min(this.p0[0],this.p1[0]))return!1;var{field:d,panelName:p,stx:g}=this;return a.H5p(),d&&(r=g.panels[p],n=g.getYAxisByField(r,d),l=this.valueFromPixel(c,r,n),h=this.valueFromPixel(u,r,n)),!(h>Math.max(this.p0[1],this.p1[1])||l<Math.min(this.p0[1],this.p1[1]))},t.Drawing.BaseTwoPoint.prototype.accidentalClick=function(e,t){var i,r,n,s,o,l,h,c,u;if(r=(i=this.stx).panels[this.panelName],n=i.pixelFromTick(this.p0[0],r.chart),s=i.pixelFromTick(e,r.chart),o=i.getYAxisByField(r,this.field),l=this.pixelFromValue(r,this.p0[0],this.p0[1],o),h=this.pixelFromValue(r,e,t,o),a.k8O(9),c=Math.abs(a.w0n(n,s)),a.u2S(9),u=Math.abs(a.i6w(l,h)),a.k8O(42),Math.sqrt(a.i6w(u,c,u,c))<10)return this.penDown=!1,i.undo(),!0},t.Drawing.BaseTwoPoint.prototype.click=function(e,t,i){var r,n;return this.copyConfig(),r=this.stx,a.H5p(),n=r.panels[this.panelName],this.penDown?(this.accidentalClick(t,i)||(this.setPoint(1,t,i,n.chart),this.penDown=!1),!0):(this.setPoint(0,t,i,n.chart),this.penDown=!0,!1)},t.Drawing.BaseTwoPoint.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart))},t.Drawing.BaseTwoPoint.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),this.p1=[t,i],this.render(e))},t.Drawing.BaseTwoPoint.prototype.measure=function(){var e,i,a,r;e=this.stx,this.p0&&this.p1&&(e.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(a=(i=e.controls.mSticky)&&i.querySelector(".mStickyInterior"))&&((r=[]).push(t.capitalize(this.name)),this.getYValue&&r.push(this.field||e.defaultPlotField||"Close"),r.push(a.innerHTML),a.innerHTML=r.join("<br>")))},t.Drawing.BaseTwoPoint.prototype.reposition=function(e,t,i,r){var n,s,o;a.H5p(),t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.setPoint(1,t.p1[0]-s,t.p1[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.render(e)))},t.Drawing.BaseTwoPoint.prototype.drawDropZone=function(e,t,i,r,n){var s,o,l,h,c,u,d;(s=this.stx.panels[this.panelName])&&(o=this.stx,l=s.left,h=s.width,(r||0===r)&&(l=o.pixelFromTick(r,s.chart)),a.H5p(),(n||0===n)&&(h=o.pixelFromTick(n,s.chart)),c=o.getYAxisByField(s,this.field),u=this.pixelFromValue(s,r,t,c),d=this.pixelFromValue(s,n,i,c),e.fillStyle="#008000",e.globalAlpha=.2,a.k8O(9),e.fillRect(l,u,a.w0n(l,h),a.w0n(u,d)),e.globalAlpha=1)},t.Drawing.BaseTwoPoint.prototype.valueOnDrawingAxis=function(e,t){var i;a.s0Y();var{stx:r,panelName:n,field:s}=this;return i=r.panels[n],this.valueFromPixel(r.pixelFromValueAdjusted(i,e,t),i,r.getYAxisByField(i,s))},t.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=5,this.text="",this.ta=null,this.border=!0,a.u2S(9),this.fontSize=a.i6w(0,"0"),this.font={},this.defaultWidth=25,this.whitespace=30,this.fontModifier=3},t.inheritsFrom(t.Drawing.annotation,t.Drawing.BaseTwoPoint),t.Drawing.annotation.prototype.getFontString=function(){var e,t;for(var i in this.fontDef={style:null,weight:null,size:"12px",family:null},(e=this.stx.canvasStyle("stx_annotation"))&&(e.fontStyle&&(this.fontDef.style=e.fontStyle),e.fontWeight&&(this.fontDef.weight=e.fontWeight),e.fontSize&&(this.fontDef.size=e.fontSize),e.fontFamily&&(this.fontDef.family=e.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",t=!0,a.H5p(),this.fontDef)this.fontDef[i]&&(t?t=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},t.Drawing.annotation.prototype.configs=["color","font"],t.Drawing.annotation.prototype.measure=function(){},t.Drawing.annotation.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if("mid","dle",!this.ta&&(i=(t=this.stx).panels[this.panelName],r=t.getYAxisByField(i,this.field),i&&(!this.field||r))){if(n=t.pixelFromTick(this.p0[0],i.chart),s=this.pixelFromValue(i,this.p0[0],this.p0[1],r),e.font=this.fontString,e.textBaseline="middle",o=n,l=s,h=this.w,c=this.h,u=this.getLineColor(),this.stem&&(this.stem.d?(d=t.pixelFromTick(this.stem.t),g=this.pixelFromValue(i,this.stem.t,this.stem.v,r),a.k8O(43),p=a.w0n(o,h,2),a.u2S(43),m=a.i6w(l,c,2)):this.stem.x&&(d=o,g=l,o+=this.stem.x,l+=this.stem.y,a.k8O(43),p=a.w0n(o,h,2),a.k8O(43),m=a.w0n(l,c,2)),e.beginPath(),this.borderColor?e.strokeStyle=this.borderColor:e.strokeStyle=u,e.moveTo(d,g),e.lineTo(p,m),e.stroke()),f=e.lineWidth,this.highlighted?(t.canvasColor("stx_annotation_highlight_bg",e),a.u2S(9),e.fillRect(a.i6w(f,o),a.i6w(c,"2",f,l,a.u2S(44)),a.i6w(2,f,h,a.u2S(45)),a.i6w(2,f,c,a.k8O(45)))):this.fillColor?(e.fillStyle=this.fillColor,a.k8O(46),e.fillRect(o,a.i6w(l,c,"2"),h,c)):this.stem&&(e.fillStyle=t.containerColor,a.u2S(47),e.fillRect(o,a.i6w(l,0,"2",c),h,c)),this.borderColor&&("s","tx_highlight","_vector",e.beginPath(),e.strokeStyle=this.highlighted?t.getCanvasColor("stx_highlight_vector"):this.borderColor,a.k8O(9),e.rect(a.w0n(f,o),a.w0n(l,c,f,2,a.u2S(48)),a.w0n(2,f,h,a.k8O(45)),a.w0n(2,f,c,a.k8O(45))),e.stroke()),this.highlighted){a.k8O(9),y=-a.w0n(0,"1171872832"),-1974462475,a.u2S(2),v=a.w0n(0,"2");for(var x=1;a.u1R(x.toString(),x.toString().length,47270)!==y;x++)t.canvasColor("stx_annotation_highlight",e),v+=2;-1974462475!==a.r57(v.toString(),v.toString().length,32166)&&t.canvasColor("",e)}else{-445991131,-1945834715,b=2;for(var S=1;-445991131!==a.u1R(S.toString(),S.toString().length,35497);S++)e.fillStyle=u,b+=2;-1945834715!==a.u1R(b.toString(),b.toString().length,64235)&&(e.fillStyle=u)}a.u2S(49);var C=a.i6w(5,2,3,20,3);if(l+=this.padding/C,!this.ta)for(var w=0;w<this.arr.length;w++){e.fillText(this.arr[w],o+this.padding,l-c/2+this.fontSize/2),a.u2S(50);var k=a.w0n(5,3);l+=this.fontSize+k}e.textBaseline="alphabetic"}},t.Drawing.annotation.prototype.onChange=function(e){a.H5p()},t.Drawing.annotation.prototype.edit=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(("p","x","ann","o",a.H5p(),"tation",r=this.stx.panels[this.panelName])&&(n=this.stx.controls.annotationSave,s=this.stx.controls.annotationCancel,n&&s&&(o=this.stx,l=this.ta,o.editingAnnotation=!0,o.undisplayCrosshairs(),o.openDialog="annotation",l||("ab","so","l","ute","wr","ap","stx_annot","a","ti","on",(l=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",l.onkeyup=S(this),l.onmouseup=(y=o,a.s0Y(),function(e){a.s0Y(),y.manageTouchAndMouse&&t.ChartEngine.drawingLine&&y.mouseup(e)}),l.setAttribute("wrap","hard"),t.isIOS7or8&&l.setAttribute("placeholder","Enter Text"),o.chart.container.appendChild(l),l.style.position="absolute",l.style.paddingLeft=this.padding+"px",l.value=this.text,t.touchDevice&&(l.ontouchstart=function(e){e.stopPropagation()})),h=this,l.oninput=function(e){a.H5p(),"historyUndo"!=e.inputType&&"historyRedo"!=e.inputType&&h.onChange(e)},l.style.font=this.fontString,this.color&&("a","uto","transparent"==this.color||"auto"==this.color?(c=getComputedStyle(l))&&t.isTransparent(c.backgroundColor)?l.style.color=this.getLineColor():("#","0","00",l.style.color="#000"):l.style.color=this.color),u=o.pixelFromTick(this.p0[0],r.chart),d=this.pixelFromValue(r,this.p0[0],this.p0[1],o.getYAxisByField(r,this.field)),l.style.left=u+140<o.chart.canvasRight?u+"px":o.chart.canvasRight-200+"px",l.style.top=d+60<o.chart.canvasHeight?d-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":d-60+"px",this.repositionTextArea&&this.repositionTextArea(l),t.safeClickTouch(n,(v=this,a.H5p(),function(e){var i;""!==v.ta.value&&(v.text=v.ta.value,(i=v.stx).editingAnnotation=!1,v.adjust(),a.H5p(),i.drawingSnapshot?i.undoStamp(t.shallowClone(i.drawingSnapshot),i.exportDrawings()):(t.ChartEngine.completeDrawing(i),i.addDrawing(v)),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),t.safeClickTouch(s,(b=this,a.s0Y(),function(e){var t,i,r;a.k8O(2),t=a.i6w(0,"1485154561"),i=2;for(var n=1;997369251!==a.u1R(n.toString(),n.toString().length,66975);n++)(r=b.stx).editingAnnotation=!0,r.undo(),i+=2;a.u1R(i.toString(),i.toString().length,45384)!==t&&((r=b.stx).editingAnnotation=!1,r.undo()),(r=b.stx).editingAnnotation=!1,r.undo(),r.cancelTouchSingleClick=!0})),S(this)(),i&&("b","lock",o.drawingSnapshot=o.exportDrawings(),this.hidden=!0,o.draw(),o.activeDrawing=this,t.ChartEngine.drawingLine=!0,e=o.chart.tempCanvas.context,o.chart.tempCanvas.style.display="block",this.w=l.clientWidth,this.h=l.clientHeight,t.clearCanvas(e.canvas,o),this.render(e),this.highlighted=!1,this.edit(e)),t.isAndroid&&!t.is_chrome&&!t.isFF))){this.priorBottom=o.container.style.bottom,400,a.u2S(9);var x=a.w0n(5,105);p=o.resolveY(d)+x,g=o.container.ownerDocument.defaultView,p>t.pageHeight(g)-400&&(m=t.pageHeight(g)-p,a.k8O(9),f=a.w0n(m,400),a.u2S(1),o.chart.container.style.bottom=a.i6w("px",f))}function S(e){return a.s0Y(),function(i){var r,o,l,h,c,u,d,p;if(i&&27===i.keyCode)e.stx.undo();else{r=e.stx,l=(o=e.ta).value.split("\n"),h=0,r.chart.context.font=e.fontString;for(var g=0;g<l.length;g++)(c=r.chart.context.measureText(l[g]).width)>h&&(h=c);a.k8O(51);var m=a.w0n(5,0,5,2,1);if(u=(l.length+m)*(e.fontSize+e.fontModifier),h=Math.max(h,2*e.defaultWidth),o.style.width=h+e.whitespace+"px",a.u2S(1),o.style.height=a.i6w("px",u),d=parseInt(t.stripPX(o.style.top),10),a.H5p(),p=t.stripPX(o.style.left),h=o.clientWidth,u=o.clientHeight,o.focus(),!1===e.border&&(o.style.border="none"),p+h+100<e.stx.chart.canvasWidth){"inline-bl","ock","p","x",a.k8O(1),n.style.top=a.i6w("px",d),a.u2S(1),s.style.top=a.w0n("px",d),a.u2S(0),n.style.left=a.i6w(h,"px",10,p),n.style.display="inline-block",a.k8O(1);var f=a.w0n(4,1);s.style.left=p+h+n.clientWidth+f+"px",s.style.display="inline-block"}else if(d+u+30<e.stx.chart.canvasHeight)"p","x",a.u2S(0),n.style.top=a.w0n(u,"px",10,d),a.k8O(0),s.style.top=a.w0n(u,"px",10,d),a.u2S(1),n.style.left=a.w0n("px",p),n.style.display="inline-block",s.style.left=p+n.clientWidth-5+"px",s.style.display="inline-block";else{"in","l","ine-bl","ock","p","x",a.u2S(52),n.style.top=a.w0n("35","px",d),a.u2S(16),s.style.top=a.w0n("px",35,d),a.k8O(1),n.style.left=a.i6w("px",p),n.style.display="inline-block",a.k8O(9);var y=a.i6w(55,60);s.style.left=p+n.clientWidth-y+"px",s.style.display="inline-block"}}}}},t.Drawing.annotation.prototype.click=function(e,t,i){var r;if(!this.stx.overXAxis&&!this.stx.overYAxis)return r=this.stx.panels[this.panelName],a.s0Y(),this.copyConfig(),this.setPoint(0,t,i,r.chart),this.adjust(),this.edit(e),!1},t.Drawing.annotation.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.annotation.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p;if(s=(n=this.stx).panels[this.panelName],a.H5p(),!this.p0)return null;o=n.pixelFromTick(this.p0[0],s.chart),l=n.getYAxisByField(s,this.field),a.k8O(53);var g=a.w0n(13,15,468,14,20);a.u2S(54);var m=a.i6w(26,3,4,26);return h=this.pixelFromValue(s,this.p0[0],this.p0[g],l)-this.h/m,c=o+this.w,u=h+this.h,this.stem&&this.stem.x&&(o+=this.stem.x,c+=this.stem.x,h+=this.stem.y,u+=this.stem.y),d=n.pixelFromTick(e,s.chart),p=n.pixelFromValueAdjusted(s,e,i),d+r.r>=o&&d-r.r<=c&&p+r.r>=h&&p-r.r<=u&&(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:this.valueOnDrawingAxis(e,i)})},t.Drawing.annotation.prototype.abort=function(){var e,i,r;i=(e=this.stx).controls.annotationSave,r=e.controls.annotationCancel,i&&(i.style.display="none"),r&&(r.style.display="none"),this.ta&&e.chart.container.removeChild(this.ta),a.s0Y(),this.ta=null,e.openDialog="",e.showCrosshairs(),e.editingAnnotation=!1,t.clearCanvas(e.chart.tempCanvas,e),!t.isAndroid||t.is_chrome||t.isFF||(e.chart.container.style.bottom=this.priorBottom),t.fixScreen()},t.Drawing.annotation.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.field=i.fld,this.text=e.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},t.Drawing.annotation.prototype.serialize=function(){var e,i;return e={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,fld:this.field,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("f","l","w","t","s","z",i=t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),t.isEmpty(i)||(e.fnt=i)),this.stem&&(e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(e.bc=this.borderColor),this.fillColor&&(e.bg=this.fillColor),this.lineWidth&&(e.lw=this.lineWidth),this.pattern&&(e.ptrn=this.pattern),e},t.Drawing.annotation.prototype.renderText=function(){var e,i,r,n,s,o,l,h;if(this.getFontString(),i=(e=this.stx).panels[this.panelName]){this.arr=this.text.split("\n"),r=0,e.chart.context.font=this.fontString,a.s0Y();for(var c=0;c<this.arr.length;c++)(n=e.chart.context.measureText(this.arr[c]).width)>r&&(r=n);if(0===r)a.k8O(55),r=a.i6w(0,58,4,14)*this.defaultWidth;this.fontSize=t.stripPX(this.fontDef.size),a.u2S(56);var u=a.i6w(4,5,7,7);s=(this.arr.length+u)*(this.fontSize+this.fontModifier),t.touchDevice&&(s+=5),this.w=r+this.whitespace+this.padding,this.h=s,o=e.pixelFromTick(this.p0[0],i.chart)+r,l=e.getYAxisByField(i,this.field),a.u2S(57);var d=a.w0n(17,11,84,6);h=this.pixelFromValue(i,this.p0["0"*d],this.p0[1],l)+s,this.p1=[e.tickFromPixel(o,i.chart),this.valueFromPixel(h,i,l)],this.stem&&this.stem.d&&(this.stem.t=e.tickFromDate(this.stem.d,i.chart))}},t.Drawing.annotation.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.renderText())},t.Drawing.segment=function(){this.name="segment"},t.inheritsFrom(t.Drawing.segment,t.Drawing.BaseTwoPoint),t.Drawing.segment.prototype.render=function(e){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;n=(r=this.stx).panels[this.panelName],s=r.getYAxisByField(n,this.field),!n||this.field&&!s||(s=s||n.yAxis,o=r.pixelFromTick(this.p0[0],n.chart),l=r.pixelFromTick(this.p1[0],n.chart),h=this.pixelFromValue(n,this.p0[0],this.p0[1],s),c=this.pixelFromValue(n,this.p1[0],this.p1[1],s),u=this.lineWidth,d=this.getLineColor(),"none"==(p={pattern:this.pattern,lineWidth:u}).pattern&&(p.pattern="solid"),a.H5p(),r.plotLine(o,l,h,c,d,this.name,e,n,p),this.axisLabel&&!this.repositioner&&("horizontal"==this.name?(r.endClip(),g=this.p0[1],n.chart.transformFunc&&(g=n.chart.transformFunc(r,n.chart,g)),g=s.priceFormatter?s.priceFormatter(r,n,g):r.formatYAxisPrice(g,n,null,s),r.createYAxisLabel(n,g,h,d,null,null,s),r.startClip(n.name)):"vertical"==this.name&&this.p0[0]>=0&&!r.chart.xAxis.noDraw&&(m=r.dateFromTick(this.p0[0],n.chart,!0),t.ChartEngine.isDailyInterval(r.layout.interval)?(a.k8O(58),m.setHours(0,a.i6w("0",0),0,0)):(y=1e3*m.getSeconds()+m.getMilliseconds(),i.Date&&r.displayZone&&(f=new i.Date(m.getTime(),r.displayZone),m=new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes()),m=new Date(m.getTime()+y))),v=t.mmddhhmm(t.yyyymmddhhmm(m)),n.chart.xAxis.formatter?v=n.chart.xAxis.formatter(m,this.name,null,null,v):this.stx.internationalizer&&(v=t.displayableDate(r,r.chart,m)),r.endClip(),r.createXAxisLabel({panel:n,txt:v,x:o,backgroundColor:d,color:null,pointed:!0,padding:2}),r.startClip(n.name))),this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&("p","1",b="p0"==this.highlighted,x="p1"==this.highlighted,this.littleCircle(e,o,h,b),this.littleCircle(e,l,c,x)))},t.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},t.Drawing.segment.prototype.intersected=function(e,i,r){var n,s;if("lin","e",!this.p0||!this.p1)return null;if("horizontal"!=(n=this.name)&&"vertical"!=n&&"gartley"!=n)for(var o in s={0:this.p0,1:this.p1})if(this.pointIntersection(s[o][0],s[o][1],r))return"d","r","ag",a.u2S(1),this.highlighted=a.i6w(o,"p"),{action:"drag",point:"p"+o};return"horizontal"!=n&&"vertical"!=n||(n="line"),this.lineIntersection(e,i,r,n)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],t.Drawing.segment.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},t.Drawing.segment.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.field=t.fld,this.adjust()},t.Drawing.segment.prototype.serialize=function(){return a.s0Y(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},t.Drawing.line=function(){this.name="line"},t.inheritsFrom(t.Drawing.line,t.Drawing.segment),t.Drawing.line.prototype.dragToDraw=!1,t.Drawing.line.prototype.click=function(e,t,i){var r;if(r=this.stx.panels[this.panelName])return a.s0Y(),this.copyConfig(),this.penDown?(this.accidentalClick(t,i)||(this.setPoint(1,t,i,r.chart),this.penDown=!1),!0):(a.u2S(2),this.setPoint(a.w0n(0,"0"),t,i,r.chart),this.penDown=!0,!1)},t.Drawing.line.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,a.s0Y(),this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.v1=t.v1,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},t.Drawing.line.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},t.Drawing.line.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,e.chart),a.k8O(36),this.setPoint(a.w0n("1",0),this.d1B,this.v1B,e.chart)))},t.Drawing.horizontal=function(){a.s0Y(),this.name="horizontal"},t.inheritsFrom(t.Drawing.horizontal,t.Drawing.segment),t.Drawing.horizontal.prototype.dragToDraw=!1,t.Drawing.horizontal.prototype.measure=function(){},t.Drawing.horizontal.prototype.click=function(e,t,i){var r;if(a.H5p(),r=this.stx.panels[this.panelName])return this.copyConfig(),this.setPoint(0,t,i,r.chart),!0},t.Drawing.horizontal.prototype.intersected=function(e,t,i){var r,n;return a.H5p(),"l","ine",this.lineIntersection(e,t,i,"line")?(r=this.stx.chart.dataSet.length,n=this.p0[1],this.highlighted=!0,{action:"move",p0:[r-2,n],p1:[r-1,n],tick:e,value:this.valueOnDrawingAxis(e,t)}):null},t.Drawing.horizontal.prototype.reconstruct=function(e,t){a.s0Y(),this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.d0=t.d0,this.tzo0=t.tzo0,this.axisLabel=t.al,this.field=t.fld,this.adjust()},t.Drawing.horizontal.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel,fld:this.field}},t.Drawing.horizontal.prototype.adjust=function(){var e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),a.k8O(25);var t=a.i6w(95,17,85);this.p1=[this.p0[0]+t,this.p0[1]]}},t.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],t.Drawing.vertical=function(){a.s0Y(),this.name="vertical"},t.inheritsFrom(t.Drawing.vertical,t.Drawing.horizontal),t.Drawing.vertical.prototype.measure=function(){},t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected,t.Drawing.vertical.prototype.adjust=function(){var e;if(a.s0Y(),e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),a.u2S(59);var t=a.w0n(3,0,18,15,1);a.u2S(50);var i=a.w0n(7,6);a.k8O(3),this.p1=[this.p0[a.w0n(1,"0")],this.p0[t]+i]}},t.Drawing.measure=function(){this.name="measure"},t.inheritsFrom(t.Drawing.measure,t.Drawing.segment),t.Drawing.measure.prototype.click=function(e,t,i){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,a.H5p(),!0):(this.p0=[t,i],this.penDown=!0,!1)},t.Drawing.rectangle=function(){a.s0Y(),this.name="rectangle"},t.inheritsFrom(t.Drawing.rectangle,t.Drawing.BaseTwoPoint),t.Drawing.rectangle.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;a.s0Y(),r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=Math.round(Math.min(s,o))+.5,u=Math.min(l,h),d=Math.max(s,o)-c,p=Math.max(l,h)-u,g=this.getLineColor(),(m=this.fillColor)&&!t.isTransparent(m)&&"auto"!=m&&(e.beginPath(),e.rect(c,u,d,p),e.fillStyle=m,e.globalAlpha=.2,e.fill(),e.closePath(),e.globalAlpha=1),f={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==f.pattern&&(f.pattern="solid",.1==f.lineWidth&&(f.lineWidth=1)),i.plotLine(s,o,l,l,g,"segment",e,r,f),a.u2S(9),i.plotLine(o,o,a.w0n(.5,l),a.i6w(.5,h,a.u2S(1)),g,"segment",e,r,f),i.plotLine(o,s,h,h,g,"segment",e,r,f),a.u2S(1),i.plotLine(s,s,a.w0n(.5,h),a.w0n(.5,l,a.u2S(9)),g,"segment",e,r,f),this.highlighted&&("p","0",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,s,l,y),this.littleCircle(e,o,h,v)))},t.Drawing.rectangle.prototype.intersected=function(e,i,r){var n;if(!this.p0||!this.p1)return null;for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],r))return"dra","g",a.k8O(1),this.highlighted=a.i6w(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(e,i,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.rectangle.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,a.H5p(),this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.field=t.fld,this.adjust()},t.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},t.Drawing.shape=function(){var e;this.name="shape",a.H5p(),e=2;for(var t=1;1048390451!==a.u1R(t.toString(),t.toString().length,54247);t++)this.radians=6,this.a=6,this.rotating=!0,this.textMeasure=!0,this.configurator="",a.k8O(58),e+=a.w0n("2",0);2074517520!==a.r57(e.toString(),e.toString().length,58066)&&(this.radians=2,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator=""),this.radians=0,a.u2S(3),this.a=a.i6w(1,"0"),this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},t.inheritsFrom(t.Drawing.shape,t.Drawing.BaseTwoPoint),t.Drawing.shape.prototype.setRotationOnInitialDraw=!1,t.Drawing.shape.prototype.measure=function(){},t.Drawing.shape.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_;if(a.H5p(),this.points.length&&(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n))){if(s=i.pixelFromTick(this.p0[0],r.chart),o=this.pixelFromValue(r,this.p0[0],this.p0[1],n),this.p1){if(l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),e.globalAlpha=.5,e.fillStyle=this.getLineColor(),this.rotating){if(a.u2S(60),this.radians=Math.atan(a.w0n(s,h,o,l)),l<s)this.radians+=Math.PI;else if(h<o){a.k8O(61);var A=a.w0n(9,13,5,15,0);this.radians+=A*Math.PI}a.u2S(9);var M=a.i6w(180,190);a.u2S(9);var F=a.i6w(20,25);this.a=parseInt((36*this.radians/Math.PI).toFixed(0),M)*F,this.a%=360,a.k8O(9);var P=a.i6w(180,360);this.radians=this.a*Math.PI/P,this.textMeasure&&e.fillText(this.a+"°",l+10,h+10)}else this.penDown&&("x",",",this.sx=Math.max(1,parseFloat(Math.abs(2*(l-s)/this.dimension[0]).toFixed(1))),l<s&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(h-o)/this.dimension[1]).toFixed(1))),h<o&&(this.sy*=-1),this.textMeasure&&e.fillText(this.sx+"x,"+this.sy+"x",l+this.sx+5,h+this.sy+5));e.globalAlpha=1}for(void 0===this.sx&&(this.sx=this.sy=1),(c=this.lineWidth)||(c=1.1),u={pattern:this.pattern,lineWidth:c},this.highlighted&&"none"==u.pattern&&("s","o","li","d",u.pattern="solid",.1==u.lineWidth&&(u.lineWidth=1)),d=this.getLineColor(),this.highlighted&&.1==c&&(c=1.1),p=this.fillColor,c/=2*Math.abs(this.sx*this.sy)/(Math.abs(this.sx)+Math.abs(this.sy)),e.save(),e.translate(s,o),e.rotate(this.radians),e.scale(this.sx,(n||r.yAxis).flipped?-this.sy:this.sy),f={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},g=0;g<this.points.length;g++){for("no","n","e","a","ut","o",e.beginPath(),m=0;m<this.points[g].length;m++)"M"==(w=this.points)[g][m]?(y=w[g][++m]-f.x,v=w[g][++m]-f.y,e.moveTo(y,v)):"L"==w[g][m]?(y=w[g][++m]-f.x,v=w[g][++m]-f.y,e.lineTo(y,v)):"Q"==w[g][m]?(b=w[g][++m]-f.x,S=w[g][++m]-f.y,y=w[g][++m]-f.x,v=w[g][++m]-f.y,e.quadraticCurveTo(b,S,y,v)):"B"==w[g][m]&&(b=w[g][++m]-f.x,S=w[g][++m]-f.y,x=w[g][++m]-f.x,C=w[g][++m]-f.y,y=w[g][++m]-f.x,v=w[g][++m]-f.y,e.bezierCurveTo(b,S,x,C,y,v));e.closePath(),p&&!t.isTransparent(p)&&"auto"!=p&&(e.fillStyle=p,e.fill()),d&&"none"!=this.pattern&&(e.strokeStyle=d,e.lineWidth=c,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(c,this.pattern)),e.lineDashOffset=0),e.stroke())}if(e.restore(),e.save(),e.translate(s,o),e.rotate(this.radians),this.highlighted){"p","2","p","0",k="p0"==this.highlighted,T="p1"==this.highlighted,D="p2"==this.highlighted,this.littleCircle(e,0,0,k),this.mover(e,0,0,k),this.littleCircle(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,T),this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,T),this.littleCircle(e,this.sx*this.dimension[0]/2,0,D),this.rotator(e,this.sx*this.dimension[0]/2,0,D),e.globalAlpha=.5,e.fillStyle=this.getLineColor(null,!1),this.textMeasure&&("x",",",e.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),e.fillText(this.a+"°",this.sx*this.dimension[0]/2+12,5)),-2106990975,1779383201,_=2;for(var L=1;-2106990975!==a.u1R(L.toString(),L.toString().length,88484);L++)e.globalAlpha=1,_+=2;1779383201!==a.u1R(_.toString(),_.toString().length,90749)&&(e.globalAlpha=2)}else this.penDown&&(this.rotating?this.rotator(e,this.sx*this.dimension[0]/2,0,!0):this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0));e.restore()}},t.Drawing.shape.prototype.reposition=function(e,t,i,r){var n,s,o,l,h,c,u,d,p;if("m","o","v","e",t)if(s=(n=this.stx).panels[this.panelName],"move"==t.action)o=t.tick-i,l=t.value-r,this.setPoint(0,t.p0[0]-o,t.p0[1]-l,s.chart),this.render(e);else if("ro","t","a","te",h=n.getYAxisByField(s,this.field),c=n.pixelFromTick(this.p0[0],s.chart),u=this.pixelFromValue(s,this.p0[0],this.p0[1],h),d=n.pixelFromTick(i,s.chart),p=this.pixelFromValue(s,i,r,h),"scale"==t.action)this[t.point]=[i,r],this.sx=parseFloat((((d-c)*Math.cos(this.radians)+(p-u)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((p-u)*Math.cos(this.radians)-(d-c)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(e);else if("rotate"==t.action){this[t.point]=[i,r],a.k8O(60),this.radians=Math.atan(a.w0n(c,p,u,d)),d<c?this.radians+=Math.PI:p<u&&(this.radians+=2*Math.PI),a.u2S(1);var g=a.w0n(9,1);if(this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),g),this.sx<0){a.u2S(62);var m=a.i6w(10,4864,20,2520,4);this.a=this.a+m}this.a%=360,a.u2S(9);var f=a.i6w(11,191);this.radians=this.a*Math.PI/f,this.render(e)}},t.Drawing.shape.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(n=this.stx,!this.p0)return null;if(n.repositioningDrawing==this&&n.repositioningDrawing.repositioner)return n.repositioningDrawing.repositioner;s=n.panels[this.panelName],o=n.getYAxisByField(s,this.field),l=n.pixelFromTick(this.p0[0],s.chart),h=this.pixelFromValue(s,this.p0[0],this.p0[1],o),c=n.pixelFromTick(e,s.chart),u=n.pixelFromValueAdjusted(s,e,i),d=u-=h,p=c-=l,c=Math.cos(this.radians)*p+Math.sin(this.radians)*d,u=Math.cos(this.radians)*d-Math.sin(this.radians)*p,c/=this.sx,u/=this.sy,this.padding=t.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),g=this.padding.right+this.padding.left,m=this.padding.bottom+this.padding.top,f=Math.pow(t.touchDevice?25:5+this.littleCircleRadius(),2),y=Math.abs(f/(this.sx*this.sy)),a.k8O(9);var C=a.w0n(12,14);a.u2S(19);var w=a.w0n(1,5,8);a.u2S(9);var k=a.w0n(20,84);a.k8O(1);var T=a.i6w(2,0);a.k8O(16);var D=a.i6w(10,20,12);a.k8O(34);var _=a.w0n(7,18,7,16);v=Math.pow((this.dimension[0]-g+3)/2,C)+Math.pow((this.dimension[1]-m+3)/w,"2"<<k)>Math.pow(c-g/T,D)+Math.pow(u-m/2,_),a.u2S(4);var A=a.i6w(30,9,19);a.u2S(63);var M=a.i6w(14,9,3,28);b=(f-(Math.pow(c*this.sx,A)+Math.pow(u*this.sy,M)))/Math.abs(this.sx*this.sy),a.u2S(9);var F=a.i6w(26,28);a.k8O(64);var P=a.w0n(7,19,1,12);a.u2S(50);var L=a.i6w(14,13);a.k8O(65);var O=a.w0n(0,20,20,1,2);x=y-Math.pow(c-this.dimension[0]/F,P)-Math.pow(u-this.dimension[L]/2,O),a.u2S(9);var E=a.i6w(26,28);a.k8O(9);var I=a.i6w(32,34);a.u2S(66);var N=a.w0n(16,14,17,376,2);return S=y-Math.pow(c-this.dimension[0]/E,I)-Math.pow(u,N),v?x>=S&&x>=b&&x>-1?("sc","ale",this.highlighted="p1",{action:"scale"}):S>=x&&S>=b&&S>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=!(b>-1)||"p0",{action:"move",p0:t.clone(this.p0),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.shape.prototype.littleCircleRadius=function(){return a.H5p(),3},t.Drawing.shape.prototype.click=function(e,t,i){var r;return!!this.points.length&&(this.copyConfig(),r=this.stx.panels[this.panelName],this.penDown?(a.u2S(27),this.setPoint(a.i6w("1",64),t,i,r.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,t,i,r.chart),this.penDown=!0,!1))},t.Drawing.shape.prototype.adjust=function(){var e,i,r;if("_","v",e=this.stx.panels[this.panelName]){i=this.name+"_v"+(this.version||0),t.Drawing[i]&&(r=new t.Drawing[i],this.name=r.name,this.dimension=r.dimension,this.padding=r.padding,this.points=r.points,this.version=r.version),this.setPoint(0,this.d0,this.v0,e.chart),a.k8O(50);var n=a.i6w(13,8);a.H5p(),a.k8O(67);var s=a.i6w(30,2,3,49,17);this.radians=Math.round(this.a/n)*Math.PI/s}},t.Drawing.shape.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.v0=t.v0,this.tzo0=t.tzo0,this.a=t.a,this.sx=t.sx,this.sy=t.sy,this.field=t.fld,this.version=t.ver,this.adjust()},t.Drawing.shape.prototype.serialize=function(){return a.s0Y(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,fld:this.field,ver:this.version}},t.Drawing.arrow=function(){this.name="arrow",this.version=1,this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},t.inheritsFrom(t.Drawing.arrow,t.Drawing.shape),t.Drawing.getDrawingToolList=function(e){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},t.extend(a,e),t.Drawing)!a[r]&&t.Drawing[r].prototype.render&&(i[(new t.Drawing[r]).name]=r);return i}},l=e=>{var t,i=O;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).EaseMachine=function(e,i,a,r){this.fc="string"==typeof e?t.EaseMachine[e]:e,this.ms=i,(a||0===a)&&this.reset(a,r)},t.EaseMachine.prototype.reset=function(e,t){for(var a in e||0===e||(e=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,i.u2S(68),this.useNameValuePairs=i.i6w(typeof t,"object"),i.H5p(),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=e,this.endValues=t):(this.startValues={default:e},this.endValues={default:t}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[a]=this.endValues[a]-this.startValues[a]},i.s0Y(),t.EaseMachine.prototype.next=function(){var e;for(var t in i.s0Y(),(e=Date.now())>=this.startTime+this.ms&&(e=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[t]=this.fc(e-this.startTime,this.startValues[t],this.changeValues[t],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(e,t,i,a){var r;function n(){var t;r.afid=null,r.okayToRun&&(t=r.next(),e(t),r.hasCompleted||(r.afid=requestAnimationFrame(n)))}this.afid&&cancelAnimationFrame(this.afid),t||0===t?this.reset(t,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n()},t.EaseMachine.prototype.stop=function(){return"de","f","a","ult","und","e","fined",this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.easeInOutQuad=function(e,t,a,r){return i.H5p(),i.u2S(10),(e/=i.w0n(2,r))<1?(i.k8O(69),i.i6w(2,t,e,e,a)):(e--,i.u2S(70),i.i6w(1,e,2,e,a,t,2))},t.EaseMachine.easeInOutCubic=function(e,t,a,r){return i.k8O(10),(e/=i.w0n(2,r))<1?(i.u2S(71),i.i6w(t,a,e,e,2,e)):(e-=2,i.k8O(72),i.i6w(2,e,e,0,a,e,"2",t))},t.EaseMachine.easeOutCubic=function(e,t,a,r){return e/=r,e--,i.s0Y(),i.k8O(73),i.i6w(t,e,a,e,e,1)},t.ChartEngine.prototype.animations.zoom.isStub&&(t.ChartEngine.prototype.animations.zoom=new t.EaseMachine("easeOutCubic",400))},h=e=>{var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p=O;function g(e,t){return p.u2S(15),p.w0n(t,"",e)}function m(e){return p.H5p(),Math.asinh?Math.asinh(e):e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function f(e){return Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function y(e,t,i,a){this.tokens=e,p.s0Y(),this.ops1=t,this.ops2=i,this.functions=a}function v(e){var t;for(t=e=Math.floor(e);e>1;)p.u2S(74),t=p.w0n(t,--e);return t}function b(e,t){return Boolean(e||t)}function x(){this.success=!1,this.errormsg="",this.expression="",p.u2S(27),this.pos=p.w0n("0",32),p.u2S(36),this.tokennumber=p.i6w("0",0),this.tokenprio=0,p.k8O(2),this.tokenindex=p.w0n(0,"0"),this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:L,cosh:f,tanh:V,asinh:m,acosh:w,atanh:N,sqrt:Math.sqrt,log:Math.log,lg:z,log10:z,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:C,"-":M,exp:Math.exp},this.ops2={"+":H,"-":R,"*":I,"/":D,"%":k,"^":Math.pow,",":P,"||":g,"==":j,"!=":X,">":B,"<":$,">=":A,"<=":Y,and:S,or:b},this.functions={fac:v,min:Math.min,max:Math.max,hypot:E,pyt:E,pow:Math.pow,atan2:Math.atan2,if:T},this.consts={E:Math.E,PI:Math.PI}}function S(e,t){return p.H5p(),Boolean(e&&t)}function C(e){return p.s0Y(),Math.trunc?Math.trunc(e):e<0?Math.ceil(e):Math.floor(e)}function w(e){return Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function k(e,t){return p.u2S(75),p.w0n(t,e)}function T(e,t,i){return e?t:i}function D(e,t){return p.u2S(10),p.H5p(),p.w0n(t,e)}function _(e){function t(){}return t.prototype=e,p.s0Y(),new t}function A(e,t){return p.k8O(77),p.H5p(),p.w0n(e,t)}function M(e){return-e}function F(t,i,a,r){this.type_=t,this.index_=i||0,this.prio_=a||0,this.number_=null!=r?r:0,this.toString=function(){switch(this.type_){case 0:return this.number_;case e:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Inva","lid Tok","en","Invalid Token"}}}function P(e,t){return"[objec","t Ar","ray","]","[object Array]"!=Object.prototype.toString.call(e)?[e,t]:((e=e.slice()).push(t),e)}function L(e){return Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function E(){var e,t;if(Math.hypot)return Math.hypot.apply(this,arguments);e=0,t=arguments.length;for(var i=0;i<t;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;e+=arguments[i]*arguments[i]}return Math.sqrt(e)}function I(e,t){return p.u2S(3),p.w0n(t,e)}function N(e){return p.s0Y(),Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function H(e,t){return p.s0Y(),Number(e)+Number(t)}function V(e){return Math.tanh?Math.tanh(e):e===1/0?1:(p.H5p(),e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e)))}function R(e,t){return p.H5p(),p.u2S(9),p.i6w(t,e)}function Y(e,t){return p.u2S(79),p.w0n(t,e)}function z(e){return p.H5p(),Math.log(e)*Math.LOG10E}function B(e,t){return p.k8O(81),p.w0n(t,e)}function j(e,t){return p.s0Y(),p.u2S(68),p.w0n(e,t)}function $(e,t){return p.u2S(83),p.w0n(e,t)}function X(e,t){return p.u2S(84),p.i6w(t,e)}return"\\","\\","\\","b",0,p.k8O(3),e=p.w0n(1,"1"),2,3,4,/[\u00ad\u0600-\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]|\u070f|\u17b4|\u0604|\u17b5/g,i=/[\\'\x7f-\x9f\u00ad\u0600-\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]|\u070f|\u17b4|\u0604|\u17b5/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},t.extend(y.prototype,{simplify:function(t){var i,a,r,n,s,o,l,h;for(p.H5p(),t=t||{},i=[],a=[],s=this.tokens.length,l=0,l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))i.push(o);else if(3===h&&o.index_ in t)o=new F(0,0,0,t[o.index_]),i.push(o);else if(2===h&&i.length>1)n=i.pop(),r=i.pop(),o=new F(0,0,0,(0,this.ops2[o.index_])(r.number_,n.number_)),i.push(o);else if(h===e&&i.length>0)r=i.pop(),o=new F(0,0,0,(0,this.ops1[o.index_])(r.number_)),i.push(o);else{for(;i.length>0;)a.push(i.shift());a.push(o)}for(;i.length>0;)a.push(i.shift());return new y(a,_(this.ops1),_(this.ops2),_(this.functions))},substitute:function(e,t){var i,a,r,n,s,o;for(t instanceof y||(t=(new x).parse(String(t))),i=[],a=this.tokens.length,n=0,n=0;n<a;n++)if(3===(r=this.tokens[n]).type_&&r.index_===e)for(var l=0;l<t.tokens.length;l++)o=new F((s=t.tokens[l]).type_,s.index_,s.prio_,s.number_),i.push(o);else i.push(r);return new y(i,_(this.ops1),_(this.ops2),_(this.functions))},evaluate:function(t){var i,a,r,n,s,o,l,h;for(t=t||{},i=[],s=this.tokens.length,p.H5p(),l=0,l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))i.push(o.number_);else if(2===h)r=i.pop(),a=i.pop(),n=this.ops2[o.index_],i.push(n(a,r));else if(3===h)if(o.index_ in t)i.push(t[o.index_]);else{if(!(o.index_ in this.functions))throw"u","ndefin","e","d variable: ",new Error("undefined variable: "+o.index_);i.push(this.functions[o.index_])}else if(h===e)a=i.pop(),n=this.ops1[o.index_],i.push(n(a));else{if(4!==h)throw"invalid Exp","ressio","n",new Error("invalid Expression");if(a=i.pop(),!(n=i.pop()).apply||!n.call)throw p.k8O(1),new Error(p.i6w(" is not a function",n));"[obj","ect Arr","ay]","[object Array]"==Object.prototype.toString.call(a)?i.push(n.apply(void 0,a)):i.push(n.call(void 0,a))}if(i.length>1)throw new Error("invalid Expression (parity)");return i[0]},toString:function(t){var r,n,s,o,l,h,c,u,d;for(r=[],l=this.tokens.length,p.s0Y(),c=0,c=0;c<l;c++)if(0===(u=(h=this.tokens[c]).type_))r.push("string"==typeof(d=h.number_)?(i.lastIndex=0,i.test(d)?"'"+d.replace(i,(function(e){var t;return"string"==typeof(t=a[e])?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+d+"'"):(p.H5p(),d));else if(2===u)s=r.pop(),n=r.pop(),o=h.index_,t&&"^"==o?(p.u2S(76),r.push(p.w0n(",","Math.pow(",n,")",s))):(p.k8O(76),r.push(p.w0n(o,"(",n,")",s)));else if(3===u)r.push(h.index_);else if(u===e)n=r.pop(),"-"===(o=h.index_)?(p.u2S(0),r.push(p.w0n(o,")",n,"("))):(p.k8O(0),r.push(p.w0n("(",")",n,o)));else{if(4!==u)throw new Error("invalid Expression");n=r.pop(),o=r.pop(),p.k8O(0),r.push(p.i6w("(",")",n,o))}if(r.length>1)throw new Error("invalid Expression (parity)");return p.k8O(3),r[p.w0n(1,"0")]},variables:function(){var e,t,i;e=this.tokens.length,t=[],p.s0Y();for(var a=0;a<e;a++)3===(i=this.tokens[a]).type_&&-1==t.indexOf(i.index_)&&t.push(i.index_);return t}},!0),x.parse=function(e){return p.H5p(),(new x).parse(e)},x.evaluate=function(e,t){return p.s0Y(),x.parse(e).evaluate(t)},x.Expression=y,x.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:L,cosh:f,tanh:V,asinh:m,acosh:w,atanh:N,sqrt:Math.sqrt,log:Math.log,lg:z,log10:z,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:C,fac:v,exp:Math.exp,min:Math.min,max:Math.max,hypot:E,pyt:E,pow:Math.pow,atan2:Math.atan2,if:T,E:Math.E,PI:Math.PI},p.k8O(78),r=p.i6w("1",32,0),p.k8O(27),n=p.w0n(1,1),p.u2S(27),s=p.i6w(1,2),p.k8O(27),o=p.i6w(1,3),p.k8O(78),l=p.w0n("1",0,4),p.k8O(80),h=p.i6w(0,0,"1","5"),p.k8O(27),c=p.i6w(1,6),p.u2S(27),u=p.i6w(1,7),p.k8O(82),d=p.i6w(1,"8",0),t.extend(x.prototype,{parse:function(t){var i,a,g,m,f,v,b,x;for(this.errormsg="",this.success=!0,p.s0Y(),i=[],a=[],this.tmpprio=0,p.k8O(85),g=p.i6w(c,r,o,s),m=0,this.expression=t,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&c?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",m++,this.addfunc(a,i,e)),p.k8O(85),g=p.i6w(c,r,o,s)):this.isComment()||(0==(g&n)&&this.error_parsing(this.pos,"unexpected operator"),m+=2,this.addfunc(a,i,2),p.k8O(85),g=p.w0n(c,r,o,s)):this.isNumber()?(0==(g&r)&&("unexpected nu","mber",this.error_parsing(this.pos,"unexpected number")),f=new F(0,0,0,this.tokennumber),a.push(f),p.u2S(86),g=p.w0n(h,n,l)):this.isString()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected string"),f=new F(0,0,0,this.tokennumber),a.push(f),p.k8O(86),g=p.w0n(h,n,l)):this.isLeftParenth()?(0==(g&o)&&this.error_parsing(this.pos,'unexpected "("'),g&u&&(m+=2,p.u2S(58),this.tokenprio=-p.w0n("2",0),this.tokenindex=-1,this.addfunc(a,i,4)),p.k8O(87),g=p.i6w(d,r,s,o,c)):this.isRightParenth()?(g&d?(f=new F(0,0,0,[]),a.push(f)):0==(g&l)&&this.error_parsing(this.pos,'unexpected ")"'),p.u2S(87),g=p.w0n(u,n,h,l,o)):this.isComma()?(0==(g&h)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(a,i,2),m+=2,p.u2S(85),g=p.w0n(c,r,o,s)):this.isConst()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected constant"),v=new F(0,0,0,this.tokennumber),a.push(v),p.k8O(86),g=p.i6w(h,n,l)):this.isOp2()?(0==(g&s)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(a,i,2),m+=2,g=o):this.isOp1()?(0==(g&s)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(a,i,e),m++,g=o):this.isVar()?(0==(g&r)&&("une","xpected variable",this.error_parsing(this.pos,"unexpected variable")),b=new F(3,this.tokenindex,0,0),a.push(b),p.k8O(87),g=p.w0n(u,n,h,l,o)):this.isWhite()||(""===this.errormsg?("unknown"," charac","ter",this.error_parsing(this.pos,"unknown character")):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');i.length>0;)x=i.pop(),a.push(x);return m+1!==a.length&&this.error_parsing(this.pos,"parity"),new y(a,_(this.ops1),_(this.ops2),_(this.functions))},evaluate:function(e,t){return p.s0Y(),this.parse(e).evaluate(t)},error_parsing:function(e,t){throw this.success=!1,p.u2S(0),this.errormsg=p.w0n(e,t,"]: ","parse error [column "),this.column=e,new Error(this.errormsg)},addfunc:function(e,t,i){var a;for(p.H5p(),a=new F(i,this.tokenindex,this.tokenprio+this.tmpprio,0);t.length>0&&a.prio_<=t[t.length-1].prio_;)e.push(t.pop());t.push(a)},isNumber:function(){var e,t,i;for(e=!1,t="";this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0;return e},unescape:function(e,t){var i,a,r,n;i=[],a=!1;for(var s=0;s<e.length;s++)if(r=e.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(e.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw"Illega","l escape"," sequence: '\\",p.k8O(1),this.error_parsing(p.w0n(s,t),p.w0n("'","Illegal escape sequence: '\\",r,p.u2S(15)))}a=!1}else"\\"==r?a=!0:i.push(r);return p.s0Y(),i.join("")},isString:function(){var e,t,i;if(e=!1,t="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,i),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return e},isConst:function(){var e;for(var t in this.consts)if(e=t.length,t===this.expression.substr(this.pos,e))return this.tokennumber=this.consts[t],this.pos+=e,!0;return p.H5p(),!1},isOperator:function(){var e;if(43===(e=this.expression.charCodeAt(this.pos)))p.k8O(3),this.tokenprio=p.i6w(1,"2"),this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,p.u2S(3),this.tokenprio=p.i6w(1,"1"),this.tokenindex="<="):(p.k8O(9),this.tokenprio=p.w0n(0,"1"),this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,p.k8O(3),this.tokenprio=p.w0n(1,"1"),this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;"=","=",this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;"an","d",this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var e;return p.H5p(),45===(e=this.expression.charCodeAt(this.pos-1))||43===e},isPositiveSign:function(){return p.H5p(),43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)||(p.H5p(),!1)},isLeftParenth:function(){var e;return e=this.expression.charCodeAt(this.pos),p.s0Y(),40===e&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){return p.s0Y(),44===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e;return(32===(e=this.expression.charCodeAt(this.pos))||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops1&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isOp2:function(){var e,t;p.H5p(),e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops2&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isVar:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&(this.tokenindex=e,this.tokenprio=4,this.pos+=e.length,!0)},isComment:function(){var e;if(e=this.expression.charCodeAt(this.pos-1),p.H5p(),47===e&&42===this.expression.charCodeAt(this.pos)){"*","/",p.k8O(88);var t=p.w0n(13,2143,15,0,11);return this.pos=this.expression.indexOf("*/",this.pos)+t,1===this.pos&&(this.pos=this.expression.length),!0}return!1}},!0),x},t.computeEquationChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k=O;function T(){var e,t;for(var i in e=null,t=null,l)t?l[i].d.getTime()<t.d.getTime()?e=t=l[i]:l[i].d.getTime()>t.d.getTime()&&(e=t):t=l[i];return e?A(e)?-1:0:1}for(var D in e=e.replace(/[:]/,"/"),r=0,a)"\\","$","\\","[",n=new RegExp("\\["+D.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),k.u2S(1),e=e.replace(n,k.i6w(r,"symbol")),r++;for(D in s=i().parse(e),o=[],l={},h=0,u=null,d=!1,p=[],a)g={sym:D,map:a[D]},a[D]?p.unshift(g):p.push(g);for(var _=0;_<p.length;_++)m=p[_],l[m.sym]={i:0,s:m.sym},m.map?(h++,c=m.map[0]):1==h&&(d=m.sym),c.DT||(c.DT=t.strToDateTime(c.Date)),l[m.sym].d=c.DT,u||(u=l[m.sym]);function A(e){if(e.i++,a[e.s]){if(e.i>=a[e.s].length)return 0;c=a[e.s][e.i]}return k.H5p(),c.DT||(c.DT=t.strToDateTime(c.Date)),e.d=c.DT,1}k.u2S(89),f=k.w0n(0,h),y=1==h&&-1==e.indexOf("%");e:for(;v=T();)if(1==v){if(d)(x=a[u.s][u.i][d])&&(x.Close||0===x.Close)&&(x=x.Close),S=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:x}),S=Number(S.toFixed(8)),(b={DT:u.d,Close:S,Adj_Close:S})[u.s]=a[u.s][u.i].Close,isNaN(S)||S==1/0||o.push(b);else{if(f)throw"NoExcept","ion",C=s.evaluate({}),k.u2S(15),t.alert(k.i6w(C,e,"=")),{name:"NoException",message:""};for(D in r=0,w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var M in w)k.u2S(1),w[M][k.i6w(r,"symbol")]=a[D][l[D].i][M];r++}(b={DT:u.d}).Adj_Close=s.evaluate(w.Adj_Close),b.Close=s.evaluate(w.Close),b.Open=s.evaluate(w.Open),b.Volume=s.evaluate(w.Volume),isNaN(b.Volume)&&(b.Volume=0),y?(b.High=s.evaluate(w.High),b.Low=s.evaluate(w.Low)):(b.High=Math.max(b.Open,b.Close),b.Low=Math.min(b.Open,b.Close)),isNaN(b.Close)||b.Close==1/0||o.push(b),isNaN(b.High)||(b.High=Number(b.High.toFixed(8))),isNaN(b.Low)||(b.Low=Number(b.Low.toFixed(8))),isNaN(b.Open)||(b.Open=Number(b.Open.toFixed(8))),isNaN(b.Close)||(b.Close=Number(b.Close.toFixed(8))),isNaN(b.Adj_Close)?b.Adj_Close=b.Close:b.Adj_Close=Number(b.Adj_Close.toFixed(8))}for(D in a)if(!A(l[D]))break e}return o}},c=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setLocale=function(e,i){var a,r,n,s;if("n","ume","ric","numeri","c","numer","i","c","2-","dig","it","2-di","git","h","2","3","n","um","e","ric","undefined"!=typeof Intl&&this.locale!=e){for(this.locale=e,(r=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),r.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),r.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),r.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),r.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),r.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),r.numbers=new Intl.NumberFormat(this.locale),r.priceFormatters=[],i||(i=8),a=0;a<i+1;a++)r.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:a,minimumFractionDigits:a}));for(a=0;a<5;a++)"per","ce","nt",n=a,s=a,a||(n="",s=2),O.u2S(1),r[O.w0n(n,"percent")]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:s,maximumFractionDigits:s});t.I18N.createMonthArrays&&t.I18N.createMonthArrays(this,r.month,this.locale)}},t.ChartEngine.prototype.translateUI=function(e){O.H5p(),t.I18N.localized&&t.I18N.translateUI(this.preferences.language,e)},t.I18N=function(){},t.I18N.hereDoc=function(e){return O.H5p(),e.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},t.I18N.language="en",t.I18N.longMonths={zh:!0},t.I18N.reverseColorsByLocale={zh:!0,ja:!0},t.I18N.findAllTextNodes=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if("^","\\","s*","$",e||(e=document.body),e==document.body&&!document.querySelector(".ciq_stashed_texts")){"inpu","t,textarea,.editable_","content",(i=document.createElement("div")).className="ciq_stashed_texts",i.style.display="none",e.appendChild(i),a=document.querySelectorAll("input,textarea,.editable_content");for(var b=0;b<a.length;b++)"place","holde","r",(r=a[b].getAttribute("placeholder"))&&("cq","-","translate",(n=i.appendChild(document.createElement("cq-translate"))).setAttribute("original",r),n.placeholderFor=a[b],n.appendChild(document.createTextNode(r)))}for(o=(s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),l=new RegExp("^\\s*$"),h=new RegExp("\n|\t|\f","g"),c={},u={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};o;)d=o.nodeValue,l.test(d)||(p=o.parentNode,g=o.nextSibling,u[m=p.tagName]||("CQ","-TRANSL","AT","E","CQ-TRANSLATE"!=m?((f=document.createElement("cq-translate")).setAttribute("original",d),f.appendChild(o),p.insertBefore(f,g)):d=p.getAttribute("original"),h.test(d)&&(d=d.replace(h,"")),c[d]||(c[d]=[]),c[d].push(o))),o=s.nextNode();if(e==document.body&&(y=t.Studies?t.Studies.studyLibrary:null))for(var x in y){if(null===c[x]&&(c[x]=[]),(v=y[x]).inputs)for(var S in v.inputs)c[S]||(c[S]=[]);if(v.outputs)for(var C in v.outputs)c[C]||(c[C]=[])}return c},t.I18N.missingWordList=function(e){var i,a,r,n,s,o;for(var l in"I","nvert Y-Axis","Ove","r","Sol","d",e||(e=t.I18N.language),i=t.I18N.findAllTextNodes(),a={},(r=t.I18N.wordLists[e])||(r={}),n=function(e){O.s0Y(),void 0===r[e]&&(a[e]="")},i)n(l);if(O.H5p(),!t.Studies||!t.Studies.studyLibrary)return a;for(var h in t.Studies.studyLibrary){for(var c in n((s=t.Studies.studyLibrary[h]).name),s.inputs)switch("[object S","t","ring","]",n(c),o=s.inputs[c],Object.prototype.toString.call(o)){case"[object String]":n(o);break;case"[object Array]":for(var u=0;u<o.length;++u)n(o[u])}for(var d in s.outputs)n(d)}return n("Show Zones"),n("OverBought"),n("OverSold"),n("Panel"),n("Show as Underlay"),n("Y-Axis"),n("Invert Y-Axis"),a},t.I18N.printableMissingWordList=function(e){return'",\n','"',JSON.stringify(t.I18N.missingWordList(e)).replace(/","/g,'",\n"')},t.I18N.translateUI=function(e,i){var a,r,n,s,o,l,h,c;if("p",O.s0Y(),"u","pu"==e&&(e="pt"),t.I18N.wordLists&&(e||(e=t.I18N.language),a=t.I18N.findAllTextNodes(i),r=t.I18N.wordLists[e]))for(var u in a){n=t.I18N.translateSections(u,r),s=a[u];for(var d=0;d<s.length;d++)h=(l=(o=s[d]).parentNode).getAttribute("original"),","!==n&&n||(n=h),(c=l.placeholderFor)?c.placeholder=n:o.data=n}},t.I18N.translate=function(e,i){var a,r;return i||(i=t.I18N.language),O.H5p(),t.I18N.wordLists?(r=null,(a=t.I18N.wordLists[i])&&(r=t.I18N.translateSections(e,a)||e),","===r?e:r):("Must include translations.js in order to use C","IQ.I18N.translate()",console.log("Must include translations.js in order to use CIQ.I18N.translate()"),e)},t.I18N.translateSections=function(e,t){var i,a,r=O;return i="‌","string"==typeof e&&-1!=e.indexOf(i)?("$","1",r.k8O(15),(a=(e=e.replace(/([(),])/g,r.i6w(i,i,"$1"))).split(i)).forEach((function(e,i,a){var n,s;if(n=e.match(/^(\s*).{0,100}\S(\s*)$/),r.s0Y(),s=t[e.trim()]){if(n){r.k8O(9);var o=r.i6w(6,7);r.u2S(90);var l=r.i6w(34,23,1,1,11);s=n[o]+s+n[l]}a[i]=s}})),a.join("")):t[e]},t.I18N.convertCSV=function(e){var i,a,r,n,s,o,l,h,c,u;if(i=new RegExp("[“”]|[‘’]","g"),a=t.I18N.wordLists,e||(e=t.I18N.csv),e){n=(r=e.split("\n"))[0].split(",");for(var d=0;d<n.length;d++)a[s=n[d]]||(a[s]={});for(var p=1;p<r.length;p++){h=(l=(o=r[p].match(/(".{0,1000}"|[^",]{1,1000})(?=\s{0,100},|\s{0,100}$)|(,(?=,))/g)||[])[0]).charAt(0),c=l.charAt(l.length-1),'"'===h&&'"'===c&&(l=l.substring(1,l.length-1)),i.test(l)&&(l=l.replace(i,'"'));for(var g=1;g<o.length;g++)h=(u=o[g]).charAt(0),c=u.charAt(u.length-1),'"'===h&&'"'===c&&(u=u.substring(1,u.length-1)),a[n[g]][l]=u}}},t.I18N.setLanguage=function(e,i,a,r,n){n||(n=(e.uiContext||{}).topNode||document.body),"pu"==i&&(i="pt"),t.I18N.convertCSV(r),t.I18N.language=i,t.I18N.translateUI(i,n),a||(a=t.I18N.translate),e.translationCallback=a},t.I18N.setLocale=function(e,i,a,r,n){var s,o,l,h=O;if("SC","RIPT","locale-data","/jsonp","und","ef","ined",t.xor(this.reverseColorsByLocale[i],this.reverseColorsByLocale[e.locale])&&this.reverseCandles(e),"undefined"==typeof Intl||!Intl.__addLocaleData)return e.setLocale(i,n),void(a&&a(null));r=void 0===r?"locale-data/jsonp":r,h.u2S(0),s=h.i6w("/",".js",i,r),(o=document.createElement("SCRIPT")).async=!0,o.src=s,(l=document.getElementsByTagName("script")[h.i6w(1,"0",h.u2S(3))]).parentNode.insertBefore(o,l.nextSibling),o.onload=function(){e.setLocale(i,n),a&&a(null)},o.onerror=function(){a&&a("cannot load script")}},t.I18N.createMonthArrays=function(e,i,a){var r,n,s,o,l;e.monthAbv=[],e.monthLetters=[],r=new Date,n=!0,t.I18N.longMonths&&t.I18N.longMonths[a]&&(n=!1);for(var h=0;h<12;h++)if(r.setDate(1),r.setMonth(h),s=i.format(r),n){o="";for(var c=0;c<s.length;c++)(l=s.charAt(c)).charCodeAt(0)<65||(o+=l);e.monthAbv[h]=o,e.monthLetters[h]=o[0]}else e.monthAbv[h]=s,e.monthLetters[h]=s},t.I18N.localize=function(e,i){i=this.langConversionMap[i]||i,this.setLocale(e,i),this.setLanguage(e,i),t.I18N.localized=!0},t.I18N.reverseCandles=function(e){var t,i,a;t=e.styles,i=e.cloneStyle(t.stx_candle_down),a=e.cloneStyle(t.stx_candle_up),t.stx_candle_up=i,O.H5p(),t.stx_candle_down=a},t.I18N.wordLists={en:{}},t.I18N.languages={en:"English"},t.I18N.langConversionMap={},t.I18N.localized=!1},u=e=>{var t,i;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},t.ChartEngine.prototype.manageTouchAndMouse=!0,t.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var e,i,a,r,n,s,o,l=O;l.H5p(),this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(e=this.controls.chartControls||document).querySelector(".stx-zoom-in"),a=e.querySelector(".stx-zoom-out"),r=this.chart.container,n=this,s=function(e,t,i){n.addDomEventListener(r,e,(function(e){if(n.mainSeriesRenderer&&n.mainSeriesRenderer.nonInteractive)return;t(e)}),i),l.s0Y()},t.touchDevice?t.isSurface?("mo","useup",s("mousemove",(function(e){n.msMouseMoveProxy(e)})),s("mouseenter",(function(e){l.H5p(),n.msMouseMoveProxy(e)})),s("mousedown",(function(e){n.msMouseDownProxy(e)})),s("mouseup",(function(e){n.msMouseUpProxy(e)})),s("pointerdown",(function(e){return n.startProxy(e)})),s("pointermove",(function(e){n.moveProxy(e)})),s("pointerenter",(function(e){return n.moveProxy(e)})),s("pointerup",(function(e){return n.endProxy(e)}))):("po","interdown","touc","hst","art",t.isMobile||("mo","useenter","mo","usem","ove",s("mousemove",(function(e){n.iosMouseMoveProxy(e)})),s("mouseenter",(function(e){l.s0Y(),n.iosMouseMoveProxy(e)})),s("mousedown",(function(e){l.H5p(),n.iosMouseDownProxy(e)})),s("mouseup",(function(e){l.s0Y(),n.iosMouseUpProxy(e)}))),s("touchstart",(function(e){n.touchstart(e)}),{passive:!1}),s("touchmove",(function(e){l.H5p(),n.touchmove(e)}),{passive:!1}),s("touchend",(function(e){n.touchend(e)})),s("pointerdown",(function(e){l.H5p(),n.touchPointerType=e.pointerType})),i&&("onM","o","useO","ver",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),a&&("onMo","useOut","onMou","seOver",a.removeAttribute("onMouseOver"),a.removeAttribute("onMouseOut"))):(s("mousemove",(function(e){l.H5p(),n.mousemove(e)})),s("mouseenter",(function(e){l.s0Y(),n.mousemove(e)})),s("mousedown",(function(e){n.mousedown(e)})),s("mouseup",(function(e){l.s0Y(),n.mouseup(e)}))),o=t.wheelEvent,this.captureMouseWheelEvents&&s(o,(function(e){l.s0Y(),n.mouseWheel(e)}),{passive:!1}))},t.ChartEngine.prototype.mousedown=function(e){var i,a,r,n,s,o,l,h,c,u,d,p=O;if(i="d",i+="o",i+="w",i+="n",a="mous",a+="edow",a+="n",!this.runPrepend(a,arguments)){this.grabOverrideClick=!1,r=995170270,n=1505860119,p.s0Y(),s=2;for(var g=1;p.u1R(g.toString(),g.toString().length,23494)!==r;g++){if(~this.displayInitialized)return;if(+this.displayCrosshairs)return;s+=2}if(p.u1R(s.toString(),s.toString().length,99543)!==n){if(!this.displayInitialized)return;if(!this.displayCrosshairs)return}if(!this.repositioningDrawing&&!(this.editingAnnotation||e.button&&e.button>=2))if(o=this.container.getBoundingClientRect(),this.top=o.top,this.left=o.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.clientX>=this.left&&e.clientX<=this.right&&e.clientY>=this.top&&e.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:e.clientX,y:e.clientY,time:this.mouseTimer},i),l=this.currentPanel.chart;for(var m=0;m<this.drawingObjects.length;m++)if((h=this.drawingObjects[m]).highlighted&&!h.permanent){if(this.cloneDrawing)return(c=new(0,t.ChartEngine.drawingTools[h.name])).reconstruct(this,h.serialize()),this.drawingObjects.push(c),this.activateRepositioning(c),void(c.repositioner=h.repositioner);if(u=this.currentVectorParameters.vectorType,!(t.Drawing&&u&&t.Drawing[u]&&(new t.Drawing[u]).dragToDraw))return void this.activateRepositioning(h)}this.mainSeriesRenderer||{};var{baselineHelper:f}=this;if(!f.size||!this.findBaselineHandle(e,!0)){var y,{anchorHandles:v}=this.controls;if(v)for(var b in v){var{handle:x,sd:S,highlighted:C}=v[b];if(C)return d="s",d+="t",d+="x-",d+="grab",this.repositioningAnchorSelector={sd:S},void x.classList.add(d)}if(!(this.drawingClick&&(this.currentPanel.subholder===e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,l.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=e.clientX,this.grabStartY=e.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((y=this,p.s0Y(),function(){p.s0Y(),y.grabbingHand()}),100),this.swipeStart&&this.swipeStart(l),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments)}}}else this.insideChart=!1}},t.ChartEngine.prototype.mousemove=function(e){var i,a;i="mousemov",i+="e",a=e,t.ChartEngine.crosshairX=a.clientX,t.ChartEngine.crosshairY=a.clientY,a.type.toLowerCase().indexOf("enter")>-1?this.positionCrosshairsAtPointer():this.runPrepend(i,arguments)||this.displayInitialized&&""===this.openDialog&&(this.baselineHelper.size&&this.findBaselineHandle(a),O.H5p(),this.grabbingScreen&&1!==a.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(a.clientX,a.clientY),this.runAppend("mousemove",arguments))},t.ChartEngine.prototype.mouseup=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m;if(i="u",i+="p",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline){a="s",a+="tx-g",a+="r",a+="ab";var{handle:f}=this.repositioningBaseline,{mainSeriesRenderer:y={}}=this;return this.repositioningBaseline=null,f.classList.remove(a),y.params&&y.params.baseline&&y.params.type,void this.draw()}if(this.repositioningAnchorSelector){var{sd:v}=this.repositioningAnchorSelector;return t.Studies.repositionAnchor(this,v),this.repositioningAnchorSelector=null,this.controls.anchorHandles[v.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(this,v,this.chart.dataSegment),Object.values(this.controls.anchorHandles||{}).forEach((({handle:e})=>(O.s0Y(),e.classList.remove("stx-grab")))),void this.findHighlights()}if(r=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized){if(n=this.backOutY(e.clientY),s=this.backOutX(e.clientX),o=e.which&&e.which>=2||e.button&&e.button>=2,""!==this.openDialog||o||this.registerPointerEvent({x:e.clientX,y:e.clientY,time:Date.now()},i),l=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(s,n),this.currentPanel=this.whichPanel(n)),h=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),""!==this.openDialog){this.insideChart&&this.container.classList.remove("stx-drag-chart"),c=1484912392,u=498917891,d=2;for(var b=1;O.r57(b.toString(),b.toString().length,93035)!==c;b++)return;if(O.r57(d.toString(),d.toString().length,33996)!==u)return}if(this.grabOverrideClick)return p="stx-d",p+="r",p+="ag-chart",this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove(p),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),!t.ChartEngine.resizingPanel)return o||e.ctrlKey?(g="right",g+="Cl",g+="ick",this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e.stopPropagation(),!1):(this.dispatch(g,{stx:this,panel:h,x:s,y:n}),!0)):void(e.clientX<this.left||e.clientX>this.right||e.clientY<this.top||e.clientY>this.bottom||(m=h&&h.subholder===e.target,l&&(m||this.overYAxis||this.overXAxis)?this.doubleClick(e.button,s,n):(r&&m&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(h,s,n),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:s,cy:n,panel:h})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:h,x:s,y:n})),this.runAppend("mouseup",arguments)));this.releaseHandle()}}},t.ChartEngine.prototype.registerPointerEvent=function(e,t){this.pointerEvents[t].length>1&&this.pointerEvents[t].pop(),O.H5p(),this.pointerEvents[t].unshift(e)},t.ChartEngine.prototype.resetPointerEvent=function(e){var t,i=O;i.H5p(),t=2;for(var a=1;-281121131!==i.u1R(a.toString(),a.toString().length,40702);a++)this.pointerEvents[e].splice(2),i.u2S(58),t+=i.i6w("2",0);-1653332532!==i.u1R(t.toString(),t.toString().length,84298)&&this.pointerEvents[e].splice(0)},t.ChartEngine.prototype.isDoubleClick=function(e){var t,i;t=e?1200:400;var{up:a,down:r}=this.pointerEvents;return this.cancelTouchSingleClick=!1,!(a.length<2||r.length<2)&&((i=r[0].time-a[1].time<this.doubleClickTime&&Math.pow(r[1].x-r[0].x,2)+Math.pow(r[1].y-r[0].y,2)<=t&&Math.pow(a[1].x-a[0].x,2)+Math.pow(a[1].y-a[0].y,2)<=t&&a[1].time-r[1].time<this.longHoldTime&&a[0].time-r[0].time<this.longHoldTime)&&(this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),i)},t.ChartEngine.prototype.doubleClick=function(e,i,a){var r,n,s,o,l;if(r="dou",r+="bleClick",n="doub",n+="leClick",!this.runPrepend(n,arguments)&&!this.editingAnnotation){if(t.ChartEngine.drawingLine){s=-622609978,o=-1409413781,l=2;for(var h=1;O.u1R(h.toString(),h.toString().length,19189)!==s;h++)""!=this.currentVectorParameters.vectorType&&t.ChartEngine.completeDrawing(this),l+=2;return O.u1R(l.toString(),l.toString().length,66273)!==o&&""==this.currentVectorParameters.vectorType&&t.ChartEngine.completeDrawing(this),"continuous"==this.currentVectorParameters.vectorType&&t.ChartEngine.completeDrawing(this),this.undo()}this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch(r,{stx:this,button:e,x:i,y:a}),this.runAppend("doubleClick",arguments))}},t.ChartEngine.prototype.handleMouseOut=function(e){var i,a;if(O.H5p(),!(e=e||window.event).relatedTarget||!t.withinElement(this.chart.container,e.pageX,e.pageY)){if(this.runPrepend("handleMouseOut",arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,i=this.backOutY(e.pageY),a=this.backOutX(e.pageX),this.drawingClick(this.currentPanel,a,i));var{sd:r,tapToAdd:n}=this.repositioningAnchorSelector||{};r&&!n&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[r.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(this,r,this.chart.dataSegment),this.draw()),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend("handleMouseOut",arguments)}},t.ChartEngine.prototype.startLongHoldTimer=function(e){var t,i;t=this,this.cancelLongHold=!1,O.s0Y(),this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),i=function(){t.cancelLongHold||(t.longHoldTookEffect=!0,e&&e(),t.dispatch("longhold",{stx:t,panel:t.currentPanel,x:t.cx,y:t.cy}),t.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(i,this.longHoldTime):0===this.longHoldTime&&i()},t.ChartEngine.prototype.grabHandle=function(e){var i,a;i="gr",i+="ab",i+="Handle",a="s",a+="tx-grab",this.runPrepend("grabHandle",arguments)||e&&(t.ChartEngine.crosshairY=this.resolveY(e.top),O.s0Y(),t.ChartEngine.resizingPanel=e,e.handle.classList.add(a),this.runAppend(i,arguments))},t.ChartEngine.prototype.grabbingHand=function(){O.H5p(),this.allowScroll&&this.grabbingScreen&&(t.touchDevice||this.container.classList.add("stx-drag-chart"))},t.ChartEngine.prototype.releaseHandle=function(){var e;if(e="relea",e+="seHand",e+="le",this.runPrepend(e,arguments))return!0;O.H5p(),t.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),t.ChartEngine.resizingPanel&&t.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),t.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},t.ChartEngine.prototype.findHighlights=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q=O;a=this.preferences[e?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=e;var{cx:Z,cy:K}=this;if(this.anyHighlighted=!1,this.currentPanel){var{chart:J}=this.currentPanel;if(this.activeDrawing&&(i=!0),r=!1,n=null,s=i?{}:{forceShow:!0,type:"drawing"},o={x0:this.tickFromPixel(Z-a,J),x1:this.tickFromPixel(Z+a,J),y0:this.valueFromPixel(K-a,this.currentPanel),y1:this.valueFromPixel(K+a,this.currentPanel),cx0:Z-a,cx1:Z+a,cy0:K-a,cy1:K+a,r:a},this.repositioningDrawing&&o.x1-o.x0<2?(o.x1++,o.x0--):o.x1==o.x0&&(Q.u2S(9),o.x0-=Q.w0n(0,"0.5"),o.x1+=.5),!J.hideDrawings)for(var ee=this.drawingObjects.length-1;ee>=0;ee--)l=this.drawingObjects[ee],this.panels[l.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=l||(h=l.highlighted,(c=l.panelName==this.currentPanel.name)&&(l.repositioner=l.intersected(this.crosshairTick,this.crosshairValue,o)),c=c&&l.repositioner&&!this.overXAxis&&!this.overYAxis,!i&&c?(h?(n=l,this.anyHighlighted&&this.singleDrawingHighlight&&(l.highlighted=!1),l.highlighted&&l.highlighted!=h&&(r=!0)):h!=l.highlight(!0)&&(n||(n=l),this.anyHighlighted&&this.singleDrawingHighlight&&(l.highlighted=!1),r=!0),this.anyHighlighted=!0):h!=l.highlight(!1)&&(r=!0),l.highlighted&&(s.noDelete=l.permanent,s.noEdit=!this.callbackListeners.drawingEdit.length,s.noText=s.noEdit||!l.edit,s.message=t.capitalize(l.name))));for(u in this.layout.studies)(d=this.layout.studies[u]).prev=d.highlight,d.highlight=this.yaxisMatches(d,this.grabStartYAxis);for(u in J.seriesRenderers){(f=J.seriesRenderers[u]).params.highlight=this.yaxisMatches(f,this.grabStartYAxis);for(var te=0;te<f.seriesParams.length;te++)(m=f.seriesParams[te]).prev=m.highlight,m.highlight=f.params.highlight}var{anchorHandles:ie}=this.controls;if(ie)for(var ae in ie)ie[ae].highlighted=!1;if(y=this.markerHelper&&this.markerHelper.visibleCanvasMarkers)for(p=0;p<y.length;p++)g=y[p],this.activeMarker=null,g.prev=y[p].highlight,g.highlight=!1;if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&ie)for(var re in ie)if("sd.","si","g","nalData.reveal",v=ie[re],!1!==t.getFromNS(v,"sd.signalData.reveal")){if(!this.anyHighlighted){var{sd:ne,currentPixel:se}=v;Q.u2S(9),b=Q.w0n(a,se),Q.u2S(1),x=Q.w0n(a,se),S=this.panels[ne.panel];var{top:oe,bottom:le}=S.yAxis;if(t.boxIntersects(b,oe,x,le,Z,K,Z,K)){"an","cho","rHandle",this.anyHighlighted=!0,v.highlighted=!0,r=!0,s={message:ne.name,type:"anchorHandle",noDelete:!0};continue}}!0===v.highlighted&&(v.highlighted=!1,r=!0)}if(!i&&!this.anyHighlighted&&J.dataSegment&&(C=this.barFromPixel(Z))>=0&&C<J.dataSegment.length){if(k=t.convertBoxToPixels(this,this.currentPanel.name,o),T=Number.MAX_VALUE,y)for(p=0;p<y.length;p++)if((D=(g=y[p]).params.box)&&g.params.panelName===this.currentPanel.name){if(t.boxIntersects(k.x0,k.y0,k.x1,k.y1,D.x0,D.y0,D.x1,D.y1)){Q.u2S(92);var he=Q.w0n(14,6,2);Q.u2S(9);var ce=Q.i6w(12,14);Q.k8O(4);var ue=Q.i6w(38,19,17);(_=Math.pow(K-(D.y1+D.y0)/he,2)+Math.pow(Z-(D.x1+D.x0)/ce,ue))<=T&&(T=_,this.activeMarker=g),g.highlight=!0,this.markerHelper.highlighted.push(g)}g.prev!=g.highlight&&(r=!0)}for(u in T=Number.MAX_VALUE,A=null,this.overlays){if(y&&this.markerHelper.highlighted.length)break;if((!(d=this.overlays[u]).signalData||d.signalData.reveal)&&d.panel==this.currentPanel.name&&!1!==d.study.isHighlighted)if("function"!=typeof d.study.isHighlighted){if(J.dataSegment[C])for(var de in d.outputMap)!1!==(M=me.call(this,C,o,de,d.getYAxis(this)))&&M<=T&&(A={o:d,out:de},T=M)}else if(d.study.isHighlighted(this,Z,K)){A={o:d,out:de},T=0;break}}for(u in J.seriesRenderers){if(this.highlightedDataSetField)break;if(P=(F=J.seriesRenderers[u]).params.panel,F!=this.mainSeriesRenderer&&(F.params.highlightable||this.currentVectorParameters.vectorType)&&P==this.currentPanel.name)for(p=0;p<F.seriesParams.length;p++)if("-","-",">",(L=(m=F.seriesParams[p]).field)||F.highLowBars||(L=this.defaultPlotField||"Close"),m.symbol&&m.subField&&(L+="--\x3e"+m.subField),!(E=F.params.yAxis)&&P&&(E=this.panels[P].yAxis),F.params.step&&C>0){if(!F.caches[m.id])continue;if(!(w=F.caches[m.id][C])&&0!==w)continue;if(Q.u2S(9),((I=F.caches[m.id][Q.w0n(1,C)])||0===I)&&K+a>=w&&K-a<=I||K-a<=w&&K+a>=I){A={s:m,fullField:L};break}}else!1!==(N=me.call(this,C,o,L,E,F,m.id))&&N<=T&&(A={s:m,fullField:L},T=N)}A&&((d=A.o)?(d.name!=d.panel&&(this.anyHighlighted=!0),d.highlight=A.out,this.highlightedDataSetField=A.out):(this.anyHighlighted=!0,A.s.highlight=!0,this.highlightedDataSetField=A.fullField))}for(u in V=this.preferences.dragging,this.overlays)(d=this.overlays[u]).highlight&&(this.anyHighlighted=!0,Y=d.inputs.display||d.name,s={message:Y=this.translateIf(Y),noDelete:d.permanent,noEdit:!d.editFunction,noText:!d.textFunction,type:"study"},n=null,(!0===V||V&&V.study)&&(d.undraggable(this)||(H=d)),R=d.getYAxis(this)),d.prev!=d.highlight&&(r=!0);for(u in J.seriesRenderers){B=(z=J.seriesRenderers[u]).params.yAxis?z.params.yAxis.textStyle:null;for(var pe=0;pe<z.seriesParams.length;pe++)m=z.seriesParams[pe],z.params.highlightable&&m.highlight&&("a","u","to",this.anyHighlighted=!0,"auto"==(j=m.color||B)&&(j=this.defaultColor),m.opacity&&1!==m.opacity&&(j=t.hexToRgba(t.colorToHex(j),parseFloat(m.opacity))),s={message:m.display||m.symbol,backgroundColor:j,noDelete:m.permanent,type:"series"},n=null,(!0===V||V&&V.series)&&(H=z,z.params.highlight=!0),R=z.getYAxis(this)),m.prev!=m.highlight&&(r=!0)}for(u in this.plugins)X={},($=this.plugins[u]).findHighlights&&((X=$.findHighlights(this,e,i)).somethingChanged&&(r=!0),X.anyHighlighted&&(this.anyHighlighted=!0,s=X.stickyArgs||{}));for(var ge in W=this.whichPanel(K),U=this.whichYAxis(W,Z),R||(R=U),this.currentBaseline&&(R=this.currentBaseline.getYAxis(this)),R&&(R.highlight||(r=!0),R.highlight=!0),q=[],this.panels)q=q.concat(this.panels[ge].yaxisLHS).concat(this.panels[ge].yaxisRHS);for(u=0;u<q.length;u++)(R!=q[u]||i)&&(q[u].highlight&&(r=!0),q[u].highlight=!1);if((!0===V||V&&V.yaxis)&&U&&!U.noDraw&&(this.anyHighlighted=!0,H=U,s={}),r&&(this.draw(),s.panel=W,this.anyHighlighted&&!this.grabStartYAxis?s.panel=W:s={},this.displaySticky(s),this.clearMeasure(),n&&n.measure()),this.anyHighlighted?this.controls.mSticky&&(s&&s.positioner?s.positioner.call(this,this.controls.mSticky):this.positionSticky(this.controls.mSticky)):this.setMeasure(),H&&W&&!W.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(H.params)for(u in H.params.dependentOf&&((H=J.seriesRenderers[H.params.dependentOf]).params.highlight=!0),J.seriesRenderers)J.seriesRenderers[u].params.dependentOf==H.params.name&&(J.seriesRenderers[u].params.highlight=!0);if(this.highlightedDraggable=H,H.getDependents)for(u in G=H.getDependents(this,!0),this.overlays)d=this.overlays[u],G.indexOf(d)>-1&&(d.highlight=!0)}this.container.classList.add("stx-draggable")}else this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function me(e,i,a,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,w,k,T,D,_,A,M,F;function P(e){var t,i;if(!e)return null;if((t=e[u])&&(t[d]||0===t[d])){-1778159416,547286442,i=2;for(var a=1;-1778159416!==Q.u1R(a.toString(),a.toString().length,70455);a++)t=t[d],i+=2;547286442!==Q.u1R(i.toString(),i.toString().length,64853)&&(t=t[d]),t=t[d]}return n&&n.getBasis&&(t+=n.getBasis(e,u,d)),l.transformFunc&&r==l.yAxis?e.transform&&u in e.transform?((t=e.transform[u])&&(t[d]||0===t[d])&&(t=t[d]),t):(Q.s0Y(),l.transformFunc(o,l,t)):t}if(l=(o=this).chart,h=o.currentPanel,r||(r=h.yAxis),c=a.split("--\x3e"),u=c[0],(d=c[1])||(d="Close"),p=l.dataSegment[C],b=null,x=null,S=null,w=new Array(3),k=n&&n.caches[s],p&&k){for(f=k[C],b=p.tick,(f||0===f)&&(w[0]=1),T=C-1;T>=0;T--)if(k[T]||0===k[T]){y=k[T],Q.u2S(91),x=Q.i6w(b,T,C),w[1]=1;break}for(T=C+1;T<l.dataSegment.length;T++)if(k[T]||0===k[T]){v=k[T],Q.k8O(91),S=Q.i6w(b,T,C),Q.k8O(36),w[Q.w0n("2",64)]=1;break}}if(null===x&&(g=o.getPreviousBar.call(o,l,a,C))&&(x=g.tick,y=P(g)),null===S&&(m=o.getNextBar.call(o,l,a,C))&&(S=m.tick,v=P(m)),null===x&&null===S)return!1;if(k||(f=P(p),y=P(g),v=P(m),b=p.tick,g&&(x=g.tick),m&&(S=m.tick)),y||0===y||(y=0,x=0),!v&&0!==v)if(f||0===f?(v=f,Q.u2S(36),w[Q.w0n("2",0)]=w[0]):(v=y,w[2]=w[1]),s&&l.series[s].parameters.extendToEndOfDataSet){Q.u2S(20);var L=Q.w0n(5,6,29);S=l.dataSet.length-L}else S=x;return f||0===f||(f=v,b=S,w[0]=w[2],0===y&&0===x&&(y=f,x=b,w[1]=w[0])),D=o.pixelFromTransformedValue.bind(o),f=(_=o.valueFromPixel.bind(o))(w[0]?f:D(f,h,r),h),Q.H5p(),y=_(w[1]?y:D(y,h,r),h),v=_(w[2]?v:D(v,h,r),h),A=t.convertBoxToPixels(o,h.name,i),M=t.convertBoxToPixels(o,h.name,{x0:x,y0:y,x1:b,y1:f}),F=t.convertBoxToPixels(o,h.name,{x0:b,y0:f,x1:S,y1:v}),!(!t.boxIntersects(A.x0,A.y0,A.x1,A.y1,M.x0,M.y0,M.x1,M.y1,"segment")&&!t.boxIntersects(A.x0,A.y0,A.x1,A.y1,F.x0,F.y0,F.x1,F.y1,"segment"))&&Math.min(Math.pow(K-(M.y1+M.y0)/2,2)+Math.pow(Z-(M.x1+M.x0)/2,2),Math.pow(K-(F.y1+F.y0)/2,2)+Math.pow(Z-(F.x1+F.x0)/2,2))}},t.ChartEngine.prototype.rightClickHighlighted=function(){var e;O.s0Y(),e="righ",e+="tClickHighlighted",this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),this.runAppend(e,arguments))},t.ChartEngine.prototype.deleteHighlighted=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m;if(!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),(r=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var f=this.drawingObjects.length-1;f>=0;f--)(n=this.drawingObjects[f]).highlighted&&(e?this.rightClickDrawing(n,i,a):n.permanent||(n.abort()||(s=this.exportDrawings(),this.drawingObjects.splice(f,1),this.undoStamp(s,this.exportDrawings())),this.changeOccurred("vector")));if(r||!this.bypassRightClick.study)for(var y in this.overlays)((o=this.overlays[y]).overlay||o.underlay)&&o.highlight&&!o.permanent&&(e||i?this.rightClickOverlay(y,i):this.removeOverlay(y));if((l=this.currentPanel&&this.currentPanel.chart)&&(r||!this.bypassRightClick.series))for(var v in l.seriesRenderers)if((h=l.seriesRenderers[v]).params.highlightable){u=(c=this.panels[h.params.panel])&&c.yAxis.name;for(var b=h.seriesParams.length-1;b>=0;b--)d=h.seriesParams[b],!h.params.highlight&&!d.highlight||d.permanent||(h.removeSeries(d.id),h.seriesParams.length<1&&(this.removeSeriesRenderer(h),h.params.name==u?this.electNewPanelOwner(h.params.panel):(this.checkForEmptyPanel(h.params.panel),(p=this.getYAxisByName(c,h.params.name))&&(p.name=p.studies[0]||p.renderers[1]))))}this.draw(),this.resizeChart(),this.clearMeasure(),(g=this.controls.mSticky)&&(m="n",m+="one",g.style.display=m,g.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},t.ChartEngine.prototype.displayDragOK=function(e){var t,i,a,r,n,s,o,l,h,c,u,d=O;function p(e){var i,a;d.H5p(),i=t.translateIf(e.querySelector(".field").getAttribute("text")),(a=t.whichYAxis(t.whichPanel(t.cy),t.cx,t.cy))&&"all"==a.dropzone&&(i+="--\x3e"+t.translateIf(a.name)),e.querySelector(".field").innerHTML=i}if(t=this,i=this.controls.dragOk){if(e||this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights(this.highlightViaTap),r=(a=this.highlightedDraggable)&&a.undraggable&&a.undraggable(this),n=this.cx,s=this.cy,!e){if(a&&!r&&this.longHoldTookEffect&&!this.cancelLongHold)"i","nline-","block",o=a.inputs&&a.inputs.display||a.params&&(a.params.display||a.params.name)||a.name,i.querySelector(".field").setAttribute("text",o),p.call(this,i),i.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var g in i.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("t","o","p","righ","t",(l=this.panels[g].subholder.classList).remove("dropzone"),l.remove("all"),l.remove("left"),l.remove("right"),l.remove("top"),l.remove("bottom"),h=0;h<this.panels[g].yaxisLHS.length;h++)this.panels[g].yaxisLHS[h].dropzone=null;for(h=0;h<this.panels[g].yaxisRHS.length;h++)this.panels[g].yaxisRHS[h].dropzone=null}this.draw()}a&&("p","x","p","x",c=s+i.offsetHeight,u=Math.max(0,n-i.offsetWidth),d.k8O(1),i.style.top=d.i6w("px",c),d.u2S(1),i.style.left=d.i6w("px",u),p.call(this,i))}},t.ChartEngine.prototype.displayDrawOK=function(){var e,i,a,r,n=O;(e=this.controls.drawOk)&&t.Drawing&&((i=t.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.isAllowed(this,this.highlightedDataSetField)?("p","x",e.style.display="inline-block",a=this.cy+e.offsetHeight,r=this.cx-e.offsetWidth,n.k8O(1),e.style.top=n.w0n("px",a),n.k8O(1),e.style.left=n.i6w("px",r),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):e.style.display="none")},t.ChartEngine.prototype.mouseWheel=function(e){var i,a,r,n,s,o,l,h,c,u,d=O;if(i="MozMousePi",i+="xelScro",i+="ll",a="undefin",a+="ed",r="ve",r+="rt",r+="i",r+="cal",!this.runPrepend("mouseWheel",arguments)&&(e.preventDefault&&e.preventDefault(),""===this.openDialog&&(n=e.deltaX,s=e.deltaY,Math.abs(s)>Math.abs(n)?(d.u2S(2),n=d.i6w(0,"0")):s=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(n)||0!==Math.abs(s)))){if(e.shiftKey&&s&&(n=s,s=0),this.allowSideswipe&&0!==n)return this.lastMove="horizontal",l=n,this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=t.ChartEngine.crosshairX,this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mouseWheelAcceleration&&(l*=o=Math.max(Math.pow(Math.abs(l),.3),1)),this.mousemoveinner(t.ChartEngine.crosshairX-l,t.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove=r,this.allowZoom&&(!this.activeDrawing||this.allowDrawingZoom)&&this.displayInitialized){if(!s)if("mousewheel"==t.wheelEvent){d.u2S(93);var p=d.w0n(7,11,49,12);if(s=p/40*e.wheelDelta,e.wheelDeltaX){d.k8O(19);var g=d.i6w(15,1,17);n=-1/("40"*g)*e.wheelDeltaX}}else s=e.detail;if(typeof e.deltaMode==a&&(e.deltaMode=e.type==i?0:1),h=-s,1==e.deltaMode&&(h*=33),c=null,u=null,this.mouseWheelAcceleration&&(o=Math.max(Math.pow(Math.abs(h),.3),1),c=Math.max(Number.MIN_VALUE,1-.1*o),d.k8O(10),u=d.i6w(c,1)),this.zoomInitiatedByMouseWheel=!0,h>0?this.reverseMouseWheel?this.zoomOut(null,u):this.zoomIn(null,c):h<0&&(this.reverseMouseWheel?this.zoomIn(null,c):this.zoomOut(null,u)),!this.runAppend("mouseWheel",arguments))return!1}}},t.ChartEngine.handleContextMenu=function(e){var i,a;i=t.ChartEngine.registeredContainers;for(var r=0;r<i.length;r++)if(e.target.ownerDocument===i[r].ownerDocument&&(a=i[r].stx)&&a.anyHighlighted)return e.preventDefault&&e.preventDefault(),!1},t.ChartEngine.registerGlobalEvent("contextmenu",t.ChartEngine.handleContextMenu),t.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;"></span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;"></span>',mSticky:'\n\t\t<div class="stx_sticky">\n\t\t\t<span class="mStickyInterior"></span>\n\t\t\t<span class="mStickyRightClick">\n\t\t\t\t<span class="overlayText stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="overlayEdit stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="overlayTrashCan stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="mouseDeleteInstructions">\n\t\t\t\t\t<span>(</span>\n\t\t\t\t\t<span class="mouseDeleteText">right-click to delete</span>\n\t\t\t\t\t<span class="mouseManageText">right-click to manage</span>\n\t\t\t\t\t<span>)</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<span class="stickyLongPressText">(long-press to drag)</span>\n\t\t\t<span class="customInstructions">\n\t\t\t\t<span>(</span>\n\t\t\t\t<span class="dragAnchorText" type="anchorHandle">\n\t\t\t\t\tdrag to change anchor time\n\t\t\t\t</span>\n\t\t\t\t<span>)</span>\n\t\t\t</span>\n\t\t</div>\n\t',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},t.ChartEngine.prototype.registerChartControl=function(e,i,a){var r,n,s,o=O;if(".","stx-zoom-",o.H5p(),"i","n",(r=this.controls)&&r.chartControls&&!r.chartControls.querySelector("."+e))return n=null,(s=r.chartControls.querySelector(".stx-zoom-in"))?("</spa","n>",n=document.createElement("span"),o.k8O(15),n.innerHTML=o.w0n("</span>",'<span class="stx-tooltip">',i),o.k8O(1),n.className=o.i6w(e,"stx-chart-control-button "),s.parentNode.appendChild(n),a&&t.safeClickTouch(n,a),t.touchDevice||this.makeModal(n),n):void 0},t.ChartEngine.prototype.zoomOut=function(e,t){var i,a,r,n,s,o=O;if(i="zoomO",i+="ut",!this.runPrepend(i,arguments))for(var l in this.preferences.zoomOutSpeed?t=this.preferences.zoomOutSpeed:t||(o.u2S(10),t=o.i6w(.7,1)),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,o.H5p(),a=this,this.charts)n=(r=this.charts[l]).width*t/this.layout.candleWidth,!1===r.allowScrollFuture&&!1===r.allowScrollPast&&n>r.dataSet.length&&(n=r.dataSet.length),s=this.chart.width/n,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(h(r),this.layout.candleWidth,s);function h(e){return o.H5p(),function(t){var i,r;if(a.zoomSet(t,e),a.animations.zoom.hasCompleted){if(i="la",i+="yo",i+="ut",r="z",r+="oomOut",a.runAppend(r,arguments))return;a.changeOccurred(i),a.continuousZoom&&a.continuousZoom.execute(!0)}}}},t.ChartEngine.prototype.zoomIn=function(e,t){var i,a,r,n,s=O;if(!this.runPrepend("zoomIn",arguments)){for(var o in this.preferences.zoomInSpeed?t=this.preferences.zoomInSpeed:t||(t=.7),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts){if(r=(a=this.charts[o]).width*t/this.layout.candleWidth,a.maxTicks-r<1){s.k8O(94);var l=s.i6w(3,2,14,7,8);r=a.maxTicks-l}r<this.minimumZoomTicks&&(r=this.minimumZoomTicks),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(h(a),this.layout.candleWidth,n)}s.H5p()}function h(e){return s.H5p(),function(t){if(i.zoomSet(t,e),i.animations.zoom.hasCompleted){if(i.runAppend("zoomIn",arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute()}}}},t.ChartEngine.prototype.createCrosshairs=function(){var e,t,i;e="crea",e+="teCrosshairs",this.runPrepend("createCrosshairs",arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(t=this.controls.crossX,i=this.controls.crossY,t&&(t.onmousedown||(t.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),i&&(i.onmousedown||(i.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),this.runAppend(e,arguments))},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){O.s0Y(),i||console.error("interaction feature requires activating movement feature."),i=!0}},d=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Marker||(t.ChartEngine.helpersToRegister.push((function(e){e.markerHelper={chartMap:{},classMap:{},domMarkers:[],visibleCanvasMarkers:[],highlighted:[],placementMap:{}}})),t.ChartEngine.prototype.addToHolder=function(e){var i,a,r,n;(i=this.panels[e.params.panelName])&&(a=e.params,r=e.node,n=e.stxNodeCreator,O.s0Y(),n&&n.prepareForHolder&&(r=n.prepareForHolder(e)),a.chartContainer?this.container.appendChild(e.node):a.includeAxis?i.holder.appendChild(e.node):i.subholder.appendChild(r),e.chart=i.chart,n&&n.addToHolder&&n.addToHolder(e),n&&n.expand&&t.Marker.initializeScrollBehavior(n))},t.ChartEngine.prototype.getMarkerArray=function(e,t){var i,a;for(var r in O.H5p(),i=[],this.markers)for(var n=0;n<this.markers[r].length;n++)"l","ab","e","l",a=this.markers[r][n],"panelName"==e?a.params.panelName==t&&i.push(a):"label"==e?r==t&&i.push(a):"all"==e&&i.push(a);return i},t.ChartEngine.prototype.removeFromHolder=function(e){var t,i,a,r,n,s;if((t=this.panels[e.params.panelName])&&(e.node.parentNode==t.holder?t.holder.removeChild(e.node):e.node.parentNode==t.subholder?t.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),i=this.markers[e.params.label]){for(a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1);break}if(r=this.markerHelper.chartMap[e.chart.name])for(a=0;a<r.markers.length;a++)if(r.markers[a]===e){r.markers.splice(a,1);break}if((n=this.markerHelper.classMap[e.className])&&(s=n[e.params.panelName]))for(a=0;a<s.length;a++)if(s[a]===e){O.k8O(58),s.splice(a,O.i6w("1",0));break}}},t.ChartEngine.prototype.moveMarkers=function(e,t){var i,a;i=this.getMarkerArray("panelName",e);for(var r=0;r<i.length;r++)i[r].params.panelName=t;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][e])&&(this.markerHelper.classMap[n][t]=a,delete this.markerHelper.classMap[n][e])},t.ChartEngine.prototype.establishMarkerTicks=function(){var e,t;for(var i in e=this.markerHelper.chartMap){t=e[i];for(var a=0;a<t.markers.length;a++)this.setMarkerTick(t.markers[a])}},t.ChartEngine.prototype.futureTickIfDisplayed=function(e){var t,i,a,r,n,s,o,l,h,c=O;if(!((t=e.chart).dataSet.length<1||(i=t.xaxis[t.xaxis.length-1].DT,i=new Date(i.getTime()-6e4*this.timeZoneOffset),e.params.x>i))){a=t.maxTicks-t.dataSegment.length,r=t.dataSet.length+a,o=new Date(+t.dataSet[t.dataSet.length-1].DT),l=this.standardMarketIterator(o,null,t),h=e.params.x.getTime();for(var u=t.dataSet.length;u<r;u++){if(n=o.getTime(),(s=(o=l.next()).getTime())==h)return void(e.tick=u);if(s>h&&n<h)return c.k8O(9),void(e.tick=Math.max(c.i6w(1,u),c.w0n("0",0,c.k8O(58))))}}},t.ChartEngine.prototype.setMarkerTick=function(e){var t,i,a,r;if("ma","st","e","r",t=e.chart,O.s0Y(),"master"==e.params.xPositioner&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if("tick"==e.params.xPositioner&&e.params.x)e.tick=e.params.x;else if("date"==e.params.xPositioner&&e.params.x){r=e.params.x.getTime();for(var n=0;n<t.dataSet.length;n++){if(i=a=t.dataSet[n].DT.getTime(),n>0&&(i=t.dataSet[n-1].DT.getTime()),a==r)return void(e.tick=n);if(a>r&&i<r)return O.k8O(9),void(e.tick=Math.max(O.i6w(1,n),0));if(r<a)return void(e.tick=null)}if(t.dataSet.length<1)return;new Date(+t.dataSet[n-1].DT).getTime()<r&&(e.params.future=!0),e.tick=null}},t.ChartEngine.prototype.positionMarkers=function(){var e,t,i,a,r,n,s;if(O.H5p(),e=this,t=this.chart,e.markerHelper&&(this.markerHelper.placementMap={},this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(l,this.markerDelay)):l(),i=this.getFirstLastDataRecord(t.dataSegment,"tick"),a=this.getFirstLastDataRecord(t.dataSegment,"tick",!0),i&&a)){r=this.getMarkerArray("all"),this.markerHelper.visibleCanvasMarkers=[];for(var o=0;o<r.length;o++)s=(n=r[o]).stxNodeCreator,i.tick<=n.tick&&n.tick<=a.tick?(this.markerHelper.visibleCanvasMarkers.push(n),s&&s.drawMarker&&s.drawMarker(n)):(n.highlight=!1,n.params.box=null,n.attached&&s&&s.expand&&("hidd","e","n",s.expand.style.visibility="hidden"))}function l(){var t,i,a,r,n;if(t="p",t+="os",t+="itionMa",t+="rkers",!e.runPrepend("positionMarkers",arguments)){for(var s in e.markerTimeout=null,e.markerHelper.classMap)for(var o in e.markerHelper.classMap[s])i=e.markerHelper.classMap[s][o],a=e.panels[o],i.length&&((r={stx:e,arr:i,panel:a}).firstTick=a.chart.dataSet.length-a.chart.scroll,r.lastTick=r.firstTick+a.chart.dataSegment.length,(n=i[0].constructor.placementFunction)?n(r):e.defaultMarkerPlacement(r));e.runAppend(t,arguments)}}},t.Marker=t.Marker||function(e){var i,a,r,n,s;if((i=this instanceof t.Marker?this:Object.create(t.Marker.prototype)).params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},t.extend(i.params,e),i.params.node||(i.params.node=document.createElement("DIV")),a=i.params.stx)return i.className||(i.className="CIQ.Marker"),t.derivedFrom(i.params.node,t.Marker.NodeCreator)?(i.stxNodeCreator=i.params.node,i.node=i.stxNodeCreator.node):i.node=i.params.node,r=i.params.label,a.markers[r]||(a.markers[r]=[]),a.markers[r].push(i),n=a.panels[i.params.panelName],i.chart=n.chart,a.markerHelper.chartMap[i.chart.name]||(a.markerHelper.chartMap[i.chart.name]={markers:[]}),a.markerHelper.chartMap[i.chart.name].markers.push(i),(s=a.markerHelper.classMap[i.className])||(s=a.markerHelper.classMap[i.className]={}),s[i.params.panelName]||(s[i.params.panelName]=[]),s[i.params.panelName].push(i),i.stxNodeCreator&&i.stxNodeCreator.deferAttach||a.addToHolder(i),a.setMarkerTick(i),i.stxNodeCreator&&i.stxNodeCreator.drawMarker&&i.stxNodeCreator.drawMarker(i),i;console.log("Marker created without specifying stx")},t.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this),this.stxNodeCreator&&this.stxNodeCreator.remove&&this.stxNodeCreator.remove(this)},t.Marker.prototype.click=function(e){var t;O.H5p(),"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var{cx:i,cy:a,panel:r}=e;this.params.stx&&(t=this.params.node).click&&t.click(i,a,this,r)},t.Marker.prototype.doubleClick=function({cx:e,cy:t,panel:i}){return O.s0Y(),!1},t.Marker.prototype.render=function(){var e,t;O.s0Y(),e=[this],t={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(t)},t.Marker.removeByLabel=function(e,t){var i,a;i=e.getMarkerArray("label",t);for(var r=0;r<i.length;r++)a=i[r],e.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);e.draw()},t.Marker.positionContentVerticalAndHorizontal=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g=O;if(a=e.querySelector(".stx-marker-expand"),i||a&&a.isConnected&&t.trulyVisible(a)){r=a.offsetHeight,(n=a.style).left=n.right="",n.bottom=n.top="",o=(s=getComputedStyle(a)).left,l=s.bottom,g.u2S(9);var m=g.i6w(110,120);g.s0Y(),h=e.offsetLeft+parseInt(o,m),c=parseInt(l,10),u=e.offsetTop-(c+r-e.offsetHeight),d=e.parentNode.offsetWidth,p=e.parentNode.offsetHeight,h+a.offsetWidth>d&&(n.right=o,n.left="auto"),e.offsetTop<=p?u>p-r&&("a","u","to","p","x",n.top=p-e.offsetTop-r+"px",n.bottom="auto"):(g.u2S(1),n.top=g.w0n("px",p)),e.offsetTop+e.offsetHeight>=0?u<0&&("aut","o",n.top=-e.offsetTop+"px",n.bottom="auto"):("0","p","x",n.bottom="0px")}},t.Marker.initializeScrollBehavior=function(e){var{expand:i}=e;if(i&&!i.scrollInitialized){i.querySelector(".marker_content")||(i.innerHTML='<div class="marker_content">'+i.innerHTML+"</div>"),i.addEventListener(t.wheelEvent,(e=>(O.H5p(),e.stopPropagation())),{passive:!1}),i.addEventListener("touchmove",(e=>e.stopPropagation()),{passive:!1});var{scrollbarStyling:a}=t.UI||{};a?a.refresh(i):i.style.overflowY="scroll",i.scrollInitialized=!0}},t.ChartEngine.prototype.getBarBounds=function(e,t){var i,a,r,n,s;return"p","an","d",O.H5p(),"f",this.layout.chartType,i=this.layout.aggregationType,a=t||"pandf"!=i?{high:e.High,low:e.Low}:{high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)},e.markerHigh&&(a.high=e.markerHigh),e.markerLow&&(a.low=e.markerLow),void 0===e.Open&&(r=e.Close),void 0===e.High&&(n=Math.max(e.Open||r,e.Close)),void 0===e.Low&&(s=Math.min(e.Open||r,e.Close)),a.high||0===a.high||(a.high=n),a.low||0===a.low||(a.low=s),a},t.ChartEngine.prototype.defaultMarkerPlacement=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P=O;a=(i=e.panel).chart,n=(r=e.stx).chart.highLowBars,(s=a.defaultPlotField)&&!n||(s="Close");for(var L=0;L<e.arr.length;L++)if(l=(o=e.arr[L]).params,!o.params.box){if(h=o.node,o.clientWidth||(o.clientWidth=h.clientWidth),o.clientHeight||(o.clientHeight=h.clientHeight),c=null,u=l.xPositioner,d=l.yPositioner,p=l.yAxis||i.yAxis,g=l.field,m=o.tick,f=a.dataSet,y=o.clientWidth,"none"!=u){if("bar"==u&&l.x){l.x<a.xaxis.length&&(v=a.xaxis[l.x])&&(c=v.data),P.k8O(53);var E=P.w0n(13,8,112,10,0);P.u2S(50);var I=P.w0n(14,13);h.style.left=Math.round(r.pixelFromBar(l.x,a)-y/E)+I+"px"}else{if(!m&&0!==m){if(!(l.future&&a.scroll<a.maxTicks)){h.style.left="-1000px";continue}if(r.futureTickIfDisplayed(o),!(m=o.tick)&&0!==m){"-10","00px",h.style.left="-1000px";continue}}if(m<f.length&&(c=f[m]),o.leftpx=Math.round(r.pixelFromTick(m,a)-a.left-y/2),o.rightEdge=o.leftpx+y,h.style.left=o.leftpx+"px",m<e.firstTick&&o.rightEdge<a.left-50)continue}if(!c){P.k8O(23);var N=P.i6w(10,9,0);c=f[f.length-N]}}else if(d.indexOf("candle")>-1&&(b=getComputedStyle(h).left)&&(x=r.barFromPixel(parseInt(b,10),a))>=0&&!(c=a.xaxis[x].data)){P.u2S(14);var H=P.i6w(9,6,6,9);c=f[f.length-H]}if(h.style.top="auto",S=l.y,C=o.clientHeight,k=0,"none"!=d){"botto","m","to","p",P.k8O(50);var V=P.i6w(5,6);T=d.indexOf("_lane")>V,D=r.markerHelper.placementMap,P.k8O(95);var R=P.i6w(9433,1,1,75447,9);P.u2S(96);var Y=P.w0n(566,11,8,40748);P.u2S(16);P.i6w(12,2,4960);P.k8O(97);var z=P.i6w(9,20,4,17);P.u2S(98);var B=P.w0n(6,10,20,4944);P.u2S(9);var j=P.i6w(11494,13136);_=d+(304.89==R?Y:"3674"*z<=B?"|":j>=351.29?"O":8610)+i.name,T&&void 0===D[_]&&(D[_]=2),A=_+"-"+(T?o.params.label:h.style.left),M=l.chartContainer?r.height:i.yAxis.bottom,F=0,void 0===D[A]&&(D[A]=T?D[_]:0,P.k8O(1),D[_]+=P.w0n(2,C)),k=D[A],T||(D[A]+=C),c&&g&&(c=c[g]),"number"==typeof c&&((c={Close:c})[s]=c.Close,n=!1),"value"!=d||!S&&0!==S?"below_candle"!=d&&"under_candle"!=d||!c?"on_candle"==d&&c?("p","x",w=c[s],n&&(w=((w=r.getBarBounds(c,!!g)).high+w.low)/2),F=Math.round(M-r.pixelFromPrice(w,i,p)-C/2-k)+"px"):"top"==d||"top_lane"==d?F=Math.round(M-C-k-i.top)+"px":"bottom"==d||"bottom_lane"==d?F=Math.round(k)+"px":c&&("p","x","l","o","w",w=c[s],n&&(w=r.getBarBounds(c,!!g)[p.flipped?"low":"high"]),F=Math.round(M-r.pixelFromPrice(w,i,p)+k)+"px"):(w=c[s],n&&(w=r.getBarBounds(c,!!g)[p.flipped?"high":"low"]),F=Math.round(M-r.pixelFromPrice(w,i,p)-C-k)+"px"):F=Math.round(M-r.pixelFromPrice(S,i,p)-C/2)+"px",h.style.bottom!=F&&(h.style.bottom=F)}t.Marker.positionContentVerticalAndHorizontal(h)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return this.node},t.Marker.Simple=function(e){var i,a,r,n;(i=this.node=document.createElement("div")).className="stx-marker",i.classList.add(e.type),e.category&&i.classList.add(e.category),O.H5p(),a=t.newChild(i,"div","stx-visual"),t.newChild(i,"div","stx-stem"),"callout"==e.type?("h","4",n=t.newChild(a,"div","stx-marker-content"),t.newChild(n,"h4",null,e.headline),r=t.newChild(n,"div","stx-marker-expand"),t.newChild(r,"p",null,e.story)):(r=t.newChild(i,"div","stx-marker-expand"),t.newChild(r,"h4",null,e.headline),t.newChild(r,"p",null,e.story),t.safeClickTouch(r,(function(e){O.H5p(),i.classList.toggle("highlight")}))),t.safeClickTouch(a,(function(e){i.classList.toggle("highlight"),t.Marker.positionContentVerticalAndHorizontal(i,!0)})),this.nodeType="Simple",this.expand=r},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1))},p=e=>{var t,i,a,r,n,s,o,l=O;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,r=24*(a=36e5),n=t.Market,t.Market=function(e){var a,r;if("undefin","ed",this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==e&&e&&!t.isEmpty(e)){if("undefin","e","d",e.market_definition&&(e=e.market_definition),e.rules&&(this.rules=e.rules),e.market_tz&&(this.market_tz=e.market_tz),e.convertOnDaily&&(this.convertOnDaily=e.convertOnDaily),e.hour_aligned,this.hour_aligned=e.hour_aligned,void 0!==e.beginningDayOfWeek&&(this.beginningDayOfWeek=e.beginningDayOfWeek),void 0!==e.minimum_session_length){191025566,-958213822,a=2;for(var n=1;191025566!==l.u1R(n.toString(),n.toString().length,81975);n++)this.minimumSessionLength=e.minimum_session_length,a+=2;-958213822!==l.u1R(a.toString(),a.toString().length,67011)&&(this.minimumSessionLength=e.minimum_session_length)}if(void 0!==e.enabled_by_default&&e.enabled_by_default instanceof Array&&(this.enabled_by_default=e.enabled_by_default),this.market_def=e,void 0===this.market_def.name){1511857141,1128060204,r=2;for(var s=1;1511857141!==l.u1R(s.toString(),s.toString().length,4998);s++)"no market na","me specifie","d",this.market_def.name="no market name specified",r+=2;1128060204!==l.r57(r.toString(),r.toString().length,8390)&&(this.market_def.name="")}t.Market._createTimeSegments(this),this.getSessionNames()}else this.hour_aligned=!0},t.Market.Symbology=function(){},t.Market.Symbology.isForeignSymbol=function(e){return!1},t.Market.Symbology.isFuturesSymbol=function(e){return l.H5p(),!1},t.Market.Symbology.isRateSymbol=function(e){return!1},t.Market.Symbology.isForexSymbol=function(e){return l.H5p(),!1},t.Market.Symbology.isForexMetal=function(e,t){return!1},t.Market.Symbology.isForexCrypto=function(e){return!1},t.Market.Symbology.isForexFuturesSymbol=function(e){return!!t.Market.Symbology.isForexSymbol(e)||!!t.Market.Symbology.isFuturesSymbol(e)},t.Market.Symbology.factory=function(e){return null},t.Market.Symbology.encodeTermStructureInstrumentSymbol=function(e,t){l.s0Y(),console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&t.extend(t.Market,n),t.Market.prototype.sessions=null,t.Market.prototype.beginningDayOfWeek=0,t.Market.prototype.minimumSessionLength=30,t.Market.prototype.tradingDays=function(){var e;if("_tradingD","ays","_tradingDays"in this)return this._tradingDays;if(e=[],l.H5p(),this.rules)for(var t of this.rules)t.dayofweek>=0&&e.push(t.dayofweek);else e=[0,1,2,3,4,5,6];return this._tradingDays=[...new Set(e)],this._tradingDays.sort(),this._tradingDays},t.Market.prototype.getSessionNames=function(){var e,t;return this.rules?this.sessions||(e=[],t=[],this.rules.map((function(i){i.name&&-1===e.indexOf(i.name)&&(e.push(i.name),t.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=t):this.sessions=[],l.s0Y(),this.sessions.slice()},t.Market.prototype._find_next_segment=function(e,t){var i,a,r,n;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null},t.Market.prototype._find_prev_segment=function(e,t){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(i=new Date(i-6e4),r=this._wasOpenIntraDay(i)):(t&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!t&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),l.s0Y(),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?t?a.next():i:this.zseg_match.adjacent_child?i:t?a.next():i):a.previous()):null},t.Market.prototype.disableSession=function(e,t){var i,a;if("undefi","ned",i=!1,void 0!==t&&t&&(i=!0),e){for(var r=0;r<this.normalHours.length;r++)delete this.normalHours[r]._refid,this.normalHours[r].name===e&&(this.normalHours[r].enabled=i);for(r=0;r<this.extraHours.length;r++)delete this.extraHours[r]._refid,this.extraHours[r].name===e&&(this.extraHours[r].enabled=i)}a=2;for(var n=1;32740173!==l.r57(n.toString(),n.toString().length,60278);n++)this._zseg_matches&&this._zseg_matches.clear(),a+=2;-68919748!==l.u1R(a.toString(),a.toString().length,87951)&&this._zseg_matches&&this._zseg_matches.clear(),this._zseg_matches&&this._zseg_matches.clear()},t.Market.prototype.enableSession=function(e){this.disableSession(e,"enable_instead")},t.Market.prototype.enableAllAvailableSessions=function(){var e;e=this.getSessionNames(),l.H5p();for(var t=0;t<e.length;t++)this.enableSession(e[t].name)},t.Market.prototype.getClose=function(e,t,i,a){var r,n,s;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,!e){-544805882,-1613798006,n=2;for(var o=1;-544805882!==l.u1R(o.toString(),o.toString().length,19305);o++)r=new Date,i=null,n+=2;-1613798006!==l.u1R(n.toString(),n.toString().length,34003)&&(r=new Date,i=1)}if(r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===t)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(s=this.zseg_match;s.child_;)s=s.child_;for(;!s.enabled;)s=s.parent_;return r.setHours(s.close_parts.hours,s.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNextClose=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),l.H5p(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},t.Market.prototype.getNextOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),l.s0Y(),a=this._convertToMarketTZ(a,t),a=this._find_next_segment(a),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getOpen=function(e,t,i,a){var r,n,s;if("u","ndefine","d",!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==t){r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),2118499790,183156951,n=2;for(var o=1;2118499790!==l.u1R(o.toString(),o.toString().length,45564);o++)r=this._convertFromMarketTZ(r,a),n+=2;return 183156951!==l.r57(n.toString(),n.toString().length,19167)&&(r=this._convertFromMarketTZ(r,a)),r=this._convertFromMarketTZ(r,a)}}else if(this._wasOpenDaily(r)){for(s=this.zseg_match;s.parent_;)s=s.parent_;for(;!s.enabled;)s=s.child_;return r.setHours(s.open_parts.hours,s.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNormalOpen=function(){var{market_def:e,rules:t}=this;return e&&t?e.normal_daily_open?e.normal_daily_open:"FOREX"===e.name?"17:00":t.find((({name:e})=>!e||""===e)).open:"00:00"},t.Market.prototype.getNormalClose=function(){var{market_def:e,rules:t}=this;return e&&t?e.normal_daily_close?e.normal_daily_close:"FOREX"===e.name?"17:00":t.filter((({dayofweek:e,name:t})=>e&&(!t||""===t))).pop().close:"24:00"},t.Market.prototype.getPreviousClose=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,l.H5p(),e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getPreviousOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getSession=function(e,t){return e=this._convertToMarketTZ(e,t),this._wasOpenIntraDay(e)&&this.zseg_match?this.zseg_match.name:null},t.Market.prototype.marketZoneNow=function(){return l.H5p(),this._convertToMarketTZ(new Date)},t.Market.prototype.isHourAligned=function(){return this.hour_aligned},t.Market.prototype.isOpen=function(){var e,t;e=2;for(var i=1;680242121!==l.u1R(i.toString(),i.toString().length,89535);i++)t=new Date,e+=2;return 2017407716!==l.u1R(e.toString(),e.toString().length,86661)&&(t=new Date),this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenIntraDay(t)},t.Market.prototype.isMarketDay=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenDaily(e)},t.Market.prototype.isMarketDate=function(e){return l.H5p(),this._wasOpenDaily(e)},t.Market.prototype.isFirstMarketDayOfMonth=function(e){var t,i;if(!this.isMarketDate(e))return!1;t=new Date(+e),i=e.getDate();for(var a=1;a<i;a++)if(t.setDate(a),this.isMarketDate(t))return!1;return l.H5p(),!0},t.Market.prototype.isFirstMarketDayOfWeek=function(e){var t,i,a;if(l.s0Y(),!this.isMarketDate(e))return!1;for(t=this.tradingDays(),i=Math.max(this.beginningDayOfWeek,t[0])||0,a=new Date(+e);a.getDay()!==i;)if(a.setDate(a.getDate()-1),this.isMarketDate(a))return!1;return!0},t.Market.prototype.newIterator=function(e){var i,a,r;if("t","i","ck","h","our",i=!1,e.periodicity)i=e.periodicity;else if(e.multiple){858924493,978558085,a=2;for(var n=1;858924493!==l.u1R(n.toString(),n.toString().length,66150);n++)i=e.multiple,a+=2;978558085!==l.r57(a.toString(),a.toString().length,93832)&&(i=e.multiple)}return(r=e.interval)||(r="minute"),"hour"==r&&(r=60),i||(i=1),l.H5p(),e.begin||(e.begin=new Date,e.inZone=null),r==parseInt(r,10)&&(r=parseInt(r,10),e.periodicity<1/60?(i=i*r*6e4,r="millisecond"):e.periodicity<1?(i=i*r*60,r="second"):(i*=r,r="minute")),e.timeUnit&&("millisecond"===e.timeUnit||"second"===e.timeUnit?r=e.timeUnit:"tick"===e.timeUnit&&(r="second")),"tick"==r&&(r="second"),e.interval=r,e.multiple=i,e.market=this,new t.Market.Iterator(e)},t.Market.prototype._wasOpenDaily=function(e){return l.H5p(),this._was_open(e,!1)},t.Market.prototype._wasOpenIntraDay=function(e){return l.s0Y(),this._was_open(e,!0)},t.Market.prototype._was_open=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g;if(void 0===t&&(t=!0),i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;if(this.tradingDays().indexOf(e.getDay())<0)return null;if(this._zseg_matches||(this._zseg_matches=new Map),null===(a=this._zseg_matches.get(+e*(t?1:-1))))return null;if(a)return a=this._zseg_matches.get(a),Object.assign(this,a),this.zseg_match;for(r=!1,n=!1,s=e.getFullYear(),o=e.getMonth()+1,l=e.getDay(),h=e.getDate(),d=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),p=0;p<this.normalHours.length;p++)if((c=this.normalHours[p]).enabled&&((r=c.dayofweek===l)&&t&&(r=d>=c.open&&d<c.close),r)){if(!t&&this.zseg_match&&(c.open_parts.hours>this.zopen_hour||c.open_parts.hours==this.zopen_hour&&c.open_parts.minutes>this.zopen_minute))continue;if(c===i||c.adjacent_parent||c.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),u=p+1,this.zopen_hour=c.open_parts.hours,this.zopen_minute=c.open_parts.minutes,this.zclose_hour=c.close_parts.hours,this.zclose_minute=c.close_parts.minutes,this.zmatch_open=d===c.open,this.zseg_match=c,t)break}for(p=0;p<this.extraHours.length;p++)if((c=this.extraHours[p]).enabled&&("*"===c.year||s===c.year)&&o===c.month&&h===c.day&&(!(n=!t&&c.open||d>=c.open&&d<c.close)&&this.zseg_match&&(r=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),n)){if(!t&&this.zseg_match&&(c.open_parts.hours>this.zopen_hour||c.open_parts.hours==this.zopen_hour&&c.open_parts.minutes>this.zopen_minute))continue;if(u=-(p+1),this.zopen_hour=c.open_parts.hours,this.zopen_minute=c.open_parts.minutes,this.zclose_hour=c.close_parts.hours,this.zclose_minute=c.close_parts.minutes,this.zmatch_open=d===c.open,this.zseg_match=c,t)break}return g=null,this.zseg_match&&(this.zseg_match._refid||(this.zseg_match._refid=u,this._zseg_matches.set(this.zseg_match._refid,{zopen_hour:this.zopen_hour,zopen_minute:this.zopen_minute,zclose_hour:this.zclose_hour,zclose_minute:this.zclose_minute,zmatch_open:this.zmatch_open,zseg_match:this.zseg_match})),g=this.zseg_match._refid),this._zseg_matches.set(+e*(t?1:-1),g),this.zseg_match},t.Market.prototype._wasClosed=function(e){return!this._was_open(e,!0)},t.Market.prototype._wasOpen=function(e){var t;l.H5p(),t=2;for(var i=1;1441295034!==l.u1R(i.toString(),i.toString().length,35938);i++)return this._was_open(e,!0);if(-1803713748!==l.u1R(t.toString(),t.toString().length,5885))return this._was_open(e,!1)},t.Market.prototype._tzDifferenceMillis=function(e,t,i){var a;return 0,a=e,60*(e.getTimezoneOffset()-a.getTimezoneOffset())*1e3},t.Market._createTimeSegments=function(e){var t,i,a,r,n;t=function(e,t){if(l.H5p(),24===e.close_parts.hours&&0===t.open_parts.hours&&0===t.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return!1};for(var o=0;o<e.rules.length;o++){void 0===(a=JSON.parse(JSON.stringify(e.rules[o]))).open&&void 0===a.close&&(a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if("u","ndefine","d",void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(e,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):t(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):void 0!==a.date?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(e,a)):console.log("Error, unknown rule type "+a),e.enabled_by_default)for(var h=0;h<e.enabled_by_default.length;h++)if(n=e.enabled_by_default[h],r.name===n){r.enabled=!0;break}}catch(e){"Error, ","creati","ng market"," rules ",console.log("Error, creating market rules "+e)}}},l.H5p(),t.Market._timeSegment={},(s=t.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(e){var t,i,a;if(t=0,0===e.length)return t;for(i=0,a=e.length;i<a;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;l.H5p();for(var r=1;-144226043!==l.r57(r.toString(),r.toString().length,33769);r++)return t;return-123595817!==l.r57(2..toString(),2..toString().length,4750)?t:void 0},s._splitHoursMinutes=function(e){var t,i;return i={hours:NaN,minutes:NaN},null===(t=s.re_split_hour_minutes.exec(e))&&null===(t=s.re_split_hours_minutes.exec(e))||(l.H5p(),i.hours=parseInt(t[1],10),i.minutes=parseInt(t[2],10)),i},s._createDayOfWeekSegment=function(e,t){var i;return""===(i={name:t.name,isDayOfWeek:!0,dayofweek:t.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),e.normalHours.push(i),i},s._createDateTimeSegment=function(e,t){var i,a,r;if(i=this.re_regular_iso.exec(t.date),l.H5p(),null===i){if(null===(i=this.re_wild_card_iso.exec(t.date)))return void console.log("Warning: invalid date format on rule -> "+t.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:t.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:t.date,open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),e.extraHours.push(r),r},s._secSinceMidnight=function(e,t,i){var a,r,n;return a=t.split(":"),n=60*(r=parseInt(a[0],10))*60+60*parseInt(a[1],10),i||24===r&&(n=60*r*60+1),n},t.Market.prototype._convertToMarketTZ=function(e,t){var i;return i=t?new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t):new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),l.s0Y(),i.setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},t.Market.prototype._convertFromMarketTZ=function(e,t){var i;return i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),this.market_tz),l.s0Y(),t?(i.setTimezone&&i.setTimezone(t),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},t.Market.Iterator=function(e){l.H5p(),this.market=e.market,this.begin=e.begin,this.interval=e.interval,this.multiple=e.multiple,this.inZone=e.inZone,this.outZone=e.outZone,this.clock=new t.Market.Iterator._Clock(e.market,e.interval,e.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,e.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1,this.clock.minimumScanMS=6e4*e.market.minimumSessionLength},t.Market.Iterator.prototype.date=function(){return this.clock._date()},t.Market.Iterator.prototype.futureTick=function(e){var t,i,a,r,n,s,o;if(this.clock.skip=1,t=0,(i=this.intraDay?this.market._convertToMarketTZ(e.end,this.inZone).getTime():e.end.getTime())===(a=this.clock.ctime))return t;if(r=2,1e3,n=0,e.sample_size&&(r=e.sample_size),l.s0Y(),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(t+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/t,t=Math.floor((i-a)/o);break}this.clock.ctime>i&&t--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(t+=1,n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/t,t=Math.floor((a-i)/o);break}return t},t.Market.Iterator.prototype.isHourAligned=function(){return l.H5p(),!this.intraDay||this.market.isHourAligned()},t.Market.Iterator.prototype.isOpen=function(){return l.s0Y(),this.market.isOpen()},t.Market.Iterator.prototype.next=function(e){this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!0;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator.prototype.peek=function(){return l.H5p(),this.clock._peek()},t.Market.Iterator.prototype.previous=function(e){var t;t=2;for(var i=1;912060296!==l.u1R(i.toString(),i.toString().length,3960);i++)this.clock.skip=4,t+=2;210998389!==l.r57(t.toString(),t.toString().length,86923)&&(this.clock.skip=4),this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!1;for(var a=0;a<this.clock.skip;a++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator._Clock=function(e,t,i){var n,s;i%60==0&&"second"===t&&("min","ut","e",t="minute",i/=60),this.market=e,this.interval=t,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,l.H5p(),n=r,s=this._dayImpl,"millisecond"===t?(s=this._millisImpl,n=1):"second"===t?(s=this._secondImpl,n=1e3):"minute"===t?(s=this._minuteImpl,n=6e4):"hour"===t?(s=this._hourImpl,n=a):"day"===t?(s=this._dayImpl,n=r):"week"===t?(s=this._weekImpl,n=7*r):"month"===t?(s=this._monthImpl,n=30*r):('" is not a valid interva',"l. Please see"," setPeriodicity() for details.","Periodicity ERRO",'R: "',console.log('Periodicity ERROR: "'+t+'" is not a valid interval. Please see setPeriodicity() for details.')),this.tick_time=n*i,this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=s},(o=t.Market.Iterator._Clock.prototype)._total_minutes=function(e,t,i,a){return 60*(i-e)-t+a},o._alignMinutes=function(){var e,t,i,a,r,n;if(l.H5p(),e=this.market.isHourAligned(),!this.market.market_def&&!e||void 0===this.market.zopen_minute)return[];for(t=this.market.zopen_minute,(i=this.market.zseg_match)&&i.adjacent_parent?t=i.adjacent_parent.open/60-1440:e&&this.multiple%60==0&&(t=0),a=this._total_minutes(this.market.zopen_hour,t,this.market.zclose_hour,this.market.zclose_minute),r=[],n=0;n<a;)r.push(t+n),n+=this.multiple;return r},o._alignBaseZero=function(e){var t,i;for(i=[t=0];!((t+=this.multiple)>=e);)i.push(t);return i},o._date=function(){var e,t;return e=Math.round(this.ctime),t=new Date(e),this.intra_day?this.display_date=new Date(e+this.shift_millis):this.display_date=t,t},o._alignToBoundary=function(e,t){var i,a,r;l.s0Y(),i=0,a=0,r=t;for(var n=0;n<e.length-1&&(i=e[n],a=e[n+1],t!==i&&t!==a);n++){if(t>i&&t<a){r=i;break}n+1===e.length-1&&(r=a)}return r},o._peek=function(){return this._date().toString()},o._seekHr=function(){l.s0Y(),this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(e){var t,i;t=this.market._tzDifferenceMillis(e),i=new Date(e.getTime()+t),this.shift_millis=t,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=e.getTime()},o._tickTock=function(){var e;if(this.forward){-1001688670,-2105785291,e=2;for(var t=1;-1001688670!==l.u1R(t.toString(),t.toString().length,26038);t++)this.ctime-=this.tick_time,e+=2;-2105785291!==l.u1R(e.toString(),e.toString().length,70205)&&(this.ctime-=this.tick_time),this.ctime+=this.tick_time}else this.ctime-=this.tick_time},o._tockTick=function(){l.H5p(),this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){var e;e=2;for(var t=1;-592785560!==l.u1R(t.toString(),t.toString().length,93914);t++)this.ctime%=r,e+=2;1794465274!==l.u1R(e.toString(),e.toString().length,77678)&&(this.ctime%=r),this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(e,t){var i,a,r,n;for(l.H5p(),i=0,a=new Date(this.ctime),r=!1;!e.call(this.market,a);)if(t.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var e,t,i,a,r,n,s,o,l,h;return e=!1,this.mperiods_aligned||(t=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(t,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),l=this.tick_time,this.tick_time=6e4,h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=l,this.multiple=h,this.ctime+=1e3*s+o),this._date()},o._secondImpl=function(){var e,t,i,a,r,n,s,o,h,c;e=2;for(var u=1;1070856581!==l.r57(u.toString(),u.toString().length,67192);u++)t=!0,e+=2;return 781170279!==l.r57(e.toString(),e.toString().length,33760)&&(t=!0),t=!1,this.speriod_aligned||(i=this._alignBaseZero(60),r=(a=new Date(this.ctime)).getSeconds(),r=this._alignToBoundary(i,r),a.setSeconds(r),a.setMilliseconds(0),this.ctime=a.getTime(),this.speriod_aligned=!0,t=!0),n=this._date().getMinutes(),this._tickTock(),s=this._date().getMinutes(),!t&&n==s||this.market._wasOpenIntraDay(this._date())||(o=this._date().getSeconds(),h=this.tick_time,this.tick_time=6e4,c=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=h,this.multiple=c,this.ctime+=1e3*o),this._date()},o._minuteImpl=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p;return e=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(t=new Date(this.ctime)).getTimezoneOffset(),a=t.getMinutes(),r=t.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=e?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,t.setHours(r,s%60,0,0),o=t.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&t.setTime(t.getTime()-6e4*o),this.ctime=t.getTime(),l=this.market.zseg_match,this._tickTock(),h=this.market.hour_aligned&&this.multiple%60==0,e=this._scanForNextSession(),c=l!==this.market.zseg_match,u=l&&l.adjacent_child,d=this.shouldResetToBeginningOfSegment||c&&!u,(e||d&&!h)&&(t=new Date(this.ctime),this.forward?(t.setMinutes(this.market.zopen_minute),t.setHours(this.market.zopen_hour)):(p=(n=this._alignMinutes())[n.length-1],t.setMinutes(p%60),t.setHours(Math.floor(p/60)+this.market.zopen_hour)),this.ctime=t.getTime()),this._date()},o._hourImpl=function(){var e,t,i,a,r;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),this.market.isHourAligned()?e.setMinutes(0):e.setMinutes(this.market.zopen_minute),e.setSeconds(0),e.setMilliseconds(0),this.ctime=e.getTime(),this._tickTock(),t=this.market.zseg_match,(this._scanForNextSession()||!this.market.hour_aligned&&t!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],i.setMinutes(r%60),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var e,t;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),l.s0Y(),(e=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=e.getTime(),t=0;t<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(t+=1);return(e=new Date(this.ctime)).setHours(0),this.ctime=e.getTime(),this._date()},o._weekImpl=function(){var e,t;for(e=this.market,(t=new Date(this.ctime)).setHours(12),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime);t.getDay()!==e.beginningDayOfWeek;)this._tockTick24(),t=new Date(this.ctime);return this._windMaybe(e._wasOpenDaily,this._tickTock24),(t=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=t.getTime(),this._date()},o._monthImpl=function(){var e;return e=new Date(this.ctime),l.H5p(),e.setDate(15),this.ctime=e.getTime(),this._tickTock(),(e=new Date(this.ctime)).setDate(1),e.setHours(12),this.ctime=e.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(e=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=e.getTime(),this._date()},o._findNext=null,o._findPrevious=null,o._scanForNextSession=function(){return this._windMaybe(this.market._wasOpenIntraDay,function(){this.ctime+=this.forward?this.minimumScanMS:-this.minimumScanMS}.bind(this))}},g=e=>{var t,i,a,r=O;r.X1c=function(e){if(r.H5p(),r&&e)return r.Z9D(e)},r.p$G=function(e){if(r.s0Y(),r)return r.d6p(e)},r.G3h=function(e){if(r)return r.Z9D(e)},r.W4Y=function(e){if(r&&e)return r.Z9D(e)},t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="valid",t.valid=0,r.s0Y(),t[r.W4Y("5bba")?"ChartEngine":""][r.x15("4e66")?"":"prototype"][r.G3h("14a3")?"":"mousemoveinner"]=function(e,a){r.H5p(),r.m6x=function(e){if(r.H5p(),r&&e)return r.d6p(e)};var n=-(r.p$G("93fb")?7733045934:1841376731),s=-(r.z2$("22e5")?1698660058:5247580459),o=r.u7w("ecbb")?317306711:577991733;if(r.c_T(r.X1c("6f1a")?3:0,!r.e4G("295f"),r.O60("7e4c")?134315:564741)===n||r.D2o(0,!!r.N1P("3ea9"),r.k4_("edc6")?320559:540198)===s||r.c_T(25,!0,r.m6x("787d")?709328:875036)===o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V;if(r.x$O=function(e){if(r.s0Y(),r&&e)return r.Z9D(e)},r.l3t=function(e){if(r)return r.d6p(e)},l=r.r_0("814d")?"":"p",l+=r.l3t("c7a8")?"x":"",!this.chart[r.x$O("b175")?"":"canvas"])return;if(!this.disableBackingStoreDuringTouch&&(this.chart.canvas.height!=Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)||this.chart.canvas.width!=Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(c=arguments,u=this.container.getBoundingClientRect(),this.top=u.top,this.left=u.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=e,t.ChartEngine.crosshairY=a,this.crosshairX=e,this.crosshairY=a,d=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),p=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){r.k8O(1);var R=r.w0n(2,0);if(Math.pow(this.grabStartX-e,R)+Math.pow(this.grabStartY-a,2)<36)return}function X(e){-1935905593!==r.D2o(0,!1,618151)&&-811975481!==r.c_T(0,!1,142318)&&-403007005!==r.D2o(25,!0,365867)||(e.currentBaseline=null,e.runAppend("mousemoveinner",c))}if(this.cancelLongHold=!0,g=function(e,a){if(r.H5p(),-1275839447===r.c_T(0,!1,297342)||1295135803===r.D2o(0,!1,388882)||2032270640===r.c_T(25,!0,993286)){if(0===t[i]){1001293734,-2040883756,2;for(var n=1;1001293734!==r.r57(n.toString(),n.toString().length,68786);n++)return e.whichPanel(a)&&e.chart.panel;if(-2040883756!==r.u1R(2..toString(),2..toString().length,92623))return e.whichPanel(a)||e.chart.panel}e.draw[i]||(e.draw=function(){-1371091104!==r.D2o(0,!1,447402)&&-1238782290!==r.D2o(0,!1,988848)&&1913160575!==r.c_T(25,!0,990939)||t.clearCanvas(this.chart.canvas,this)},e.draw[i]=!0)}},this.currentPanel=g(this,d),!this.currentPanel)return;if((m=this.currentPanel.chart).dataSet){this.crosshairTick=this.tickFromPixel(p,m),h=this.valueFromPixel(d,this.currentPanel),f=-1824359450,y=-648829387,v=2;for(var Y=1;r.u1R(Y.toString(),Y.toString().length,14529)!==f;Y++)this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,h),b=""!==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField,v+=2;r.u1R(v.toString(),v.toString().length,45861)!==y&&(this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,h),b="chart"==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField),b&&this.crosshairTick<m.dataSet.length&&this.crosshairTick>-1&&(h=m.dataSet[this.crosshairTick][b],this.crossYActualPos=this.pixelFromPrice(h,this.currentPanel))}if(t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,x=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&this.cy<=x&&this.cy>x-this.xaxisHeight,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return this.setBaselineUserLevel(),X(this);if(this.repositioningAnchorSelector)return S=this.repositioningAnchorSelector.hoverTick,(C=this.tickFromPixel(this.cx,this.chart))>=0&&C<this.chart.dataSet.length&&(!S||0===S||C!==S)&&(this.repositioningAnchorSelector.hoverTick=C,this.draw()),X(this);if(this.grabbingScreen&&!t.ChartEngine.resizingPanel&&!this.chart.draggingControls){if(this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(p,d),X(this);if(this.anyHighlighted){for(w in t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[w].highlight=!1;for(w in m.series)m.series[w].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=m.scroll),-1==this.grabStartY&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),k=t.ChartEngine.crosshairX-this.grabStartX,T=t.ChartEngine.crosshairY-this.grabStartY,0===k&&0===T)return;if(Math.abs(k)+Math.abs(T)>5&&(this.grabOverrideClick=!0),_=this.layout.candleWidth,this.allowZoom&&"pan"!=this.grabMode&&(0===this.grabMode.indexOf("zoom")||this.overXAxis||this.grabStartYAxis)){if(A="z",A+="oom",A+="-y",""===this.grabMode&&(M="z",M+="oom",M+="-",M+="y",F="zo",F+="o",F+="m",F+="-x",this.overXAxis?this.grabMode=F:this.grabStartYAxis&&(this.grabMode=M)),"zoom-x"==this.grabMode?T=0:this.grabMode==A&&(k=0),k&&(this.grabStartX=t.ChartEngine.crosshairX,P=_-k/this.chart.maxTicks,this.zoomSet(P,this.chart)),this.layout.setSpan&&(L="l",L+="ayou",L+="t",this.layout.setSpan=null,this.changeOccurred(L)),D=this.grabStartYAxis)if(D.flipped&&(T*=-1),D.zoom=Math.round(this.grabStartZoom+T),this.grabStartZoom<D.height){if(D.zoom>=D.height){r.u2S(99);var z=r.i6w(6,16,17,1,6);D.zoom=D.height-z}}else if(D.zoom<=D.height){r.k8O(100);var B=r.w0n(1,2,15,14);D.zoom=D.height+B}}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(O="s",O+="cr",O+="oll",E="p",E+="a",E+="n",Math.abs(T)<this.yTolerance){if(!this.yToleranceBroken&&(T=0,0===k))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode=E,m.scroll=this.grabStartScrollX,r.k8O(50);var j=r.i6w(6,1);r.k8O(16);var $=r.w0n(4,20,17);if(this.micropixels=this.grabStartMicropixels+k*(this.shift?j:$),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=_,m.scroll++;for(;this.micropixels<-_;)this.micropixels+=_,m.scroll--}m.scroll>=m.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(m.maxTicks-m.scroll)*_,this.currentPanel==this.grabStartPanel&&((D=this.currentPanel.yAxis).flipped&&(T*=-1),D.scroll=this.grabStartScrollY+T),this.dispatch(O,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return I=function(e){if(-232424813===r.c_T(0,!1,184676)||416245465===r.D2o(0,!1,488347)||638059778===r.c_T(25,!0,515340))return function(){r.H5p();-1595782839!==r.D2o(0,!1,936516)&&320122351!==r.c_T(0,!1,706484)&&410058786!==r.c_T(25,!0,568219)||(e.draw(),e.updateChartAccessories())}},t.ChartEngine.useAnimation?window.requestAnimationFrame(I(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights(),X(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,m)-.5+l),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t.ChartEngine.resizingPanel?(N=this.currentVectorParameters.vectorType,this.layout.studies&&(H=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[H.name],N&&(this.overlays[H.name]=H)),t.Drawing&&N&&t.Drawing[N]&&(new t.Drawing[N]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&(null===this.magnetizedPrice&&(V=this.panels[this.activeDrawing.panelName],h=this.adjustIfNecessary(V,this.crosshairTick,this.activeDrawing.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),V,this.getYAxisByField(V,this.activeDrawing.field))),t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,h)),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights()),X(this))}},t.ChartEngine.prototype.swipeStart=function(e){var t;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=e.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=e,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,t=this,requestAnimationFrame((function(){t.swipeSample()}))},t.ChartEngine.prototype.swipeSample=function(){var e,i,a,n,s,o,l,h;(e=this.swipe).end||(i=this,r.u2S(27),o=r.i6w("20",96),(n=(a=Date.now())-e.timestamp)<o?requestAnimationFrame((function(){r.H5p(),i.swipeSample()})):(l=t.touchDevice?.4:.8,e.timestamp=a,s=(e.chart.scroll-e.frame)*this.layout.candleWidth+this.micropixels-e.micropixels,e.frame=e.chart.scroll,e.micropixels=this.micropixels,r.u2S(101),h=l*r.i6w(n,s,"1000","1",1)+.2*e.velocity,Math.abs(h)>Math.abs(e.velocity)&&(e.velocity=h),Math.abs(s)<6&&(e.velocity=0),requestAnimationFrame((function(){i.swipeSample()}))))},t.ChartEngine.prototype.swipeRelease=function(){var e,t;(e=this.swipe).velocity>3e3&&(e.velocity=3e3),e.velocity<-3e3&&(e.velocity=-3e3),(e.velocity>10||e.velocity<-10)&&(e.amplitude=.8*e.velocity,e.scroll=e.chart.scroll,e.target=e.amplitude,e.timestamp=Date.now(),t=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){t.autoscroll()})))},t.ChartEngine.prototype.allowDragControls=function(){var e,i,a,n;e={down:(n=this,r.s0Y(),function(e){n.modalBegin(),n.chart.draggingControls={bottom:n.chart.chartControls.style.bottom}}),move:(a=this,r.H5p(),function(e){var i,n,{draggingControls:s,chartControls:o,home:l}=a.chart;if(s){var{style:h,offsetHeight:c}=o;i=a.height-c,n=t.stripPX(s.bottom)-e.displacementY,n=Math.min(Math.max(n,0),i),r.k8O(1),h.bottom=r.w0n("px",n),l.style.bottom=h.bottom}}),up:(i=this,r.s0Y(),function(e){i.chart.draggingControls=null,r.H5p(),i.modalEnd()})},this.chart.chartControls&&t.safeDrag(this.chart.chartControls,e),r.H5p(),this.chart.home&&t.safeDrag(this.chart.home,e)},t.ChartEngine.prototype.dragPlotOrAxis=function(e,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q,Z;if("r","ig","h","t","no","ne",a=this,(function(){var e,t,i,n;for(var s in r.s0Y(),e=!1,a.panels){for(t="b",t+="ot",t+="t",i="t",i+="o",["dropzone","all","left","right",i+="p",t+="om"].forEach(o(a.panels[s])),n=0;n<a.panels[s].yaxisLHS.length;n++)a.panels[s].yaxisLHS[n].dropzone&&(e=!0),a.panels[s].yaxisLHS[n].dropzone=null;for(n=0;n<a.panels[s].yaxisRHS.length;n++)a.panels[s].yaxisRHS[n].dropzone&&(e=!0),a.panels[s].yaxisRHS[n].dropzone=null}function o(t){return r.H5p(),function(i){t.subholder.classList.contains(i)&&(t.subholder.classList.remove(i),e=!0)}}return e}.call(this)||this.grabbingScreen)&&(n=null,s=this.whichPanel(i),o=this.highlightedDraggable,l=0,s&&(!o.undraggable||!o.undraggable(this)))){for(k in this.xAxisAsFooter&&s==Object.values(this.panels).pop()&&(l=this.xaxisHeight,n&&(n+=l)),r.k8O(27),h=Math.min(r.i6w("20",0),(s.height-l)/3),c=Math.min(10,s.width/3),u=this.whichYAxis(s,e,i),r.u2S(9),d=this.whichYAxis(s,r.w0n(c,e),i),r.u2S(1),p=this.whichYAxis(s,r.i6w(c,e),i),r.u2S(9),g=this.whichPanel(r.i6w(h,i)),r.k8O(15),m=this.whichPanel(r.i6w(l,i,h)),f=!1,y=!1,!1,t.Renderer&&(f=o instanceof t.Renderer),t.Studies&&(y=o instanceof t.Studies.StudyDescriptor),b=function(e){if(!v){if("l","e","f","t","right"==e){r.k8O(9);var t=r.i6w(66,72);return s.right-s.width/t}if("left"==e){r.u2S(1);var i=r.w0n(5,1);return s.left+s.width/i}}return r.s0Y(),(s.left+s.right)/2},(v=o instanceof t.ChartEngine.YAxis)||u||("r","ig","h","t","l","e","f","t",e<b("left")?d=this.whichYAxis(s,s.left-1,i):e>b("right")&&(p=this.whichYAxis(s,s.right+1,i))),x=[],o.getDependents&&(x=o.getDependents(this,!0)),S=o.panel,C=o.getYAxis(this),f?S=o.params.panel:v&&(S=this.grabStartPanel.name),w=this.panels[S],this.panels)this.panels[k].soloing&&(T=!0);if(D=C.isShared(this),_=!(u||v||T||(w===s||w==g||w==m)&&this.checkForEmptyPanel(w,!0,[o].concat(x))),A=S==s.name&&C!==u&&C!==p&&C!==d||D,!_||g&&s===g)if(!_||m&&s===m){if(s!==w)v||s.noDrag||(s.subholder.classList.add("dropzone"),s.subholder.classList.add("all"),M=s.name);else if((!s.yaxisRHS.length||1==s.yaxisRHS.length&&s.yaxisRHS[0]==C&&"none"==C.position)&&!u&&!p&&e>b("right"))"ri","g","h","t",s.subholder.classList.add("dropzone"),s.subholder.classList.add("right"),F="right";else if((!s.yaxisLHS.length||1==s.yaxisLHS.length&&s.yaxisLHS[0]==C&&"none"==C.position)&&!u&&!d&&e<b("left"))"drop","zo","ne",s.subholder.classList.add("dropzone"),s.subholder.classList.add("left"),F="left";else if(A){if(v&&e>s.left&&e<s.right){r.u2S(50);var K=r.w0n(9,8);P=s.yaxisLHS[s.yaxisLHS.length-K],L=s.yaxisRHS[0],e<(O=b())&&P!=C?d=P:e>O&&L!=C&&(p=L)}v&&u===C||(E=!v&&D,!p||p===C&&!E||u&&u===p?!d||d===C&&!E||u&&u===d?u&&(p||u===C&&!E?d||u===C&&!E?u!==C&&(u.dropzone="all"):u.dropzone="left":u.dropzone="right",u.dropzone&&(F=u.position||this.chart.panel.yAxis.position||"right")):(d.dropzone="right",F=d.position||this.chart.panel.yAxis.position||"right"):("r","igh","t","l","e","f","t",p.dropzone="left",F=p.position||this.chart.panel.yAxis.position||"right"))}}else"b","ott","o","m",s.subholder.classList.add("dropzone"),s.subholder.classList.add("bottom");else"dr","opzone",s.subholder.classList.add("dropzone"),s.subholder.classList.add("top"),m=s;if(this.grabbingScreen||!s.subholder.classList.contains("dropzone")&&!F)this.draw();else{if(r.s0Y(),N=-1,!M&&!F&&_){for(var J in M=y?o.inputs.id:o.params.name||t.uniqueID(),this.panels)if(N++,this.panels[J]==m)break;m||N++,this.panels[S].yAxis.name==M&&(S=this.electNewPanelOwner(S)),H=y?o.inputs.display:null,S?this.createPanel(H||M,M,n,this.chart.name,new t.ChartEngine.YAxis({name:M})):S=M,y?o.panel=S:o.params.panel=S}if(M){if(y)o.parameters||(o.parameters={}),o.parameters.panelName=M,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,o.inputs.id,o.type,o.inputs,o.outputs,o.parameters,null,o.study);else if(f)for(var ee in o.seriesParams)V=o.seriesParams[ee],R=null,o.params.yAxis&&o.params.yAxis!==this.chart.panel.yAxis&&((R=o.params.yAxis).name=o.params.name),this.modifySeries(V.id,{panel:M,yAxis:R});if(N>-1){for(k in Y={},z=0,this.panels)N==z++&&(Y[M]=this.panels[M]),k!=M&&(Y[k]=this.panels[k]);Y[M]||(Y[M]=this.panels[M]),this.panels=Y}this.checkForEmptyPanel(S);for(var te=0;te<x.length;te++)x[te].params?this.checkForEmptyPanel(x[te].params.name):this.checkForEmptyPanel(x[te].name);this.adjustPanelPositions()}else if(F){if(B=function(e,i,a,r){var n,s;if("re","nd","erer","study"==a&&("Studies.replac","e","Study",i.parameters||(i.parameters={}),r?i.parameters.yaxisDisplayValue=r.position:delete i.parameters.yaxisDisplayValue,n=t.getFn("Studies.replaceStudy")(e,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),"renderer"==a)for(var o in i.seriesParams)s=i.seriesParams[o],n=e.modifySeries(s.id,{panel:M,yAxis:r});return n},(j=u&&"all"==u.dropzone)||(v?(o.position=F,this.layout.studies&&($=this.layout.studies[o.name])&&($.parameters||($.parameters={}),$.parameters.yaxisDisplayValue=F)):y?this.highlightedDraggable=B(this,o,"study",{position:F}):f&&B(this,o,"renderer",new t.ChartEngine.YAxis({name:o.params.name||t.uniqueID(),position:F})),C=this.highlightedDraggable.getYAxis(this)),!D||!j||v){for(X=C,j&&C==this.chart.panel.yAxis&&(X=u),I=0;I<s.yaxisLHS.length;I++)if(s.yaxisLHS[I]==X){s.yaxisLHS.splice(I,1);break}for(I=0;I<s.yaxisRHS.length;I++)if(s.yaxisRHS[I]==X){s.yaxisRHS.splice(I,1);break}}if(j)if(this.getYAxisByName(s,C.name)==s.yAxis&&this.electNewPanelOwner(s,u),v){for(U in q=C,G=u,C==this.chart.panel.yAxis&&(q=u,G=C),q.studies)"s","t","u","dy",B(this,this.layout.studies[q.studies[U]],"study",G===this.chart.panel.yAxis?null:{position:G.name});for(U in q.renderers)B(this,this.chart.seriesRenderers[q.renderers[U]],"renderer",G);this.highlightedDraggable=G}else y?this.highlightedDraggable=B(this,o,"study",{position:u.name}):f&&B(this,o,"renderer",u);else{for("non","e","none"==C.position&&(C.width=t.ChartEngine.YAxis.prototype.width),C.position=F,W="left"==F?s.yaxisLHS:s.yaxisRHS,I=0;I<W.length;I++){if(W[I]!==C)if("l","e","f","t","left"==W[I].dropzone)W.splice(I,0,C);else{if("right"!=W[I].dropzone)continue;r.k8O(1),W.splice(r.i6w(1,I),0,C)}break}I==W.length&&W.push(C)}}for(var ie in this.panels)for(Z=(Q=this.panels[ie]).yaxisLHS.concat(Q.yaxisRHS),I=0;I<Z.length;I++)Z[I].height=Q.yAxis.height,Z[I].lockScale||this.calculateYAxisMargins(Z[I]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}},a=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(e,t){a||console.error("movement feature requires activating interaction feature."),a=!0}},m=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(e){if(O.H5p(),e.constructor==String)return e;try{return JSON.stringify(e)}catch(t){return O.u2S(1),console.log(O.i6w(e,"Cannot convert to JSON: ")),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(e){O.s0Y();try{return JSON.parse(e)}catch(t){return e}},t.NameValueStore.prototype.get=function(e,i){var a;a=t.localStorage.getItem(e),i(null,this.fromJSONIfNecessary(a))},t.NameValueStore.prototype.set=function(e,i,a){t.localStorageSetItem(e,this.toJSONIfNecessary(i)),a&&a(null)},t.NameValueStore.prototype.remove=function(e,i){t.localStorage.removeItem(e),i&&i(null)}},f=e=>{var t,i=O;function a(){}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine||(t.ChartEngine=function(){}),a.fetchInitialData=function(e,t,i,a,r){},a.fetchUpdateData=function(e,t,i,a){},a.fetchPaginationData=function(e,t,i,a,r){},a.subscribe=function(e){},a.unsubscribe=function(e){},t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(e,t){i.H5p(),this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},t.QuoteFeed.prototype.announceError=function(e,i){e.suppressErrors||i.suppressAlert||e.startDate||e.endDate||i.error&&t.alert("Error fetching quote:"+i.error)},t.QuoteFeed.prototype.multiFetch=function(e,t){return 0===e.length&&t([]),e[0].stx.driver.multiFetch(e,t)},t.QuoteFeed.Subscriptions=function(){i.H5p(),this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(e){var t,a,r,n,s;i.s0Y(),r=e.getSymbols({"breakout-equations":!0}),n=this,r=r.filter((function(t){var i;return(i=e.quoteDriver.getQuoteFeed(t))&&i.engine==n}));for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o].match=!1;for(var l=0;l<r.length;l++)for("m","o","n","th","month"!=(s=(a=r[l]).interval)&&"week"!=s||e.dontRoll||("d","a","y",s="day"),a.interval=s,a.period=1,a.match=!1,isNaN(a.interval)||(a.period=a.interval,a.interval=a.timeUnit,a.interval||(a.interval="minute")),delete a.periodicity,delete a.timeUnit,delete a.setSpan,o=0;o<this.subscriptions.length;o++){if((t=this.subscriptions[o]).symbol==a.symbol&&t.period==a.period&&t.interval==a.interval){a.match=!0,t.match=!0;break}t.symbol!=a.symbol?("period"!=a.reason&&(a.reason="symbol"),t.reason="symbol"):("peri","o","d",a.reason="period",t.reason="period")}this.subscriptions=this.subscriptions.filter((function(t){return t.match||(t.stx||(t.stx=e),n.unsubscribe(t)),i.s0Y(),t.match})),r.forEach((function(t){t.match||(t.stx||(t.stx=e),t.reason||(t.reason="initialize"),t.symbol!==e.chart.symbol&&(t.series=!0),n.subscribe(t),n.subscriptions.push(t))}))},t.QuoteFeed.Subscriptions.prototype.fetch=function(e,t){var a;a=this,i.s0Y(),this.fetchFromSource(e,(function(i){i.error||a.checkSubscriptions(e.stx),t(i)}))},t.QuoteFeed.Subscriptions.prototype.subscribe=function(e){i.s0Y(),console.log("subscribe",e)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(e){i.s0Y(),console.log("unsubscribe",e)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(e,t){i.s0Y(),console.log("Please provide implementation of fetchFromSource")},t.QuoteFeed.prototype.requiresImmediateRefresh=function(e){return i.H5p(),!1},t.ChartEngine.prototype.attachQuoteFeed=function(e,a,r){var n,s,o,l;if(a||(a={}),"function"==typeof e.fetchInitialData||"function"==typeof e.fetchUpdateData||"function"==typeof e.fetchPaginationData){n="requiresIm",n+="mediateR",n+="efresh","function"!=typeof e.fetchPaginationData&&"function"!=typeof e.fetchUpdateData&&(a.noLoadMore=!0),i.u2S(27),s=i.i6w("2061200080",32),726325724,o=2;for(var h=1;i.u1R(h.toString(),h.toString().length,58056)!==s;h++)e.v2QuoteFeed=!1,o+=2;726325724!==i.r57(o.toString(),o.toString().length,72334)&&(e.v2QuoteFeed=!0),["multiFetch","announceError",n].forEach((function(i){e[i]||!1===e[i]||(e[i]=t.QuoteFeed.prototype[i])})),"function"==typeof e.subscribe&&(e.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,e.subscriptions=[])}a.maximumTicks||(a.maximumTicks=e.maxTicks?e.maxTicks:2e4),(!a.bufferSize||a.bufferSize<0)&&(a.bufferSize=0),a.bufferSize=Math.round(a.bufferSize),e.intervalTimer=null,this.quoteDriver&&(!r&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(l=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:e,behavior:a,filter:r}),l&&this.quoteDriver.quoteFeeds.push(l),this.quoteDriver.updateChartLoop(null,a,e))),this.quoteDriver||(this.quoteDriver=new t.ChartEngine.Driver(this,e,a,r)),r||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(e){var t;if(t=this.quoteDriver){for(var a=t.quoteFeeds.length-1;a>=0;a--)e&&t.quoteFeeds[a].engine!=e||(t.die(t.quoteFeeds[a]),t.quoteFeeds.splice(a,1));i.H5p(),t.quoteFeeds.length?e==t.quoteFeed&&(t.quoteFeed=t.quoteFeeds[0].quoteFeed,t.behavior=t.quoteFeeds[0].behavior):t=this.quoteDriver=null}},t.ChartEngine.Driver=function(e,a,r,n){i.H5p(),this.stx=e,r||(r={}),this.quoteFeeds=[{engine:a,behavior:r,filter:n}],this.id=t.uniqueID(!0),this.behavior=r,this.quoteFeed=a,this.loadingNewChart=!1,this.updatingChart=!1,n||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(e){var t;i.s0Y();for(var a=0;a<this.quoteFeeds.length;a++)e&&this.quoteFeeds[a]!=e||(t=this.quoteFeeds[a],clearInterval(t.intervalTimer),t.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(e){var t;e.symbolObject||(e.symbolObject={symbol:e.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((t=this.quoteFeeds[i]).behavior.generator==e.symbolObject.generator&&(!t.filter||t.filter(e)))return t;return null},t.ChartEngine.Driver.prototype.multiFetch=function(e,a){var r,n,s;function o(e,t,a){return function(r){var n;t.results.push({dataCallback:r,params:e}),i.s0Y(),t.counter++,t.counter>=t.finished&&(n=t.results,t.results=[],a(n))}}0===e.length&&a([]),r={counter:0,finished:e.length,results:[]};for(var l=0;l<e.length;l++)(n=e[l]).stx.isEquationChart(n.symbol)?t.fetchEquationChart(n,o(n,r,a)):(s=this.getQuoteFeed(n))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,s.engine,n,o(n,r,a))},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){i.s0Y();for(var e=0;e<this.quoteFeeds.length;e++)this.quoteFeeds[e].checkSubscriptions&&this.quoteFeeds[e].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(e,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M;if(s=this,!n)return o=0,l=[],h=[],c=function(e){i.H5p(),a&&++o>=s.quoteFeeds.length&&a(null)},u=function(t){++o<l.length||(h.length||c(),h.forEach((function(t){i.s0Y(),s.loadDependents(e,c,r,t.behavior)})))},s.quoteFeeds.forEach((function(e){e.behavior.generator?h.push(e):l.push(e)})),void l.forEach((function(t){s.loadDependents(e,u,r,t.behavior)}));for(d in{},p=e.stx,g=e.chart,i.s0Y(),m=g.series,p.masterData,v=[],b={},x=r==t.QuoteFeed.UPDATE,S=r==t.QuoteFeed.PAGINATION,C=t.shallowClone(e),m){if(w=(f=m[d]).parameters,!x){if(!e.future&&!1===f.moreAvailable)continue;if(e.future&&!0===f.upToDate)continue}if(!f.loading&&(!1!==w.loadData&&(!x&&!S||f.endPoints&&Object.keys(f.endPoints).length)&&(!w.data||w.data.useDefaultQuoteFeed)&&(y=w.symbolObject).symbol&&y.generator==n.generator&&(C.symbolObject=y,C.symbol=y.symbol,k=this.getQuoteFeed(C),n==(k&&k.behavior)))){T=!0,x||(f.loading=!0);for(var F=0;F<v.length;F++)t.symbolEqual(v[F],y)&&(T=!1);T&&(v.push(y),b[y.symbol]=f.endPoints)}}D=[];for(var P=0;P<v.length;P++)y=v[P],(_=t.shallowClone(e.originalState)).symbol=y.symbol,_.symbolObject=y,_.update||_.future?(_.endDate||(_.endDate=e.endDate),_.startDate=b[y.symbol].end):(_.startDate||(_.startDate=e.startDate),_.endDate=S&&!e.future?b[y.symbol].begin:e.endDate,_.ticks=e.ticks),D.push(_);if(!D.length&&x)return(A={appending:e.appending||e.originalState.update}).appending&&(A.appendToDate=e.startDate),p.createDataSet(null,null,A),e.nodraw||p.draw(),void(a&&a(null));this.multiFetch(D,(M=x,function(i){var o,l,h,c,u,d,m,y,v,b;o=null;for(var x=0;x<i.length;x++)if(!(h=(l=i[x]).dataCallback.error)&&0!==h){c=l.params.symbolObject,d=(u=l.dataCallback).quotes,m=u.moreAvailable,y=u.upToDate,v=[],p.getSeries&&(v=p.getSeries({symbolObject:c})),b=!1;for(var S=0;S<v.length;S++)f=v[S],M||(e.future?(f.upToDate=!0===y||y||d.length<=(l.params.startDate?1:0),p.isHistoricalModeSet&&d.length<2&&(f.mostRecentForwardAttempt=new Date)):f.moreAvailable=!1!==m&&(m||d.length>(l.params.endDate?1:0)),f.loading=!1),b=f.parameters.fillGaps||b;d=s.cleanup(p,f,d,r,e,b),p.updateChartData(d,g,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),d&&d.length&&(!o||o>d[0].DT)&&(o=d[0].DT)}i.length&&(p.createDataSet(null,null,{appending:e.originalState.update||e.future,appendToDate:o}),e.nodraw||p.draw(),r==t.QuoteFeed.INITIAL&&s.resetRefreshInterval(n.refreshInterval,n)),a&&a(null)}))},t.ChartEngine.Driver.prototype.cleanup=function(e,i,a,r,n,s){var o,l,h,c,u;return e.doCleanupDates(a,e.layout.interval),!n.missingBarsCreated&&a&&a.length&&e.cleanupGaps&&!1!==s&&(h=n.chart,i?(h=i,l=i.parameters.symbol||i.id):l=h.defaultPlotField,r!=t.QuoteFeed.PAGINATION||n.loadMoreReplace?r==t.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<a[0].DT&&(u=e.getFirstLastDataRecord(e.masterData,l,!0),i&&(u=u[l]),a.unshift(u),o="shift"):h.endPoints.begin&&h.endPoints.begin>a[a.length-1].DT&&(c=e.getFirstLastDataRecord(e.masterData,l,!1),i&&(c=c[l]),a.push(c),o="pop"),a=e.doCleanupGaps(a,n.chart,{cleanupGaps:s,noCleanupDates:!0}),o&&a[o]()),a},t.ChartEngine.Driver.prototype.updateChart=function(e){var i,a,r,n,s,o,l,h,c;if(!this.updatingChart&&!this.loadingNewChart)for(var u in i=Object.keys(this.stx.charts).length,a=0,r=this.stx,n=r.layout.interval,s=r.layout.timeUnit,r.charts)(o=r.charts[u]).symbol&&(l=this.makeParams(o.symbol,o.symbolObject,o),h=this.getQuoteFeed(l),o.masterData&&o.masterData.length&&(l.startDate=o.endPoints.end),l.update=!0,l.originalState=t.shallowClone(l),e&&e!=l.behavior?this.loadDependents(l,null,t.QuoteFeed.UPDATE,e):(this.updatingChart=!0,c=d(this,l,o.symbol,h),r.isEquationChart(l.symbol)?t.fetchEquationChart(l,c):h&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,h.engine,l,c)));function d(e,o,l,h){return"updateCh","art",o.behavior.prefetchAction&&o.behavior.prefetchAction("updateChart"),function(c){var u,d;a++,(u=o.chart).masterData,l!=u.symbol||n!=r.layout.interval||s!=r.layout.timeUnit||r.isHistoricalMode()?e.updatingChart=!1:(h!==e.getQuoteFeed(o)||c.error?h&&h.engine.announceError(o.originalState,c):(d=c.quotes,d=e.cleanup(r,null,d,t.QuoteFeed.UPDATE,o),r.updateChartData(d,u,{noCreateDataSet:!0,noCleanupDates:!0}),u.attribution=c.attribution),a==i&&(e.updatingChart=!1),o.behavior.callback&&o.behavior.callback(o),e.loadDependents(o,null,t.QuoteFeed.UPDATE,o.behavior))}}},t.ChartEngine.Driver.prototype.updateChartLoop=function(e,t,a){var r,n;if(t||(t=this.behavior),a||(this.quoteFeeds.forEach((function(e){e.behavior===t&&(a=e)})),a||(a=this.quoteFeed)),-1!==a.intervalTimer){clearInterval(a.intervalTimer),i.s0Y(),a.intervalTimer=null,r=function(e,t){return i.H5p(),function(){t.noUpdate||e.updateChart(t)}};for(var s=0;s<this.quoteFeeds.length;s++)n=this.quoteFeeds[s].behavior,t!=n||n.noUpdate||(e||0===e||(e=n.refreshInterval),e&&(a.intervalTimer=setInterval(r(this,n),1e3*e)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(e,t){(t||this.behavior).refreshInterval=e,this.updateChartLoop(null,t)},t.ChartEngine.Driver.prototype.pause=function(e){i.s0Y(),this.paused={symbol:e,interval:this.behavior.refreshInterval},i.k8O(3),this.resetRefreshInterval(i.w0n(1,"0"))},t.ChartEngine.Driver.prototype.resume=function(){var{interval:e,symbol:i}=this.paused;t.symbolEqual(i,this.stx.chart.symbol)||(this.resetRefreshInterval(e),this.paused=null)},t.ChartEngine.Driver.prototype.loadAll=function(e,t){var i,a;i=this,a=0,function r(){return function(n){n?t(n):i.stx.currentlyImporting||!e.moreAvailable&&e.upToDate?t(null):++a>20?(console.warn("moreAvailable and upToDate not implemented correctly in quotefeed"),t()):(e.loadingMore=!1,i.checkLoadMore(e,!0,!0,r(),!0))}}()()},t.ChartEngine.Driver.prototype.checkLoadMore=function(e,a,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_;if(o=this.stx,l=this,e.loadingMore||this.loadingNewChart)return e.initialScroll=e.scroll,void(n&&n(null));function A(t){if(l.paused)return!1;for(var a=1;68012479!==i.r57(a.toString(),a.toString().length,12701);a++)return!t.endPoints.end||e.scroll-e.maxTicks+1<c.bufferSize||o.tickFromDate(t.endPoints.end,e,null,!0)-d.length+e.scroll-e.maxTicks+2<c.bufferSize;return-444546653!==i.r57(2..toString(),2..toString().length,1497)?~t.endPoints.end&&e.scroll*e.maxTicks%0>c.bufferSize&&o.tickFromDate(t.endPoints.end,e,1,!1)*d.length%e.scroll%e.maxTicks-7>=c.bufferSize:void 0}if(o.isHistoricalMode()||(o.isHistoricalModeSet=!1),h=this.makeParams(e.symbol,e.symbolObject,e),o.currentlyImporting)n&&n(null);else{c=h.behavior,d=e.dataSet,i.u2S(102);var M=i.w0n(982,998,1473,3);i.k8O(103);var F,P,L=i.w0n(13,1180,2,90,13);if(i.H5p(),g=M*(c.forwardPaginationRetryInterval||L),m=!1,f=!1,e.dataSet.length)for(var O in e.series)(y=e.series[O]).loading||!1!==y.parameters.loadData&&(p=!y.mostRecentForwardAttempt||y.mostRecentForwardAttempt.getTime()+g<Date.now(),!1!==y.moreAvailable&&E(y)&&(m=!0),p&&!y.upToDate&&A(y)&&(f=!0));if(p=!e.mostRecentForwardAttempt||e.mostRecentForwardAttempt.getTime()+g<Date.now(),v=(E(e)||a)&&!1!==e.moreAvailable,b=(A(e)||a)&&!e.upToDate&&p,x=v||m,S=(o.isHistoricalModeSet||!e.upToDate)&&!x&&(b||f),C=o.layout.interval,w=o.layout.timeUnit,k=!1,T=c.findHeadOfData||e.masterData&&e.masterData.length,!c.noLoadMore&&T&&(S||!o.maxDataSetSize||e.dataSet.length<o.maxDataSetSize)&&(x||S)){if(e.initialScroll=e.scroll,e.loadingMore=!0,(h=this.makeParams(e.symbol,e.symbolObject,e)).pagination=!0,h.future=S,e.masterData&&e.masterData.length?(S?h.startDate=e.endPoints.end:h.endDate=e.endPoints.begin,S&&!h.startDate?(D=o.getFirstLastDataRecord(e.masterData,"DT",!0))&&(h.startDate=D.DT):x&&!h.endDate&&(D=o.getFirstLastDataRecord(e.masterData,"DT"))&&(h.endDate=D.DT)):h.endDate=new Date,h.originalState=t.shallowClone(h),h.nodraw=s,!v&&(m||!b&&f))return this.loadingMore=!0,this.loadDependents(h,(function(t){e.loadingMore=!1,n&&n(t)}),t.QuoteFeed.PAGINATION),void(n&&n(null));(e.maximumForwardPagination||o.fetchMaximumBars[o.layout.aggregationType])&&(h.fetchMaximumBars=!0,!o.maxMasterDataSize||c.maximumTicks<o.maxMasterDataSize?h.ticks=c.maximumTicks:h.ticks=o.maxMasterDataSize),F=this,P=h,c.prefetchAction&&c.prefetchAction("checkLoadMore"),_=function(e){var a,r,o,l,h,d,p,g,m;if(a=F.stx,r=P.chart,P.symbol==r.symbol&&C==a.layout.interval&&w==a.layout.timeUnit)if(P.loadMore||(P.chart.loadingMore=!1),u!==F.getQuoteFeed(P)||e.error)F.quoteFeed.announceError(P.originalState,e),P.chart.loadingMore=!1,n&&n(e.error);else{if(e.quotes||(e.quotes=[]),o=e.quotes,l=r.masterData,(o=F.cleanup(a,null,o,t.QuoteFeed.PAGINATION,P)).length&&r.masterData&&r.masterData.length)if(P.future)(h=o[0]).DT&&h.DT==r.masterData[r.masterData.length-1].DT&&l.pop();else{i.k8O(67);var f=i.w0n(13,2,2,25,8);(d=o[o.length-f]).DT&&+d.DT==+r.masterData[0].DT&&o.pop()}P.future?(r.maximumForwardPagination=null,e.upToDate?r.upToDate=!0:!1===e.upToDate||o.length>1?r.upToDate=!1:(!o.length||1===o.length&&+P.startDate==+e.quotes[0].DT)&&(P.fetchMaximumBars?r.upToDate=!0:r.maximumForwardPagination=!0),a.isHistoricalModeSet&&o.length<2&&(r.mostRecentForwardAttempt=new Date)):e.moreAvailable||!1!==e.moreAvailable&&o.length?r.moreAvailable=!0:r.moreAvailable=!1,F.tickMultiplier=o.length?2:2*F.tickMultiplier,p=o[0]?o[0].DT:P.startDate,g=o[0]?o[o.length-1].DT:P.endDate,(!r.endPoints.begin||r.endPoints.begin>p)&&(r.endPoints.begin=p),(!r.endPoints.end||r.endPoints.end<g)&&(r.endPoints.end=g),r.loadingMore=!1,P.loadMoreReplace?a.setMasterData(o,r,{noCleanupDates:!0}):P.future?a.updateChartData(o,r,{noCreateDataSet:!0,noCleanupDates:!0}):t.addMemberToMasterdata({stx:a,chart:r,data:o,fields:["*"],noCleanupDates:!0}),P.future&&(m={appending:!0,appendToDate:o[0]&&o[0].DT}),a.createDataSet(void 0,void 0,m),s||a.draw(),c.callback&&c.callback(P),F.loadDependents(P,n,t.QuoteFeed.PAGINATION)}},o.isEquationChart(h.symbol)?t.fetchEquationChart(h,_):(S&&(h.appending=!0),(u=l.getQuoteFeed(h))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,u.engine,h,_)),k=!0}!k&&n&&n(null)}function E(t){return i.H5p(),!l.paused&&(!t.endPoints.begin||d.length-e.scroll<c.bufferSize||d.length-e.scroll-o.tickFromDate(t.endPoints.begin,e)<c.bufferSize)}},t.ChartEngine.Driver.prototype.extendHistoricalData=function({from:e},a=(()=>{})){var r,n,{stx:s}=this;i.H5p();var{chart:o,layout:l}=s;var h,c,{masterData:u,dataSet:d}=o,{interval:p,timeUnit:g}=l;if(r=this.makeParams(o.symbol,o.symbolObject,o),n=this.getQuoteFeed(r),o.loadingMore||this.loadingNewChart||s.currentlyImporting||!u.length||!n||s.maxDataSetSize&&d.length>s.maxDataSetSize)return a(null);o.loadingMore=!0,r.originalState=Object.assign({},r),r.startDate=e,r.endDate=u[0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,n.engine,r,(h=this,c=r,i.s0Y(),function({quotes:r,moreAvailable:n,error:u}){if(i.s0Y(),c.symbol===o.symbol&&p===l.interval&&g===l.timeUnit){if(o.loadingMore=!1,u)return a(u);r=h.cleanup(s,null,r,t.QuoteFeed.PAGINATION,c),o.moreAvailable="boolean"==typeof n?n:!!r.length,o.endPoints.begin=e,t.addMemberToMasterdata({stx:s,chart:o,data:r,fields:["*"],noCleanupDates:!0}),s.createDataSet(),s.draw()}}))},t.ChartEngine.Driver.prototype.barsToFetch=function(e){var i,a;return"mon","th",t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=e.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||(a*="week"==i?7:30),e.stx.chart.maxTicks*a*this.tickMultiplier},t.ChartEngine.Driver.determineStartDate=function(e,t,a){return i.H5p(),this.determineStartOrEndDate(e,t,a,!0)},t.ChartEngine.Driver.determineStartOrEndDate=function(e,t,a,r){return i.s0Y(),r?e.startDate||t.previous(a):e.future?t.next(a):new Date},t.ChartEngine.Driver.prototype.makeParams=function(e,a,r){var n,s,o,l,h,c,u,d;s=(n=this.stx).layout.interval,o=this.barsToFetch({stx:n}),"month"!=s&&"week"!=s||n.dontRoll||(s="day"),h=(l=this.getQuoteFeed({interval:s,symbol:e,symbolObject:a}))&&l.behavior,c=t.shallowClone(h)||{},i.s0Y(),c.behavior=h,u=!1,d=[],r.market&&r.market.getSessionNames&&(d=r.market.getSessionNames()),n.extendedHours?n.extendedHours.filter?u=!0:(u=n.layout.extended,d=d.filter((function(e){return e.enabled||n.layout.marketSessions[e.name]}))):d=d.filter((function(e){return i.H5p(),e.enabled}));for(var p=0;p<d.length;p++)d[p]=d[p].name;return t.extend(c,{stx:n,symbol:e,symbolObject:a,chart:r,interval:s,extended:u,period:1,ticks:o,additionalSessions:d,quoteDriverID:this.id},!0),c.symbolObject||(c.symbolObject={symbol:e}),isNaN(c.interval)||(c.period=parseInt(c.interval,10),c.interval=n.layout.timeUnit,c.interval||(c.interval="minute")),c},t.ChartEngine.Driver.prototype.newChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,g;r=this.stx,n=e.symbol,s=r.layout.interval,o=r.layout.timeUnit,(l=e.chart).moreAvailable=null,l.upToDate=null,l.loadingMore=!1,l.attribution=null,h=this.makeParams(n,e.symbolObject,l),t.extend(h,e,!0),c=this.getQuoteFeed(h),u=h.behavior,(r.fetchMaximumBars[r.layout.aggregationType]||e.fetchMaximumBars)&&(!r.maxMasterDataSize||u.maximumTicks<r.maxMasterDataSize?h.ticks=u.maximumTicks:h.ticks=r.maxMasterDataSize,h.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,h.originalState=t.shallowClone(h),p=this,g=h,u.prefetchAction&&u.prefetchAction("newChart"),d=function(l){var h,d,m,f;if(h=g.chart,d=l.quotes,m=!1,n==h.symbol&&s==r.layout.interval&&o==r.layout.timeUnit){for(var y in p.loadingNewChart=!1,c!==p.getQuoteFeed(g)||l.error?c.engine.announceError(g.originalState,l):(d=p.cleanup(r,null,d,t.QuoteFeed.INITIAL,g),r.setMasterData(d,h,{noCleanupDates:!0}),h.endPoints={},h.endPoints.begin=d[0]?d[0].DT:g.startDate,h.endPoints.end=d[0]?d[d.length-1].DT:g.endDate,d?(h.moreAvailable=!1!==l.moreAvailable,h.upToDate=l.upToDate):(h.moreAvailable=!1,h.upToDate=!0),h.attribution=l.attribution,e.initializeChart&&r.initializeChart(),r.createDataSet(),m=!0),h.series)h.series[y].endPoints={},h.series[y].moreAvailable=null,h.series[y].upToDate=null;(f=h.masterData)&&f.length&&(g.startDate=f[0].DT,g.endDate=f[f.length-1].DT),u.callback&&u.callback(g),p.loadDependents(g,(function(){m&&!g.nodraw&&p.stx.home(),a&&a(l.error),p.stx.dispatch("newChart",{stx:p.stx,symbol:p.stx.chart.symbol,symbolObject:p.stx.chart.symbolObject,moreAvailable:p.stx.chart.moreAvailable,upToDate:p.stx.chart.upToDate,quoteDriver:p}),i.s0Y(),p.resetRefreshInterval(u.refreshInterval,u)}),t.QuoteFeed.INITIAL)}else a&&a("orphaned")},this.stx.isEquationChart(h.symbol)?t.fetchEquationChart(h,d):c&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,c.engine,h,d)},t.QuoteFeed.INITIAL=1,t.QuoteFeed.UPDATE=2,i.k8O(58),t.QuoteFeed.PAGINATION=i.w0n("3",0),t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(e,a,r,n){if(!r.symbol)return n({quotes:[]});a.v2QuoteFeed?"function"!=typeof a.subscribe?t.ChartEngine.Driver.fetchDataInContext(e,a,r,n):t.ChartEngine.Driver.fetchDataInContext(e,a,r,function(e){i.H5p(),e.error||this.checkSubscriptions(r.stx),n(e)}.bind(a)):(r.stx.convertToDataZone(r.startDate),r.stx.convertToDataZone(r.endDate),a.fetch(r,n))},t.ChartEngine.Driver.fetchDataInContext=function(e,a,r,n){var s,o,l,h,c,u,d,p,g;if((c=r.stx).chart.market.newIterator)switch(e===t.QuoteFeed.SERIES&&(r.series=!0,e=t.QuoteFeed.INITIAL,r.endDate&&!r.startDate||r.future?e=t.QuoteFeed.PAGINATION:r.startDate&&!r.endDate&&(e=t.QuoteFeed.UPDATE)),u=Math.min(r.ticks,r.maximumTicks),i.H5p(),a.maxTicks&&(u=Math.min(u,a.maxTicks)),d=r.symbolObject.masterSymbol||r.symbol,e){case t.QuoteFeed.UPDATE:if(c.isHistoricalModeSet)return void(c.quoteDriver.updatingChart=!1);r.startDate?p=r.startDate:(p=new Date).setHours(0,0,0,0),"function"==typeof a.fetchUpdateData&&a.fetchUpdateData(d,c.convertToDataZone(p),r,n);break;case t.QuoteFeed.INITIAL:s={begin:h=r.endDate||new Date,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),l=t.ChartEngine.Driver.determineStartDate(r,o,u),r.endDate&&(h=r.endDate),"function"==typeof a.fetchInitialData&&a.fetchInitialData(d,l,c.convertToDataZone(h),r,n);break;case t.QuoteFeed.PAGINATION:if("t","ic","k",s={begin:r.endDate||r.startDate,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),g=t.ChartEngine.Driver.determineStartOrEndDate(r,o,u,!r.future),l=r.startDate||g,h=r.endDate||g,r.startDate?r.stx.convertToDataZone(l):r.stx.convertToDataZone(h),"function"==typeof a.fetchPaginationData){if(c.maxMasterDataSize&&c.maxMasterDataSize<=c.masterData.length)return;a.fetchPaginationData(d,l,h,r,(function(e){h>=Date.now()&&(c.isHistoricalModeSet=!1),n&&n(e)}))}break;default:console.error("Illegal fetchData constant")}else console.error("quoteFeed feature requires first activating market feature.")}},y=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.addSeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;function S(a,r){var n,s,o,l;if(n=i.renderer||"Lines",s=i.name||e,!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||m||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0},i.chartType?o=t.Renderer.produce(i.chartType,t.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},l)):(t.ensureDefaults(i,l),o=new t.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(e,i),!1!==i.loadData&&o.ready(),O.H5p(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0})}}if(r="addSer",r+="ies",n=this.runPrepend(r,arguments))return n;function C(e){return O.H5p(),function(t){var r,n;t.error||(r=t.quotes,n=i.fillGaps,g.cleanupGaps||(n=!1),r=g.doCleanupGaps(r,g.chart,{cleanupGaps:n}),g.updateChartData(r,g.chart,{secondarySeries:o,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),l.loading=!1,l.moreAvailable=t.moreAvailable,l.upToDate=t.upToDate,S(g)),null===i.action||u.length||g.dispatch(m?"symbolImport":"symbolChange",{stx:g,symbol:e.symbol,symbolObject:e.symbolObject,action:i.action,id:l.id,parameters:i}),a&&a.call(g,t.error,l)}}return s=e||null,o=e,e||(e=t.uniqueID()),i&&!0===i.panel&&(i.panel=e),(l={parameters:i?t.clone(i):{},yValueCache:[],display:s,id:e,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=l.parameters).symbol&&(o=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),t.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:o},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),"display"in i&&(l.display=i.display),h=this.charts[i.chartName],c=i.symbolObject,o=i.symbol=c.symbol,l.display||(l.display=o||i.field),l.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&void 0===i.gapDisplayStyle&&(i.gapDisplayStyle="transparent"),u=this.getSeries({symbolObject:c,chart:h,includeMaster:!0}),d=i.panel,this.panels[d]?i.yAxis||i.shareYAxis||(i.yAxis=new t.ChartEngine.YAxis({name:e,position:"none"})):((p=i.yAxis||new t.ChartEngine.YAxis).name=e,this.createPanel(e,d,null,null,p),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),h.series[e]=l,g=this,m=this.currentlyImporting,!i.isComparison||!h.forcePercentComparison||i.panel!=h.panel.name||i.yAxis&&i.yAxis!=h.yAxis||this.setChartScale("percent"),(f=h.masterData)||(f=h.masterData=this.masterData=[]),y=f.length,i.data&&!i.data.useDefaultQuoteFeed?C({symbol:o,symbolObject:c,action:i.action})({quotes:i.data}):u.length?(l.endPoints=u[0].endPoints,l.loading=u[0].loading,S(this),a&&setTimeout((function(){O.H5p(),a.call(g,null,l)}),0)):this.quoteDriver&&!1!==i.loadData?(b=(v=this.quoteDriver).makeParams(o,c,h),y&&(b.startDate=f[0].DT,b.endDate=this.isHistoricalMode()?f[f.length-1].DT:new Date),b.stx.isEquationChart(b.symbol)?t.fetchEquationChart(b,C(b)):(x=v.getQuoteFeed(b))&&t.ChartEngine.Driver.fetchData(4,x.engine,b,C(b))):(S(this),null===i.action||u.length||g.dispatch(m?"symbolImport":"symbolChange",{stx:g,symbol:o,symbolObject:c,action:i.action,id:l.id,parameters:i}),a&&a.call(this,null,l)),this.runAppend("addSeries",arguments),l},t.ChartEngine.prototype.getSeries=function(e){var i,a,r,n,s;for(var o in a=(i=e.chart?e.chart:this.chart).series,(r=e.symbolObject)||(r={symbol:e.symbol}),n=[],a)s=a[o],t.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return e.includeMaster&&t.symbolEqual(r,i.symbolObject)&&n.push({}),n},t.ChartEngine.prototype.modifySeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(!this.runPrepend("modifySeries",arguments)&&i&&("string"==typeof e?(n=e,r=(s=i.chartName?this.charts[i.chartName]:this.chart).series[n]):(n=(r=e).id,s=this.charts[r.parameters.chartName]),r)){for(var b in t.extend(r.parameters,i,!0),this.getRendererFromSeries(n).modifyRenderer(i),o=r.parameters,O.H5p(),s.seriesRenderers){c=(h=s.seriesRenderers[b]).params,u=h.seriesParams;for(var x=0;x<u.length;++x)if(d=u[x],g=(p=this.panels[d.panel])&&p.yAxis.name,d.id===r.id){m="pe",m+="r",m+="cen",m+="t",!0===o.panel&&(o.panel=o.dependentOf||o.name),c.panel=o.panel,i.yAxis&&(i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),c.yAxis=i.yAxis),o.panel!=d.panel&&c.name==g?this.electNewPanelOwner(d.panel):(f=this.getYAxisByName(o.panel,c.name))&&o.yAxis&&f.name!==o.yAxis.name&&(f.name=this.electNewYAxisOwner(f)),o.field||(o.field=null),h.attachSeries(n,t.ensureDefaults(o,d)),o.field||(o.field=o.subField),delete o.subField,!o.isComparison||!s.forcePercentComparison||o.panel!=s.panel.name||r.parameters.yAxis&&o.yAxis.name!=s.yAxis.name||this.setChartScale(m),l=h;break}}if(t.getFn("Drawing.updateSource")(this,r.parameters.symbol||n,null,r.parameters.panel),this.runAppend("modifySeries",arguments),!0!==a){y=l.getDependents(this);for(var S=0;S<y.length;S++)this.modifySeries(y[S].params.name,{panel:l.params.panel,yAxis:r.parameters.yAxis},!0);(v=s.seriesRenderers[l.params.dependentOf])&&(v.params.yAxis==r.parameters.yAxis&&v.params.panel==l.params.panel||this.modifySeries(l.params.dependentOf,{panel:l.params.panel,yAxis:r.parameters.yAxis},!0))}return this.draw(),r}},t.ChartEngine.prototype.deleteSeries=function(e,t,i){var a,r,n,s,o,l,h,c;a="symbolI",a+="mport",this.runPrepend("deleteSeries",arguments)||(r=(i=i||{}).action?i.action:"remove-series",O.H5p(),"object"==typeof e?(n=e.id,t=t||this.charts[e.parameters.chartName]):(n=e,t=t||this.chart),(s=t.series[n])&&(o=s.parameters.loadData,l=s.parameters.symbolObject,delete t.series[n],this.layout.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0}),h=this.getSeries({symbolObject:l,includeMaster:!0}),!1===o||h.length||this.cleanMasterData(l,t),(c=this.panels[s.parameters.panel])&&this.checkForEmptyPanel(c),this.createDataSet(),h.length||this.dispatch(this.currentlyImporting?a:"symbolChange",{stx:this,symbol:l.symbol,symbolObject:l,id:n,action:r}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},t.ChartEngine.prototype.removeSeries=function(e,t){var i,a,r,n,s,o;if(!this.runPrepend("removeSeries",arguments)){for(var l in a=!1,"object"==typeof e?(i=e.id,t=t||this.charts[e.parameters.chartName]):(i=e,t=t||this.chart),t.seriesRenderers){r=t.seriesRenderers[l],s=(n=this.panels[r.params.panel])&&n.yAxis.name;for(var h=r.seriesParams.length-1;h>=0;h--)r.seriesParams[h].id===i&&(r.removeSeries(i),r.seriesParams.length<1&&(this.removeSeriesRenderer(r),r.params.name==s?this.electNewPanelOwner(r.params.panel):this.checkForEmptyPanel(r.params.panel)||(o=this.getYAxisByName(n,r.params.name))&&(o.name=o.studies[0]||o.renderers[1])),a=!0)}a||this.deleteSeries(i,t),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},t.Comparison=t.Comparison||function(){},t.Comparison.initialPrice=100,t.Comparison.getInitialPrice=function(e){var i,a,r;if("s","tr","ing",e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,O.s0Y(),"number"==typeof(i=t.Comparison.initialPrice)&&(e.initialComparisonPrice=i),"string"==typeof i&&(e.series[i]||""===i)){a="Cl",a+="os",a+="e",e.defaultPlotField&&(e.highLowBars||(a=e.defaultPlotField));for(var n=e.dataSet.length-e.scroll-1;n<e.dataSet.length;n++)if(r=e.dataSet[n]){if(r[i]&&r[i][a]){e.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){e.initialComparisonPrice=r[a];break}}}return e.initialComparisonPrice},t.Comparison.priceToPercent=function(e,t,i,a,r){var n,s=O;(n=e.comparisonBaseline)&&r in n&&(n=n[r]),n&&"object"==typeof n&&(n=n[t.defaultPlotField||"Close"]),n=n||i,s.u2S(9);var o=s.i6w(600,700);s.u2S(104);var l=s.i6w(14,9982,7,229568,12);s.u2S(34);var h=s.w0n(5,9987,27,9);return Math.round((i-n)/n*o*l)/h},t.Comparison.percentToPrice=function(e,t,i,a,r){var n;return O.s0Y(),(n=e.comparisonBaseline)&&r in n&&(n=n[r]),n&&"object"==typeof n&&(n=n[t.defaultPlotField||"Close"]),n=n||1,O.u2S(105),O.w0n(100,1,i,n)},t.Comparison.priceToRelative=function(e,i,a,r,n){var s,o;return s=e.comparisonBaseline,o=t.Comparison.getInitialPrice(i),s&&n in s&&(s=s[n]),s&&"object"==typeof s&&(s=s[i.defaultPlotField||"Close"]),O.u2S(106),O.s0Y(),O.w0n(o,s||a,a)},t.Comparison.relativeToPrice=function(e,i,a,r,n){var s,o;return s=e.comparisonBaseline,o=t.Comparison.getInitialPrice(i),O.H5p(),s&&n in s&&(s=s[n]),s&&"object"==typeof s&&(s=s[i.defaultPlotField||"Close"]),O.u2S(106),O.w0n(s||1,o,a)},t.Comparison.createComparisonSegmentInner=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A=O;for(r in"L","ow",a=[],i.series)(!(o=i.series[r].parameters).yAxis&&o.shareYAxis||o.yAxis===i.yAxis)&&a.push(o.symbol);for(var M in l=["Close","Open","High","Low","iqPrevClose"],A.s0Y(),h=e.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),A.k8O(2),c=l[A.w0n(0,"0")],u=e.layout.studies)if(d=u[M],n=e.panels[d.panel],s=d.getYAxis(e),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var F=0;F<=2;F++)"_hi","st",l.push(d.name+"_hist"+(F||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var P in e.plugins)if((p=e.plugins[P]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],g=null,A.k8O(107);var L=A.i6w(18,8,13,12,0);m=i.dataSet.length-i.scroll-L,e.startComparisonsAtFirstVisibleBar&&(m+=1),A.k8O(108);var E=A.i6w(17,31,1,19,2);f=i.maxTicks+("3"<<E);for(var I=0;I<=f;I++){if(I==f&&(I=-1),A.k8O(1),(y=A.i6w(I,m))<i.dataSet.length&&y>=0){if(b=(v=i.dataSet[y])[c],!g){if(0===b||null===b){if(I<0)break;continue}g=t.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),g&&g[c]||!b||(g=t.clone(v)),e.comparisonBaseline=g,x=0;x<l.length;x++)((S=v[r=l[x]])||0===S)&&(v.transform[r]=i.transformFunc(e,i,S));for(x=0;x<a.length;x++)if(r=a[x],C=i.series[r],-1==I&&C&&C.parameters.isComparison)delete v.transform[r];else if(w=v[r])for(var N=0;N<l.length;N++)((k=w[l[N]])||0===k)&&((T=g[r]&&g[r][l[0]])||0===T||(g[r]||(g[r]={}),g[r][l[N]]=T=k*g[c]/v[c]),0!==T&&(D=g[c]||1,A.u2S(109),_=A.i6w(D,T,k),v.transform[r]||(v.transform[r]={}),v.transform[r][l[N]]=i.transformFunc(e,i,_)));i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(I<0)break}},t.Comparison.priceFormat=function(e,t,i){var a,r,n=O;if("und","efi","n","ed",n.s0Y(),null==i||isNaN(i))return"";if(a=t.yAxis.priceTick,r=e.internationalizer)a>=5?(n.u2S(18),i=r.percent.format(n.i6w(i,"100"))):a>=.5?(n.k8O(22),i=r.percent1.format(n.i6w(i,0,"100"))):a>=.05?(n.u2S(10),i=r.percent2.format(n.w0n(100,i))):a>=.005?(n.u2S(10),i=r.percent3.format(n.w0n(100,i))):(n.k8O(10),i=r.percent4.format(n.w0n(100,i)));else if(a>=5){n.u2S(16);var s=n.i6w(8,15,1427);n.k8O(16);var o=n.i6w(122,4,12);n.k8O(25);var l=n.i6w(537,2,1034);n.u2S(1);n.w0n(18,9162);n.u2S(16);var h=n.w0n(23,13,9880);i=i.toFixed(0)+(s<705.9?907.61:o==l?"M":!(h<=6700)&&"%")}else if(a>=.5){n.u2S(23);var c=n.w0n(8,27,20);n.k8O(9);var u=n.i6w(7,6033);n.u2S(110);var d=n.w0n(1,1194,1,2369,2388);n.u2S(25);var p=n.w0n(8939,8952,8952);n.k8O(9);n.i6w(37323,41470);n.k8O(111);var g=n.i6w(11,3,10,8264);i=i.toFixed(c)+(u<=d?!(p>=g):"%")}else if(a>=.05){n.k8O(112);var m=n.w0n(7198,7181,20,7193,15);n.k8O(111);var f=n.w0n(9,30743,2,36900);n.k8O(1);n.i6w(2705,301);n.k8O(1);var y=n.w0n(1380,690);i=i.toFixed(2)+(10.93==m?f>8550?y:6314:"%")}else if(a>=.005){n.k8O(4);var v=n.i6w(27,3,21);i=i.toFixed(v)+"%"}else{n.k8O(55);var b=n.w0n(0,26,2,11);n.u2S(25);n.w0n(15,1,49);n.u2S(20);var x=n.i6w(8915,7,53495);n.u2S(104);n.w0n(17,400,8,8550,11);n.k8O(113);var S=n.w0n(7968,3,18,135400);n.k8O(114);var C=n.w0n(2,4,192,380);i=i.toFixed(b)+(x<=445?356.43<=S?"f":C:"%")}return 0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},t.ChartEngine.prototype.setComparison=function(e,i,a){var r,n;if("st","r","i",O.H5p(),"ng",i||(i=this.chart),"string"==typeof i&&(i=this.charts[i]),(a||""===a)&&(t.Comparison.initialPrice=a),!0===e){if(i.isComparison)return;e="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==t.Comparison.priceFormat,e){case"relative":"d","ataSegment",this.setTransform(i,t.Comparison.priceToRelative,t.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":this.setTransform(i,t.Comparison.priceToPercent,t.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=t.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},t.ChartEngine.prototype.setChartScale=function(e){var i,a,r;O.H5p(),i=this.chart,e||(e="linear"),(a={percent:!0,relative:!0})[e]?this.setComparison(e,i,t.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),r=this.layout.chartScale!==e,this.layout.chartScale=e,i.canvas&&this.draw(),r&&this.changeOccurred("layout")}},v=e=>{var t,i,a=O;function r(e){var t;if("te","x","t-an","chor","text","-align","alignment-baselin","e",e.style)for(var i in t=getComputedStyle(e),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){a.s0Y(),!e.style[i]&&t[i]&&(e.style[i]=t[i])})),e.children)r(e.children[i])}function n(e,t,n){var s,o,l,h,c,u,d;if("s","v","g","b","o","d","y","ciq","-no-","s","hare",t||(t={}),[],"ciq-no-share",s=e.container.ownerDocument.querySelector("body"),t.hide&&t.hide instanceof Array){o=t.hide.join(", "),l=s.querySelectorAll(o);for(var p=0;p<l.length;p++)l[p].classList.add("ciq-no-share")}for(s.classList.add("sharing"),e.draw(),h=e.chart.container.getElementsByTagName("svg"),c=[],a.H5p(),u=0;u<h.length;u++)d=h[u],c.push(d.innerHTML),r(d);i(e.chart.container,{allowTaint:!1,logging:!1,width:t.width||null,height:t.height||null,backgroundColor:t.background||null,useCORS:!0}).then((function(e){for(n&&n(null,t.data?e.toDataURL("image/png"):e),u=0;u<h.length;u++)h[u].innerHTML=c[u];s.classList.remove("sharing")})).catch((function(e){for(n&&n(e),u=0;u<h.length;u++)h[u].innerHTML=c[u];s.classList.remove("sharing")}))}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Share=t.Share||function(){},t.Share.fullChart2PNG=function(e,r,s){if(e&&e.chart){if("undefined"==typeof html2canvas)return function(e){var r;if("undefined"!=typeof html2canvas)return i=html2canvas,e();if(r="un",r+="defined",typeof requirejs!==r)try{return requirejs(["html2canvas.min.js"],(function(t){return a.H5p(),i=t,e()}))}catch(e){var n;n="Require loading has failed, attempting to load html2canvas ",n+="manually.",console.warn(n)}t.loadScript(function(){var e,i;if(t.Share.html2canvasLocation)return t.Share.html2canvasLocation;a.H5p(),e=document.getElementsByTagName("script");for(var r=0;r<e.length;r++)if((i=e[r]).src&&i.src.indexOf("share.js")>-1)return i.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return a.s0Y(),i=html2canvas,e()}))}((function(){return n(e,r,s)}));i=html2canvas,n(e,r,s)}},t.Share.createImage=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m;n=[].slice.call(arguments),r=n.pop(),null!==i&&"object"==typeof i||(i={widthPX:n[1],heightPX:n[2],imageType:n[3]}),s=i.widthPX,o=508460876,l=-1848114356,a.u2S(9),h=a.w0n(0,"2"),a.s0Y();for(var f=1;a.u1R(f.toString(),f.toString().length,4151)!==o;f++)c=i.heightPX,h+=2;a.u1R(h.toString(),h.toString().length,58975)!==l&&(c=i.heightPX),c=i.heightPX,u=i.imageType,d=e.chart.canvas.height,p=e.chart.canvas.width,e.chart.canvas.style.height&&(d=t.stripPX(e.chart.canvas.style.height),p=t.stripPX(e.chart.canvas.style.width)),s&&c?(d=c,p=s):c?p=e.chart.canvas.width*(d/e.chart.canvas.height):s&&(p=s,d=e.chart.canvas.height*(s/e.chart.canvas.width)),g=u?"image/"+u:"image/png",(m=document.createElement("img")).onload=function(){t.Share.fullChart2PNG(e,{image:this,width:p,height:d,hide:i.hide},(function(e,t){if(a.H5p(),e)"Err","or produci","ng canvas snapshot",": ",a.u2S(1),console.warn(a.i6w(e,"Error producing canvas snapshot: "));else try{r(t.toDataURL(g))}catch(e){console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),r(m.src)}}))},m.src=e.chart.canvas.toDataURL(g)},t.Share.uploadImage=function(e,i,a,r){a||(a={}),a.image=e,t.postAjax(i,JSON.stringify(a),(function(e,t){200==e?r(null,t):r(e,null)}))||r(0,null)},a.H5p(),t.Share.shareChart=function(e,i,r){t.Share.createImage(e,{},(function(n){var s,o,l,h,c;if(s=t.uniqueID(),o="https://shar",o+="e",o+=".chartiq.",o+="com",a.u2S(15),l=a.w0n(s,o,"/upload/"),i&&(i.host&&(o=i.host),i.path)){a.u2S(9);a.w0n(2,3905);a.u2S(38);var u=a.w0n(1,68,11,15);l=o+i.path+(565.78=="7260"<<u||"/")+s}h=e.getStartDateOffset(),c={id:s,image:n,config:{layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:h,startDate:e.chart.dataSegment[h].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:s,symbol:e.chart.symbol}},t.Share.uploadImage(n,l,c,(function(e,i){null!==e?t.alert("error sharing chart: ",e):(a.k8O(1),r(a.w0n(i,o)))}))}))}},b=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setRange=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N,H,V=O;function R(t){var a,l,c,u,d,p,g,m,f,y,v,b,x,S,C,w;if("un","de",V.H5p(),"fine","d",void 0===t&&(t=null),V.k8O(58),a=V.w0n("0",0),l=0,c=new Date,u=e.base,d=e.periodicity,p=h.layout,e.goIntoFuture&&(!n.masterData.length||s>n.masterData[n.masterData.length-1].DT)&&(g=n.masterData.length?n.masterData.pop():{DT:s},m=h.doCleanupGaps([g,{DT:o}],n,{cleanupGaps:"gap",noCleanupDates:!0}),h.setMasterData(n.masterData.concat(m),n,{noCleanupDates:!0}),h.createDataSet(null,null,{appending:!0})),y=(f=n.dataSet).length,f&&0!==y){if("day"===u&&d&&"day"===d.interval)a=y<(b=e.multiplier)?0:y-b,V.u2S(9),l=V.w0n(1,y);else if("today"===u&&f[y-1].DT.getDate()<c.getDate()){(x=new Date(f[y-1].DT.getTime())).getTime(),v=0;for(var k=y-1;k>=0;k--)if(f[k]&&f[k].DT.getDate()!=x.getDate()){x=new Date(+f[k+1].DT),V.k8O(1),v=V.i6w(1,k);break}a=v,V.u2S(9),l=V.i6w(1,y)}else"al","l",a="all"!=e.base&&(s.getTime()>=f[0].DT.getTime()||e.goIntoPast)?h.tickFromDate(s,n,null,!0):0,"all"!=e.base&&(o.getTime()<=f[y-1].DT.getTime()||e.goIntoFuture)?(l=h.tickFromDate(o,n))>y-1&&l--:(V.k8O(9),l=V.w0n(1,y));if(V.u2S(16),(S=V.w0n(1,a,l))<1)i&&i(t);else{for(var T in C=e.padding||0,l<y-1&&(C=0),w=(n.width-C)/S,h.setCandleWidth(w,n),V.u2S(115),n.scroll=V.i6w("1",S,l,y),V.u2S(2),h.micropixels=V.w0n(1,"1"),h.panels)h.calculateYAxisMargins(h.panels[T].yAxis);e.dontSaveRangeToLayout?delete p.range:(delete e.chart,delete p.setSpan,p.range=e),h.draw(),h.changeOccurred("layout"),r||h.dispatch("periodicity",{stx:h,differentData:M,prevPeriodicity:{interval:D,periodicity:_,timeUnit:A}}),i&&i(t)}}else i&&i(t)}function Y(e){return e&&0===c?(n.scroll=k,h.setCandleWidth(T),h.layout.interval=D,h.layout.periodicity=_,h.layout.timeUnit=A,void(i&&i(e))):++c>10?("CIQ.ChartEngine.setRange(): Too many loads (10) from server",". Stopping. Check periodic","ity logic.",console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void R()):void R()}function z(e,i,a,r,n,s){var o,l;return V.H5p(),o=0,V.u2S(9),l=V.i6w(i,e),t.ChartEngine.isDailyInterval(a)?("wee","k",o="month"==a?l/t.MONTH/r:"week"==a?l/t.WEEK/r:l/t.DAY/r):isNaN(a)||("millisecond"==n?(V.u2S(116),o=V.i6w(r,a,l)):o="second"==n?l/t.SECOND/(r*a):l/t.MINUTE/(r*a)),Math.round(o)}if(a="str",a+="ing",t.isEmpty(e)&&(e={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},i=arguments[4]),this.staticRange&&(e.goIntoPast=e.goIntoFuture=!0),e.chart||(e.chart=this.chart),void 0===e.padding&&(e.padding=0),r=!1,n=e.chart,s=typeof e.dtLeft===a?new Date(e.dtLeft):e.dtLeft,o=new Date,e.dtRight&&(o="string"==typeof e.dtRight?new Date(e.dtRight):e.dtRight),s||(l=this.standardMarketIterator(o,null,n),s=l.previous(n.maxTicks),e.periodicity||(r=!0)),n.inflectionPoint=s,this.layout.range={dtLeft:s,dtRight:o},h=this,c=0,this.quoteDriver){if(r)u=this.layout.interval,p=this.layout.timeUnit,d=this.layout.periodicity;else if(e.periodicity)u=(g=t.cleanPeriodicity(e.periodicity.period,e.periodicity.interval,e.periodicity.timeUnit)).interval,p=g.timeUnit,d=g.period;else if(m=o.getTime()-s.getTime(),this.autoPickCandleWidth.turnOn){b=0,b=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,x=n.width/b,u=(S=this.dynamicRangePeriodicityMap)[0].interval,d=1;for(var B=0;B<S.length;B++){if((w=m/S[B].rangeInMS)<x){S[B-1]?(u=S[B-1].interval,p=S[B-1].timeUnit,V.k8O(10),d=Math.ceil(V.w0n(x,C))):(u=S[B].interval,p=S[B].timeUnit,d=1);break}C=w}}else{f=this.staticRangePeriodicityMap,y=null;for(var j=0;j<f.length;j++)if(m/(v=f[j]).rangeInMS<1.001){y=v;break}u=y.interval,d=y.periodicity,p=y.timeUnit}if(k=this.chart.scroll,T=this.layout.candleWidth,D=this.layout.interval,_=this.layout.periodicity,A=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=z(o.getTime(),s.getTime(),u,d,p,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,M=this.needDifferentData({period:d,interval:u,timeUnit:p}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>s||this.chart.endPoints.end<o)&&(M=!0),!this.chart.masterData||!this.chart.masterData.length||M||e.forceLoad){if(F="mo",F+="nth",this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,!this.layout.timeUnit){P=1667532063,L=-836112702,E=2;for(var $=1;V.r57($.toString(),$.toString().length,3378)!==P;$++)t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit="second":"tick"!=this.layout.interval&&(this.layout.timeUnit="minute"),E+=2;V.r57(E.toString(),E.toString().length,83299)!==L&&(t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=1:("second"!=this.layout.interval||"second"==this.layout.interval)&&(this.layout.timeUnit="second"))}I={symbol:n.symbol,symbolObject:n.symbolObject,chart:n,nodraw:!0},"tick"==this.layout.interval&&(I.startDate=s,I.endDate=o),this.displayInitialized||(I.initializeChart=!0),(N={symbol:n.symbol,symbolObject:n.symbolObject,interval:this.layout.interval}).interval!=F&&"week"!=N.interval||this.dontRoll||(N.interval="day"),H=Math.max(this.quoteDriver.getQuoteFeed(N).behavior.bufferSize+50,200),l=this.standardMarketIterator(s,null,n),I.startDate=new Date(l.previous(H).getTime()),l=this.standardMarketIterator(o,null,n),I.endDate=new Date(l.next(H).getTime()),I.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(I,Y)}else this.layout.interval==u&&this.layout.periodicity==d&&this.layout.timeUnit==p&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==n.inflectionPoint||(this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.createDataSet()),Y()}else R()},t.ChartEngine.prototype.setSpan=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w=O;if(a="w",a+="e",a+="e",a+="k",r="m",r+="o",r+="n",r+="th",w.k8O(2),n=arguments[w.i6w(0,"0")],w.u2S(27),s=arguments[w.w0n("1",96)],o=arguments[2],l=arguments[3],"object"==typeof e?(n=e.period?e.period:e.multiplier?e.multiplier:1,s=e.interval?e.interval:e.base?e.base:e.span?e.span:e.period,o=e.padding,l=e.chart):(e={period:n,interval:s,padding:o,chart:l},i=arguments[5]),l||(l=this.chart),h=l.market,"all"==(s=s.toLowerCase()))return e.dontSaveRangeToLayout=!0,void this.displayAll(e,i);function k(e){return w.H5p(),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function T(e,t){var i;if(w.s0Y(),!f)return e;t?e.setHours(e.getHours()+7):(e.setHours(e.getHours()-7),h.isMarketDate(e)||e.setDate(e.getDate()-2)),w.u2S(9),i=-w.w0n(0,"1706100777");for(var a=1;w.r57(a.toString(),a.toString().length,19800)!==i;a++)return e;return-443452315!==w.u1R(2..toString(),2..toString().length,87811)?e:void 0}w.s0Y(),u=s,d=1,"today"==s?u="day":"year"==s&&(u="month",d=12),p=t.shallowClone(e),m=(g={begin:h.marketZoneNow(),interval:u,period:d}).begin,f=t.Market.Symbology.isForexSymbol(l.symbol),"ytd"===s?((m=k(m)).setMonth(0),m.setDate(1)):s===r?(m=k(new Date)).setMonth(m.getMonth()-n):"year"===s?(m=k(new Date)).setFullYear(m.getFullYear()-n):s===a?(m=k(new Date)).setDate(m.getDate()-7*n):"day"===s&&1==n&&h.isMarketDay()?(y=m.getHours(),v=m.getMinutes(),b=m.getSeconds(),x=m.getMilliseconds(),(m=(c=h.newIterator(g)).previous()).setHours(y,v,b,x),m=h._convertFromMarketTZ(m)):"today"===s?(g.begin=T(m,!0),c=h.newIterator(g),(h.isOpen()||h.getPreviousOpen().getDate()==m.getDate())&&c.next(),T(m=c.previous()),p.goIntoFuture=!0,p.dtRight=new Date(+m),p.dtRight.setDate(m.getDate()+1),p.dtRight=h._convertFromMarketTZ(p.dtRight),f||(m.setHours(c.market.zopen_hour),m.setMinutes(c.market.zopen_minute),m.setSeconds(0)),m=h._convertFromMarketTZ(m)):(S="d",S+="a",s==(S+="y")&&(g.begin=T(m,!0)),c=h.newIterator(g),1==n&&n++,w.k8O(9),m=c.previous(w.w0n(1,n)),"day"==s&&(m=h._convertFromMarketTZ(T(m)))),p.dtLeft=m,p.maintainPeriodicity&&(p.periodicity={},p.periodicity.interval=this.layout.interval,p.periodicity.period=this.layout.periodicity),l.spanLock=!1,p.dontSaveRangeToLayout=!0,C=this,this.setRange(p,(function(t){C.layout.setSpan=e,C.changeOccurred("layout"),"today"==s&&(l.spanLock=!0),i&&i(t)}))},t.ChartEngine.prototype.getSpanCandleWidth=function(e){var t,i,a,r,n,s=O;if("Y","T","D",e&&e.base&&e.multiplier){t=parseFloat(e.multiplier),i=e.base,a=new Date,r=new Date,"year"==i?r.setFullYear(r.getFullYear()-t):"month"==i?r.setMonth(r.getMonth()-t):"day"==i?r.setDate(r.getDate()-t):"week"==i?r.setDate(r.getDate()-7*t):"YTD"==i&&(r.setMonth(0),r.setDate(1)),s.k8O(117);var o=s.i6w(500,6,19,1095,500);s.H5p(),s.k8O(1);var l=s.i6w(30,30);s.k8O(4);var h=s.i6w(300,11,229);return n=(a.getTime()-r.getTime())/o/l/h/24,s.k8O(106),n=s.i6w(n,7,5),this.chart.width/n}},t.ChartEngine.prototype.displayAll=function(e,i){var a,r,n,{chart:s,layout:o}=this;function l(e){e||a.quoteDriver.loadAll(s,h)}function h(){var r;s.masterData&&s.masterData.length&&((r=t.clone(e)).dtLeft=s.endPoints.begin,r.dtRight=s.endPoints.end,r.periodicity={},r.periodicity.interval=o.interval,r.periodicity.period=o.periodicity,r.periodicity.timeUnit=o.timeUnit,a.setRange(r,(function(t){var r;for(var n in a.layout.setSpan={base:e.base,multiplier:e.multiplier},a.changeOccurred("layout"),a.panels)a.calculateYAxisMargins(a.panels[n].yAxis);r=2;for(var s=1;-1302464357!==O.u1R(s.toString(),s.toString().length,522);s++)a.draw(),r+=2;-795028584!==O.r57(r.toString(),r.toString().length,98412)&&a.draw(),i&&i(t)})))}e&&e.chart&&(s=e.chart),a=this,this.quoteDriver?(r=e.maintainPeriodicity?{period:o.periodicity,interval:o.interval,timeUnit:o.timeUnit}:{period:1,interval:"month",timeUnit:null},r=e.periodicity?e.periodicity:r,r=t.cleanPeriodicity(r.period,r.interval,r.timeUnit),O.s0Y(),n=this.needDifferentData(r),this.layout.periodicity=r.period,this.layout.interval=r.interval,this.layout.timeUnit=r.timeUnit,e.forceLoad||n?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({nodraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},l)):s.moreAvailable||!s.upToDate?l():(this.createDataSet(),h())):h()}},x=e=>{var t,i=O;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.s0Y(),t.ChartEngine.prototype.importLayout=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V;if(e){for(var R in r=this,n=[],"object"!=typeof a&&(a={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),s=this.layout,o=t.shallowClone(s),l=a.managePeriodicity,h=a.cb,c=a.seriesCB,u=a.noDataLoad,d=a.preserveTicksAndCandleWidth,p=null,this.exportDrawings&&(p=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,s.studies)g="Studies.r",g+="e",g+="moveStu",g+="dy",m=s.studies[R],t.getFn(g)(this,m);for(b in this.overlays={},f=t.shallowClone(this.panels),this.panels={},y=t.clone(e),s.periodicity=o.periodicity,s.interval=o.interval,s.timeUnit=o.timeUnit,s.setSpan=o.setSpan,s.range=o.range,d?s.candleWidth=o.candleWidth:s.candleWidth||(s.candleWidth=8),this.setCandleWidth(s.candleWidth),s.flipped&&this.flipChart(s.flipped),C=function(e,t){return e.index<t.index?-1:1},v=y.panels)"index"in v[b]||(C=null),(x=v[b]).name=b,n.push(x);if(s.panels={},w=null,n.length>0){k=1500777738,T=-913995033,D=2;for(var Y=1;i.u1R(Y.toString(),Y.toString().length,85852)!==k;Y++)C&&n.sort(C),D+=2;i.u1R(D.toString(),D.toString().length,92231)!==T&&C&&n.sort(C);for(var z=0;z<n.length;++z)S=(x=n[z]).yAxis?new t.ChartEngine.YAxis(x.yAxis):null,this.stackPanel(x.display,x.name,x.percent,x.chartName,S),x.soloing&&(w=this.panels[x.name])}for(var B in t.isEmpty(v)&&this.stackPanel("chart","chart",1,"chart"),this.resizeCanvas(),f)if(_=f[B],A=this.panels[B]){for(var j in this.container.removeChild(A.holder),_.handle&&this.container.removeChild(_.handle),{holder:!0,subholder:!0,display:!0,icons:!0})A[j]=_[j];this.configurePanelControls(A),_.chart.panel==_&&(_.chart.panel=A)}else this.privateDeletePanel(_);for(var $ in this.chart.panel=this.panels.chart,W(this.panels),t.extend(s,t.clone(y)),M=t.clone(s.studies),delete s.studies,M)F=M[$],(P=t.getFn("Studies.addStudy")(this,F.type,F.inputs,F.outputs,F.parameters,F.panel)).disabled=F.disabled,F.signalData&&(P.signalData=F.signalData,L=this.panels[P.panel],this.checkForEmptyPanel(L,!0,P)&&(L.hidden=!0,L.percent=0));if(this.extendedHours&&this.extendedHours.prepare(s.extended,s.marketSessions),void 0===s.chartType&&(s.chartType="line"),this.setMainSeriesRenderer(),w&&this.panelSolo(w),this.adjustPanelPositions(),W(this.panels),this.storePanels(),!u){if(y.symbols&&y.symbols.length)return O={chart:this.chart},!d&&l&&y.range&&Object.keys(y.range).length?O.range=y.range:!d&&l&&y.setSpan&&Object.keys(y.setSpan).length?O.span=y.setSpan:l&&y.interval?O.periodicity={interval:y.interval,period:y.periodicity,timeUnit:y.timeUnit}:O.periodicity={interval:o.interval,period:o.periodicity,timeUnit:o.timeUnit},E=y.symbols[0].symbolObject||y.symbols[0].symbol,void this.loadChart(E,O,(function(e){var i;if(!e){for(var a,n=1;n<y.symbols.length&&r.addSeries;++n)(a=y.symbols[n]).parameters||(a.parameters={}),i=t.clone(a.parameters),this.panels[i.panel]?r.addSeries(a.id,i,X):console.warn('Warning: Series "'+a.id+'" could not be imported due to a missing corresponding panel "'+i.panel+'"');y.chartScale&&r.setChartScale(y.chartScale)}U(e),h&&h.apply(null,arguments)}));if(l){if(!d&&this.setRange){if((I=y.range)&&Object.keys(I).length&&this.chart.symbol)return void this.setRange(I,(function(){U(),h&&h()}));if(y.setSpan&&Object.keys(y.setSpan).length&&this.chart.symbol)return void this.setSpan(y.setSpan,(function(){i.H5p(),U(),h&&h()}))}return N=y.interval,H=y.periodicity,V=y.timeUnit,isNaN(H)&&(H=1),N||(N="day"),void this.setPeriodicity({period:H,interval:N,timeUnit:V},(function(){U(),h&&h()}))}}l&&(s.periodicity=y.periodicity,s.interval=y.interval,s.timeUnit=y.timeUnit,s.setSpan=y.setSpan),this.createDataSet(),d||this.home(),U(),h&&h()}else a.cb&&a.cb();function X(){r.calculateYAxisPositions(),i.s0Y(),W(r.panels),c&&c()}function W(e){var t;i.s0Y();for(var a=0;a<n.length;a++)o(t=n[a],"yaxisLHS"),o(t,"yaxisRHS");function s(e){return!!e}function o(t,i){var a,r,n,o;if(t[i]&&t[i].length&&(a=e[t.name])){r=a[i],n=new Array(r.length);for(var l=0;l<r.length;l++)(o=t[i].indexOf(r[l].name))>-1?n[o]=r[l]:n.push(r[l]);n.length&&(a[i]=n.filter(s))}}r.chart.yAxis=r.chart.panel.yAxis}function U(e){var t,a,n;function s(){r.createDataSet(),W(r.panels),r.calculateYAxisPositions(),r.draw()}if("l","ay",i.s0Y(),"ou","t",p&&r.importDrawings(p),r.currentlyImporting=!1,!e){for(var o in n=[],r.chart.series){if("s","tudy",!r.removeSeries)break;"study"==(a=r.chart.series[o]).parameters.bucket&&(t=!0,r.removeSeries(a),n.push(a))}for(var l=0;l<n.length;l++)a=n[l],r.addSeries(a.id,a.parameters,s);t||r.draw(),r.updateListeners("layout"),r.changeOccurred("layout")}}},t.ChartEngine.prototype.exportLayout=function(e){var i,a,r,n,s,o;for(var l in i={},this.layout)"s","tudie","s","studies"!=l&&"panels"!=l&&"drawing"!=l?i[l]=t.clone(this.layout[l]):"studies"==l?i.studies={}:"panels"==l&&(i.panels={});for(var h in a=0,this.panels)!1!==(r=this.panels[h]).exportable&&((n=i.panels[h]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=c(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=c(r.yaxisRHS)));function c(e){var t;t=[];for(var i=0;i<e.length;i++)t.push(e[i].name);return t}for(var u in this.layout.studies)s=i.studies[u]={},o=this.layout.studies[u],s.type=o.type,s.inputs=t.clone(o.inputs),s.outputs=t.clone(o.outputs),s.panel=o.panel,s.parameters=t.clone(o.parameters),s.disabled=o.disabled,o.signalData&&(o.signalData.cloneForExport?s.signalData=o.signalData.cloneForExport():s.signalData=t.clone(o.signalData));return e?(i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}),i.symbols.length&&i.symbols[0].symbolObject&&i.symbols[0].symbolObject.static&&delete i.symbols[0].symbolObject.static):delete i.symbols,i},t.ChartEngine.prototype.importPreferences=function(e){i.H5p(),t.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),e.language&&t.I18N&&t.I18N.localize(this,e.language),this.changeOccurred("preferences")},t.ChartEngine.prototype.exportPreferences=function(){return i.H5p(),this.preferences}},S=e=>{var t,i,a=O;a.H5p(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine&&(t.ChartEngine.prototype.rightClickOverlay=function(e,t){var i,a;i="rightClickOverl",i+="ay",this.runPrepend("rightClickOverlay",arguments)||((a=this.overlays[e]).editFunction?a.editFunction(t):this.removeOverlay(e),this.runAppend(i,arguments))},t.ChartEngine.prototype.addOverlay=function(e){this.runPrepend("addOverlay",arguments)||(this.overlays[e.name]=e,this.runAppend("addOverlay",arguments))},t.ChartEngine.prototype.removeOverlay=function(e){var i,a,r;if(!this.runPrepend("removeOverlay",arguments)){if(i=this.overlays[e]){for(var n in this.overlays){a=this.overlays[n],r=["Field"],t.Studies&&(r=t.Studies.getFieldInputs(a));for(var s=0;s<r.length;s++)i.outputMap[a.inputs[r[s]]]&&this.removeOverlay(a.name)}this.cleanupRemovedStudy(i),this.panels[i.panel],delete this.overlays[e],this.checkForEmptyPanel(i.panel)}this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},t.ChartEngine.prototype.cleanupRemovedStudy=function(e){if(a.s0Y(),e){for(var i in e.study.removeFN&&e.study.removeFN(this,e),this.plugins)i.indexOf("{"+e.id+"}")>-1&&delete this.plugins[i];e.removeSignals&&e.removeSignals(),this.layout.studies&&delete this.layout.studies[e.name],this.chart.state.studies.sorted=null,delete this.overlays[e.name];var{sd:r}=this.repositioningAnchorSelector||{};if(r&&r===e){this.repositioningAnchorSelector=null;var{anchorHandles:n}=this.controls;n&&n[e.uniqueId]&&(n[e.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(this,e,this.chart.dataSegment))}t.Studies&&t.Studies.removeStudySymbols(e,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),t.Studies=t.Studies||function(){},t.Studies.DEFAULT_INPUTS={Period:14},t.Studies.DEFAULT_OUTPUTS={Result:"auto"},t.Studies.impliedVolatilityAvailable=!1,t.Studies.sortForProcessing=e=>{var t,i;return t=[],(i=e.layout.studies)&&function t(i,r){i.forEach((i=>{var n;a.s0Y(),-1==r.indexOf(i)&&((n=i.getDependents(e)).length&&t(n,r),r.unshift(i))}))}(Object.values(i),t),t},t.Studies.StudyDescriptor=function(e,i,r,n,s,o){var l;this.name=e,this.disabled=!1,this.type=i,a.s0Y(),this.panel=r,this.inputs=n,this.outputs=s,this.parameters=o,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",(l=t.Studies.studyLibrary[i])||("ch","art",l={},("chart"==r||!r&&o&&"chart"==o.chartName)&&(this.overlay=!0)),void 0===l.inputs&&(l.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===l.outputs&&(l.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),this.study=l,this.libraryEntry=l},t.Studies.StudyDescriptor.prototype.toggleDisabledState=function(e){var{disabled:t,study:i,signalData:r}=this;this.disabled=t=!t,t||(this.startFrom=0,this.error=null,i&&i.calculateFN&&i.calculateFN(e,this),this.flagSignals&&this.flagSignals(),e.draw()),a.H5p(),r&&r[t?"hide":"show"]()},t.Studies.StudyDescriptor.prototype.getYAxis=function(e){var t,i,a;return t=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),t||(a=e.panels[this.panel])&&(t=e.getYAxisByName(a,i)||e.getYAxisByName(a,this.name)||a.yAxis),t||(t=e.getYAxisByName(e.chart.panel,i)||e.chart.panel.yAxis),t},t.Studies.StudyDescriptor.prototype.getContext=function(e){return e.chart.context},t.Studies.StudyDescriptor.prototype.getDependents=function(e,i){var a,r,n;for(var s in a=[],e.layout.studies)if((r=e.layout.studies[s])!=this){n=t.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(e,i));break}}return a},t.Studies.StudyDescriptor.prototype.undraggable=function(e){var t;if(this.signalData)return!0;if(t=this.study.attributes,a.s0Y(),t){if(t.panelName&&t.panelName.hidden)return!0;if(t.yaxisDisplayValue&&t.yaxisDisplayValue.hidden)return!0}return!1},t.Studies.StudyDescriptor.prototype.appendFutureTicks=function(e,t){var i,a,r,n;if((i=e.chart.scrubbed).length){for(a=e.standardMarketIterator(i[i.length-1].DT),r=t.length-1;r>=0;r--){for(var s in n=t[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;t.pop()}for(r=0;r<t.length;r++)(n=t[r]).DT||(n.DT=a.next()),n.displayDate||e.setDisplayDate(n),n.futureTick=!0,i.push(n)}},t.Studies.generateID=function(e,i,r,n,s){var o,l,h,c,u,d;if(o=t.Studies.studyLibrary[i],a.k8O(15),l=a.w0n("‌","‌",s||i),o&&o.customRemoval)return l;if(!t.isEmpty(r)){for(var p in h=!0,r)c="d",["id",c+="isplay","Shading","Anchor Selector"].includes(p)||"field"!=(u=r[p])&&(u=u.toString(),void 0!==t.Studies.prettify[u]&&(u=t.Studies.prettify[u]),h?(h=!1,l+=" ("):u&&(l+=","),l+=u);h||(l+=")")}if(n&&0===n.indexOf(l))return n;if(e.layout.studies&&e.layout.studies[l])for(var g=2;g<50;g++)if(a.u2S(15),d=a.i6w(g,l,"-"),!e.layout.studies[d]){l=d;break}return l},t.Studies.DialogHelper=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P;function L(e){var t,r,n;a.s0Y(),t={},r=e.defaults,n={name:e.name,heading:i.translateIf(e.label),defaultValue:r[0],value:e.value,options:t,type:"select"};for(var s=0;s<r.length;s++)t[r[s]]=i.translateIf(r[s]);return void 0!==e.color&&(n.defaultColor=i.defaultColor,n.color=e.color),n}function O(e){var t;if("alias"==A)for(var a in t=1,i.panels){if(a==e)return a,"Panel "+t.toString();t++}return e}function E(e){var t;return"ch","eck","box",t={name:e.name,heading:i.translateIf(e.label),defaultValue:e.defaults,value:e.value,type:"checkbox"},a.s0Y(),t}for(var I in i=this.stx=e.stx,r=this.sd=e.sd,this.name=r?r.type:e.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(n=this.libraryEntry=r?r.study:t.Studies.studyLibrary[e.name]).inputs&&(n.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===n.outputs&&(n.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),o=(s=r&&i.panels[r.panel]?i.panels[r.panel]:i.chart.panel).chart,this.title=i.translateIf(n.name),this.attributes=t.clone(n.attributes),this.attributes||(this.attributes={}),this.attributes)for(var N in l=this.attributes[I])"fu","n","c","tion","function"==typeof l[N]&&(l[N]=l[N].call(r));for(var H in h=[],c=i.layout.studies,u=[],r&&(u=Array.prototype.concat(r,r.getDependents(i))),c)if(!(c[H].signalData||u.indexOf(c[H])>-1))for(var V in c[H].outputMap)h.push(V);for(var R in n.inputs)if("u","nd","efined",d={},this.inputs.push(d),d.name=R,d.heading=i.translateIf(R),p=n.inputs[R],r&&r.inputs&&void 0!==r.inputs[R]&&null!==r.inputs[R]?d.value=r.inputs[R]:d.value=n.inputs[R],d.defaultInput=n.inputs[R],this.attributes[R]||(this.attributes[R]=t.Studies.inputAttributeDefaultGenerator(d.defaultInput)),p.constructor==Number)"nu","mber",d.type="number";else if(p.constructor==String)if(g=t.Studies.movingAverageHelper(i,d.defaultInput))d.type="select",d.defaultInput=g,(m=t.Studies.movingAverageHelper(i,d.value))||(m=d.value),d.value=m,d.options=t.Studies.movingAverageHelper(i,"options");else if("field"==p){"fi","e","l","d",f="ohl",f+="c/4",y="h",y+="l",y+="/",y+="2",v="Ope",v+="n",d.type="select",d.options={},b=[v,"High","Low","Close","Adj_Close",y,"hlc/3","hlcc/4",f,o.defaultPlotField].concat(h);for(var Y=0;Y<b.length;Y++)x=b[Y],d.options[x]=i.translateIf(x);"field"==d.value&&(d.value="Close"),"field"==d.defaultInput&&(d.defaultInput="Close")}else d.type="text","yyyy-mm-dd"==this.attributes[R].placeholder?d.type="date":"hh:mm:ss"==this.attributes[R].placeholder&&(d.type="time");else if(p.constructor==Boolean)"t","r","ue","ch","eck","box",d.type="checkbox",!0!==d.value&&"true"!=d.value&&"on"!=d.value||(d.value=!0);else if(p.constructor==Array){d.type="select",d.options={};for(var z=0;z<p.length;z++)d.options[p[z]]=i.translateIf(p[z]);d.value.constructor==Array&&(d.value=d.value[0]),this.attributes[R].defaultSelected?d.defaultInput=this.attributes[R].defaultSelected:d.defaultInput=p[0]}this.dateTimeInputs=[];for(var B=0;B<this.inputs.length;B++)if("date"==(S=this.inputs[B]).type){C=S.name.substring(0,S.name.indexOf(" Date"));for(var j=0;j<this.inputs.length;j++)if("ti","m","e","time"==(w=this.inputs[j]).type&&(" Ti","m","e",w.name==C+" Time")){this.dateTimeInputs.push(C);break}}for(R in this.adjustInputTimesForDisplayZone(),n.outputs)(k={name:R,heading:i.translateIf(R)}).color=k.defaultOutput=n.outputs[R],r&&r.outputs&&r.outputs[R]&&(k.color=r.outputs[R]),"auto"==k.color&&(k.color=i.defaultColor),this.outputs.push(k);if(T=r?r.parameters:null,n.parameters&&(D=n.parameters.init)&&(void 0!==D.studyOverZonesEnabled&&("Show Zo","nes",_={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:D.studyOverZonesEnabled,value:D.studyOverZonesEnabled},T&&(T.studyOverZonesEnabled||!1===T.studyOverZonesEnabled)&&(_.value=T.studyOverZonesEnabled),_.type="checkbox",this.parameters.push(_)),void 0!==D.studyOverBoughtValue&&("OverB","o","u","ght","studyO","verBought",_={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:D.studyOverBoughtValue,value:D.studyOverBoughtValue,defaultColor:D.studyOverBoughtColor,color:D.studyOverBoughtColor},T&&T.studyOverBoughtValue&&(_.value=T.studyOverBoughtValue),T&&T.studyOverBoughtColor&&(_.color=T.studyOverBoughtColor),"auto"==_.color&&(_.color=i.defaultColor),_.type="text",this.parameters.push(_)),void 0!==D.studyOverSoldValue&&(_={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:D.studyOverSoldValue,value:D.studyOverSoldValue,defaultColor:D.studyOverSoldColor,color:D.studyOverSoldColor},T&&T.studyOverSoldValue&&(_.value=T.studyOverSoldValue),T&&T.studyOverSoldColor&&(_.color=T.studyOverSoldColor),"auto"==_.color&&(_.color=i.defaultColor),_.type="text",this.parameters.push(_)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})),A=this.panelSelect=e.panelSelect,M=this.axisSelect=e.axisSelect,e.addWhenDone&&(M=A=!1),M||A){"flippedE","n","abled",r||(r=t.Studies.addStudy(i,e.name,null,null,{calculateOnly:!0}),t.Studies.removeStudy(i,r)),A&&this.parameters.push(L({label:"Panel",name:"panelName",defaults:function(){var e;for(var t in"N","ew"," ","panel",(e=[]).push("Auto"),i.panels)t==r.panel&&T&&T.panelName||i.panels[t].noDrag||e.push(O(t));return i.checkForEmptyPanel(r.panel,!0,r)||e.push("New panel"),e}(),value:T&&T.panelName?O(T.panelName):"Auto"}),E({label:"Show as Underlay",name:"underlay",defaults:!1,value:r.underlay||r.parameters&&r.parameters.underlayEnabled})),-1658740161,1321873470,F=2;for(var $=1;-1658740161!==a.u1R($.toString(),$.toString().length,49681);$++)P=i.getYAxisByName(s,r.name),F+=2;1321873470!==a.r57(F.toString(),F.toString().length,93123)&&(P=i.getYAxisByName(s,r.name)),P=i.getYAxisByName(s,r.name),M&&("fl","ip","pe","d",this.parameters.push(L({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var e,t;e=s.yaxisLHS.concat(s.yaxisRHS),(t=[]).push("default","right","left","none","shared"),a.s0Y();for(var i=0;i<e.length;i++)e[i]!=P&&t.push(e[i].name);return t}(),value:T&&T.yaxisDisplayValue||P&&P.position||(P?"default":"shared"),color:P&&P.textStyle?P.textStyle:"auto"}),E({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:T&&void 0!==T.flippedEnabled?T.flippedEnabled:!!P&&P.flipped}))),X.call(this,"flippedEnabled",!P&&r.panel!=r.name),X.call(this,"underlayEnabled",n.underlay),X.call(this,"panelName",null===n.seriesFN),X.call(this,"yaxisDisplayValue",null===n.seriesFN||n.yAxis&&n.yAxis.noDraw)}function X(e,t){var i;i=this,a.s0Y(),i.attributes[e]||(i.attributes[e]={}),t&&(i.attributes[e].hidden=!0)}},t.Studies.DialogHelper.prototype.updateStudy=function(e){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=t.clone(a.inputs),i.outputs=t.clone(a.outputs),i.parameters=t.clone(a.parameters),this.adjustInputTimesForDisplayZone(e),e.parameters&&e.parameters.panelName&&(e.parameters.panelName=function(e){var t,i;function a(e){var t;return(t=e.match(/.{0,50} (\d)/))&&t[1]}if("alias"==(t=this).panelSelect&&(i=a(e)))for(var r in t.stx.panels)if(!--i)return r;return e}.call(this,e.parameters.panelName)),t.extend(i,e),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?t.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):t.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new t.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"sign","a","l","signal"!=s&&(this[s]=n[s]);this.signal*=-1},t.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(e){var i,r,n,s,o,l,h,c;if(a.s0Y(),this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],l="",e&&e.inputs&&(a.u2S(1),n=e.inputs[a.i6w(" Date",i)],a.u2S(1),n&&(l=n),(s=e.inputs[a.i6w(" Time",i)])&&(l+=s)),r=0;r<this.inputs.length;r++)o=this.inputs[r],n||""===n||o.name!=i+" Date"?s||""===s||o.name!=i+" Time"||(l+=o.value):l=o.value+l;if((l=l.replace(/\D/g,"")).length<12)return;if(h=t.strToDateTime(l),!isNaN(h.valueOf()))if(e)e.inputs||(e.inputs={}),c=t.convertTimeZone(h,this.stx.displayZone),a.u2S(1),e.inputs[a.i6w(" Date",i)]=t.yyyymmdd(c),a.k8O(1),e.inputs[a.i6w(" Time",i)]=t.hhmmss(c);else for(c=t.convertTimeZone(h,null,this.stx.displayZone),r=0;r<this.inputs.length;r++)" ","D","ate",(o=this.inputs[r]).name==i+" Date"&&(o.value=t.yyyymmdd(c)),o.name==i+" Time"&&(o.value=t.hhmmss(c))}},t.Studies.prepareStudy=function(e,i,r){if("un","defined",void 0===i.calculateFN&&(i.useRawValues=!0),a.s0Y(),t.isEmpty(r.outputMap))for(var n in r.outputs)if(i.useRawValues)r.outputMap[n]=n;else{a.k8O(20);var s=a.w0n(5957,8,41702);a.k8O(16);var o=a.w0n(8234,11,1371);a.k8O(7);a.i6w(27276,1,18184);a.u2S(118);var l=a.i6w(7,1057,5,2106);r.outputMap[n+(s>o?l:" ")+r.name]=n}},t.Studies.rejiggerDerivedStudies=function(e,i,r){var n,s,o,l,h,c;a.H5p(),n=i.name,i.panel,s=i.getDependents(e);for(var u=0;u<s.length;u++)if(o=s[u],h=(l=t.clone(o.inputs)).id){!1,c=t.Studies.getFieldInputs(o);for(var d=0;d<c.length;d++)l[c[d]]=l[c[d]].replace(n,r);delete t.Studies.replaceStudy(e,h,o.type,l,o.outputs,t.extend(o.parameters,{rejiggering:!0}),null,o.study).parameters.rejiggering}},t.Studies.removeStudySymbols=function(e,t){if(a.s0Y(),e.series)for(var i in e.series)t.deleteSeries(e.series[i],null,{action:"remove-study"})},t.Studies.replaceStudy=function(e,i,r,n,s,o,l,h){var c,u,d,p;for(d in o||(o={}),a.s0Y(),i&&(o.replaceID=i),i=o.replaceID,c=e.layout.studies[i],t.Studies.removeStudySymbols(c,e),c.attribution&&e.removeFromHolder(c.attribution.marker),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),n&&(n.id==n.display&&delete n.display,delete n.id),(u=t.Studies.addStudy(e,r,n,s,o,l,h)).highlight=c.highlight,u.uniqueId=c.uniqueId,c.signalData&&(u.signalData=c.signalData,u.signalData.updateConditions&&u.signalData.updateConditions(i,u.inputs.id)),p={},e.layout.studies)d==i?p[u.name]=u:p[d]=e.layout.studies[d];for(d in e.layout.studies=p,p={},e.overlays)d==i?(u.overlay||u.underlay)&&(p[u.name]=u):p[d]=e.overlays[d];return e.overlays=p,e.overlays[u.name]||!u.overlay&&!u.underlay||e.addOverlay(u),e.checkForEmptyPanel(c.panel),o.rejiggering||(e.initializeDisplay(e.chart),t.Studies.rejiggerDerivedStudies(e,c,u.inputs.id,u.panel)),t.transferObject(c,u),e.layout.studies[u.name]=c,e.overlays[u.name]=c,e.chart.state.studies.sorted=null,o.rejiggering||("l","a","you","t",e.changeOccurred("layout"),c.currentlyImporting||o.calculateOnly||!c.chart.dataSet||e.createDataSet(null,c.chart),e.draw()),c},t.Studies.addStudy=function(e,i,r,n,s,o,l){var h,c,u,d,p,g,m,f,y,v,b,x;if("c","ha","r","t",s||(s={}),h=l||t.Studies.studyLibrary[i]){if(h.inputs){for(var S in c=t.clone(h.inputs))c[S]instanceof Array&&(h.attributes&&h.attributes[S]&&h.attributes[S].defaultSelected?c[S]=h.attributes[S].defaultSelected:c[S]=c[S][0]);r=t.extend(c,r)}h.outputs&&(n=t.extend(t.clone(h.outputs),n)),(u=h.parameters)&&u.init&&(s=t.extend(t.clone(u.init),s)),u&&!s.display&&(s.display=u.display)}if(r||(r=t.clone(t.Studies.DEFAULT_INPUTS)),n||(n=t.clone(t.Studies.DEFAULT_OUTPUTS)),s.chartName||(s.chartName="chart"),"Auto"!=s.panelName&&"Default panel"!=s.panelName||(s.panelName=""),r.Period<1&&(r.Period=1),d=null,e.layout.studies||(e.layout.studies={}),!(d=h&&h.initializeFN?h.initializeFN(e,i,r,n,s,o,l):t.Studies.initializeFN(e,i,r,n,s,o,l)))return a.k8O(1),void console.log(a.w0n(i,"CIQ.Studies.addStudy: initializeFN() returned null for "));if("abort"!==d){l=d.study,d.chart=e.charts[s.chartName],d.type=i,d.permanent=l.permanent,-1830562424,530641786,p=2;for(var C=1;-1830562424!==a.u1R(C.toString(),C.toString().length,30116);C++)d.customLegend=l.customLegend,d.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,l,d),(g=e.chart.state.studies)||(g=e.chart.state.studies={}),p+=2;if(530641786!==a.u1R(p.toString(),p.toString().length,12594)&&(d.customLegend=l.customLegend,d.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,l,d),-(g=e.chart.state.studies)&&(g=e.chart.state.studies={})),g.sorted=null,s.replaceID?(m=!0,delete s.replaceID):(e.layout.studies[d.inputs.id]=d,(d.overlay||d.underlay)&&e.addOverlay(d),e.currentlyImporting||s.calculateOnly||!d.chart.dataSet||e.createDataSet(null,d.chart)),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),s.calculateOnly)return e.changeOccurred("layout"),d;if(f=e.panels[d.panel],y=!1,(v=!(d.overlay||d.underlay))&&l.horizontalCrosshairFieldFN&&(f.horizontalCrosshairField=l.horizontalCrosshairFieldFN(e,d)),e.editCallback?y=!0:v?e.callbackListeners.studyPanelEdit&&e.callbackListeners.studyPanelEdit.length&&(y=!0):e.callbackListeners.studyOverlayEdit&&e.callbackListeners.studyOverlayEdit.length&&(y=!0),y){for(var w in s.editMode=!0,b=!1,d.inputs)if("id"!=w&&"display"!=w){b=!0;break}if(!b)for(var k in d.outputs){b=!0;break}b&&(void 0!==d.study.edit?d.study.edit&&(Y=e,z=d,B=r,j=n,$=s,x=function(){t.clearCanvas(Y.chart.tempCanvas,Y),a.H5p(),z.study.edit(z,{stx:Y,inputs:B,outputs:j,parameters:$})},e.setPanelEdit(f,x),d.editFunction=x):v?e.editCallback?(F=e,P=d,L=r,O=n,E=s,a.s0Y(),x=function(){var e;e=F.editCallback(F,P),t.clearCanvas(F.chart.tempCanvas,F),t.Studies.studyDialog(F,i,e,{inputs:L,outputs:O,parameters:E})},"chart"!=f.name&&e.setPanelEdit(f,x)):(T=e,D=d,_=r,A=n,M=s,x=function(){t.clearCanvas(T.chart.tempCanvas,T),T.dispatch("studyPanelEdit",{stx:T,sd:D,inputs:_,outputs:A,parameters:M})},"chart"!=f.name&&(e.setPanelEdit(f,x),d.editFunction=x)):(I=e,N=d,H=r,V=n,R=s,a.H5p(),x=function(e){t.clearCanvas(I.chart.tempCanvas,I),I.dispatch("studyOverlayEdit",{stx:I,sd:N,inputs:H,outputs:V,parameters:R,forceEdit:e})},d.editFunction=x))}var T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$;return e.changeOccurred("layout"),m||e.draw(),d}},t.Studies.removeStudy=function(e,t){var i,r,n,s;a.s0Y(),r=(i=e.panels[t.panel])&&i.yAxis.name,(t.overlay||t.underlay)&&e.removeOverlay(t.name),n=e.panels[t.panel],t.attribution&&e.removeFromHolder(t.attribution.marker),e.cleanupRemovedStudy(t),n&&!e.checkForEmptyPanel(n)&&(r==t.name&&e.electNewPanelOwner(n),(s=e.getYAxisByName(t.panel,t.name))&&(s.name=s.studies[1]||s.renderers[0])),e.draw(),e.resizeChart()},t.Studies.getPanelFromFieldName=function(e,i){var a,r,n,s,o;if(!(a=t.Studies.getFieldInputs(i)).length)return null;if(!(r=e.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},t.Studies.createLibraryHash=function(){return Object.keys(t.Studies.studyLibrary).join("|")},t.Studies.displayStudies=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(r&&(i.studyLibraryHash=t.Studies.createLibraryHash()),a.H5p(),n=e.layout.studies)for(var b in(s={})[i.name]=!0,n)if((l=(o=n[b]).study)&&!(o.disabled||o.signalData&&!o.signalData.reveal||(h=o.underlay||o.parameters&&o.parameters.underlayEnabled,r&&!h||!r&&h)))if(!(c=t.clone(l.renderer))||c instanceof Array||(c=[c]),u=e.panels[o.panel]){if(u.chart==i&&!u.hidden)if(s[u.name]||(d=o.permanent||!e.manageTouchAndMouse,u.closeX?("n","on","e",d&&(u.closeX.style.display="none")):u.close&&d&&(u.close.style.display="none"),u.edit&&("n","on","e",d&&(u.edit.style.display="none")),s[u.name]=d),p=o.chart.dataSegment,o.panel!=o.parameters.chartName||o.parameters&&o.parameters.panelName||(g=t.Studies.getPanelFromFieldName(e,o))&&o.panel!=g&&(o.panel=g),void 0===l.seriesFN){if(c){o.overlay||t.Studies.createYAxis(e,o,p,u);for(var x=0;x<c.length;x++){for(var S in m=c[x],o.outputMap)o.outputMap[S]==m.field&&(m.field=S);if(m.field){if(m.panel=o.panel,f=m.binding)for(var C in f)(y=t.Studies.determineColor(o.outputs[f[C]]))&&"auto"!=y&&(m[C]=y);m.yAxis=null,(v=t.Renderer.produce(m.type,m)).stx=e,v.attachSeries(null,m).draw()}}}else t.Studies.displaySeriesAsLine(e,o,p);u&&t.Studies.displayError(e,o)}else l.seriesFN&&u&&(l.seriesFN(e,o,p),t.Studies.displayError(e,o))}else e.currentlyImporting&&delete n[b]},t.Studies.displayError=function(e,t,i){var r,n;t.error&&(r=i&&i.panel?i.panel:t.panel,a.s0Y(),n=!0===t.error?e.translateIf("Not enough data to compute ")+e.translateIf(t.study.name):e.translateIf(t.error),!i||"center"===i.h&&"bottom"===i.v?e.displayErrorAsWatermark(r,n):e.watermark(r,i))},t.Studies.calculateMinMaxForDataPoint=function(e,t,i){var r,n,s;r=Number.MAX_VALUE,a.H5p(),a.u2S(50);var o=a.w0n(14,15);n=Number.MAX_VALUE*o;for(var l=0;l<i.length;l++)null!=(s=i[l][t])&&(isNaN(s)||(r=Math.min(s,r),n=Math.max(s,n)));return{min:r,max:n}},t.Studies.getYAxisParameters=function(e,t){var i,r,n;return i={},(r=e.layout.studies&&e.layout.studies[t.name])&&((n=r.study).yaxis||n.yAxisFN?i.noDraw=!0:(n.parameters&&n.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=n.yAxis&&n.yAxis.ground,t&&("bypass"!=n.range&&("0"," t","o"," 100","0 to 100"==n.range?i.range=[0,100]:"-1 to 1"==n.range?i.range=[-1,1]:"0 to max"==n.range?i.range=[0,Math.max(0,t.high)]:(n.centerline||0===n.centerline)&&(i.range=[Math.min(n.centerline,t.low),Math.max(n.centerline,t.high)])),i.range&&(t.low=i.range[0],t.high=i.range[1]),r.min&&(t.min=r.min),r.max&&(t.max=r.max),r.parameters&&r.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),a.s0Y(),i},t.Studies.doPostDrawYAxis=function(e,i){var r,n,s,o;for(var l in a.H5p(),e.layout.studies)r=e.layout.studies[l],(n=e.panels[r.panel])&&!n.hidden&&r.getYAxis(e)==i&&(s=r.study,i.name==r.name&&(s.yaxis&&s.yaxis(e,r),s.yAxisFN&&s.yAxisFN(e,r)),t.Studies.drawZones(e,r),r.error||((o=s.centerline)||0===o||null!==o&&i.highValue-1e-12>0&&i.lowValue+1e-12<0)&&t.Studies.drawHorizontal(e,r,null,o||0,i))},t.Studies.displaySeriesAsLine=function(e,i,r){var n;if(r.length&&(n=e.panels[i.panel])&&!n.hidden)for(var s in a.H5p(),i.outputMap)t.Studies.displayIndividualSeriesAsLine(e,i,n,s,r)},t.Studies.displaySeriesAsHistogram=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;if(i.length&&(a=e.panels[t.panel])&&!a.hidden){for(var p in r=[],t.outputMap)(n=t.outputs[t.outputMap[p]])&&(s=.3,"object"==typeof n&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},t.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));l=t.getYAxis(e),c=(h=t.inputs).WidthFactor,t.study&&t.study.parameters&&void 0!==(u=t.study.parameters).widthFactor&&(c=u.widthFactor),d={name:t.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:t.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:t.highlight},e.drawHistogram(d,r)}},t.Studies.displayIndividualSeriesAsLine=function(e,i,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(r.height||(r.height=r.bottom-r.top),o=i.getContext(e),l=i.outputs[i.outputMap[n]]){if(o.save(),"string"==typeof l&&(l={color:l,width:1}),o.lineWidth=l.width||1,"auto"==(h=l.color)&&(h=e.defaultColor),o.strokeStyle=h,c=l.pattern,o.setLineDash(t.borderPatternToArray(o.lineWidth,c)),o.lineDashOffset=0,u=0,d=i.study,p=i.getYAxis(e),u=e.decimalPlacesFromPriceTick(p.priceTick,p.idealTickSizePixels),(i.overlay||i.underlay)&&(u=null),(p.decimalPlaces||0===p.decimalPlaces)&&(u=p.decimalPlaces),g=null,i.parameters&&(g=i.parameters.label),(m=d.parameters)||(m={}),f="step"==m.plotType,i.series)for(var C in i.series)"st","e","p",(y=i.series[C].parameters.type)&&(a.u2S(68),f=a.w0n(y,"step"));m.noLabels&&(g=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),v=g||e.preferences.labels&&!1!==g,!1===(b=i.gaplines)&&(b="transparent"),x=i.inputs.Symbol,S=b?e.getGapColorFunction(x,n,l,b):null,e.plotDataSegmentAsLine(n,r,{yAxis:p,skipTransform:e.panels[i.panel].name!=i.chart.name,label:v,labelDecimalPlaces:u,noSlopes:i.noSlopes,step:f,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:b,highlight:i.highlight},S),d.appendDisplaySeriesAsLine&&d.appendDisplaySeriesAsLine(e,i,s,n,r),o.restore()}},t.Studies.drawHorizontal=function(e,t,i,a,r,n){var s,o,l;s=e.panels[t.panel],o=e.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=e.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&e.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},t.Studies.displayHistogramWithSeries=function(e,i,r){var n;e.panels[i.panel],n=.5,i.underlay&&(a.u2S(9),n=a.w0n(0,"0.3")),a.H5p(),t.Studies.createHistogram(e,i,r,!1,n),t.Studies.displaySeriesAsLine(e,i,r)},t.Studies.drawZones=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M;if("stx_","gri","d_border","b","o","rder","a","uto","Res","ul","t",i.parameters&&i.parameters.studyOverZonesEnabled){if(n=parseFloat(i.parameters.studyOverSoldValue),s=parseFloat(i.parameters.studyOverBoughtValue),o=i.parameters.studyOverSoldColor,l=i.parameters.studyOverBoughtColor,(h=i.zoneOutput)||(h="Result"),(c=t.Studies.determineColor(i.outputs[h]))&&"auto"!=c&&!t.isTransparent(c)||(c=e.defaultColor),o||(o=c),o&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),l||(l=c),l&&"auto"!=l&&!t.isTransparent(l)||(l=e.defaultColor),u=e.panels[i.panel],p=(d=i.getYAxis(e)).displayBorder,!1===e.axisBorders&&(p=!1),!0===e.axisBorders&&(p=!0),0===d.width&&(p=!1),g=e.getYAxisCurrentPosition(d,u),a.k8O(68),m=a.w0n(g,"left"),(f=d.justifyRight)||!1===f||(f=e.chart.yAxis.justifyRight||!1===e.chart.yAxis.justifyRight?e.chart.yAxis.justifyRight:m),y=Math.round(d.left+(m?d.width:0))+.5,v=p?3:0,x=(b=e.getBackgroundCanvas().context).fillStyle,b.globalAlpha=.2,e.startClip(u.name,!0),b.beginPath(),S=Math.round(e.pixelFromPrice(s,u,d))-.5,b.strokeStyle=l,b.moveTo(u.left,S),b.lineTo(u.right,S),b.stroke(),b.closePath(),b.beginPath(),C=Math.round(e.pixelFromPrice(n,u,d))+.5,b.strokeStyle=o,b.moveTo(u.left,C),b.lineTo(u.right,C),b.stroke(),b.closePath(),(w=new t.Plotter).newSeries("border","stroke",e.canvasStyle("stx_grid_border")),p&&("bor","der",k=m?y-v:y-.5,T=m?y+.5:y+v,w.moveTo("border",k,S),w.lineTo("border",T,S),w.moveTo("border",k,C),w.lineTo("border",T,C)),b.fillStyle=x,D={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:h+" "+i.name,yAxis:d,opacity:.3},!i.highlight&&e.highlightedDraggable&&(D.opacity*=.3),t.preparePeakValleyFill(e,t.extend(D,{threshold:s,direction:d.flipped?-1:1,color:l})),t.preparePeakValleyFill(e,t.extend(D,{threshold:n,direction:d.flipped?1:-1,color:o})),b.globalAlpha=1,!(i.study&&i.study.yaxis||(p&&(_=Math.round(d.bottom)+.5,w.moveTo("border",y,d.top),w.lineTo("border",y,_),w.draw(b,"border")),0===d.width))){"le","ft","s","tx_","yaxis",e.canvasFont("stx_yaxis",b),e.canvasColor("stx_yaxis",b),b.textAlign=f?"right":"left",a.k8O(50);var F=a.w0n(15,13);if(A=e.getCanvasFontSize("stx_yaxis")/F,m){a.u2S(25);var P=a.i6w(2,8,8);if(M=d.left+P,f){a.k8O(119);var L=a.i6w(17,5,603,5,7);M=d.left+d.width-v-L}}else{a.u2S(16);var O=a.i6w(4,20,19);M=d.left+v+O,f&&(M=d.left+d.width)}S>d.top+A&&(b.fillStyle=l,b.fillText(s,M,S)),C<d.bottom-A&&(b.fillStyle=o,b.fillText(n,M,C)),b.fillStyle=x}e.endClip(),b.globalAlpha=1,d.name==i.name&&(d.yAxisPlotter=new t.Plotter)}},t.Studies.createHistogram=function(e,i,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T;o=e.panels[i.panel],l=i.getContext(e),h=i.getYAxis(e),e.startClip(o.name),a.u2S(120),a.H5p();var D=a.i6w(4,17,0,19);(c=e.layout.candleWidth-D)<2&&(c=1),u=e.pixelFromPrice(0,o,h),h.min>0&&(u=e.pixelFromPrice(h.min,o,h)),n&&(u=Math.floor(o.top+o.height/2)),d=i.name+"_hist",e.canvasColor("stx_histogram"),p=l.fillStyle,(s||0===s)&&(l.globalAlpha=s),!i.highlight&&e.highlightedDraggable&&(a.k8O(3),l.globalAlpha*=a.i6w(1,"0.3")),g=null,m=null,f=i.outputs;for(var _=0;_<r.length;_++)if("Negati","ve Bar",y=r[_]){if(y.candleWidth&&(c=Math.floor(Math.max(1,y.candleWidth-2))),v=Math.floor(e.pixelFromBar(_,o.chart)-c/2),b=Math.floor(c),null===g){a.k8O(1);var A=a.w0n(1,0);g=(x=e.tickFromPixel(v,o.chart)-A)<0?m:e.pixelFromPrice(e.chart.dataSet[x][d],o,h)-u}else g=m;m=e.pixelFromPrice(y[d],o,h)-u,S=t.Studies.determineColor(f["Decreasing Bar"]),C=t.Studies.determineColor(f["Increasing Bar"]),w=t.Studies.determineColor(f["Positive Bar"]),k=t.Studies.determineColor(f["Negative Bar"]),T=h.flipped,l.fillStyle=p,S&&(T?m<g:m>g)?l.fillStyle=S:C&&(T?m>g:m<g)?l.fillStyle=C:w&&(T?m>0:m<0)?l.fillStyle=w:k&&(T?m<0:m>0)&&(l.fillStyle=k),l.fillRect(v,u,b,Math.floor(m))}l.globalAlpha=1,e.endClip()},t.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},t.Studies.prettyRE=/^.{0,50}\((.{0,50})\).{0,50}$/,t.Studies.prettyDisplay=function(e){var i,r;if(!(i=t.Studies.prettyRE.exec(e)))return e;if(a.H5p(),r=i[1]){for(var n in t.Studies.prettify)r=r.replace(n,t.Studies.prettify[n]);e=e.replace(i[1],r)}return e},t.Studies.getFieldInputs=function(e){var t,i;for(var r in t=[],a.H5p(),i=e.study.inputs)"field"==i[r]&&t.push(r);return t},t.Studies.initializeFN=function(e,i,r,n,s,o,l){var h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D;if("T","op","str","ing",r||(r={}),s||(s={}),r.id||(r.id=t.Studies.generateID(e,i,r,s.replaceID,s.display)),r.display||(r.display=r.id),h=new t.Studies.StudyDescriptor(r.id,i,r.id,r,n,s),r.Period&&(h.days=Math.max(1,parseInt(h.inputs.Period,10))),l?(l.inputs||(l.inputs=h.study.inputs),l.outputs||(l.outputs=h.study.outputs),h.study=l):l=h.study,l.display&&(r.display=l.display),a.H5p(),"string"==typeof s.panelName&&(o=s.panelName),(o==r.id||o&&!e.panelExists(o))&&(h.underlay=h.overlay=!1),"Own panel"!=o&&"New panel"!=o||(o=null),c=h.overlay||r.Overlay||!1!==h.overlay&&l.overlay,u=h.underlay||r.Underlay||!1!==h.underlay&&l.underlay,c&&s.underlayEnabled&&(u=!0),u&&(h.underlay=!0),!u&&e.chart.panel&&o==e.chart.panel.name&&(c=!0),c&&(h.overlay=!0),(!0===(d=e.preferences.dragging)||d&&d.study)&&(h.overlay=!0),o?s.panelName=o:c||u||(o=r.id),s.calculateOnly)return(c||u)&&(e.panels[s.panelName]?h.panel=s.panelName:h.panel=t.Studies.getPanelFromFieldName(e,h)||s.chartName),h;if(p={},(g=e.layout.studies[s.replaceID])&&(p={outputMap:t.clone(g.outputMap),panel:g.panel}),h.panel="",o?(m="le",m+="f",m+="t",(f=t.Studies.smartMovePanel(e,h.inputs,o,s.replaceID,"New panel"==s.panelName))&&(h.panel=f.name),!s.yaxisDisplayValue||[m,"right","none","shared","default"].includes(s.yaxisDisplayValue)||e.getYAxisByName(f,s.yaxisDisplayValue)||(s.yaxisDisplayValue="default")):(c||u)&&(h.panel=t.Studies.getPanelFromFieldName(e,h)||s.chartName),h.panel||(y=l.panelHeight||null,(v=s.yAxis||l.yAxis||{}).name=h.inputs.id,h.panel=h.inputs.id,e.createPanel(h.inputs.display,h.panel,y,s.chartName,new t.ChartEngine.YAxis(v))),h.parameters&&h.parameters.panelName&&(h.parameters.panelName=h.panel),b=e.panels[h.panel],x=l?t.clone(l.yAxis):null,((S=s.yAxis||x)||{}).ground&&(S["initialMargin"+(S.flipped?"Top":"Bottom")]=0),C=t.Studies.smartCreateYAxis(e,b,h.inputs.id,s.yaxisDisplayValue,S)){if("s","ha","red",C.name==s.replaceID&&(C.name=h.inputs.id),s.replaceID||C.name!==h.name||e.calculateYAxisMargins(C),C.allowSharing=!s.yAxis&&!l.yAxis,C.width="none"==C.position?0:t.ChartEngine.YAxis.prototype.width,"shared"==s.yaxisDisplayValue||"default"==s.yaxisDisplayValue){a.u2S(27),w=a.i6w("1135704347",64),166226749,k=2;for(var _=1;a.u1R(_.toString(),_.toString().length,74207)!==w;_++)delete s.yaxisDisplayValue,a.k8O(58),k+=a.w0n("2",0);166226749!==a.u1R(k.toString(),k.toString().length,83014)&&s.yaxisDisplayValue}else x&&t.ensureDefaults(C,x),C.name==h.name&&(!(x||{}).textStyle&&!s.yaxisDisplayColor||"auto"==s.yaxisDisplayColor?delete C.textStyle:s.yaxisDisplayColor&&(C.textStyle=t.colorToHex(s.yaxisDisplayColor)),void 0===(x||{}).justifyRight&&(C.justifyRight=null),void 0!==s.flippedEnabled&&(C.flipped=s.flippedEnabled));C!=b.yAxis?C.displayGridLines=!1:C!=e.chart.yAxis&&(C.displayGridLines=e.displayGridLinesInStudies)}if(e.calculateYAxisPositions(),g){for(var A in T=!1,e.drawingObjects)D=e.drawingObjects[A],p.outputMap&&p.outputMap.hasOwnProperty(D.field)?(D.field=D.field.replace(s.replaceID,h.inputs.id),h.parameters&&h.parameters.panelName?D.panelName=h.parameters.panelName:D.panelName=h.panel,T=!0):p.panel&&p.panel==D.panelName&&(D.panelName=D.panelName.replace(s.replaceID,h.inputs.id),T=!0);T&&e.changeOccurred("vector")}return h},t.Studies.smartMovePanel=function(e,t,i,a,r){var n,s,o,l;return s=t.id,a&&(n=e.layout.studies[a]),n&&(o=e.panels[n.panel])&&o.yAxis.name==a&&((r||i!=a&&i!=s)&&!e.checkForEmptyPanel(o.name,!0,n)?(e.electNewPanelOwner(o),(l=n.getYAxis(e)).name==a&&e.electNewYAxisOwner(l)):i!=a&&e.panels[i]||(s!=o.name&&e.modifyPanel(o,{name:s,display:t.display}),i=s)),e.panels[i]},t.Studies.smartCreateYAxis=function(e,i,r,n,s){var o,l,h,c,u,d,p;return"sha",a.s0Y(),"r","ed",o="n",o+="o",o+="n",o+="e",l="l",l+="e",l+="f",l+="t",h=s||{},c=e.getYAxisByName(i,r),!n&&s&&(n=s.position),[l,"right",o].indexOf(n)>-1||void 0===n&&s?(!c||c.isShared(e)?(t.extend(h,{name:r,position:n}),c||e.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(u=c==i.yAxis,c&&(c.name=e.electNewYAxisOwner(c)),(d=c||i.yAxis).lockScale&&t.extend(h,{zoom:d.zoom,scroll:d.scroll,lockScale:!0}),c=e.addYAxis(i,new t.ChartEngine.YAxis(h)),u&&(i.yAxis=c)):(c=i.yAxis,t.extend(c,h))):(s&&t.extend(c,s),c.position=n,c.name=r),c):n&&"default"!==n&&"shared"!==n&&n!==i.yAxis.name?((p=e.getYAxisByName(i,n))&&c==i.yAxis&&!c.isShared(e)&&(i.yAxis=p),c&&c.isShared(e)?c.name=e.electNewYAxisOwner(c):c!==i.yAxis&&e.deleteYAxisIfUnused(i,c),p):"shared"==n||n==i.yAxis.name||i.yAxis.allowSharing&&(!c||c.allowSharing)?(c&&(c!==i.yAxis&&c.isShared(e)?c.name=e.electNewYAxisOwner(c):(delete c.position,e.deleteYAxisIfUnused(i,c))),e.resizeChart(),i.yAxis):(t.extend(h,{name:r}),c&&(c.name=e.electNewYAxisOwner(c)),!c||c.name?c=e.addYAxis(i,new t.ChartEngine.YAxis(h)):(t.extend(c,h),delete c.position),c)},t.Studies.calculateVolume=function(e,i){var r,n,s;if(a.s0Y(),"vol undr"==i.type){if(!e||!e.chart.dataSet)return;r=e.layout,n=i.parameters.removeStudy,s=r.volumeUnderlay,r.volumeUnderlay=!n,s!=r.volumeUnderlay&&e.changeOccurred("layout"),n&&t.Studies.removeStudy(e,i)}i.outputMap={},i.outputMap.Volume=""},t.Studies.MA=function(e,i,r,n,s,o,l,h){var c;(c=new t.Studies.StudyDescriptor(s+" "+l.name,"ma",l.panel)).chart=l.chart,a.k8O(58),c.days=parseInt(i,a.i6w("10",0)),c.startFrom=l.startFrom,h&&(c.subField=h),c.inputs={},e&&(c.inputs.Type=e),r&&(c.inputs.Field=r),n&&(a.k8O(58),c.inputs.Offset=parseInt(n,a.w0n("10",0))),t.Studies.calculateMovingAverage(o,c)},t.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},t.Studies.movingAverageHelper=function(e,i){var a;if("options"==i){for(var r in a={},t.Studies.movingAverage.translations)a[r]=e.translateIf(t.Studies.movingAverage.translations[r]);return a}return t.Studies.movingAverage.conversions[i]},t.Studies.createVolumeChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,g;n=i.panel,i.inputs,s=i.underlay,o=i.overlay,l=t.Studies.determineColor(i.outputs["Up Volume"]),h=t.Studies.determineColor(i.outputs["Down Volume"]),c=s?"stx_volume_underlay":"stx_volume",a.k8O(1),e.setStyle(a.i6w("_up",c),"color",l),a.H5p(),a.u2S(1),e.setStyle(a.i6w("_down",c),"color",h),u=[{field:i.volumeField||"Volume",fill_color_up:e.canvasStyle(c+"_up").color,border_color_up:e.canvasStyle(c+"_up").borderLeftColor,opacity_up:e.canvasStyle(c+"_up").opacity,fill_color_down:e.canvasStyle(c+"_down").color,border_color_down:e.canvasStyle(c+"_down").borderLeftColor,opacity_down:e.canvasStyle(c+"_down").opacity,color_function:i.colorFunction}],a.k8O(3),d=u[a.w0n(1,"0")],s||"rgb(184, 44, 12)"!==d.border_color_down||("#0","00","000",d.border_color_down="#000000",d.border_color_up="#000000"),p={name:"Volume",panel:n,yAxis:i.getYAxis(e),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},t.extend(p,i.study.parameters),t.extend(p,i.parameters),e.colorByCandleDirection&&!i.colorFunction&&(d.color_function=function(e){var t,i;return t=e.Open,i=e.Close,a.s0Y(),{fill_color:t>i?d.fill_color_down:d.fill_color_up,border_color:t>i?d.border_color_down:d.border_color_up,opacity:t>i?d.opacity_down:d.opacity_up}}),g=2;for(var m=1;1716038261!==a.r57(m.toString(),m.toString().length,62800);m++)e.drawHistogram(p,u),g+=2;-1375878452!==a.r57(g.toString(),g.toString().length,21921)&&e.drawHistogram(p,u)},t.Studies.calculateStandardDeviation=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f;if("Movi","ng Averag","e Type","C","los","e","fi","eld",(r=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(n=i.inputs.Field)&&"field"!=n||(n="Close"),s=i.inputs["Moving Average Type"],a.s0Y(),s||(s=i.inputs.Type),t.Studies.MA(s,i.days,n,i.inputs.Offset,"_MA",e,i),o=0,l=0,h=0,(c=Number(i.inputs["Standard Deviations"]))<0&&(c=2),u=i.name,i.outputs)a.u2S(15),u=a.i6w(u,y," ");for(d=i.startFrom-1,g=0;d>=0&&g<i.days;d--,g++)(p=r[d][n])&&"object"==typeof p&&(p=p[i.subField]),isNaN(p)&&(p=0),o+=Math.pow(p,2),l+=p;for(d=i.startFrom;d<r.length;d++)if((p=(m=r[d])[n])&&"object"==typeof p&&(p=p[i.subField]),p||0===p||(p=0),a.u2S(27),o+=Math.pow(p,a.w0n("2",0)),l+=p,!(d<i.days-1)&&(d>=i.days&&("ob","je","c","t",(f=r[d-i.days][n])&&"object"==typeof f&&(f=f[i.subField]),isNaN(f)&&(f=0),o-=Math.pow(f,2),l-=f),(h=m["_MA "+i.name])||0===h)){a.k8O(121);var v=a.w0n(6,20,18,5,30);a.k8O(21);var b=a.i6w(14,18,14,1,17);m[u]=Math.sqrt((o+i.days*Math.pow(h,v)-b*h*l)/i.days)*c}}},t.Studies.calculateMovingAverage=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if("sim","pl","e","s","m","a","m","a",i.chart.scrubbed){if("ma"!=(r=i.inputs.Type)&&"sma"!=r&&r||(r="simple"),r in(n=t.Studies.movingAverage.typeMap))return t.Studies["calculateMovingAverage"+n[r]](e,i);if("simple"===r){for(var x in s=i.chart.scrubbed,o=0,l=[],h=i.name,i.outputs)a.k8O(15),h=a.w0n(h,x," ");for((c=i.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(i.inputs.Offset,10),isNaN(u)&&(u=0),m=i.startFrom,f=u,d=i.startFrom-1;d>=0;d--)if((p=s[d][c])&&"object"==typeof p&&(p=p[i.subField]),p||0===p)if(f>0)f--,m=d;else{if(l.length==i.days-1)break;o+=p,l.unshift(p)}for(l.length<i.days-1&&(l=[],m=0),y=[],d=m;d<s.length;d++)(p=s[d][c])&&"object"==typeof p&&(p=p[i.subField]),v=d+u>=0&&d+u<s.length?s[d+u]:null,p||0===p?(o+=p,l.push(p),l.length>i.days&&(o-=l.shift()),b=l.length==i.days?o/i.days:null,v?v[h]=b:d+u>=s.length&&((g={})[h]=b,y.push(g))):v?v[h]=null:d+u>=s.length&&((g={})[h]=null,y.push(g));i.appendFutureTicks(e,y)}}},t.Studies.calculateMovingAverageExponential=function(e,t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;i=t.inputs.Type,r=t.chart.scrubbed,n=0,s=0,a.u2S(27),o=a.w0n("0",0),a.k8O(55);var S=a.w0n(0,182,9,20);a.u2S(122);var C=a.i6w(0,35,3,16,4);for(var w in l=S/(t.days+C),"welles wilder"!==i&&"smma"!==i||(l=1/t.days),h=null,c=t.name,t.outputs)a.u2S(15),c=a.w0n(c,w," ");for((u=t.inputs.Field)&&"field"!=u||(u="Close"),d=parseInt(t.inputs.Offset,10),isNaN(d)&&(d=0),m=t.startFrom,f=d,p=t.startFrom-1;p>=0;p--)if((g=r[p][c])||0===g){if(null===h&&(h=g),o=t.days,f<=0)break;f--,m=p}for(null===h&&(h=m=0),y=[],p=m;p<r.length;p++)(g=r[p][u])&&"object"==typeof g&&(g=g[t.subField]),v=p+d>=0&&p+d<r.length?r[p+d]:null,g||0===g?(o==t.days-1?b=s=(n+=g)/t.days:o<t.days-1?(n+=g,a.k8O(123),s=a.w0n("1",o,n),b=null):0===o?(s=n+=g,b=null):(h||0===h)&&(a.k8O(55),b=s=a.i6w(g,h,l,h)),h=s,o++):b=null,v?v[c]=b:p+d>=r.length&&((x={})[c]=b,y.push(x));t.appendFutureTicks(e,y)},t.Studies.calculateMovingAverageVIDYA=function(e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;i.inputs.Type,r=i.chart.scrubbed,a.k8O(50);var x=a.w0n(6,4);a.u2S(9);var S=a.w0n(15,16);for(var C in n=x/(i.days+S),s=null,a.H5p(),o=i.name,i.outputs)a.k8O(15),o=a.w0n(o,C," ");for((l=i.inputs.Field)&&"field"!=l||(l="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:l,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",e,i),h=parseInt(i.inputs.Offset,10),isNaN(h)&&(h=0),p=i.startFrom,g=h,c=i.startFrom-1;c>=0;c--)if((u=r[c][o])||0===u){if(null===s&&(s=u),g<=0)break;g--,p=c}for(null===s&&(s=p=0),m=[],c=p;c<r.length;c++)"_","S","TD ",(u=(f=r[c])[l])&&"object"==typeof u&&(u=u[i.subField]),y=c+h>=0&&c+h<r.length?r[c+h]:null,u||0===u?(f["_MASTD "+i.name]||0===f["_MASTD "+i.name])&&(v=f["_STD "+i.name]/f["_MASTD "+i.name],a.u2S(124),s=b=a.w0n(n,s,"1",v,u,n,v),c<i.days&&(b=null),y?y[o]=b:c+h>=r.length&&((d={})[o]=b,m.push(d))):y?y[o]=null:c+h>=r.length&&((d={})[o]=null,m.push(d));i.appendFutureTicks(e,m)},t.Studies.calculateMovingAverageTriangular=function(e,i){var r,n,s,o,l,h,c,u,d;for(var p in"T","R","I","1 ","simpl","e","T","R","I","1","fiel","d",r=i.chart.scrubbed,(n=i.inputs.Field)&&"field"!=n||(n="Close"),s=Math.ceil(i.days/2),a.k8O(3),t.Studies.MA("simple",s,n,a.w0n(1,"0"),"TRI1",e,i),i.days%2==0&&s++,t.Studies.MA("simple",s,"TRI1 "+i.name,0,"TRI2",e,i),o=i.name,i.outputs)a.k8O(15),o=a.w0n(o,p," ");l=parseInt(i.inputs.Offset,10),a.s0Y(),isNaN(l)&&(l=0),h=l;for(var g=i.startFrom-1;g>=0;g--)if((c=r[g][o])||0===c){if(!(h>0))break;h--}for(u=[],g++;g<r.length;g++)g+l>=0&&(g+l<r.length?(a.k8O(1),r[a.w0n(l,g)][o]=r[g]["TRI2 "+i.name]):("TR","I2 ",(d={})[o]=r[g]["TRI2 "+i.name],u.push(d)));i.appendFutureTicks(e,u)},t.Studies.calculateMovingAverageWeighted=function(e,t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;i=t.chart.scrubbed,r=0,n=0,(s=t.inputs.Field)&&"field"!=s||(s="Close"),a.k8O(23);var b=a.i6w(11,10,0);a.u2S(125);var x=a.i6w(10,11,4,5);for(var S in o=t.days*(t.days+b)/x,l=t.name,t.outputs)a.u2S(15),l=a.i6w(l,S," ");for(h=parseInt(t.inputs.Offset,10),isNaN(h)&&(h=0),p=[],g=t.startFrom,m=h,c=t.startFrom-1;c>=0;c--)if((u=i[c][s])&&"object"==typeof u&&(u=u[t.subField]),u||0===u)if(m>0)m--,g=c;else{if(p.length==t.days-1)break;p.unshift(u)}for(p.length<t.days-1&&(p=[],a.k8O(58),g=a.w0n("0",0)),c=0;c<p.length;c++){a.k8O(9),r+=(c+a.i6w(16,17))*p[c],n+=p[c]}for(f=[],c=g;c<i.length;c++)"o","b","jec","t",(u=i[c][s])&&"object"==typeof u&&(u=u[t.subField]),y=c+h>=0&&c+h<i.length?i[c+h]:null,u||0===u?(p.push(u),p.length>t.days&&(r-=n,n-=p.shift()),r+=p.length*u,n+=u,v=c<t.days-1?null:r/o,y?y[l]=v:c+h>=i.length&&((d={})[l]=v,f.push(d))):y?y[l]=null:c+h>=i.length&&((d={})[l]=null,f.push(d));t.appendFutureTicks(e,f)},t.Studies.calculateMultMA=function(e,i){var r,n,s,o,l,h;if(a.s0Y(),"Cl","o","s","e","fie","l","d",r=i.chart.scrubbed,n=[Number.MAX_VALUE],Object.keys(i.inputs).filter((e=>{a.k8O(50);var t=a.i6w(14,15);return e.indexOf("Period")>t})).forEach(((e,t)=>{a.H5p(),a.k8O(45),n[a.w0n("1",1,t)]=i.inputs[e]})),r.length<Math.min(...n)+1){1267402691,-661338338,a.u2S(27),s=a.w0n("2",0);for(var c=1;1267402691!==a.u1R(c.toString(),c.toString().length,6807);c++)i.error=!1,s+=2;-661338338!==a.r57(s.toString(),s.toString().length,17498)&&(i.error=!0)}else{(o=i.inputs.Field)&&"field"!=o||(o="Close"),(l=i.inputs["Moving Average Type"])||(l="simple"),h=i.inputs.Offset||0;for(var u=1;u<n.length;u++)"M","A"," ",t.Studies.MA(l,n[u],o,h,"MA "+u,e,i)}},t.Studies.calculateStudyATR=function(e,t){var i,r,n,s,o,l,h;if(i=t.chart.scrubbed,a.H5p(),r=t.days,i.length<r+1)t.error=!0;else{n=0,s=t.name;for(var c=Math.max(t.startFrom,1);c<i.length;c++)"ATR"," ","True Range"," ",o=i[c],a.k8O(126),l=i[a.w0n(c,"1")],h=o.trueRange,l["Sum True Range "+s]&&(a.u2S(1),n=l[a.i6w(s,"Sum True Range ")]),n+=h,c>r&&(a.u2S(9),n-=i[a.i6w(r,c)][a.i6w(s,"True Range ",a.k8O(1))]),a.u2S(1),o[a.w0n(s,"True Range ")]=h,a.k8O(1),o[a.w0n(s,"Sum True Range ")]=n,c==r?(a.k8O(1),o[a.w0n(s,"ATR ")]=a.w0n(r,n,a.u2S(10))):c>r&&(a.k8O(1),o[a.i6w(s,"ATR ")]=(l["ATR "+s]*(r-1)+h)/r)}},t.Studies.displayPSAR2=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;for(var b in"squ","ar","e","wave","Plot"," Type",n=e.panels[i.panel],o=(s=i.getYAxis(e))==e.chart.panel.yAxis,e.startClip(n.name),l=i.getContext(e),h="squarewave"==i.inputs["Plot Type"],i.outputs){"au","t","o",a.u2S(16),c=b+(49.39==a.i6w(3602,2,400)?"u":" ")+i.name,l.beginPath(),u=e.layout.candleWidth,d=Math.max(3,Math.floor(e.chart.tmpWidth/2));for(var x=0;x<r.length;x++)(p=r[x])&&(p[c]||0===p[c])&&(p.candleWidth&&(u=p.candleWidth),o&&p.transform&&(p=p.transform),g=e.pixelFromBar(x,n.chart),h&&(a.k8O(10),g-=a.i6w(2,u)),m=e.pixelFromTransformedValue(p[i.referenceOutput?i.referenceOutput+" "+i.name:c],n,s),0!==x&&r[x-1]&&(r[x-1][c]||0===r[x-1][c])||l.moveTo(g,m),h?(l.lineTo(g,m),a.k8O(1),l.lineTo(a.w0n(u,g),m),r[x+1]&&(a.u2S(127),f=r[a.w0n("1",0,x)],o&&f.transform&&(f=f.transform),f[c]||0===f[c]||(a.u2S(1),l.lineTo(a.i6w(u,g),e.pixelFromTransformedValue(f[i.referenceOutput?i.referenceOutput+" "+i.name:c],e.panels[i.panel],s))))):(a.u2S(128),l.moveTo(a.w0n(d,g,2),m),a.u2S(43),l.lineTo(a.i6w(g,d,2),m)));l.lineWidth=1,i.highlight&&(l.lineWidth=3),"auto"==(y=t.Studies.determineColor(i.outputs[b]))&&(y=e.defaultColor),l.strokeStyle=y,!i.highlight&&e.highlightedDraggable&&(l.globalAlpha*=.3),l.stroke(),l.closePath(),l.lineWidth=1}v=2;for(var S=1;1125951856!==a.u1R(S.toString(),S.toString().length,3073);S++)e.endClip(),v+=2;2115539734!==a.u1R(v.toString(),v.toString().length,86428)&&e.endClip()},t.Studies.inputAttributeDefaultGenerator=function(e){return(e||0===e)&&e.constructor==Number?Math.floor(e)==e?e>0?{min:1,step:1}:{step:1}:e>0?{min:0,step:.01}:{step:.01}:{}},t.Studies.getMarketOffset=function({stx:e,localQuoteDate:i,shiftToDateBoundary:r}){var n,s,o,l,h;arguments.length>1&&(e=arguments[0],i=arguments[1],n=arguments[2]);var{symbol:c}=e.chart;return s=t.getFn("Market.Symbology.isForexMetal")(c),void 0===n&&(n=t.getFn("Market.Symbology.isForexSymbol")(c)),o=e.chart.market?n?"America/New_York":e.chart.market.market_tz:null,l=new Date(i.getTime()+6e4*i.getTimezoneOffset()),o&&-1!=o.indexOf("UTC")||(l=t.convertTimeZone(l,"UTC",o)),h=new Date(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()).getTime()-i.getTime(),r&&n&&(a.u2S(129),h+=a.w0n(60,1e3,s?6:7,60)),h},t.Studies.getStudyList=function(e){var i,r;for(var n in a.s0Y(),i={},r={},t.extend(r,e),t.Studies.studyLibrary)r[n]||(i[t.Studies.studyLibrary[n].name]=n);return i},t.Studies.determineColor=function(e){return a.s0Y(),e?"object"==typeof e?e.color:e:null},t.Studies.calculateGenericEnvelope=function(e,t,i,r,n,s){var o,l,h,c,u,d,p;if(a.s0Y(),i||(i=0),s||(s=0),r&&"field"!=r||(r="Close"),n||(n=r),o=t.chart.scrubbed){(l=t.inputs.Field)&&"field"!==l||(l="Close");for(var g=t.startFrom;g<o.length;g++)" Botto","m"," "," To","p ","o","bject","o","b","jec","t",(h=o[g])&&h[r]&&((c=h[l])&&"object"==typeof c&&(c=c.Close),(u=h[r])&&"object"==typeof u&&(u=u[t.subField]),(d=h[n])&&"object"==typeof d&&(d=d[t.subField]),a.k8O(130),p=a.w0n(i,s,d),a.k8O(1),h[t.type+" Top "+t.name]=a.i6w(p,u),a.k8O(9),h[t.type+" Bottom "+t.name]=a.w0n(p,u),h[t.type+" Median "+t.name]=u,h["Bandwidth "+t.name]=u?200*p/u:0,a.u2S(131),h["%b "+t.name]=a.w0n(u,"50",c,"1",p))}},t.Studies.displayChannel=function(e,i,r){var n,s,o;if(a.H5p(),i.inputs["Channel Fill"]){for(var l in n={panelName:i.panel},i.outputs)if("Top"==(s=l.split(" ").pop())||"High"==s){a.u2S(1);var h=a.i6w(1636,204);n.topBand=l+(302.45!==h&&" ")+i.name}else if("Bottom"==s||"Low"==s){a.u2S(9);a.i6w(77022,84024);n.bottomBand=l+" "+i.name}else"Median"!=s&&"Channel"!=s||(n.color=t.Studies.determineColor(i.outputs[l]));i.parameters&&i.parameters.opacity?n.opacity=i.parameters.opacity:n.opacity=.2,o=e.panels[i.panel],n.skipTransform=o.name!=i.chart.name,n.yAxis=i.getYAxis(e),!i.highlight&&e.highlightedDraggable&&(n.opacity*=.3),t.prepareChannelFill(e,n)}t.Studies.displaySeriesAsLine(e,i,r)},t.Studies.initAnchorHandle=function(e,t){var{handle:i}=t;if(!i){e.controls.anchorHandles||(e.controls.anchorHandles={});var{anchorHandles:a,chartControls:r}=e.controls;a[t.uniqueId]?({handle:i}=a[t.uniqueId]):((i=document.createElement("div")).classList.add("stx_anchor_handle"),i.setAttribute(t.uniqueId,""),a[t.uniqueId]={handle:i,sd:t},r&&r.parentElement.appendChild(i)),t.anchorHandle=i}},t.Studies.removeAnchorHandle=function(e,t){a.s0Y();var{handle:i}=(e.controls.anchorHandles||{})[t.uniqueId]||{};i&&(delete e.controls.anchorHandles[t.uniqueId],i.remove())},t.Studies.repositionAnchor=function(e,a){var r,n,s,o,l,h,{currentAnchorTime:c,uniqueId:u}=a,{hoverTick:d}=e.repositioningAnchorSelector||{},{dataSet:p,market:g}=e.chart;e.controls.anchorHandles||(e.controls.anchorHandles={});var{anchorHandles:m}=e.controls;if(r={},d||0===d){if(d>=p.length)return;if(n=!a.inputs.hasOwnProperty("Anchor Date"),s=p[d].DT,o=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0}),c&&n&&new Date(s.getTime()+o).getDate()!==new Date(c.getTime()+o).getDate())return;g.market_def&&g.market_def.market_tz&&(s=new i.Date(s,g.market_def.market_tz)),l=!n&&t.dateToStr(s,"YYYY-MM-dd"),r={"Anchor Time":t.dateToStr(s,"HH:mm:ss")},l&&(r["Anchor Date"]=l)}h=t.Studies.replaceStudy(e,a.inputs.id,a.type,Object.assign(a.inputs,r),a.outputs,a.parameters,a.panel),m[u]&&(m[u].sd=h),e.draw()},t.Studies.cancelRepositionAnchor=function(e){var{sd:i,tapToAdd:a}=e.repositioningAnchorSelector||{};if(i){a&&t.Studies.removeStudy(e,i),e.repositioningAnchorSelector=null;var{anchorHandles:r}=e.controls;r&&r[i.uniqueId]&&(r[i.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(e,i,e.chart.dataSegment)),e.draw()}},t.Studies.displayAnchorHandleAndLine=function(e,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if("A","nchor Date",!r.signalData||r.signalData.reveal){s=(e.repositioningAnchorSelector||{}).sd===r;var{hoverTick:w}=s&&e.repositioningAnchorSelector,{chart:k,panels:T,cy:D}=e,{market:_={},symbol:A}=k;o=T[r.panel];var{top:M,right:F,left:P,height:L,subholder:O}=o,{bottom:E}=o.yAxis,{inputs:I,anchorHandle:N,currentAnchorTime:H,lineWidth:V=1}=r,{backgroundColor:R,borderLeftColor:Y}=e.canvasStyle("stx_anchor_handle");l=!I["Anchor Date"],h=t.getFn("Market.Symbology.isForexSymbol")(A),c=(w||0===w)&&(e.chart.dataSet[w]||{}).DT,u=t.Studies.getMarketOffset({stx:e,localQuoteDate:n[n.length-1].DT,shiftToDateBoundary:!0}),a.H5p(),d=H&&c&&l&&new Date(c.getTime()+u).getDate()!==new Date(H.getTime()+u).getDate();var{floatDate:z,anchorHandles:B={}}=e.controls;p=B[r.uniqueId]||{};var{highlighted:j}=p,[$,X]=_.getNormalOpen().split(":").map((e=>(a.H5p(),parseInt(e))));g=t=>{var i;return a.H5p(),i=t?e.tickFromDate(t,null,null,!0):w,[e.pixelFromTick(i,k),i]},m={y0:M,y1:E,type:"line",confineToPanel:o};var[W]=g();if(W&&(W-=.5,e.plotLine(Object.assign(m,{x0:W,x1:W,color:d?Y:R,pattern:[6,6],lineWidth:1,opacity:d?.5:1})),t.efficientDOMUpdate(z.style,"visibility",""),e.updateChartAccessories()),N){if("Anchor Ti","me",f=l?new Date(n[n.length-1].DT):t.strToDate(I["Anchor Date"]),_.market_def&&_.market_def.market_tz&&(f=new i.Date(f,_.market_def.market_tz)),!l){var[U,q,G]=(I["Anchor Date"]||"").split("-");G||([,U,q,G]=U.match(/([0-9]{4})([0-9]{2})([0-9]{2})/)),a.u2S(9),f.setFullYear(U,a.i6w(1,q),G)}var[Q,Z,K=0]=(I["Anchor Time"]||"").split(":");Z||0===Z||([,Q,Z,K]=Q.match(/([0-9]{2})([0-9]{2})([0-9]{2})/)),f.setHours(Q,Z,K),(y=h&&(f.getHours()>$||f.getHours()===$&&f.getMinutes()>=X))&&f.setDate(f.getDate()-1);var[J,ee]=g(f);(v=new Date(f)).setHours(..._.getNormalClose().split(":")),y&&v.setDate(v.getDate()+1);var[te]=v&&g(v)||[];if(l&&(J>F||te>F)){if(b=new Date(f),_)do{b.setDate(b.getDate()-1)}while(!_.isMarketDate(b));var[ie,ae]=g(b);if(ie>P){f=b,J=ie,-96953397,-1879543579,x=2;for(var re=1;-96953397!==a.u1R(re.toString(),re.toString().length,71809);re++)ee=ae,a.u2S(2),x+=a.i6w(2,"2");-1879543579!==a.u1R(x.toString(),x.toString().length,35011)&&(ee=ae)}}if(J-=.5,e.plotLine(Object.assign(m,{x0:J,x1:J,color:R,pattern:"solid",lineWidth:V,opacity:j||r.highlight?1:.5})),p.currentPixel=J,j){N.style.display="",a.u2S(7);var ne=a.i6w(325,5,40);a.k8O(113);var se=a.i6w(72,9,13,815);a.u2S(1);var oe=a.i6w(5,3);N.style.height=Math.max(Math.min(ne,L/se),oe)+"px",S=N.getBoundingClientRect(),C=Math.max(Math.min(D-S.height/2,E-3-S.height),M+3),a.k8O(1),N.style.top=a.w0n("px",C),a.k8O(132);var le=a.w0n(5,8,245,9,4);N.style.left=(w||0===w?W:J)-S.width/le+"px",O.style.cursor="ew-resize"}else"a","uto",N.style.display="none",O.style.cursor="auto";r.currentAnchorTime=f,r.currentAnchorTick=ee}}},t.Studies.studyScriptLibrary={},t.Studies.studyLibrary=t.Studies.studyLibrary||{},t.extend(t.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:t.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:t.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:t.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}},MACross:{name:"Moving Average Cross",overlay:!0,calculateFN:t.Studies.calculateMultMA,inputs:{"MA 1 Period":20,"MA 2 Period":50,"MA 3 Period":200,Field:"field","Moving Average Type":"ma",Offset:0},outputs:{"MA 1":"#e9088c","MA 2":"#00afed","MA 3":"#f4932f"}}})},C=e=>{var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,O.H5p(),t.ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(e){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(e,t,i,a){O.s0Y(),this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},w=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ThemeHelper=t.ThemeHelper||function(e){var i,a;this.params=e,a="#FFFFFF",(i=e.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,t.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=t.hexToRgba(a),this.settings.chart["Grid Lines"].color=t.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=t.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},O.s0Y(),t.ThemeHelper.prototype.update=function(e){var i,a;function r(t,a,r){for(var n in i[t])e.setStyle(n,a,r)}e||(e=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},O.s0Y(),e.chart.container.style.backgroundColor=this.settings.chart.Background.color,e.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||(a.even={color:null,wick:t.hexToRgba(e.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),e.setStyle("stx_candle_up","borderLeftColor",a.up.border),e.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),e.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),e.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),e.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),e.draw()},t.ChartEngine.prototype.setThemeSettings=function(e){var i;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",e&&((i=new t.ThemeHelper({stx:this})).settings=e,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},k=e=>{var t,a;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,a="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var e,r,n,s,o,l,h,c,u,d;e=("undefined"!=typeof window?window:null)||(void 0!==i.g?i.g:{}),a.VERSION="0.4.11",r=e.$||e.jQuery||e.Zepto,n=e.fleegix,s=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],l={},h={},c={};for(var p=0;p<o.length;p++)l[o[p].substr(0,3)]=p;for(p=0;p<s.length;p++)h[s[p].substr(0,3)]=p;Array.prototype.indexOf,u=function(e,t){var i,a,r,n=O;if("number"!=typeof e)throw"not a"," nu","mber:"," ",n.u2S(1),n.i6w(e,"not a number: ");if(n.u2S(81),i=n.i6w(1e3,e),r=(a=e.toString()).length,i&&r>t)return n.u2S(9),a.substr(n.w0n(t,r),r);for(a=[a];r<t;)a.unshift("0"),r++;return n.H5p(),a.join("")},d=function(e){if("URL mus","t be specif","ied",e){if(!e.url)throw new Error("URL must be specified");if("async"in e||(e.async=!0),!(n&&void 0!==n.xhr||r&&void 0!==r.ajax))throw"Please use the Fleegix.js XHR module, jQuery ajax, Z","epto ajax, or define your own transport mechanism for downloading zone files.",new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return e.async?n&&n.xhr?n.xhr.send({url:e.url,method:"get",handleSuccess:e.success,handleErr:e.error}):r.ajax({url:e.url,dataType:"text",method:"GET",error:e.error,success:e.success}):("tex","t",n&&n.xhr?n.xhr.doReq({url:e.url,async:!1}):r.ajax({url:e.url,async:!1,dataType:"text"}).responseText)}},a.ruleCache={},a.Date=function(){var e,t,i,r,n,s,o,l;if(e="st",e+="ri",e+="ng",t="[obj",t+="ect Array",t+="]",this===a)throw"timezoneJS.Date object must be constructed with 'new'";switch(i=Array.prototype.slice.apply(arguments),r=null,n=null,s=[],o=!1,Object.prototype.toString.call(i[0])===t&&(i=i[0]),typeof i[i.length-1]===e&&(o=Date.parse(i[i.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(o)||null===o)&&(n=i.pop())),l=!1,i.length){case 0:r=new Date;break;case 1:r=new Date(i[0]),"string"==typeof i[0]&&-1==i[0].search(/[+-][0-9]{4}/)&&-1==i[0].search(/Z/)&&-1==i[0].search(/T/)&&(l=!0);break;case 2:r=new Date(i[0],i[1]),l=!0;break;default:for(var h=0;h<7;h++)s[h]=i[h]||0;r=new Date(s[0],s[1],s[2],s[3],s[4],s[5],s[6]),l=!0}if(isNaN(r.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,O.u2S(9),this.month=O.i6w(0,"0"),this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=n||null,l?this.setFromDateObjProxy(r):this.setFromTimeProxy(r.getTime(),n)},t.extend(a.Date.prototype,{getDate:function(){return this.date},getDay:function(){return O.s0Y(),this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){O.u2S(1),O.H5p();var e=O.w0n(16,1884);return this.year-e},getHours:function(){return O.s0Y(),this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return O.H5p(),this.minutes},getSeconds:function(){return O.s0Y(),this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return O.H5p(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return O.s0Y(),this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){var e=O;e.u2S(38);var t=e.i6w(351,720,58,18);e.k8O(108);var i=e.i6w(5,1001,991,991,4);return this._timeProxy+this.getTimezoneOffset()*t*i},getTimezone:function(){return O.H5p(),this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return O.H5p(),this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var e;return O.s0Y(),this._useCache?this._tzInfo:(this.timezone?("Et","c/","GMT",e="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone)):e={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=e,this._useCache=!0,e)},getUTCDateProxy:function(){var e;return O.H5p(),(e=new Date(this._timeProxy)).setUTCMinutes(e.getUTCMinutes()+this.getTimezoneOffset()),e},setDate:function(e){return this.setAttribute("date",e),O.s0Y(),this.getTime()},setFullYear:function(e,t,i){return"y",O.s0Y(),"e","ar",void 0!==i&&("da","te",this.setAttribute("date",1)),this.setAttribute("year",e),void 0!==t&&this.setAttribute("month",t),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(e,t){return this.setAttribute("month",e),O.H5p(),void 0!==t&&this.setAttribute("date",t),this.getTime()},setYear:function(e){return O.s0Y(),0<=(e=Number(e))&&e<=99&&(e+=1900),this.setUTCAttribute("year",e),this.getTime()},setHours:function(e,t,i,a){return this.setAttribute("hours",e),void 0!==t&&this.setAttribute("minutes",t),void 0!==i&&("se","con","d","s",this.setAttribute("seconds",i)),void 0!==a&&this.setAttribute("milliseconds",a),O.s0Y(),this.getTime()},setMinutes:function(e,t,i){return this.setAttribute("minutes",e),O.s0Y(),void 0!==t&&this.setAttribute("seconds",t),void 0!==i&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(e,t){return"se","co","nds",O.s0Y(),this.setAttribute("seconds",e),void 0!==t&&("mill","iseconds",this.setAttribute("milliseconds",t)),this.getTime()},setMilliseconds:function(e){return"milli","seconds",this.setAttribute("milliseconds",e),this.getTime()},setTime:function(e){if(isNaN(e))throw new Error("Units must be a number.");return O.H5p(),this.setFromTimeProxy(e,this.timezone),this.getTime()},setUTCFullYear:function(e,t,i){return void 0!==i&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",e),void 0!==t&&this.setUTCAttribute("month",t),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(e,t){return this.setUTCAttribute("month",e),void 0!==t&&this.setUTCAttribute("date",t),this.getTime()},setUTCDate:function(e){return this.setUTCAttribute("date",e),this.getTime()},setUTCHours:function(e,t,i,a){return this.setUTCAttribute("hours",e),void 0!==t&&this.setUTCAttribute("minutes",t),O.H5p(),void 0!==i&&this.setUTCAttribute("seconds",i),void 0!==a&&this.setUTCAttribute("milliseconds",a),this.getTime()},setUTCMinutes:function(e,t,i){return this.setUTCAttribute("minutes",e),void 0!==t&&("seco","nds",this.setUTCAttribute("seconds",t)),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(e,t){return O.H5p(),this.setUTCAttribute("seconds",e),void 0!==t&&("mi","lliseconds",this.setUTCAttribute("milliseconds",t)),this.getTime()},setUTCMilliseconds:function(e){return this.setUTCAttribute("milliseconds",e),this.getTime()},setFromDateObjProxy:function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.date=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.milliseconds=e.getMilliseconds(),this._day=e.getDay(),this._dateProxy=e,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(e,t){var i,r;i=new Date(e),r=t?a.timezone.getTzInfo(e,t,!0).tzOffset:i.getTimezoneOffset(),i.setTime(e+6e4*(i.getTimezoneOffset()-r)),this.setFromDateObjProxy(i)},setAttribute:function(e,t){var i;if("y","ear",isNaN(t))throw"Units must be a"," number.",new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1))](t),this.setFromDateObjProxy(i)},setUTCAttribute:function(e,t){var i,a;if(isNaN(t))throw new Error("Units must be a number.");i="year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](t),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(e){var t;O.H5p(),t=this.getTimezoneInfo().tzOffset,this.timezone=e,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+t)},removeTimezone:function(){O.s0Y(),this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return O.H5p(),this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return"E","tc","/GMT",this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){var e=O;e.u2S(133);e.w0n(475800,10,48550,10);e.u2S(9);var t=e.i6w(11,1180);e.u2S(23);var i=e.w0n(9,10593,11907);e.k8O(9);var a=e.w0n(67082,71028);e.u2S(9);e.i6w(6,929);e.k8O(9);var r=e.i6w(20,2980);e.s0Y(),e.u2S(64);var n=e.w0n(20,122260,7639,122240);e.k8O(130);var s=e.w0n(309,3088,8);return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+(624.52!=t?534>=i?a!==r?n:452.93:"Z":s)},toJSON:function(){return O.s0Y(),this.toISOString()},toDateString:function(){return O.H5p(),this.toString("EEE MMM dd yyyy")},toTimeString:function(){return"H:",O.H5p(),"mm"," k",this.toString("H:mm k")},toString:function(e,t){var i,r,n,o,l=O;return"y","yyy-MM-ddTHH",":mm:ss.SSS",e||(e="yyyy-MM-ddTHH:mm:ss.SSS"),i=e,r=t?a.timezone.getTzInfo(this.getTime(),t):this.getTimezoneInfo(),n=this,t&&(n=this.clone()).setTimezone(t),o=n.getHours(),l.s0Y(),i.replace(/a+/g,(function(){return l.s0Y(),"k"})).replace(/y+/g,(function(e){return u(n.getFullYear(),e.length)})).replace(/d+/g,(function(e){return u(n.getDate(),e.length)})).replace(/m+/g,(function(e){return l.s0Y(),u(n.getMinutes(),e.length)})).replace(/s+/g,(function(e){return l.s0Y(),u(n.getSeconds(),e.length)})).replace(/S+/g,(function(e){return u(n.getMilliseconds(),e.length)})).replace(/h+/g,(function(e){return u(o%12==0?12:o%12,e.length)})).replace(/M+/g,(function(e){var t,i;return t=n.getMonth(),(i=e.length)>3?a.Months[t]:i>2?a.Months[t].substring(0,i):(l.k8O(1),l.H5p(),u(l.w0n(1,t),i))})).replace(/k+/g,(function(){return l.s0Y(),o>=12?(o>12&&(o-=12),"PM"):"AM"})).replace(/H+/g,(function(e){return l.s0Y(),u(o,e.length)})).replace(/E+/g,(function(e){return l.H5p(),s[n.getDay()].substring(0,e.length)})).replace(/Z+/gi,(function(){return r.tzAbbr}))},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(e,t,i){var a,r,n=O;++t>12&&(n.u2S(10),a=parseInt(n.w0n(12,t),10),n.k8O(75),t=n.w0n(12,t),e+=a),t<=2&&(e-=1,t+=12),n.k8O(10),a=Math.floor(n.w0n(100,e)),n.k8O(97);var s=n.i6w(13,20,7,73);n.u2S(50);var o=n.w0n(12,8);r=s-a+Math.floor(a/o),n.u2S(9);var l=n.w0n(8,9);n.u2S(9);var h=n.i6w(19,4735);n.k8O(92);var c=n.w0n(271,15,18);n.s0Y(),n.u2S(25);var u=n.w0n(1514,151,1510);return Math.floor("365.25"*l*(e+h))+Math.floor(30.6001*(t+c))+i+r-u},getLocalOffset:function(){return O.s0Y(),this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var e,t,i,r=O;function n(e){throw r.u2S(15),r.s0Y(),new Error(r.w0n("' is either incorrect, or not loaded in the timezone registry.","Timezone '",e))}function s(e,t){return r.u2S(9),r.s0Y(),-Math.ceil(r.i6w(e,t))}function o(e){var t,i,a,n;if(e[3])return t=parseInt(e[3],10),i=11,a=31,e[4]&&(i=l[e[4].substr(0,r.i6w("3",64,r.k8O(36)))],a=parseInt(e[5],10)||1),[t,i,a,(n=e[6]?m(e[6]):[0,0,0])[0],n[1],n[2]]}function u(e){var t,i;t=m(e),i="-"===e.charAt(0)?-1:1,r.k8O(25);var a=r.w0n(59,7,7);r.u2S(1);var n=r.i6w(45,15);r.k8O(32);var s=r.i6w(10,4,2,28,14);r.u2S(136);var o=r.w0n(157384,10,16,11,991);return t=i*(((t[0]*a+t[1])*n+t[s])*o),r.u2S(137),r.i6w(1e3,t,60)}function p(t,i){var a,s,o,l;for(a="number"==typeof t?t:new Date(+t).getTime(),s=i,o=e.zones[s],r.H5p();"string"==typeof o;)s=o,o=e.zones[s];if(!o){if(!e.loadedZones.backward)return e.loadZoneFile("backward"),p(t,i);if(s&&s!==i)return e.lazyLoadZoneFiles(s),p(t,s);n(s)}if(0===o.length)throw r.k8O(0),new Error(r.w0n(i,t,"' on ","No Zone found for '"));for(var h=o.length-1;h>=0&&!((l=o[h])[3]&&a>l[3]);h--);return r.u2S(1),o[r.w0n(1,h)]}function g(a){var s,o,l,h;return(s=i[a])?s:(o=a.split("/")[0],(l=t[o])?l:"string"==typeof(h=e.zones[a])?g(h):(r.s0Y(),e.loadedZones.backward?void n(a):("b","ac","kwa","rd",e.loadZoneFile("backward"),g(a))))}function m(e){var t,i;return r.s0Y(),t=/(\d{1,2})(?::0*(\d{1,2}))?(?::0*(\d{1,2}))?([wsugz])?$/,(i=e.match(t))[1]=parseInt(i[1],10),i[2]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}r.s0Y(),e=this,t={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=g,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t,i,a;r.k8O(2),t=r.w0n(0,"2");for(var n=1;-1089945110!==r.u1R(n.toString(),n.toString().length,71289);n++)i={async:!0},a=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",t+=2;for(var s in 900894973!==r.u1R(t.toString(),t.toString().length,84451)&&(i={async:!1},a=this.loadingScheme!==this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile&&""),e)i[s]=e[s];return this.loadZoneFiles(a,i)},this.loadZoneFiles=function(e,t){var i,a;if("s","tr","in","g",r.k8O(3),a=r.i6w(1,"0"),"string"==typeof e)return this.loadZoneFile(e,t);i=(t=t||{}).callback,t.callback=function(){++a===e.length&&"function"==typeof i&&i()};for(var n=0;n<e.length;n++)this.loadZoneFile(e[n],t)},this.loadZoneFile=function(t,i){var a,n,s;if("u","n","defin","ed",void 0===this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,a=t,n=i,r.H5p(),s=e.zoneFileBasePath+"/"+a,n&&n.async?e.transport({async:!0,url:s,success:function(t){return r.H5p(),e.parseZones(t)&&"function"==typeof n.callback&&n.callback()},error:function(){throw r.k8O(15),new Error(r.w0n("' zoneinfo files","Error retrieving '",s))}}):e.parseZones(e.transport({url:s,async:!1}))},this.loadZoneJSONData=function(t,i){var a;return a=function(t){for(var i in(t=JSON.parse(t)).zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]},i?a(e.transport({url:t,async:!1})):e.transport({url:t,success:a})},this.loadZoneDataFromObject=function(t){if(t){for(var i in t.zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]}},this.getAllZones=function(){var e;for(var t in e=[],this.zones)e.push(t);return e.sort()},this.parseZones=function(t){var i,a,n,s,l;if(!t)return!1;i=t.split("\n"),a=[],s=null,l=null;for(var h=0;h<i.length;h++)if((n=i[h]).match(/^\s/)&&("Zone"," ",r.k8O(15),n=r.w0n(n,"Zone ",s)),(n=n.split("#")[0]).length>3)switch((a=n.split(/\s+/)).shift()){case"Zone":if(s=a.shift(),e.zones[s]||(e.zones[s]=[]),a.length<3)break;a.splice(3,a.length,o(a)),a[3]&&(a[3]=Date.UTC.apply(null,a[3])),a[0]=-u(a[0]),e.zones[s].push(a);break;case"Rule":l=a.shift(),e.rules[l]||(e.rules[l]=[]),a[0]=parseInt(a[0],10),r.u2S(36),a[r.w0n("1",64)]=parseInt(a[1],10)||a[1],a[5]=m(a[5]),a[6]=u(a[6]),e.rules[l].push(a);break;case"Link":if(e.zones[a[1]]){"Er","ror with Link ",r.u2S(138);var c=r.i6w(19,8,13,4,4);throw new Error("Error with Link "+a[c]+". Cannot create link of a preexisted zone.")}isNaN(a[0])?(r.u2S(2),e.zones[a[1]]=a[r.i6w(0,"0")]):e.zones[a[1]]=parseInt(a[0],10)}return!0},this.transport=d,this.getTzInfo=function(t,i,n){var o,u,d;return r.s0Y(),this.lazyLoadZoneFiles(i),u=+(o=p(t,i))[0],(d=function(t,i,n,o){var u,d,p,g,m,f,y,v,b,x,S,C,w;if(u="number"==typeof t?new Date(t):t,d=i[1],p=i[0],g=d.match(/^([0-9]):([0-9][0-9])$/)){r.k8O(20);var k=r.w0n(5,3,14);r.u2S(23);var T=r.w0n(13,153,150);r.u2S(20);var D=r.i6w(12,13,154);r.k8O(134);var _=r.i6w(17,9,17,29,29);return[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(g[k],T)+parseInt(g[D],_),"-"]}if(m=function(e,t,i){var a,n;if(r.k8O(36),a=r.i6w("0",96),"u"===t||"g"===t||"z"===t){n=2;for(var o=1;-2051351341!==r.u1R(o.toString(),o.toString().length,83716);o++)a=0,n+=2;-731730665!==r.u1R(n.toString(),n.toString().length,88243)&&(a=1)}else if("s"===t)a=p;else{if("w"!==t&&t)throw r.k8O(1),new Error(r.w0n(t,"unknown type "));a=s(p,i[6])}return r.k8O(3),a*=r.i6w(1e3,60),new Date(e.getTime()+a)},f=function(e,t){var i,a,n,s,o,u,d;return i=e[0],a=e[1],r.H5p(),n=a[5],c[i]||(c[i]={}),c[i][a]?s=c[i][a]:(isNaN(a[4])?("last"===a[4].substr(0,4)?(s=new Date(Date.UTC(i,l[a[3]]+1,1,n[0]-24,n[1],n[2],0)),o=h[a[4].substr(r.i6w(1,"4",r.k8O(3)),3)],u="<="):(s=new Date(Date.UTC(i,l[a[3]],a[4].substr(5),n[0],n[1],n[2],0)),o=h[a[4].substr(0,3)],u=a[4].substr(3,2)),d=s.getUTCDay(),">="===u?s.setUTCDate(s.getUTCDate()+(o-d+(o<d?7:0))):s.setUTCDate(s.getUTCDate()+(o-d-(o>d?7:0)))):s=new Date(Date.UTC(i,l[a[3]],a[4],n[0],n[1],n[2],0)),c[i][a]=s),t&&(s=m(s,n[3],t)),s},y=function(e,t){var i;if(r.s0Y(),i=[],t)for(var a=0;a<t.length;a++)t[a][0]<=e&&(t[a][1]>=e||t[a][0]===e&&"only"===t[a][1]||"max"===t[a][1])&&i.push([e,t[a]]);return i},v=function(e,t,i){var a,s;return e instanceof Date?i&&(e=m(e,n?"u":"w",i)):(a=e[0],s=e[1],e=!i&&c[a]&&c[a][s]?c[a][s]:f(e,i)),t instanceof Date?i&&(t=m(t,n?"u":"w",i)):(a=t[0],s=t[1],t=!i&&c[a]&&c[a][s]?c[a][s]:f(t,i)),e=Number(e),t=Number(t),r.u2S(9),r.w0n(t,e)},b=u.getUTCFullYear(),(S=a.ruleCache[o])||(S=a.ruleCache[o]={}),(x=S[b])||(r.k8O(135),(x=(x=y(r.i6w("1",1,b),e.rules[d])).concat(y(b,e.rules[d]))).sort(v),S[b]=x),r.H5p(),!x||!x.length)return null;for(var A=x.length-1;A>=0;A--)if(A>0?(r.u2S(9),C=x[r.i6w(1,A)][1]):C=null,(w=x[A])[2]||(w[2]=f(w,C)),v(u,w,C)>=0)return w[1];return null}(t,o,n,i))&&(u=s(u,d[6])),{tzOffset:u,tzAbbr:function(e,t){var i,a;if((i=e[2]).indexOf("%s")>-1)return a=t?"-"===t[7]?"":t[7]:"S",i.replace("%s",a);if(i.indexOf("/")>-1)return i.split("/",r.w0n("2",0,r.k8O(27)))[t&&t[6]?1:0];return i}(o,d)}},this.lazyLoadZoneFiles=function(e){var t;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(t=g(e)))throw"Not a ","valid timezo","ne ID.",new Error("Not a valid timezone ID.");this.loadZoneFiles(t)}}}}.call("undefined"!=typeof window?window:void 0),a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,"","%s",null]],"Africa/Johannesburg":[[-120,"","SAST",null]],"Africa/Tunis":[[-60,"","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"","+04/+05",null]],"Asia/Dhaka":[[-360,"","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"","C%sT",null]],"Asia/Hong_Kong":[[-480,"","HK%sT",null]],"Asia/Taipei":[[-480,"","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"","K%sT",null]],"Asia/Pyongyang":[[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"","AC%sT",null]],"Australia/Perth":[[-480,"","AW%sT",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Hobart":[[-600,"AT","AE%sT",null]],"Australia/Melbourne":[[-600,"AV","AE%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Australia/Lord_Howe":[[-630,"LH","+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"Europe/Copenhagen":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-180,"-","+03",1540692e6],[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Madrid":[[-60,"EU","CE%sT",null]],"Europe/Stockholm":[[-60,"EU","CE%sT",null]],"Europe/Zurich":[[-60,"EU","CE%sT",null]],"Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[180,"-","-03",null]],"America/Bogota":[[300,"","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"","-03/-02",null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":"Europe/Moscow","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","30",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"],[2026,"only","-","Feb","15",[3,0,0,null],-60,"-"],[2026,"only","-","Mar","22",[2,0,0,null],0,"-"]],Troll:[[2005,"max","-","Mar","lastSun",[1,0,0,"u"],120,"+02"],[2004,"max","-","Oct","lastSun",[1,0,0,"u"],0,"+00"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],0,"-"],[2025,2027,"-","Mar","21",[24,0,0,null],60,"-"],[2025,2027,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Jordan:[[2014,2021,"-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"],[2022,"max","-","Feb","lastThu",[24,0,0,null],60,"S"]],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Palestine:[[2016,2018,"-","Mar","Sat>=24",[1,0,0,null],60,"S"],[2016,2018,"-","Oct","Sat>=24",[1,0,0,null],0,"-"],[2019,"only","-","Mar","29",[0,0,0,null],60,"S"],[2019,"only","-","Oct","Sat>=24",[0,0,0,null],60,"-"],[2020,2021,"-","Mar","Sat>=24",[0,0,0,null],60,"S"],[2020,"only","-","Oct","24",[1,0,0,null],60,"-"],[2021,"max","-","Oct","Fri>=23",[1,0,0,null],0,"-"],[2022,"max","-","Mar","Sun>=25",[0,0,0,null],60,"S"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AT:[[2001,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,2021,"-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"],[2022,"max","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2023,"max","-","Jan","Sun>=12",[3,0,0,null],0,"-"]],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,2021,"-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,2020,"-","Sep","lastSun",[3,0,0,null],60,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Brazil:[[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]]}})},T=e=>{var t,i;function a(e,i,a){var r;e.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,e.cx=e.backOutX(0),O.k8O(58),e.cy=e.backOutY(O.i6w("0",0)),e.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,r=e.container.getBoundingClientRect(),e.top=r.top,e.left=r.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(i),e.cy=e.backOutY(a),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR()),e.findHighlights(!0),e.draw()}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.touchSingleClick=function(e,i,r){var n,s;return n=this,s=arguments,function(){(function(){var e,n,o;if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;e=this.crossYActualPos,n=this.crossXActualPos,this.currentPanel=this.whichPanel(e),o=this.currentVectorParameters.vectorType,t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,e)||a(this,i,r),this.currentVectorParameters.vectorType||this.activeMarker&&this.activeMarker.click({cx:n,cy:e,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:e}))}O.H5p(),this.runAppend("touchSingleClick",s)}).apply(n,s)}},t.ChartEngine.prototype.touchDoubleClick=function(e,i,r){if(!this.runPrepend("touchDoubleClick",arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(a(this,i,r),this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel})||this.dispatch("doubleTap",{stx:this,finger:e,x:i,y:r}),this.runAppend("touchDoubleClick",arguments)))},t.ChartEngine.prototype.startProxy=function(e){this.touchPointerType=e.pointerType,"touch"==this.touchPointerType?(this.mouseMode=!1,this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],1==this.touches.length&&(this.gesturePointerId=e.pointerId),this.touchstart(e)):this.mouseMode=!0},t.ChartEngine.prototype.moveProxy=function(e){e.pointerType&&"touch"!=e.pointerType?this.mouseMode=!0:(O.s0Y(),this.mouseMode=!1,this.touchmove(e))},t.ChartEngine.prototype.endProxy=function(e){var t;if(O.s0Y(),"touch"==this.touchPointerType){this.mouseMode=!1,t=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==e.pointerId){O.u2S(2),this.touches.splice(i,O.w0n(0,"1"));break}if(i==t)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],this.touchend(e)}else this.mouseMode=!0},t.ChartEngine.prototype.msMouseMoveProxy=function(e){!this.touches.length&&this.mouseMode&&this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){this.mouseMode&&this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){this.mouseMode&&this.mouseup(e)},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){this.touching||this.mousemove(e)},t.ChartEngine.prototype.iosMouseDownProxy=function(e){this.touching?this.mouseMode=!1:(O.H5p(),this.mouseMode=!0,this.mousedown(e))},t.ChartEngine.prototype.iosMouseUpProxy=function(e){this.touching||this.mouseup(e)},t.ChartEngine.prototype.touchmove=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,E,I,N,H,V,R,Y,z=O;if(i="touc",i+="hm",i+="ove",a="free",a+="for",a+="m",r="p",r+="e",r+="n",this.displayInitialized&&""===this.openDialog&&!0!==t.ChartEngine.ignoreTouch){if(n=[],(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),s=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=s,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=s,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var B=0;B<this.touches.length;B++)if(this.touches[B].pointerId==e.pointerId){if(o=Math.abs(this.touches[B].pageX-e.clientX),l=Math.abs(this.touches[B].pageY-e.clientY),z.u2S(42),!Math.sqrt(z.i6w(l,o,l,o)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[B].pageX==e.clientX&&this.touches[B].pageY==e.clientY)return;this.touches[B].pageX=this.touches[B].clientX=e.clientX,this.touches[B].pageY=this.touches[B].clientY=e.clientY;break}if(0===B?this.movedPrimary=!0:this.movedSecondary=!0,B==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],n=this.touches.length?this.touches:this.changedTouches}else n=e.touches,this.changedTouches=e.changedTouches;if(!(1==n.length&&Math.pow(this.clicks.x-n[0].clientX,2)+Math.pow(this.clicks.y-n[0].clientY,2)<=16||(h=this.crosshairXOffset,c=this.crosshairYOffset,u=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,d=!this.layout.crosshair&&!u&&!this.touchNoPan,(e.pointerType==r||d||this.activeDrawing&&this.activeDrawing.name==a)&&(h=c=0),this.runPrepend(i,arguments)))){if(t.ChartEngine.resizingPanel)return p=(m=n[0]).clientX,g=m.clientY,z.k8O(1),void this.mousemoveinner(z.i6w(h,p),z.w0n(c,g));if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=n[0].pageX,1!=n.length||this.twoFingerStart){if(2==n.length){if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom)return;if(!this.displayCrosshairs)return;if(S=(x=n[0]).clientX,C=x.clientY,k=(w=n[1]).clientX,T=w.clientY,z.k8O(139),f=Math.sqrt(z.w0n(k,T,C,k,C,S,S,T)),this.pinchingCenter=(Math.min(S,k)-Math.max(S,k))/2,D=Math.round(this.gestureStartDistance-f),d&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(S<this.pt.x1&&k<this.pt.x2||S>this.pt.x1&&k>this.pt.x2||C<this.pt.y1&&T<this.pt.y2||C>this.pt.y1&&T>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:S,x2:k,y1:C,y2:T},0===this.pinchingScreen)this.grabMode="pan",z.k8O(1),this.mousemoveinner(z.w0n(h,S),z.i6w(c,C)),this.gestureStartDistance=f;else if(this.grabStartValues){if(_=Math.asin((Math.max(T,C)-Math.min(T,C))/f),Math.abs(D)<12&&!d){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(_<1||!this.goneVertical&&_<1.37){if(!this.currentPanel)return;A=this.currentPanel.chart,this.goneVertical=!1,f=this.pt.x2-this.pt.x1,M=this.grabStartValues.t2-this.grabStartValues.t1||1,z.u2S(140);var j=z.i6w(10,10,19);if(F=this.grabStartValues.t1+M/("2"*j),z.k8O(10),P=Math.abs(z.i6w(M,f)),!1===A.allowScrollFuture&&!1===A.allowScrollPast&&(P=Math.max(P,A.width/A.dataSet.length)),L=this.layout.candleWidth,this.setCandleWidth(P,A),A.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(L,A);this.micropixels=0,E=this.pixelFromTick(Math.round(F),A),z.u2S(141);var $=z.w0n(1,3,4,5);I=this.pt.x1-this.left+Math.round(f/$),z.u2S(9),N=z.i6w(I,E),z.k8O(10),H=z.i6w(P,N),V=Math.round(H),A.scroll-=V,z.u2S(9),this.microscroll=z.i6w(H,V),this.micropixels=P*this.microscroll,this.draw()}else if(R=this.grabStartYAxis,this.goneVertical=!0,R){if(R.zoom=this.grabStartZoom+(this.gestureStartDistance-f),this.grabStartZoom<R.height){if(R.zoom>=R.height){z.k8O(23);var X=z.w0n(9,8,0);R.zoom=R.height-X}}else if(R.zoom<=R.height){z.u2S(1);var W=z.w0n(1,0);R.zoom=R.height+W}this.draw()}this.updateChartAccessories()}}else if(3==n.length&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;Y=n[0].clientX,f=this.grabStartX-Y,z.k8O(20);var U=z.i6w(7,11,67);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(f/U),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else p=(y=n[0]).clientX,g=y.clientY,this.pinchingScreen=0,z.k8O(1),this.mousemoveinner(z.i6w(h,p),z.i6w(c,g)),v=this.whichPanel(g),b=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=g<=this.top+b&&g>=b-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!v&&((p>=v.right||p<=v.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}},t.ChartEngine.prototype.touchstart=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P=O;if(!t.ChartEngine.ignoreTouch&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),i=this.crosshairXOffset,r=this.crosshairYOffset,"pen"==this.touchPointerType&&(i=r=0),!this.runPrepend("touchstart",arguments))){var L,E,I,{layout:N}=this,{vectorType:H}=this.currentVectorParameters;if(n=N.crosshair&&""!==H||H,this.manageTouchAndMouse&&e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,this.moveCount=0,P.H5p(),this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),u=this.touches[0],l=u.clientX,h=u.clientY,this.moveA=l,this.moveB=-1,""===this.openDialog&&(this.registerPointerEvent({x:l,y:h,time:this.touchMoveTime},"down"),1!=this.changedTouches.length||this.isDoubleClick(!0)||t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),d=this.container.getBoundingClientRect(),this.top=d.top,this.left=d.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(p=this.backOutY(h),this.currentPanel=this.whichPanel(p)),this.currentPanel||(this.currentPanel=this.chart.panel),c=this.currentPanel,l>=this.left&&l<=this.right&&h>=this.top&&h<=this.bottom){this.insideChart=!0,g=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=h<=this.top+g&&h>=this.top+g-this.xaxisHeight,this.overYAxis=l>=this.left+c.right||l<=this.left+c.left,m=-1,this.cy=this.backOutY(h),this.cx=this.backOutX(l),this.crosshairTick=this.tickFromPixel(this.cx,c.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var V=0;V<this.drawingObjects.length;V++)if((f=this.drawingObjects[V]).highlighted){if(m<0&&(m=V),y=f.highlighted,this.findHighlights(!0),V==m&&f.highlighted&&!f.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(f):this.findHighlights(!1,!0));this.anyHighlighted=!0,f.highlighted=y}}else this.insideChart=!1;if(!this.insideChart||n||"floating"===N.headsUp||N.headsUp&&N.headsUp.floating||H||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&c.subholder===e.target&&(D=this.currentVectorParameters.vectorType,t.Drawing&&D&&t.Drawing[D]&&(new t.Drawing[D]).dragToDraw))return this.userPointerDown=!0,t.ChartEngine.crosshairX=l,t.ChartEngine.crosshairY=h,c&&c.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(c,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(c,this.backOutX(l),this.backOutY(h)),void this.headsUpHR()}else{i=r=0;var{baselineHelper:R}=this;if(R.size&&this.findBaselineHandle(e,!0))return;if(this.controls.anchorHandles){v=Object.values(this.controls.anchorHandles),b=!1;for(var Y=0;Y<v.length;Y++){x=v[Y];var{handle:z,sd:B}=x;S=this.resolveX(this.cx),C=this.resolveY(this.cy);var{left:j,top:$,right:X,bottom:W}=z.getBoundingClientRect();w=this.preferences.highlightsTapRadius,P.u2S(9),(k=t.boxIntersects(P.i6w(w,j),$,P.w0n(w,X,P.u2S(1)),W,S,C,S,C))&&(T="stx-gr",T+="ab",this.repositioningAnchorSelector={sd:B},z.classList.add(T),b=!0),x.highlighted=k}if(b)return}for(s in this.panels)if((o=this.panels[s]).highlighted)return void this.grabHandle(o);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,this.yToleranceBroken=!1,P.k8O(1),this.grabStartX=P.w0n(i,l),P.k8O(1),this.grabStartY=P.i6w(r,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(c.chart),this.grabStartYAxis=this.whichYAxis(c,this.backOutX(l)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((E=this,P.s0Y(),function(){P.s0Y(),E.grabbingHand()}),100)}1==this.touches.length&&(n?H||c.subholder!==e.target||(P.u2S(1),this.mousemoveinner(P.i6w(i,l),P.w0n(r,h))):(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer((L=this,()=>(P.H5p(),a(L,l,h))))))}if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(s in A=(_=this.touches[1]).clientX,M=_.clientY,this.panels)if((o=this.panels[s]).highlighted)return void this.grabHandle(o);c=this.currentPanel,P.k8O(139),this.gestureStartDistance=Math.sqrt(P.w0n(A,M,h,A,h,l,l,M)),this.pt={x1:l,x2:A,y1:h,y2:M},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),c.chart.spanLock=!1,P.u2S(1),this.grabStartX=P.i6w(i,l),P.u2S(1),this.grabStartY=P.w0n(r,h),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=c.chart.scroll,this.grabStartScrollY=c.yAxis.scroll,this.grabStartPanel=c,this.swipeStart&&this.swipeStart(c.chart),this.grabStartCandleWidth=N.candleWidth,this.grabStartYAxis=this.whichYAxis(c,this.backOutX((l+A)/2))||c.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,c),y2:this.valueFromPixel(this.pt.y2-this.top,c),t1:this.tickFromPixel(this.pt.x1-this.left,c.chart),t2:this.tickFromPixel(this.pt.x2-this.left,c.chart)},this.twoFingerStart=!0,setTimeout((I=this,function(){P.s0Y(),I.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;F=this.touches[0].clientX,this.grabStartX=F,this.grabStartPeriodicity=N.periodicity}this.runAppend("touchstart",arguments)}},t.ChartEngine.prototype.touchend=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v=O;if(!t.ChartEngine.ignoreTouch&&(this.swipe.end=!0,t.isSurface||(this.touches=e.touches,this.changedTouches=e.changedTouches),!this.runPrepend("touchend",arguments))){var{touches:b,layout:x}=this;i=1536145709,a=-2085906997,r=2;for(var S=1;v.u1R(S.toString(),S.toString().length,55317)!==i;S++){var{vectorType:C}=this.currentVectorParameters;n=(x.crosshair||""!=C)&&C,v.k8O(27),r+=v.i6w("2",0)}if(v.r57(r.toString(),r.toString().length,99642)!==a){var{vectorType:C}=this.currentVectorParameters;n=x.crosshair&&""===C||C}var w,{vectorType:C}=this.currentVectorParameters;if(v.s0Y(),n=x.crosshair&&""!==C||C,this.cancelLongHold=!0,b.length<=1&&n&&(b.length&&this.twoFingerStart||(this.grabbingScreen=!1)),b.length&&(this.grabStartX=-1,this.grabStartY=-1),s=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),b.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((w=this,function(){w.touching=!1}),500),t.ChartEngine.resizingPanel&&(this.releaseHandle(),1!==this.changedTouches.length||this.grabStartY!==this.changedTouches[0].clientY))return;this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}v.k8O(30);var k=v.i6w(3,395,3,7,19);if(o=b.length+k,1===this.changedTouches.length){if(l=Date.now(),h=this.changedTouches[0],c=this.backOutY(h.pageY)+this.crosshairYOffset,u=this.backOutX(h.pageX)+this.crosshairXOffset,p=(d=this.currentPanel)&&d.subholder===e.target,this.repositioningDrawing)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(n||this.findHighlights(!1,!0));if(this.repositioningBaseline)return this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(g=this.mainSeriesRenderer||{}).params&&g.params.baseline&&g.params.type,void this.draw();if(this.repositioningAnchorSelector)return this.repositioningAnchorSelector.hoverTick||(this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(u-this.crosshairXOffset,this.chart)),m=this.repositioningAnchorSelector.sd,t.Studies.repositionAnchor(this,m),this.repositioningAnchorSelector=null,this.controls.anchorHandles[m.uniqueId].highlighted=!1,t.Studies.displayAnchorHandleAndLine(this,m,this.chart.dataSegment),void Object.values(this.controls.anchorHandles).forEach((({handle:e})=>e.classList.remove("stx-grab")));if(""===this.openDialog&&(f="u",f+="p",this.registerPointerEvent({x:h.clientX,y:h.clientY,time:l},f)),-1==this.clicks.s2MS){if(this.clicks.e1MS=l,!(t.Drawing&&C&&t.Drawing[C]&&(new t.Drawing[C]).dragToDraw)){var{up:T,down:D}=this.pointerEvents;y=1200,v.u2S(1);var _=v.i6w(2,0);Math.pow(D[0].x-T[0].x,_)+Math.pow(D[0].y-T[0].y,2)<=y&&this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||n)?setTimeout(this.touchSingleClick(o,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}if(this.userPointerDown=!1,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&p)return void this.drawingClick(d,u,c);this.isDoubleClick(!0)&&(p||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(o,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=l,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));this.changedTouches.length&&((!n&&!this.currentVectorParameters.vectorType&&1==o||this.twoFingerStart&&!s&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),s&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),b.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){i||console.error("touch feature requires activating movement feature."),O.s0Y(),i=!0}},D=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Visualization=t.Visualization||function(e){if(!e)return"C","I","Q.Visu","alization() missing attributes argument.",void console.log("CIQ.Visualization() missing attributes argument.");"function"==typeof e.renderFunction?(this.container=null,this.attributes=e,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes.")},t.extend(t.Visualization.prototype,{destroy:function(e){var i;i=this.container||{},t.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.remove(),delete this.container):i.innerHTML="",e||(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){})},draw:function(e){var i,a,r,n,s,o,l,h,c=O;if("str","ing",this.data&&"object"==typeof this.data){if(i=this.attributes||{},a=i.document||document,"string"==typeof(r=i.container||this.container)&&(r=a.querySelector(r)),!r){(r=document.createElement("div")).style.height=r.style.width="300px",a.body.appendChild(r),2002561312,c.u2S(3),n=c.w0n(1,"178842326"),s=2;for(var u=1;2002561312!==c.r57(u.toString(),u.toString().length,62146);u++)r.autoGenerated=!1,s+=2;c.r57(s.toString(),s.toString().length,17217)!==n&&(r.autoGenerated=!0)}i.stx&&(o=i.stx.chart.canvasShim,i.useCanvasShim&&o&&o!==r&&o!==r.parentNode&&(r.autoGenerated||((r=r.cloneNode()).id="",r.autoGenerated=!0),o.appendChild(r))),this.container&&this.container!==r&&this.destroy(!0),c.H5p(),r.resizeHandle||(l=function(e){return c.H5p(),function(){e.data&&e.container&&a.body.contains(e.container)&&e.draw.call(e,!0)}},r.resizeHandle=t.resizeObserver(r,l(this),null)),this.container=r,this.attributes=i,(h=(i=t.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(e,t){return c.H5p(),e.index<t.index?-1:e.index>t.index?1:0})),i))&&(i.id&&(h.id=i.id),(e||i.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(h))),this.attributes=i,this.object=h}else console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(e,t){var i,a,r;if("o","bj","ect","s","t","x","con","taine","r",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,r=e,"string"==typeof e&&((r={})[e]=t),"object"==typeof r)for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(e,i){var a,r,n;for(a in"repla","c","e",n=Array.isArray(e)?e.reduce((function(e,t){return e[t.name]=t,O.H5p(),e}),{}):t.shallowClone(e))r=n[a],"[object Object]"!==Object.prototype.toString.call(r)&&(n[a]={value:r}),n[a].name||(n[a].name=a),n[a].value||(n[a].value=0);switch(i||(i="replace"),i.toLowerCase()){case"delete":for(a in n)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in n)for(var s in this.data[a]||(this.data[a]={name:a}),r=n[a].value,"[object Number]"==Object.prototype.toString.call(r)?(this.data[a].value&&"update"!=i||(this.data[a].value=0),this.data[a].value+=r):this.data[a].value=r,n[a])"value"!==s&&(this.data[a][s]=n[a][s]);break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),t.ChartEngine.prototype.embedVisualization=function(e){return e||(e={}),e.stx=this,e.useCanvasShim=!0,e.translator=function(t){return e.stx.translateIf(t)},e.document=this.container.ownerDocument,new t.Visualization(e)}},_=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTypicalPrice=function(e,t){var i,a,r,n,s,o=O;if("We","ight","ed",o.H5p()," Close",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.overlay||(t.error=!0);else{for(var l in r=t.name,t.outputs)o.u2S(15),r=o.i6w(r,l," ");n="hlc/3","Med Price"==t.type?n="hl/2":"Weighted Close"==t.type&&(n="hlcc/4"),s=0,t.startFrom<=a&&(t.startFrom=0);for(var h=t.startFrom;h<i.length;h++){if(h&&i[h-1][r])o.u2S(50),s=i[h-o.w0n(12,11)][r]*a;s+=i[h][n],h>=a&&(o.u2S(9),s-=i[o.i6w(a,h)][n],o.u2S(10),i[h][r]=o.i6w(a,s))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("medianPrice feature requires first activating studies feature.")},A=e=>{var t,i=O;i.H5p(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("fie","l","d",t.Studies.calculateRateOfChange=function(e,t){var a,r,n,s,o,l,h;if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{for(var c in(r=t.inputs.Field)&&"field"!=r||(r="Close"),t.parameters.isVolume&&(r="Volume"),n=t.name,t.outputs)i.k8O(15),n=i.i6w(n,c," ");s=(s=t.inputs["Center Line"])?parseInt(s,10):0;for(var u=Math.max(t.startFrom,t.days);u<a.length;u++)"Mom","ent","um","objec","t",(o=a[u][r])&&"object"==typeof o&&(o=o[t.subField]),(l=a[u-t.days][r])&&"object"==typeof l&&(l=l[t.subField]),"Momentum"==t.type?(i.u2S(16),a[u][n]=i.i6w(s,l,o)):(h=l)&&(i.k8O(142),a[u][n]=i.w0n("1",o,s,h,100,0))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")},M=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.initPriceRelative=function(e,i,a,r,n,s){var o,l;return l=[(o=t.Studies.initializeFN(e,i,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],t.Studies.fetchAdditionalInstruments(e,o,l),O.H5p(),o},t.Studies.calculatePriceRelative=function(e,i){var a,r,n,s,o,l;if(a=i.chart.scrubbed,O.H5p(),(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),(n={})[s=(s=e.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),O.u2S(76),o=t.computeEquationChart(O.i6w("]/[","[",s,"]",r),n),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for("Res","ult ";l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},t.Studies.displayVsComparisonSymbol=function(e,i,a){var r,n,s,o,l=O;if(r=i.inputs["Comparison Symbol"].toUpperCase(),!e.getSeries({symbol:r,chart:i.chart}).length)return":"," ",void e.displayErrorAsWatermark(i.panel,e.translateIf(i.study.name)+": "+e.translateIf("Not Available"));s=(n={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(e),gapDisplayStyle:!0}).yAxis?n.yAxis.flipped:e.panels[i.panel].yAxis.flipped,l.u2S(3),o=l.i6w(1,"0.3"),!i.highlight&&e.highlightedDraggable&&(l.u2S(9),o*=l.w0n(0,"0.3"));for(var h=a.length-1;h>=0;h--)if(a[h]&&a[h][r])return t.Studies.displaySeriesAsLine(e,i,a),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?-1:1,color:t.Studies.determineColor(i.outputs.Gain),opacity:o})),i.outputs.Loss&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?1:-1,color:t.Studies.determineColor(i.outputs.Loss),opacity:o}))))},t.Studies.fetchAdditionalInstruments=function(e,i,a,r){var n,s,o,l,h,c;if(e.quoteDriver)for(n=e.panels[i.panel].chart,O.s0Y(),i.symbols=a,s=0;s<a.length;s++)o=l=a[s],"object"==typeof l?o=l.symbol:l={symbol:o},h={symbol:o,symbolObject:l,bucket:"study",studyName:i.name,chartName:n.name,action:"add-study"},t.extend(h,r),c=h.loadData,e.currentlyImporting&&(h.loadData=!1),i.series||(i.series={}),i.series[o]=e.addSeries(null,h,u),i.series[o].parameters.loadData=c;else console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function u(){e.createDataSet(),e.draw()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("priceRelative feature requires first activating studies feature.")},F=e=>{var t,i,a=O;a.s0Y(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Studies?("#","fff6","9","e","V","WA","P","hh:mm:s","s","#85c99","e","#e1e1e","1","An","chored V","WAP",t.Studies.calculateVWAP=function(e,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(!(r.parameters.state||{}).interactiveAdd){var{inputs:b,name:x,chart:S}=r,{market:C}=S;if(n="AVWAP"===r.type,(s=S.scrubbed).length){if(!n&&t.ChartEngine.isDailyInterval(e.layout.interval))return"V","WAP is Intrad","ay"," Only",void(r.error="VWAP is Intraday Only");if(o="hlc/3",n&&("f","i","e","ld",(o=b.Field)&&"field"!=o||("h","l","c/","3",o=b.Field="hlc/3",e.changeOccurred("layout"))),l=null,h=0,c=0,u=0,d=!1,r.startFrom>1&&("_","Vx","P2"," ","_V","x","P"," ",h=s[r.startFrom-1]["_V "+x]||0,c=s[r.startFrom-1]["_VxP "+x]||0,u=s[r.startFrom-1]["_VxP2 "+x]||0),n){"Anchor Se","l","e","ctor";var{market_tz:w}=C.market_def||{},[,k,T,D]=(b["Anchor Date"]||"").match(/^(\d{4})-?(\d{2})-?(\d{2})$/)||[],[,_=0,A=0,M=0]=(b["Anchor Time"]||"").match(/^(\d{2}):?(\d{2}):?(\d{2})?$/)||[];if(![k,T,D].every((e=>e||0===e)))return void(r.error="Invalid Anchor Date");a.k8O(9),p=new i.Date(k,a.i6w(1,T),D,_,A,M,w||""),!r.startFrom&&p>=s[0].DT&&(r.startFrom=e.tickFromDate(p,e.chart,null,!0)),b["Anchor Selector"]?t.Studies.initAnchorHandle(e,r):t.Studies.removeAnchorHandle(e,r)}for(var F=r.startFrom;F<s.length;F++)if(n||(null===l&&(l=t.Studies.getMarketOffset({stx:e,localQuoteDate:s[F].DT,shiftToDateBoundary:!0})),s[F-1]&&s[F-1].DT&&(g=new Date(new Date(+s[F].DT).setMilliseconds(s[F].DT.getMilliseconds()+l)),new Date(new Date(+s[F-1].DT).setMilliseconds(s[F-1].DT.getMilliseconds()+l)).getDate()!==g.getDate()&&e.chart.market.isMarketDate(g)&&(l=null,h=c=u=0))),m=s[F][o],f=s[F].Volume,n&&!f&&(a.k8O(9),f=a.w0n(0,"1")),h+=f,a.k8O(3),c+=a.w0n(m,f),a.k8O(143),u+=a.i6w(m,f,m),n||h){a.k8O(1),s[F][a.i6w(x,"_V ")]=h,a.u2S(1),s[F][a.i6w(x,"_VxP ")]=c,a.k8O(1),s[F][a.w0n(x,"_VxP2 ")]=u,a.u2S(1),y=s[F][a.w0n(x,"_SDVWAP ")]=Math.sqrt(Math.max(0,u/h-Math.pow(c/h,2))),a.k8O(1),v=s[F][a.i6w(x,"VWAP ")]=a.i6w(h,c,a.k8O(10));for(var P=1;P<=3;P++)"+"," ",a.k8O(0),s[F][a.i6w(P,x,"+ ","SDVWAP")]=a.w0n(P,y,v,a.k8O(45)),a.u2S(0),s[F][a.w0n(P,x,"- ","SDVWAP")]=a.w0n(P,y,v,a.k8O(135));d=!0}for(var L=1;L<=3;L++)"Disp","l","ay ",b["Display "+L+" Standard Deviation ("+L+"σ)"]&&("σ",")"," Stan","dard ","Deviation (","+"," ",a.k8O(0),r.outputMap[a.i6w(L,x,"+ ","SDVWAP")]=a.w0n(" Standard Deviation (","σ)",L,L),a.k8O(0),r.outputMap[a.w0n(L,x,"- ","SDVWAP")]=a.w0n(" Standard Deviation (","σ)",L,L));n||d||("VWAP Requ","ires"," Volume",r.error="VWAP Requires Volume")}}},t.Studies.initAnchoredVWAP=function(e,i,r,n,s,o){var l,h,c,u;s.state||(s.state={});var{interactiveAdd:d,interactiveAddCB:p,state:g}=s;if(h="Click to select AVWAP anchor time",(l=!(r["Anchor Date"]||r["Anchor Time"]))&&(g.interactiveAdd||e.repositioningAnchorSelector))return"abort";var{dataSegment:m}=e.chart;if(m&&l&&!d)for(var f=0;f<m.length;f++)if(m[f]){"HH:m","m:","s","s","YYYY-MM-","d","d";var{DT:y}=m[f];r["Anchor Date"]=t.dateToStr(y,"YYYY-MM-dd"),r["Anchor Time"]=t.dateToStr(y,"HH:mm:ss");break}if(l&&d)g.interactiveAdd=!0;else{198456442,347878891,a.u2S(36),c=a.i6w("2",0);for(var v=1;198456442!==a.u1R(v.toString(),v.toString().length,55015);v++)g.interactiveAdd,s.interactiveAdd,p&&setTimeout(p),c+=2;347878891!==a.r57(c.toString(),c.toString().length,9072)&&(delete g.interactiveAdd,delete s.interactiveAdd,p&&setTimeout(p))}return u=t.Studies.initializeFN(e,i,r,n,s,o),g.interactiveAdd?("in","fo",e.repositioningAnchorSelector={sd:u,tapToAdd:!0},e.dispatch("notification",{message:h,type:"info",displayTime:0})):("no","ti","fi","cation",e.dispatch("notification",{message:h,remove:!0})),u},t.Studies.displayVWAP=function(e,i,r){var n,s,o,l,h,c,u,d;if(t.Studies.displaySeriesAsLine(e,i,r),n=i.inputs["Display 1 Standard Deviation (1σ)"],s=i.inputs["Display 2 Standard Deviation (2σ)"],o=i.inputs["Display 3 Standard Deviation (3σ)"],(n||s||o)&&i.inputs.Shading){if("V","W","AP ",l=e.panels[i.panel],h={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:l.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(h.opacity*=.3),c="VWAP "+i.name,u="VWAP "+i.name,n){"SDV","WAP","1+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},h)),c="SDVWAP1+ "+i.name,-231932557,1308309073,d=2;for(var p=1;-231932557!==a.r57(p.toString(),p.toString().length,16801);p++)u=""%i.name,d+=2;1308309073!==a.u1R(d.toString(),d.toString().length,14405)&&(u=""/i.name),u="SDVWAP1- "+i.name}s&&("SDV","WAP2-"," ","SDVW","AP2+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},h)),c="SDVWAP2+ "+i.name,u="SDVWAP2- "+i.name),o&&(t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},h)))}(i.anchorHandle||(i.parameters.state||{}).interactiveAdd)&&t.Studies.displayAnchorHandleAndLine(e,i,r)},t.Studies.removeAnchoredVWAP=function(e,i){a.H5p(),e.dispatch("notification",{message:"Click to select AVWAP anchor time",remove:!0}),t.Studies.removeAnchorHandle(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchoredVWAP,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2,interactiveAdd:!0}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")},P=e=>{var t,i=O;i.s0Y(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateZigZag=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y;function v(e,i){for(var r=e+1;r<i;r++)"R","esu","lt ",a[r]["ShadowResult "+t.name]=(a[i]["Result "+t.name]-a[e]["Result "+t.name])*(r-e)/(i-e)+a[e]["Result "+t.name],delete a[r]["Result "+t.name]}if("C","lose","L","o","w",(a=t.chart.scrubbed)&&a.length){r=t.highLowChart,n=null,s=null,o=t.inputs["Distance(%)"],l=0,h=0,c=0,u=null,d=null,p=0;for(var b=Math.min(a.length-1,t.startFrom);b>=0;b--)if(p=b,a[b]["_state "+t.name]){n=(g=a[b]["_state "+t.name])[0],s=g[1],l=g[2],h=g[3],c=g[4],u=g[5],i.u2S(36),d=g[i.w0n("6",32)];break}for(var x=p;x<a.length;x++){if("H","igh",m=a[x][r?"High":"Close"],f=a[x][r?"Low":"Close"],null===s||s<m)if(s=m,l<0&&(n=f),i.u2S(144),u=i.w0n("100",1,s,32,o),l>-1){if(null!==d&&s>d){"Clo","se","Re","sult"," ",a[h]["Result "+t.name]=a[h][r?"Low":"Close"],v(c,h),l=-1,n=f,c=h,h=x;continue}}else h=x;if(null===n||n>f)if(n=f,l>0&&(s=m),i.u2S(145),d=i.i6w(o,100,1,n),l<1){if(null!==u&&n<u){"C","lo","s","e","H","igh",a[h]["Result "+t.name]=a[h][r?"High":"Close"],v(c,h),l=1,s=m,c=h,h=x;continue}}else h=x}a[h]["Result "+t.name]=a[h][r?1==l?"Low":"High":"Close"],a[h]["_state "+t.name]=[n,s,l,h,c,u,d],v(c,h),i.k8O(146);var S=i.i6w(0,281,11,14,9);for(y=a.length-S;y>h;){if(a[y].Close||0===a[y].Close){"L","o","w",a[y]["Result "+t.name]=a[y][r?1==l?"High":"Low":"Close"];break}y--}v(h,y)}},t.Studies.displayZigZag=function(e,a,r){var n,s,o,l,h;n=e.chart.highLowBars,a.highLowChart!=n&&(a.highLowChart=n,a.startFrom=0,a.study.calculateFN(e,a)),s=e.chart;for(var c=0;c<r.length;c++)(o=r[c])&&("_","sha","dowCopy ",o["_shadowCopy "+a.name]&&("R","esu","l","t ",delete o["Result "+a.name],delete o["_shadowCopy "+a.name]),o["Result "+a.name]||o.transform&&delete o.transform["Result "+a.name]);i.k8O(2),l=r[i.i6w(0,"0")],i.u2S(147);var u=i.i6w(14,8,2);h=r[r.length-u],l&&l["ShadowResult "+a.name]&&("Shado","wRe","s","ult ",l["Result "+a.name]=l["ShadowResult "+a.name],l.transform&&(l.transform["Result "+a.name]=s.transformFunc(e,s,l["ShadowResult "+a.name])),l["_shadowCopy "+a.name]=1),h&&h["ShadowResult "+a.name]&&("Shad","owResult ",h["Result "+a.name]=h["ShadowResult "+a.name],h.transform&&(h.transform["Result "+a.name]=s.transformFunc(e,s,h["ShadowResult "+a.name])),h["_shadowCopy "+a.name]=1),t.Studies.displaySeriesAsLine(e,a,r)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):("zigzag feature requires first activating s","tudies featu","re.",console.error("zigzag feature requires first activating studies feature."))},L.Pz,L.rx,L.hM,L.$$,L.$I},968:function(e,t,i){"use strict";i(92);var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,X,W,U,q,G,Q,Z,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,ge,me,fe,ye,ve,be,xe=i(316),Se=i(611),Ce=i(579);function we(){}we[553805]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"cNkHf",{get:function(){for(;;)return this},configurable:!0}),(t=cNkHf).r9M4F=t,i=4;break;case 9:delete t.r9M4F,delete Object.prototype.cNkHf,i=6;break;case 4:i="undefined"==typeof r9M4F?3:9;break;case 3:throw""}}catch(e){t=window}return t}}(),function(e){function t(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Function}}function i(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].RegExp}}function a(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0]}}for(var r=2;101!==r;)switch(r){case 28:n[46]="8N",n[85]="",n[22]="v7T",n[58]="m1p",r=41;break;case 85:n[64]=n[4],n[64]+=n[7],n[64]+=n[8],r=82;break;case 18:n[7]="4",n[6]="",n[6]="Z",n[2]="",n[94]="_optimiz",r=26;break;case 26:n[72]="I",n[2]="",n[2]="MS",n[86]="",r=22;break;case 45:n[20]=9,n[20]=0,n[80]=n[13],n[80]+=n[68],r=62;break;case 14:n[9]="q_w",n[1]="",n[1]="",n[1]="e",n[3]="",n[3]="",n[3]="_",r=18;break;case 79:s(a,n[35],n[20],n[75]),r=78;break;case 41:n[85]="",n[85]="al",n[66]="esidu",n[37]="__r",n[82]="px",n[44]="",n[44]="3Is",r=53;break;case 102:s(t,"apply",n[32],n[80]),r=101;break;case 2:var n=[arguments];n[8]="",n[8]="",n[8]="QZu",n[4]="",r=9;break;case 9:n[4]="R",n[5]="",n[5]="1",n[9]="",r=14;break;case 80:s(i,"test",n[32],n[63]),r=79;break;case 81:s(l,"charCodeAt",n[32],n[64]),r=80;break;case 58:n[39]=n[37],n[39]+=n[66],n[39]+=n[85],n[34]=n[22],n[34]+=n[46],n[34]+=n[25],r=75;break;case 53:n[98]="",n[98]="",n[98]="m",n[53]="ev",r=49;break;case 22:n[86]="r7",n[26]="",n[26]="__ab",n[89]="",r=33;break;case 103:s(a,n[39],n[20],n[50]),r=102;break;case 67:n[75]+=n[6],n[35]=n[3],n[35]+=n[94],n[35]+=n[1],n[63]=n[9],n[63]+=n[72],n[63]+=n[5],r=85;break;case 71:n[47]+=n[84],n[47]+=n[51],n[75]=n[86],n[75]+=n[2],r=67;break;case 33:n[89]="A",n[93]="g",n[84]="strac",n[51]="t",n[25]="T",r=28;break;case 78:s(a,n[47],n[20],n[65]),r=104;break;case 82:var s=function(e,t,i,a){for(var r=2;5!==r;)if(2===r){var s=[arguments];h(n[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),r=5}};r=81;break;case 49:n[68]="l",n[13]="",n[13]="x5I",n[32]=1,r=45;break;case 62:n[80]+=n[53],n[50]=n[98],n[50]+=n[44],n[50]+=n[82],r=58;break;case 75:n[65]=n[58],n[65]+=n[93],n[65]+=n[89],n[47]=n[26],r=71;break;case 104:s(o,"push",n[32],n[34]),r=103}function o(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].Array}}function l(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];return i[0][0].String}}function h(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[1]="",s[1]="ineProperty",s[8]="de",n=3;break;case 3:s[5]="f",s[3]=!0,s[3]=!1;try{for(var o=2;13!==o;)switch(o){case 5:s[9]=[s[4],s[4].prototype][s[0][3]],o=4;break;case 2:s[7]={},s[4]=(0,s[0][1])(s[0][0]),o=5;break;case 14:try{for(var l=2;3!==l;)if(2===l)s[2]=s[8],s[2]+=s[5],s[2]+=s[1],s[0][0].Object[s[2]](s[9],s[0][4],s[7]),l=3}catch(e){}o=13;break;case 4:o=s[9].hasOwnProperty(s[0][4])&&s[9][s[0][4]]===s[9][s[0][2]]?3:9;break;case 9:s[9][s[0][4]]=s[9][s[0][2]],s[7].set=function(e){for(var t=2;5!==t;)if(2===t){var i=[arguments];s[9][s[0][2]]=i[0][0],t=5}},s[7].get=function(){for(var e=2;12!==e;)switch(e){case 3:t[9]="ndefine",t[6]="",t[6]="u",t[8]=t[6],t[8]+=t[9],e=14;break;case 2:var t=[arguments];t[7]="d",t[9]="",t[9]="",e=3;break;case 14:return t[8]+=t[7],typeof s[9][s[0][2]]==t[8]?void 0:s[9][s[0][2]]}},s[7].enumerable=s[3],o=14;break;case 3:return}}catch(e){}n=6}}}(we[553805]),we[488184]=we[19588],we[527162]="Jfu",we.L3M=function(){return"function"==typeof we[19588].X9xfeQe?we[19588].X9xfeQe.apply(we[19588],arguments):we[19588].X9xfeQe},we[19588]=(a=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{X9xfeQe:function(e,t,i){for(var r=3432918353,n=461845907,s=i,o=-4&t,l=0;l<o;l+=4){var h=255&e.R4QZu(l)|(255&e.R4QZu(l+1))<<8|(255&e.R4QZu(l+2))<<16|(255&e.R4QZu(l+3))<<24;h=a(h,r),s=5*(s=(524287&(s^=h=a(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,t%4){case 3:h=(255&e.R4QZu(o+2))<<16;case 2:h|=(255&e.R4QZu(o+1))<<8;case 1:h|=255&e.R4QZu(o),h=a(h,r),s^=h=a(h=(131071&h)<<15|h>>>17,n)}return s^=t,s=a(s^=s>>>16,2246822507),s=a(s^=s>>>13,3266489909),s^=s>>>16}}),we[477113]="UfG",we[242151]="Kuw",we[3116]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[2]=void 0,t[5]={},e=4;break;case 4:return t[5].b9fNb$G=function(){for(var e=2;90!==e;)switch(e){case 34:i[78]={},e=33;break;case 44:i[85]=i[13],i[89]={},i[89].i_G=["h$$"],i[89].K9J=function(){return/\x74\x72\x75\u0065/.q_wI1(function(){return"x".startsWith("x")}+[])},e=40;break;case 66:return 36;case 47:i[3].v7T8NT(i[95]),i[3].v7T8NT(i[6]),i[3].v7T8NT(i[4]),e=65;break;case 67:t[2]=61,e=66;break;case 68:e=68;break;case 50:i[3].v7T8NT(i[58]),i[3].v7T8NT(i[85]),i[3].v7T8NT(i[7]),e=47;break;case 75:i[50]={},i[50][i[81]]=i[20][i[23]][i[21]],i[50][i[93]]=i[55],i[47].v7T8NT(i[50]),e=71;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 15:a[4]=a[6][a[7]],a[5]=a[1][a[4]].h/a[1][a[4]].t,t=26;break;case 16:t=a[7]<a[6].length?15:23;break;case 14:t=void 0===a[1][a[2][i[81]]]?13:11;break;case 4:a[1]={},a[6]=[],a[7]=0,t=8;break;case 25:a[3]=!0,t=24;break;case 12:a[6].v7T8NT(a[2][i[81]]),t=11;break;case 7:t=a[7]<a[0][0].length?6:18;break;case 5:return;case 6:a[2]=a[0][0][a[7]],t=14;break;case 24:a[7]++,t=16;break;case 18:a[3]=!1,t=17;break;case 13:a[1][a[2][i[81]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[1]={},t[1].h=0,e=4;break;case 4:return t[1].t=0,t[1]}}.x5Ilev(this,arguments),t=12;break;case 23:return a[3];case 1:t=0===a[0][0].length?5:4;break;case 10:t=a[2][i[93]]===i[24]?20:19;break;case 2:var a=[arguments];t=1;break;case 20:a[1][a[2][i[81]]].h+=!0,t=19;break;case 26:t=a[5]>=.5?25:24;break;case 8:a[7]=0,t=7;break;case 19:a[7]++,t=7;break;case 17:a[7]=0,t=16;break;case 11:a[1][a[2][i[81]]].t+=!0,t=10}}(i[47])?68:67;break;case 54:i[3].v7T8NT(i[70]),i[3].v7T8NT(i[2]),i[3].v7T8NT(i[57]),i[3].v7T8NT(i[91]),e=50;break;case 4:i[3]=[],i[5]={},i[5].i_G=["h$$"],i[5].K9J=function(){return!/\x7c/.q_wI1(function(){return"a|a".split("|")}+[])},e=7;break;case 76:e=i[21]<i[20][i[23]].length?75:70;break;case 7:i[4]=i[5],i[9]={},i[9].i_G=["R9t"],i[9].K9J=function(){return"function"==typeof r7MSZ},e=12;break;case 77:i[21]=0,e=76;break;case 40:i[95]=i[89],i[74]={},i[74].i_G=["h$$"],i[74].K9J=function(){return!/\u0030\x78\x36\u0031/.q_wI1(function(){return String.fromCharCode(97)}+[])},i[91]=i[74],e=54;break;case 65:i[47]=[],i[24]="F2z",i[43]="t7o",i[23]="i_G",i[93]="o8c",i[16]="K9J",e=59;break;case 25:i[27].K9J=function(){return/\x78\u0078/.q_wI1(function(){return"x".repeat(2)}+[])},i[57]=i[27],i[45]={},i[45].i_G=["h$$"],i[45].K9J=function(){return/\x31/.q_wI1(function(){return"aa".lastIndexOf("a")}+[])},i[70]=i[45],e=34;break;case 58:i[30]=0,e=57;break;case 12:i[6]=i[9],e=11;break;case 57:e=i[30]<i[3].length?56:69;break;case 5:return 74;case 70:i[30]++,e=57;break;case 59:i[81]="X$J",e=58;break;case 1:e=t[2]?5:4;break;case 16:i[8].K9J=function(){var e=!1,t=[];try{for(var i in console)t.v7T8NT(i);e=0===t.length}catch(e){}return e},i[7]=i[8],i[27]={},i[27].i_G=["h$$"],e=25;break;case 30:i[13]={},i[13].i_G=["R9t"],i[13].K9J=function(){return"function"==typeof m3Ispx},e=44;break;case 33:i[78].i_G=["h$$"],i[78].K9J=function(){return!/\x32\x35/.q_wI1(function(){return decodeURI("%25")}+[])},i[58]=i[78],e=30;break;case 71:i[21]++,e=76;break;case 2:var i=[arguments];e=1;break;case 56:i[20]=i[3][i[30]];try{i[55]=i[20][i[16]]()?i[24]:i[43]}catch(e){i[55]=i[43]}e=77;break;case 11:i[1]={},i[1].i_G=["R9t"],i[1].K9J=function(){return"function"==typeof m1pgA},i[2]=i[1],i[8]={},i[8].i_G=["R9t"],e=16}},t[5]}}(),we.u4X=function(){return"function"==typeof we[182467].C4_h1O3?we[182467].C4_h1O3.apply(we[182467],arguments):we[182467].C4_h1O3},we.U3Y=function(){return"function"==typeof we[19588].X9xfeQe?we[19588].X9xfeQe.apply(we[19588],arguments):we[19588].X9xfeQe},we[553805].F4cc=we,we.k5y=function(){return"function"==typeof we[182467].h07Ms$L?we[182467].h07Ms$L.apply(we[182467],arguments):we[182467].h07Ms$L},we.D45=function(){return"function"==typeof we[182467].h07Ms$L?we[182467].h07Ms$L.apply(we[182467],arguments):we[182467].h07Ms$L},we[182467]={h07Ms$L:function(){var e,t=arguments;switch(r){case 131:e=t[3]*t[2]/t[4]-t[0]-t[1];break;case 106:e=t[2]+(t[0]|t[1]);break;case 22:e=t[2]+ +t[0]*t[1];break;case 65:e=t[0]+t[1]+t[2];break;case 4:e=t[2]-t[0]+t[1];break;case 37:e=t[4]*t[3]/t[2]-t[0]+t[1];break;case 127:e=t[2]+(t[0]>>t[1]);break;case 94:e=t[2]*(t[3]+t[0])/(t[1]^t[4]);break;case 104:e=(-t[1]+t[0])/t[3]+t[2];break;case 78:e=(t[0]<<t[3])*t[2]-t[1];break;case 105:e=t[6]+(t[1]-t[5])/(t[0]-t[3])*(t[4]-t[2]);break;case 165:e=t[0]/(t[2]*t[1])<=t[3];break;case 20:e=t[1]%t[0];break;case 59:e=-t[2]*t[3]+t[1]-t[4]+t[0];break;case 5:e=t[0]-t[1];break;case 171:e=t[1]-+t[2]/(t[3]+t[0]);break;case 63:e=t[1]-t[0]+t[3]-t[2]+t[4];break;case 145:e=-t[3]/t[0]/t[2]-t[1];break;case 58:e=t[3]*t[2]+t[1]-t[0];break;case 103:e=(t[0]-t[3])*t[2]+t[1];break;case 7:e=(t[0]+t[1])/t[2];break;case 35:e=t[3]/t[0]/t[2]+t[1]-t[4];break;case 1:e=t[0]/t[1]-t[2];break;case 81:e=(t[5]-t[2])*(t[1]-t[0])/(t[3]-t[6])+t[4];break;case 17:e=-t[0]*t[2]+t[1];break;case 87:e=(t[0]+t[3])/t[1]*t[2]-t[4];break;case 99:e=t[2]+t[0]*t[1];break;case 84:e=t[3]*t[1]-t[4]+t[2]-t[0];break;case 74:e=t[3]-t[0]-t[4]-t[1]+t[2];break;case 123:e=(t[3]-t[4])*t[2]-t[0]-t[1];break;case 143:e=t[4]-t[2]+t[3]+t[0]-t[1];break;case 24:e=t[2]/(t[0]/(t[3]^t[1]));break;case 178:e=(-t[1]+t[0]+t[3])*t[2]-t[4];break;case 162:e=(t[3]+t[0])*t[2]+t[1]-t[4];break;case 44:e=t[0]|t[1];break;case 96:e=(t[4]*t[2]-t[1]*t[3])/(t[5]*t[0]-t[6]);break;case 184:e=t[4]+t[0]/+t[3]+t[1]*t[2];break;case 181:e=t[2]-t[1]*t[3]-t[0];break;case 114:e=t[2]-(t[1]|t[0]);break;case 139:e=(-t[1]-t[3]-t[4])*t[0]+t[2];break;case 169:e=-t[3]+t[2]+t[1]-t[0];break;case 128:e=(t[2]+t[0])*t[1];break;case 3:e=t[0]+t[1];break;case 107:e=(t[2]*t[1]+t[0])/t[3];break;case 71:e=(-t[2]-t[3])*t[0]+t[1];break;case 49:e=(t[3]-t[4])/t[0]/t[2]-t[1];break;case 67:e=(t[3]/t[0]-t[4])/t[1]+t[2];break;case 102:e=-(t[2]-t[0])*t[1]+t[3];break;case 109:e=(t[0]+(t[1]^t[4])*t[3])/t[2];break;case 77:e=t[0]/t[1]/t[3]+t[2];break;case 23:e=t[0]-t[2]*t[1];break;case 190:e=(t[4]-t[3])*t[0]-t[2]+t[1];break;case 117:e=t[1]*t[2]/t[0]+t[3];break;case 147:e=(t[0]|t[1])*t[2]/(t[3]+t[4]);break;case 137:e=t[0]-t[2]-t[3]+t[1];break;case 54:e=t[0]-t[3]/(t[1]*t[2]);break;case 26:e=t[1]/t[3]*t[2]-t[0];break;case 12:e=t[0]/t[1];break;case 40:e=t[0]*t[1]-t[3]-t[2];break;case 86:e=t[1]+ +t[0];break;case 134:e=(t[2]-t[3])/t[1]+t[4]+t[0];break;case 121:e=(t[0]-t[3])*t[2]*t[1]+t[4];break;case 13:e=t[1]>>t[0];break;case 118:e=t[2]+t[7]+t[0]+t[4]+t[5]+t[6]+t[3]+t[1];break;case 47:e=t[4]/t[2]*t[0]+t[1]-t[3];break;case 55:e=t[0]-t[1]/+t[2];break;case 119:e=t[0]/t[1]-t[2]+t[3];break;case 187:e=(-t[1]+t[3])*t[2]-t[0]-t[4];break;case 191:e=(t[1]-t[2])*t[4]/t[0]+t[3];break;case 15:e=(-t[0]-t[2])/t[1]-t[4]+t[3];break;case 135:e=t[2]+t[4]-t[0]+t[1]+t[3];break;case 91:e=t[0]+(t[1]-t[2])/t[3];break;case 62:e=-t[1]+t[2]-t[0];break;case 164:e=(t[0]%t[3]+t[2])*t[1];break;case 21:e=-t[1]/t[0]*t[3]+t[2];break;case 141:e=(t[4]-t[1]-t[0])/t[2]+t[3];break;case 93:e=t[0]+t[2]+t[4]-t[1]-t[3];break;case 69:e=t[1]<t[0];break;case 175:e=(t[3]+t[2]-t[4])*t[1]-t[0];break;case 152:e=-t[2]*t[1]*t[3]-t[0]+t[4];break;case 156:e=-t[0]-t[2]-t[3]+t[1];break;case 83:e=t[1]+t[2]+t[0]+t[3];break;case 48:e=(t[4]*t[1]+t[3])/t[0]-t[2];break;case 124:e=t[2]+(t[0]<<t[1]);break;case 150:e=(-t[2]-t[1])/t[3]+t[0];break;case 79:e=(t[4]-t[2])/(t[1]-t[0])>t[3];break;case 154:e=t[3]+t[2]*(t[1]-t[0]);break;case 88:e=t[3]*t[1]*t[0]-t[2];break;case 50:e=(t[0]-t[1])/t[3]+t[2];break;case 52:e=t[2]+t[1]/t[0];break;case 9:e=t[1]+t[0]-t[2]-t[3];break;case 42:e=t[0]*t[1]-t[2];break;case 70:e=(t[2]-t[1])/(t[0]-t[3]);break;case 41:e=-t[3]-t[1]-t[4]+t[0]+t[2];break;case 76:e=(t[0]-t[3])*t[4]+t[1]-t[2];break;case 188:e=t[0]+(t[4]/t[2]-t[3]/+t[1]);break;case 112:e=t[1]*t[2]/t[0];break;case 136:e=(t[2]/t[4]+t[1])/t[3]+t[0];break;case 34:e=t[1]/t[2]/t[0]-t[3];break;case 33:e=(-t[3]+t[1])/t[2]-t[0];break;case 30:e=(t[3]+t[0])*t[2]-t[1];break;case 113:e=t[1]!==t[0];break;case 82:e=t[3]/t[2]/t[0]*t[1]+t[4];break;case 133:e=t[1]*t[4]*t[5]+(t[3]-t[0]*t[6])*t[2];break;case 179:e=t[2]/t[3]+t[1]-t[0];break;case 80:e=-t[0]/t[1]-t[3]+t[2];break;case 111:e=(t[0]+t[1])/t[4]/t[3]-t[2];break;case 126:e=-t[0]*t[3]/t[4]*t[1]+t[2];break;case 8:e=t[0]+t[2]-t[1];break;case 167:e=t[0]>t[1];break;case 140:e=t[1]-t[3]-t[4]+t[2]-t[0];break;case 10:e=t[0]*t[1];break;case 6:e=t[2]-t[3]+t[1]+t[0];break;case 132:e=t[3]*t[1]-t[0]-t[4]-t[2];break;case 95:e=t[1]*(+t[4]*t[3]+t[0])/t[2];break;case 157:e=t[3]*t[2]+t[4]+t[0]-t[1];break;case 144:e=(t[3]+t[1]+t[2])*t[0]-t[4];break;case 89:e=t[2]/(t[0]>>t[1]);break;case 73:e=t[1]+t[2]+t[0]-t[3];break;case 177:e=-t[0]+t[2]-t[3]+t[1];break;case 46:e=-t[0]*t[3]-t[4]-t[2]+t[1];break;case 161:e=(t[2]-t[4]+t[3])*t[0]-t[1];break;case 97:e=(t[1]-t[2]*t[3])/t[0];break;case 174:e=-t[0]+t[3]+t[4]-t[1]+t[2];break;case 29:e=(t[0]-t[2])/t[1];break;case 100:e=(t[0]+t[1])/(t[3]-t[2]);break;case 159:e=(t[2]<<t[4])*(t[1]/t[5]-(t[3]^t[0]));break;case 122:e=(t[3]-t[0]+t[1])/t[2]+t[4];break;case 28:e=t[0]-(t[2]-t[1]);break;case 16:e=(t[4]+t[5]+t[3]+t[0])/(t[2]|t[1]);break;case 160:e=(t[2]+t[3])/t[1]+t[0];break;case 66:e=t[0]/t[1]+t[2];break;case 14:e=(t[3]+t[1])*t[4]*t[0]-t[2];break;case 43:e=-t[0]/t[1]+t[2];break;case 110:e=(t[3]-t[1])*t[0]+t[4]+t[2];break;case 32:e=t[3]/t[1]+t[0]-t[4]+t[2];break;case 39:e=t[0]+(t[1]-t[2]);break;case 189:e=(t[4]+t[1])/t[0]+t[2]-t[3];break;case 61:e=(t[2]-t[5])/(t[3]-t[4])>t[1]<<t[0];break;case 130:e=-t[3]/t[0]/t[2]+t[1];break;case 158:e=(t[3]+t[2]-t[0])/t[1]-t[4];break;case 36:e=(t[1]-t[4])/t[0]-t[3]+t[2];break;case 170:e=t[0]%(t[1]%(t[3]*t[2]));break;case 75:e=t[0]-t[1]-t[2];break;case 27:e=t[1]^t[0];break;case 72:e=(t[1]/t[3]-t[2])*t[4]-t[0];break;case 163:e=(t[1]-t[2])/t[3]-t[0];break;case 56:e=t[3]-t[0]/(t[2]>>t[1]);break;case 180:e=t[1]+t[3]-t[2]+t[4]-t[0];break;case 166:e=t[2]+t[0]-t[4]-t[1]+t[3];break;case 148:e=t[1]*t[2]*t[0];break;case 116:e=(t[2]-t[1])/t[3]*t[0]+t[4];break;case 108:e=(t[0]+t[1]*t[3])/t[2];break;case 2:e=(-t[3]/t[4]-t[0])*t[1]+t[2];break;case 85:e=-t[0]+t[1];break;case 168:e=t[0]*(t[1]+t[2]);break;case 38:e=t[2]*t[0]<t[1];break;case 92:e=t[3]-t[1]*(t[0]-t[2]);break;case 149:e=t[0]+t[4]+t[1]+t[3]-t[2];break;case 182:e=t[1]+t[2]*t[3]+t[0];break;case 68:e=(t[2]*t[4]+t[1])*t[0]-t[3];break;case 57:e=(t[2]+t[1])/t[3]-t[0];break;case 60:e=t[1]-t[2]+t[0]-t[3];break;case 138:e=t[1]-t[4]-t[2]+t[0]+t[3];break;case 90:e=t[0]/(t[1]*t[2]);break;case 25:e=t[1]-+t[0];break;case 183:e=t[0]==t[1];break;case 64:e=(-t[3]-t[1])/t[2]+t[4]-t[0];break;case 153:e=t[0]*(t[1]/t[3]-t[2]);break;case 19:e=t[0]/(t[2]/t[1]);break;case 98:e=t[2]*t[0]+t[1];break;case 146:e=(t[0]+t[2])/+t[1];break;case 45:e=(-t[0]-t[3]+t[1])*t[4]+t[2];break;case 0:e=t[1]<<t[0];break;case 129:e=t[0]*t[4]*t[1]-t[3]-t[2];break;case 18:e=(t[1]+t[4])*t[2]/t[0]-t[3];break;case 115:e=(-t[0]-t[3])/t[2]+t[4]+t[1];break;case 186:e=t[2]*+t[0]*t[3]*+t[1];break;case 151:e=t[0]-t[4]/(t[1]+t[3]/t[2]);break;case 172:e=(t[2]+t[0])*t[1]-t[3]+t[4];break;case 51:e=t[2]-t[0]/t[1];break;case 101:e=(t[0]+t[1]-t[4])/t[3]+t[2];break;case 142:e=(t[0]+t[2]+t[4])/t[1]+t[3];break;case 155:e=(t[2]/t[1]-t[4])*t[3]+t[0];break;case 53:e=t[0]+t[2]/(t[1]-t[3]);break;case 173:e=(t[0]-t[2])/t[4]/t[1]+t[3];break;case 176:e=t[0]*-t[1];break;case 125:e=t[0]*t[3]/t[2]-t[1];break;case 31:e=(-t[1]-t[0])*t[2]+t[4]+t[3];break;case 120:e=(t[0]-(t[1]+t[3]))/t[2];break;case 185:e=t[2]*t[1]/(t[3]+t[0]);break;case 11:e=t[2]/t[3]/t[4]*t[0]-t[1]}return e},C4_h1O3:function(e){r=e}},we.Y$C=function(){return"function"==typeof we[3116].b9fNb$G?we[3116].b9fNb$G.apply(we[3116],arguments):we[3116].b9fNb$G},we.T7s=function(){return"function"==typeof we[182467].C4_h1O3?we[182467].C4_h1O3.apply(we[182467],arguments):we[182467].C4_h1O3},we[254460]=we[553805],we.r8O=function(){return"function"==typeof we[3116].b9fNb$G?we[3116].b9fNb$G.apply(we[3116],arguments):we[3116].b9fNb$G},n=e=>{var t,i=we;function a(e){return i.Y$C(),e>.001?Number(e.toFixed(4)):e}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.Aggregations=function(e){var t;this.construct(e),t=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,i.r8O(),this.isAggregation=!0,t.highlightable=!1,"_main_series"!=t.name&&(console.warn("Aggregations are only allowed on main series."),t.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),t.Renderer.Aggregations.requestNew=function(e,a){var r,n,s;r=null;for(var o=0;o<e.length;o++)switch("r","en","ko",n=e[o]){case"kagi":case"pandf":r=n;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":r="candle";break;default:return null}return null===r?null:((s=new t.Renderer["candle"==r?"OHLC":"Aggregations"]({params:t.extend(a,{type:r})})).isAggregation=!0,i.r8O(),s)},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,t){var a,r;if("kag","i",!t.invalid)return a=this.stx,r={colors:[]},i.Y$C(),"kagi"==t.type?("s","tx_","kagi_up",a.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_down",t),r.colors.push(a.getCanvasColor("stx_kagi_up")),r.colors.push(a.getCanvasColor("stx_kagi_down"))):"pandf"==t.type&&("s","t","x_pandf_up",a.drawPointFigureChart(e.panel,"stx_pandf_up","X",t),r.colors.push(a.getCanvasColor("stx_pandf_up")),a.drawPointFigureChart(e.panel,"stx_pandf_down","O",t),r.colors.push(a.getCanvasColor("stx_pandf_down"))),r},t.ChartEngine.prototype.setAggregationType=function(e){var a;this.layout.chartType="candle",a=this.chart,i.r8O(),!1!==a.baseline.userLevel&&(a.baseline.userLevel=a.baseline.defaultLevel,a.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=e,this.setMainSeriesRenderer(),a.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.drawKagiSquareWave=function(e,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T;s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,(h=e.yAxis).flipped&&(c=a,a=r,r=c),i.Y$C(),u=this.canvasStyle(a),d=this.canvasStyle(r),this.canvasColor(a),n.border_color_up&&(l.strokeStyle=n.border_color_up),p=l.strokeStyle,this.canvasColor(r),n.border_color_down&&(l.strokeStyle=n.border_color_down),g=l.strokeStyle,m=1,u.width&&parseInt(u.width,10)<=25&&(m=Math.max(1,t.stripPX(u.width))),f=1,d.width&&parseInt(d.width,10)<=25&&(i.u4X(0),f=Math.max(i.k5y(0,"1"),t.stripPX(d.width))),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),i.T7s(1);var D=i.D45(18,6,2);y=s.dataSet.length-s.scroll-D,v=!0,b=null,x=null,i.u4X(2);var _=i.k5y(8,16,145,8,8);S=e.left-.5*this.layout.candleWidth+this.micropixels-_;for(var A=0;A<=o.length;A++)if(S+=this.layout.candleWidth,C=o[A]){if(C.cache&&!s.pixelCacheExpired||(C.cache={}),C.projection)break;x=C.kagiTrend,h.flipped&&(x*=-1),C.transform&&s.transformFunc&&(w=C.kagiPrevOpen,(C=C.transform).kagiPrevOpen=s.transformFunc(this,s,w)),k=C.cache,i.u4X(3),((T=i.D45(y,A))<e.cacheLeft||T>e.cacheRight||!k.kagiOpen)&&(k.kagiOpen=h.semiLog?h.height*(1-(Math.log(Math.max(C.Open,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.Open)*h.multiplier,k.kagiClose=h.semiLog?h.height*(1-(Math.log(Math.max(C.Close,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.Close)*h.multiplier,h.flipped?(k.kagiOpen=h.bottom-k.kagiOpen,k.kagiClose=h.bottom-k.kagiClose):(k.kagiOpen+=h.top,k.kagiClose+=h.top)),k.kagiClose,b=h.semiLog?h.height*(1-(Math.log(Math.max(C.kagiPrevOpen,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.kagiPrevOpen)*h.multiplier,h.flipped?b=h.bottom-b:b+=h.top,v?(l.moveTo(y>=0?e.left:Math.floor(S),k.kagiOpen),l.lineTo(Math.floor(S),k.kagiOpen),k.kagiClose<k.kagiOpen?(l.strokeStyle=p,l.lineWidth=m):(l.strokeStyle=g,l.lineWidth=f)):-1!=x&&k.kagiClose<b&&b<k.kagiOpen?(l.lineTo(Math.floor(S),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(S),b),l.strokeStyle=p,l.lineWidth=m):1!=x&&k.kagiClose>b&&b>k.kagiOpen&&(l.lineTo(Math.floor(S),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(S),b),l.strokeStyle=g,l.lineWidth=f),l.lineTo(Math.floor(S),k.kagiClose),A+1<o.length&&l.lineTo(Math.floor(S+this.layout.candleWidth),k.kagiClose),v=!1}l.stroke(),this.endClip(),l.lineWidth=1,s.pixelCacheExpired=!1},t.ChartEngine.prototype.drawPointFigureChart=function(e,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P;function L(e,t,a){i.T7s(3),l.moveTo(i.D45(e,d),i.k5y(u,x,a,i.T7s(4))),i.u4X(5),i.r8O(),l.lineTo(i.D45(t,p),i.D45(x,c,a,b,i.T7s(6))),i.T7s(3),l.moveTo(i.D45(e,d),i.k5y(x,c,a,b,i.T7s(6))),i.T7s(5),l.lineTo(i.D45(t,p),i.k5y(u,x,a,i.T7s(4)))}function O(e,t,a){i.u4X(7),l.moveTo(i.k5y(e,t,2),i.D45(a,x,c,i.u4X(8))),i.u4X(3),l.bezierCurveTo(i.D45(t,p),i.D45(a,x,c,i.T7s(8)),i.D45(t,p,i.u4X(3)),i.D45(b,a,u,x,i.T7s(9)),i.D45(e,t,2,i.u4X(7)),i.D45(b,a,u,x,i.u4X(9))),i.T7s(5),l.bezierCurveTo(i.k5y(e,d),i.D45(b,a,u,x,i.u4X(9)),i.D45(e,d,i.u4X(5)),i.k5y(a,x,c,i.u4X(8)),i.D45(e,t,2,i.u4X(7)),i.D45(a,x,c,i.T7s(8)))}s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,this.canvasColor(a),"X"==r&&n.border_color_up?l.strokeStyle=n.border_color_up:"O"==r&&n.border_color_down&&(l.strokeStyle=n.border_color_down),h=this.canvasStyle(a),c=parseInt(h.paddingTop,10),u=parseInt(h.paddingBottom,10),d=parseInt(h.paddingLeft,10),p=parseInt(h.paddingRight,10),h.width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(h.width)):(i.u4X(10),l.lineWidth=i.k5y("2",1)),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),g=this.chart.state.aggregation.box,i.u4X(11);var E=i.D45(17,16,13,13,1);m=s.dataSet.length-s.scroll-E,f=e.yAxis,b=g*f.multiplier,i.T7s(12),x=i.k5y(b,2),S=this.layout.candleWidth,i.u4X(3);var I=i.k5y(0,1);C=e.left-S+this.micropixels-I;for(var N=0;N<o.length;N++)if(C+=S,w=o[N]){if(w.cache&&!s.pixelCacheExpired||(w.cache={}),w.projection)break;if(k=w.pfOpen,T=w.pfClose,D=w.pfTrend,_=w.pfStepBack,w.transform&&s.transformFunc&&(w=w.transform,k=s.transformFunc(this,s,k),T=s.transformFunc(this,s,T)),A=w.cache,i.T7s(3),((M=i.k5y(m,N))<e.cacheLeft||M>e.cacheRight||!A.pfOpen)&&(f.flipped?(A.pfOpen=f.bottom-(f.high-k)*f.multiplier,A.pfClose=f.bottom-(f.high-T)*f.multiplier):(A.pfOpen=(f.high-k)*f.multiplier+f.top,A.pfClose=(f.high-T)*f.multiplier+f.top)),F=Math.round(C),i.T7s(3),P=Math.round(i.k5y(C,S)),y=Math.abs(Math.round((T-k)/g)),v=A.pfOpen,r==_&&("X"==_?(i.u4X(5),L(F,P,i.D45(v,b))):"O"==_&&(i.u4X(3),O(F,P,i.D45(v,b)))),r==D)for(;y>=0;y--)"X"==r?(L(F,P,v),v-=f.flipped?-b:b):"O"==r&&(O(F,P,v),v+=f.flipped?-b:b)}l.stroke(),this.endClip(),i.Y$C(),i.T7s(13),l.lineWidth=i.D45(64,"1"),s.pixelCacheExpired=!1},t.ChartEngine.calculateAggregation=function(e,a,r,n){var s,o;return"p","andf","r","en","k","o","li","n","ebr","eak","r","ang","eb",i.Y$C(),"ars",o=e.layout,["heikinashi","heikenashi"].indexOf(a)>-1?s=t.calculateHeikinAshi(e,r,n):"rangebars"==a?s=t.calculateRangeBars(e,r,o.rangebars,n):"kagi"==a?s=t.calculateKagi(e,r,o.kagi,n):"linebreak"==a?s=t.calculateLineBreak(e,r,o.priceLines,n):"renko"==a?s=t.calculateRenkoBars(e,r,o.renko,n):"pandf"==a&&(s=t.calculatePointFigure(e,r,o.pandf,n)),s},i.Y$C(),t.calculateHeikinAshi=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,g;if(!t.length)return t;a||(a=[]),r=[];for(var m=0;m<t.length;m++)if(n=t[m]){i.u4X(4);var f=i.D45(20,3,18);if(!(s=r[r.length-f])&&!m){i.T7s(14);var y=i.k5y(5,10,318,4,5);s=a[a.length-("1">>y)]}s||(s=n),o=n.Close,l=(l=n.Open)||0===l?l:o,h=(h=n.High)||0===h?h:o,c=(c=n.Low)||0===c?c:o,u=(u=s.Open)||0===u?u:s.Close,i.T7s(15);var v=i.k5y(16,3,5,11,2);for(var b in d=(u+s.Close)/v,i.u4X(16),p=i.k5y(o,4,"4",c,l,h),g={DT:n.DT,displayDate:n.displayDate,Date:n.Date,Open:d,Close:p,High:Math.max(h,Math.max(d,p)),Low:Math.min(c,Math.min(d,p)),Volume:n.Volume,iqPrevClose:s.Close},n)g[b]||0===g[b]||(g[b]=n[b]);r.push(g)}return r},t.calculateKagi=function(e,a,r,n){var s,o,l,h,c,u,d,p;if(!a.length)return a;n||(n=[]),s=e.layout,o=e.chart,r=parseFloat(r),o.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(s.interval)?4:.4,(isNaN(r)||r<=0)&&(r=o.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(o.symbol)&&(r/=4),null!==s.kagi&&(s.kagi=null,e.changeOccurred("layout"))),r/=100,l=[],c=(h=n[n.length-1])?h.DT:0;for(var g=0;g<a.length;g++)if((u=a[g])&&(h||(i.u4X(5),h=a[i.k5y(g,1)]),h)){if((d=h.Open||0===h.Open?h.Open:h.Close)>h.Close){if(u.Close>h.Close*(1+r))u.Open=h.Close;else if(h.Close>u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(d<h.Close){if(u.Close<h.Close*(1-r))u.Open=h.Close;else if(h.Close<u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(h.Close=u.Close,h.Volume+=u.Volume,g<a.length-1)continue;for(var m in p={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Open:h.Open,Close:h.Close,High:Math.max(h.Open,h.Close),Low:Math.min(h.Open,h.Close),Volume:h.Volume,iqPrevClose:h.iqPrevClose},h)p[m]||0===p[m]||(p[m]=h[m]);l.length?p.kagiPrevOpen=l[l.length-1].Open:p.kagiPrevOpen=p.Open,p.Close>p.kagiPrevOpen&&p.kagiPrevOpen>p.Open?p.kagiTrend=1:p.Close<p.kagiPrevOpen&&p.kagiPrevOpen<p.Open&&(p.kagiTrend=-1),c<p.DT&&l.push(p),h=u,o.currentQuote={Close:u.Close}}return l},t.calculateLineBreak=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(!t.length)return t;if(r||(r=[]),n=e.layout,(s=e.chart).defaultChartStyleConfig.priceLines=3,a=parseInt(a,10),isNaN(a)||a<=0){-1646061937,-1919509668,o=2;for(var x=1;-1646061937!==i.L3M(x.toString(),x.toString().length,18991);x++)a=s.defaultChartStyleConfig.priceLines,o+=2;-1919509668!==i.L3M(o.toString(),o.toString().length,57865)&&(a=s.defaultChartStyleConfig.priceLines),a=s.defaultChartStyleConfig.priceLines,null!==n.priceLines&&(n.priceLines=null,e.changeOccurred("layout"))}else a>10&&(n.priceLines=a=10);i.r8O(),h=(l=r.slice(-a)).length,c=0;e:for(var S=0;S<t.length;S++)if(u=t[S]){c+=u.Volume,i.T7s(17);var C=i.k5y(6,49,8);if((d=l[l.length-C])||(d={Open:u.Open,Close:u.Open,High:u.Open,Low:u.Open}),p=d.Close,g=(g=d.High)||0===g?g:p,m=(m=d.Low)||0===m?m:p,f=(f=d.Open)||0===f?f:p,y={DT:u.DT,displayDate:u.displayDate,Date:u.Date,Close:u.Close,Volume:c,iqPrevClose:p},s.currentQuote={Close:u.Close},u.Close>p&&d.Close>f);else if(u.Close<p&&d.Close<f);else if(u.Close>g){for(v=2;v<=a;v++)if((b=l[l.length-v])&&u.Close<=b.High)continue e}else{if(!(u.Close<m))continue;for(v=2;v<=a;v++)if((b=l[l.length-v])&&u.Close>=b.Low)continue e}for(var w in u.Close<d.Close?y.Open=Math.min(f,p):y.Open=Math.max(f,p),y.Low=Math.min(y.Open,y.Close),y.High=Math.max(y.Open,y.Close),u)y[w]||0===y[w]||(y[w]=u[w]);l.push(y),c=0}return l.slice(h)},t.getMaxRenkoBarsPerRecord=function(e){return 200},t.calculateRenkoBars=function(e,r,n,s,o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L;if(!r.length)return[];s||(s=[]),l=e.layout,c=n,(u=(h=e.chart).state.aggregation)||(u=h.state.aggregation={}),d=Math.min(300,r.length),u.minMax||(u.minMax=e.determineMinMax(r.slice(r.length-d),["Close","High","Low"])),i.T7s(18);var O=i.k5y(44,4,11,5,20);i.T7s(5);var E=i.k5y(9,8);if(p=u.minMax[O]-u.minMax["0"*E],!(g=e.panels[h.name].height))return[];function I(e,t){var i;for(var a in e=Number(e.toFixed(8)),t=Number(t.toFixed(8)),i={DT:w.DT,displayDate:w.displayDate,Date:w.Date,Open:e,Close:t,High:Math.max(e,t),Low:Math.min(e,t),Volume:0,iqPrevClose:e!=t?e:null},w)i[a]||0===i[a]||(i[a]=w[a]);x.push(i)}if(m=s.length>0,i.u4X(19),f=a(i.D45(p,30,g)),y=t.getMaxRenkoBarsPerRecord(h.symbolObject),o&&(v=r.reduce(((e,t)=>{var a;return i.r8O(),(a=Math.abs(t.Close-t.iqPrevClose))>e?a:e}),0),i.T7s(12),u.minAutoRenko=a(i.D45(v,y))),h.defaultChartStyleConfig.renko=u.minAutoRenko||f,null===n||isNaN(n)||n<=0)n=h.defaultChartStyleConfig.renko,null!==l.renko&&(l.renko=null,e.changeOccurred("layout"));else{988987514,937201506,b=2;for(var N=1;988987514!==i.L3M(N.toString(),N.toString().length,67590);N++)i.u4X(20),n=Math.max(n,i.k5y(g,p)),b+=2;937201506!==i.U3Y(b.toString(),b.toString().length,6501)&&(i.u4X(12),n=Math.max(n,i.k5y(p,g))),l.renko!==n&&(l.renko=n,e.changeOccurred("layout"))}if(x=[],S=null,C=null,w=null,s.length){i.T7s(21);var H=i.k5y(1,19,153,8);S=(k=s[s.length-H]).Low-n,C=k.High+n}for(var V=0;V<r.length;V++)if(T=r[V]){if(S||C||(D=T.Open||0===T.Open?T.Open:T.Close,_=Math.floor(D/n)*n,A=isNaN(_)?D:_,i.T7s(5),S=i.k5y(A,n),i.T7s(3),C=i.k5y(A,n)),i.u4X(10),M=i.D45(n,y),F=!l.renko,P=S-T.Close,L=T.Close-C,F&&(P>M||L>M)&&!o&&!m)return t.calculateRenkoBars(e,r,c,s,!0);for(;;)if(w||(w=T),T.Close<=S)i.T7s(3),I(i.k5y(S,n),S),i.u4X(22),C=i.k5y("2",n,S),S-=n,w=null;else{if(!(T.Close>=C))break;i.u4X(5),I(i.D45(C,n),C),i.T7s(23),S=i.k5y(C,n,2),C+=n,w=null}h.currentQuote=T}return i.Y$C(),S<r[r.length-1].Close&&S+n>r[r.length-1].Close?(i.u4X(3),I(i.k5y(S,n),r[r.length-1].Close)):C>r[r.length-1].Close&&C-n<r[r.length-1].Close&&(i.u4X(5),I(i.k5y(C,n),r[r.length-1].Close)),x},t.calculateRangeBars=function(e,t,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T;if(!t.length)return t;function D(){i.T7s(3),g=i.k5y(p,r),i.T7s(5),m=i.D45(p,r),f=p}n||(n=[]),s=e.layout,(l=(o=e.chart).state.aggregation)||(l=o.state.aggregation={}),h=Math.min(300,t.length),l.minMax||(l.minMax=e.determineMinMax(t.slice(t.length-h),["Close","High","Low"])),i.T7s(4);var _=i.D45(16,10,7);if(c=l.minMax[_]-l.minMax[0],!(u=e.panels[o.name].height))return[];function A(e,t){for(i.Y$C();;){if(y||(y=e),p<t){if(p=Math.min(t,g),i.T7s(5),m=Math.max(m,i.D45(p,r)),t<g)break}else if(p>=t&&(p=Math.max(t,m),i.u4X(3),g=Math.min(g,i.k5y(p,r)),t>m))break;if(void 0===p)return"Uh oh undefi","ned"," in calcu","lateRangeBars:processMove",void console.log("Uh oh undefined in calculateRangeBars:processMove");M(p),y=null,D()}}function M(e){var t;for(var a in(t={DT:y.DT,displayDate:y.displayDate,Date:y.Date,Open:Number(f.toFixed(8)),Close:Number(e.toFixed(8)),High:Number(g.toFixed(8)),Low:Number(m.toFixed(8)),Volume:0}).iqPrevClose=t.Open,y)t[a]||0===t[a]||(t[a]=y[a]);i.Y$C(),d.push(t)}i.T7s(24),o.defaultChartStyleConfig.range=a(i.D45(u,0,c,"30")),null===r||isNaN(r)||r<0?(r=o.defaultChartStyleConfig.range,null!==s.range&&(s.range=null,e.changeOccurred("layout"))):(i.u4X(12),r=Math.max(r,i.k5y(c,u)),s.range!==r&&(s.range=r,e.changeOccurred("layout"))),d=[],p=null,g=null,i.r8O(),m=null,f=null,y=null;for(var F=0;F<t.length;F++)if(v=t[F]){if(i.u4X(25),b=t[i.D45("1",F)],!F){if(!b){i.T7s(26);var P=i.D45(3,5,4,5);b=n[n.length-P]}b&&((p=b.Close)||0===p)&&D()}b&&(x=v.Close,S=v.Open,C=v.High,w=v.Low,(x||0===x)&&(S=S||0===S?S:x,C=C||0===C?C:x,w=w||0===w?w:x,p||0===p||(k=Math.floor(S/r)*r,p=isNaN(k)?S:k,D(),A(b,S)),F&&A(v,S),C-S<S-w?(C&&A(v,C),w&&A(v,w)):(w&&A(v,w),C&&A(v,C)),A(v,x),F==t.length-1&&x!=f&&(T=g,i.u4X(3),g=i.k5y(m,r),i.u4X(5),m=i.k5y(T,r),M(x))))}return d},t.calculatePointFigure=function(e,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k;if(!a.length)return a;function T(e,t){for(var i in e)t[i]||0===t[i]||(t[i]=e[i]);return t}function D(e,t,i,a,r,n,s,o,l){return{DT:e.DT,Date:e.Date,pfOpen:o,pfClose:l,Open:t,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}function _(e,t,i,a,r){e.High=Math.max(t,e.High),e.Low=Math.min(i,e.Low),e.Close=a,e.Volume+=r}n||(n=[]),s=e.layout,(l=(o=e.chart).state.aggregation)||(l=o.state.aggregation={}),o.defaultChartStyleConfig.box=1,o.defaultChartStyleConfig.reversal=3,r||(r={}),(h=r.box)||(s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,e.changeOccurred("layout")),h=o.defaultChartStyleConfig.box,(c=a[a.length-1].Close)&&(h=c<.25?.0625:c<1?.125:c<5?.25:c<20?.5:c<100?1:c<200?2:c<500?4:c<1e3?5:c<25e3?50:500),t.ChartEngine.isDailyInterval(s.interval)||(h/=10),t.Market.Symbology.isForexSymbol(o.symbol)&&(c&&(c<1?h=.001:c<2?h=.002:c<50?h=.02:c<200&&(h=.2)),t.ChartEngine.isDailyInterval(s.interval)&&(h*=10)),o.defaultChartStyleConfig.box=h),h=parseFloat(h),(isNaN(h)||h<=0)&&(s.pandf&&null!==s.pandf.box&&("la","y","out",s.pandf.box=null,e.changeOccurred("layout")),o.defaultChartStyleConfig.box=h=1),(u=Math.ceil(parseFloat(r.reversal)))>0&&u>r.reversal?(s.pandf.reversal=u,e.changeOccurred("layout")):(isNaN(u)||u<=0)&&(s.pandf&&null!==s.pandf.reversal&&(s.pandf.reversal=null,e.changeOccurred("layout")),u=o.defaultChartStyleConfig.reversal),i.r8O(),l.box=h,u*=h,d=1e-8,p=(h.toString()+".").split(".")[1].length,g=[],m=0;for(var A=0;A<a.length;A++)if(y=a[A])if(m+=y.Volume,b=y.Close,x=(x=y.Open)||0===x?x:b,S=(S=y.High)||0===S?S:b,C=(C=y.Low)||0===C?C:b,g.length||n.length){i.T7s(26);var M=i.k5y(56,19,3,1);(v=g[g.length-M])||(v=t.clone(n[n.length-1])),"O"==v.pfTrend?(C<=v.pfClose-h?(v.pfClose=Number((Math.ceil(C/h-d)*h).toFixed(p)),"O"==v.pfStepBack&&(v.pfStepBack=null),_(v,S,C,b,m)):S>=v.pfClose+u?(w=v.pfClose+h,k=Number((Math.floor(S/h+d)*h).toFixed(p)),f=D(y,x,S,C,b,m,v.pfClose,w,k),w==k&&(f.pfStepBack="X"),"O"==v.pfStepBack?(v.pfOpen=w,v.pfClose=k,v.pfTrend="X",_(v,S,C,b,m)):((f=T(y,f)).pfTrend="X",g.push(f))):_(v,S,C,b,m),m=0):"X"==v.pfTrend&&(S>=v.pfClose+h?(v.pfClose=Number((Math.floor(S/h+d)*h).toFixed(p)),"X"!=v.pfStepBack&&"-"!=v.pfStepBack||(v.pfStepBack=null),_(v,S,C,b,m)):C<=v.pfClose-u?(w=v.pfClose-h,k=Number((Math.ceil(C/h-d)*h).toFixed(p)),f=D(y,x,S,C,b,m,v.pfClose,w,k),w==k&&(f.pfStepBack="O"),"X"==v.pfStepBack||"-"==v.pfStepBack?(v.pfOpen=w,v.pfClose=k,v.pfTrend="O",_(v,S,C,b,m),w!=k&&"-"==v.pfStepBack&&(v.pfStepBack=null)):((f=T(y,f)).pfTrend="O",g.push(f))):_(v,S,C,b,m),m=0)}else(f=T(y,D(y,x,S,C,b,m,S+h,Number((Math.ceil(C/h-d)*h).toFixed(p)),Number((Math.floor(S/h+d)*h).toFixed(p))))).pfTrend="X",f.pfOpen==f.pfClose&&(f.pfStepBack="-"),g.push(f),m=0;return g}},s=e=>{var t,i,a=we;a.r8O(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Drawing?("lineWid","th","line","Wid","t","h","f","illCol","or","pa","tt","er","n","fon","t","p","a","tter","n","col","or","p","a","ttern3","li","neW","idth3","patter","n2","color","2","lineW","idth1","co","lor","1","col","or","line","Wi","dt","h","fill","Co","lor","lin","e","Widt","h","p","l","fi","llC","olor","patt","ern","lineWi","dth","f","i","llColor","c","ol","o","r","f","il","l","Color","c","o","l","or",t.Drawing.ray=function(){var e,t;a.T7s(27),e=a.k5y(0,"476717696"),t=2;for(var i=1;a.L3M(i.toString(),i.toString().length,75502)!==e;i++)this.name="ray",t+=2;1376147246!==a.U3Y(t.toString(),t.toString().length,92119)&&(this.name="")},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.adjust=function(){var e;a.Y$C(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,e.chart))},t.Drawing.continuous=function(){a.r8O(),this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(e,i,r){var n,s,o,l;if("ve","c","to","r",s=(n=this.stx).panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,r)?(n.undo(),!0):(this.setPoint(1,i,r,s.chart),o=new(0,t.Drawing.segment),l=this.serialize(n),o.reconstruct(n,l),n.addDrawing(o),a.Y$C(),n.changeOccurred("vector"),n.draw(),o++,!!(this.maxSegments&&this.segment>this.maxSegments)||(this.setPoint(0,i,r,s.chart),!1)):(a.T7s(10),this.setPoint(a.k5y("0",1),i,r,s.chart),this.penDown=!0,!1)},t.Drawing.ellipse=function(){this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.T7s(28),a.Y$C(),c=a.D45(s,s,o),u=o,d=l,p=h,a.T7s(28),g=a.k5y(l,l,h),a.T7s(29),m=a.k5y(p,6,g),(f=this.lineWidth)||(f=1.1),("auto"==(y=this.color)||t.isTransparent(y))&&(y=this.getLineColor()),this.highlighted&&.1==f&&(f=1.1),v=this.fillColor,e.beginPath(),e.moveTo(c,d),a.T7s(3),e.bezierCurveTo(c,a.D45(p,m),u,a.k5y(p,m),u,d),a.u4X(5),e.bezierCurveTo(u,a.D45(g,m),c,a.D45(g,m),c,d),v&&!t.isTransparent(v)&&"auto"!=v&&(e.fillStyle=v,e.globalAlpha=.2,e.fill(),e.globalAlpha=1),y&&"none"!=this.pattern&&(e.strokeStyle=y,e.lineWidth=f,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(f,this.pattern)),e.lineDashOffset=0),e.stroke()),e.closePath(),this.highlighted&&(b="p1"==this.highlighted,this.littleCircle(e,o,h,b)))},t.Drawing.ellipse.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if("m","o","v","e",!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],r))return this.highlighted="p1",{action:"drag",point:"p1"};n=this.p0[0]-(this.p1[0]-this.p0[0]),s=this.p1[0],o=this.p1[1],a.T7s(30);var u=a.D45(12,367,16,11);a.u4X(5);var d=a.k5y(15,14);l=this.p0[u]-(this.p1[1]-this.p0[d]);var{x0:p,x1:g,y0:m,y1:f,cy0:y,cy1:v}=r;if(p>Math.max(n,s)||g<Math.min(n,s))return!1;var{field:b,panelName:x,stx:S}=this;return b&&(h=S.panels[x],c=S.getYAxisByField(h,b),m=this.valueFromPixel(y,h,c),f=this.valueFromPixel(v,h,c)),!(f>Math.max(l,o)||m<Math.min(l,o))&&(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)})},t.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.field=t.fld,a.Y$C(),this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return a.r8O(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},t.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,a.Y$C(),this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.channel.prototype.move=function(e,t,i){var r;if(this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[t,i];else{a.u4X(8);var n=a.D45(4,12,9);r=i-(this.p1[1]-this.p0[n])/(this.p1[0]-this.p0[0])*(t-this.p1[0]),this.p2=[this.p1[0],r]}this.render(e)}},t.Drawing.channel.prototype.click=function(e,t,i){var r,n;if(r=this.stx,a.r8O(),n=r.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?(r.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.penDown=!1,!0):(this.setPoint(1,t,i,n.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,t,i,n.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(e,t,i){var r,n,s,o,{p0:l,p1:h,p2:c}=this;if(!l||!h||!c)return!1;var{x0:u,x1:d,y0:p,y1:g,cy0:m,cy1:f}=i;if(u>Math.max(l[0],h[0])||d<Math.min(l[0],h[0]))return!1;var{field:y,panelName:v,stx:b}=this;y&&(r=b.panels[v],n=b.getYAxisByField(r,y),p=this.valueFromPixel(m,r,n),g=this.valueFromPixel(f,r,n)),a.T7s(4);var x=a.k5y(5,6,0);a.u4X(3);var S=a.D45(0,1);a.T7s(31);var C=a.k5y(17,5,5,97,14);a.T7s(32);var w=a.D45(4,5,3,20,10);a.u4X(33);var k=a.k5y(3,18,3,6);s=(h[0]-l[0])*((c[x]<l[S]?g:p)-l[C])-(h[w]-l[k])*(e-l[0]),a.T7s(34);var T=a.D45(1,6,3,1);a.T7s(1);var D=a.k5y(5,5,0);a.u4X(35);var _=a.D45(6,4,1,18,6);a.u4X(36);var A=a.D45(3,0,15,13,3);a.u4X(37);var M=a.k5y(20,14,38,19,14);return o=(c[0]-l[0])*((c[1]>l[T]?g:p)-(l[D]+c[_]-h[A]))-(h[M]-l[1])*(e-l[0]),a.u4X(38),a.D45(o,0,s)},t.Drawing.channel.prototype.intersected=function(e,i,r){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],r))return a.T7s(3),this.highlighted=a.D45("p",s),{action:"drag",point:"p"+s};return a.r8O(),this.boxIntersection(e,i,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.channel.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y;r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=null,this.p2&&(c=this.pixelFromValue(r,this.p2[0],this.p2[1],n)),u=this.lineWidth,d=this.getLineColor(),p=this.fillColor,this.p2&&p&&!t.isTransparent(p)&&"auto"!=p&&(e.beginPath(),e.moveTo(s,l),e.lineTo(o,h),e.lineTo(o,c),a.u4X(39),e.lineTo(s,a.k5y(l,c,h)),e.closePath(),e.globalAlpha=.2,e.fillStyle=p,e.fill(),e.globalAlpha=1),g={pattern:this.pattern,lineWidth:u},(this.penDown||this.highlighted)&&"none"==this.pattern&&(g.pattern="dotted"),a.Y$C(),i.plotLine(s,o,l,h,d,"segment",e,r,g),this.p2&&(a.u4X(39),i.plotLine(s,o,a.D45(l,c,h),c,d,"segment",e,r,g)),this.highlighted&&(m="p0"==this.highlighted,f="p1"==this.highlighted,y="p2"==this.highlighted,this.littleCircle(e,s,l,m),this.littleCircle(e,o,h,f),this.littleCircle(e,o,c,y)))},t.Drawing.channel.prototype.reposition=function(e,t,i,r){var n,s,o;t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,a.r8O(),"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.setPoint(1,t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(e)))},t.Drawing.channel.prototype.adjust=function(){var e;a.Y$C(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d1,this.v2,e.chart))},t.Drawing.channel.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,a.Y$C(),this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.field=t.fld,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},t.Drawing.pitchfork=function(){var e;e=2;for(var t=1;-876232804!==a.U3Y(t.toString(),t.toString().length,76081);t++)this.name="",this.dragToDraw=!0,e+=2;-1674099202!==a.U3Y(e.toString(),e.toString().length,11912)&&("pit","chfork",this.name="pitchfork",this.dragToDraw=!1),this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],t.Drawing.pitchfork.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.pitchfork.prototype.intersected=function(e,i,r){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in a.Y$C(),n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[o][0],n[o][1],r))return a.u4X(3),this.highlighted=a.D45("p",o),{action:"drag",point:"p"+o};s=this.rays;for(var l=0;l<s.length;l++)if("s","e","gmen","t",this.lineIntersection(e,i,r,l?"ray":"segment",s[l][0],s[l][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:this.valueOnDrawingAxis(e,i)};return null},t.Drawing.pitchfork.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if(i=(t=this.stx).panels[this.panelName],r=t.getYAxisByField(i,this.field),i&&(!this.field||r)){(n=this.p2)||(n=this.p1),s=t.pixelFromTick(this.p0[0],i.chart),o=t.pixelFromTick(this.p1[0],i.chart),l=t.pixelFromTick(n[0],i.chart),a.r8O(),h=this.pixelFromValue(i,this.p0[0],this.p0[1],r),c=this.pixelFromValue(i,this.p1[0],this.p1[1],r),u=this.pixelFromValue(i,n[0],n[1],r),d=this.lineWidth,p=this.getLineColor(),g={pattern:this.pattern,lineWidth:d},m=50,a.u4X(40),f=a.D45(2,h,u,c),a.u4X(40),(y=a.k5y(2,s,l,o))<0&&(m*=-1),a.T7s(12),f*=a.D45(m,y),a.u4X(7),this.rays=[[[o,c],[l,u]],[[s,h],[a.D45(o,l,2),a.k5y(c,u,2)]]],o==l&&c==u||(a.T7s(5),this.rays.push([[o,c],[a.D45(o,m),a.D45(c,f)]],[[l,u],[a.D45(l,m),a.k5y(u,f)]]));for(var w=0;w<this.rays.length;w++)v=this.rays[w],b=w?"ray":"segment",t.plotLine(v[0][0],v[1][0],v[0][1],v[1][1],p,b,e,i,g);this.highlighted&&(x="p0"==this.highlighted,S="p1"==this.highlighted,C="p2"==this.highlighted,this.littleCircle(e,s,h,x),this.littleCircle(e,o,c,S),this.littleCircle(e,l,u,C))}},t.Drawing.pitchfork.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.pitchfork.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.d2=t.d2,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.tzo2=t.tzo2,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.field=t.fld,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},t.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(e,t){var i;if(!t)return!0;if(e[0]>=t[0]||e[1]==t[1])return!1;if(1==this.segment)e[1]<t[1]?this.shape="M":this.shape="W";else if(2==this.segment){-798317542,1116067466,i=2;for(var r=1;-798317542!==a.L3M(r.toString(),r.toString().length,42640);r++){if(!0!==this.shape||e[8]>=t[6])return!0;if(36439===this.shape||e[2]>=t[3])return!0;if(t[4]%e[6]%(this.points[6][5]%e[2])<=52739)return!0;if(t[4]/e[7]-(this.points[4][4]+e[2])<=91513)return!0;i+=2}if(1116067466!==a.L3M(i.toString(),i.toString().length,37893)){if(!0!==this.shape||e[8]>=t[6])return!0;if(36439===this.shape||e[2]>=t[3])return!0;if(t[4]%e[6]%(this.points[6][5]%e[2])<=52739)return!0;if(t[4]/e[7]-(this.points[4][4]+e[2])<=91513)return!0}if("M"==this.shape&&e[1]<t[1])return!1;if("W"==this.shape&&e[1]>t[1])return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&e[1]>t[1])return!1;if("W"==this.shape&&e[1]<t[1])return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(e[1]<t[1]||t[1]<this.points[0][1]))return!1;if("W"==this.shape&&(e[1]>t[1]||t[1]>this.points[0][1]))return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}for(var n=1;-680568109!==a.U3Y(n.toString(),n.toString().length,29474);n++)return!1;return-1227605404===a.L3M(2..toString(),2..toString().length,86820)},t.Drawing.gartley.prototype.click=function(e,t,i){var r;if(a.Y$C(),r=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,t,i,r.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(t,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,t,i,r.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],r.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,t,i,r.chart)}return!1}},t.Drawing.gartley.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if(i=this.stx,a.r8O(),r=i.panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)){if(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),2==this.segment)this.drawDropZone(e,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(e,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){a.u4X(5);var S=a.k5y(18,16);a.u4X(41);var C=a.D45(2,19,32,4,10);a.T7s(42);var w=a.D45(18,10,179);a.T7s(3);var k=a.D45(19,13);c=1.618*this.points[S][C]-.618*this.points["1"*w]["1">>k],c="M"==this.shape?Math.max(c,this.points[0][1]):Math.min(c,this.points[0][1]),this.drawDropZone(e,c,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}if(u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u},(this.penDown||this.highlighted)&&"none"==this.pattern&&(p.pattern="dotted"),this.segment<=this.maxSegments&&i.plotLine(s,o,l,h,d,this.name,e,r,p),g=this.fillColor,m=[],this.points.length){"a","ut","o",e.beginPath();for(var T=1;T<this.points.length&&T<=4;T++)f=i.pixelFromTick(this.points[T-1][0],r.chart),y=i.pixelFromTick(this.points[T][0],r.chart),v=this.pixelFromValue(r,this.points[T-1][0],this.points[T-1][1],n),b=this.pixelFromValue(r,this.points[T][0],this.points[T][1],n),1==T&&m.push(f,v),m.push(y,b),i.plotLine(f,y,v,b,d,this.name,e,r,p);if(2!=this.points.length&&4!=this.points.length||m.push(o,h),this.points[2]){-1203659655,580667148,a.u4X(10),x=a.k5y("2",1);for(var D=1;-1203659655!==a.U3Y(D.toString(),D.toString().length,46449);D++)m.push(i.pixelFromTick(this.points[2][0],r.chart),this.pixelFromValue(r,this.points[2][0],this.points[2][1],n)),x+=2;580667148!==a.L3M(x.toString(),x.toString().length,94677)&&m.push(i.pixelFromTick(this.points[9][1],r.chart),this.pixelFromValue(r,this.points[1][1],this.points[5][9],n))}if(g&&"auto"!=g&&!t.isTransparent(g)){for(var _=0;_<m.length;_+=2)0===_&&e.moveTo(m[0],m[1]),e.lineTo(m[_],m[_+1]);e.fillStyle=g,e.globalAlpha=.2,e.closePath(),e.fill(),e.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(e,i,a,r){var n,s;if(n=this.points,s=this.stx.panels[this.panelName],n.length!=this.maxSegments+1||!s)return!1;for(var o=0;o<n.length-1;o++)if(t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment",n[o],n[o+1]))return!0;return!1},t.Drawing.gartley.prototype.boxIntersection=function(e,t,i){var a,r;if(!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),r=Math.max(this.p0[1],this.p1[1]);for(var n=0;n<this.points.length;n++)a=Math.min(a,this.points[n][1]),r=Math.max(r,this.points[n][1]);return!(i.y1>r||i.y0<a)},t.Drawing.gartley.prototype.reposition=function(e,t,i,r){var n,s,o;if(t&&(n=this.stx.panels[this.panelName],s=t.tick-i,t.tick=i,o=t.value-r,t.value=r,"move"==t.action)){this.pts=[];for(var l=0;l<this.points.length;l++)a.T7s(10),this.points[l][a.k5y("0",1)]-=s,this.points[l][1]-=o,this.setPoint(1,this.points[l][0],this.points[l][1],n.chart),l&&l<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[l]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),this.render(e)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,e.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,e.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var e,i;if(e=this.stx.panels[this.panelName],a.Y$C(),e){this.points=[];for(var r=0;r<this.pts.length;r+=3)(i=t.strToDateTime(this.pts[r])).setMinutes(i.getMinutes()+Number(this.pts[r+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(i),e.chart),this.pts[r+2]])}},t.Drawing.gartley.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.field=t.fld,this.pts=t.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return a.Y$C(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",a.Y$C(),this.splineTension=.3,this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(e,i,r){var n,s,o,{x0:l,x1:h,y0:c,y1:u,cy0:d,cy1:p}=r;if(l>this.hiX||h<this.lowX)return!1;var{field:g,panelName:m,stx:f}=this;g&&(n=f.panels[m],s=f.getYAxisByField(n,g),c=this.valueFromPixel(d,n,s),u=this.valueFromPixel(p,n,s)),o=2;for(var y=1;-2059135157!==a.L3M(y.toString(),y.toString().length,25306);y++){if(u<=this.hiY&&c>this.lowY)return!0;this.highlighted=!1,o+=2}if(754527024!==a.L3M(o.toString(),o.toString().length,56276)){if(u>this.hiY||c<this.lowY)return!1;this.highlighted=!0}return{action:"move",p0:t.clone(this.p0),tick:e,value:this.valueOnDrawingAxis(e,i)}},t.Drawing.freeform.prototype.reposition=function(e,t,i,r){var n,s,o;a.Y$C(),t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action&&(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.adjust(),this.render(e)))},t.Drawing.freeform.prototype.click=function(e,i,r){var n,s,o,l;if(s=(n=this.stx).panels[this.panelName])return o=n.getYAxisByField(s,this.field)||s.yAxis,!1===this.penDown?("po","i","nter",this.copyConfig(),this.startX=Math.round(n.resolveX(n.pixelFromTick(i,s.chart))),this.startY=Math.round(n.resolveY(this.pixelFromValue(s,i,r,o))),l=n.dateFromTick(i,s.chart,!0),this.d0=t.yyyymmddhhmmssmmm(l),this.tzo0=l.getTimezoneOffset(),this.v0=r,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=n.layout.candleWidth,this.multiplier=o.multiplier,this.interval=n.layout.interval,this.periodicity=n.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,n.container.ownerDocument.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,a.Y$C(),this.splineTension=this.tempSplineTension,n.container.ownerDocument.body.style.cursor="auto",2===this.nodes.length&&n.undo(),!0)},t.Drawing.freeform.prototype.move=function(e,i,r){var n,s,o,l;if(this.penDown)return s=(n=this.stx).panels[this.panelName],o=n.getYAxisByField(s,this.field)||s.yAxis,l=n.dateFromTick(i,s.chart,!0),a.r8O(),this.d1=t.yyyymmddhhmmssmmm(l),this.tzo1=l.getTimezoneOffset(),this.v1=r,this.p1=[t.ChartEngine.crosshairX-this.startX,o.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,a.u4X(5),this.nodes.length-=a.k5y("2",0))),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(e),!1},t.Drawing.freeform.prototype.intervalRatio=function(e,i,r,n,s,o){var l,h;if(l=0,e==i)l=1;else if(isNaN(e)||isNaN(i)){if(isNaN(e)){if("d","a","y","month"==e)"week"==i?l=p(s,o):"day"==i?l=30:isNaN(i)||(l=30*d(s,o)/i);else if("week"==e){if("m","onth","month"==i)a.T7s(1),l=a.k5y(9,9,0)/p(s,o);"day"==i?l=u(s,o):isNaN(i)||(l=u(s,o)*d(s,o)/i)}else if("day"==e)if("we","e","k","week"==i)l=1/u(s,o);else if("month"==i){a.u4X(43),l=a.k5y(16,1,17)/30}else isNaN(i)||(l=d(s,o)/i)}else if(!isNaN(e)){-532436404,-997852659,h=2;for(var c=1;-532436404!==a.L3M(c.toString(),c.toString().length,68214);c++)"w","ee","k","week"!==i?l=e*(30/d(s,o)):"day"!==i?l=e+u(s,o)%d(s,o):"week"!==i&&(l=e+d(s,o)),a.T7s(5),h+=a.D45("2",0);-997852659!==a.L3M(h.toString(),h.toString().length,97843)&&("d","a","y","week"!==i?l=e*(30/d(s,o)):"day"!==i?l=e+u(s,o)%d(s,o):"week"!==i&&(l=e+d(s,o))),"month"==i?l=e/(30*d(s,o)):"week"==i?l=e/(u(s,o)*d(s,o)):"day"==i&&(l=e/d(s,o))}}else a.T7s(12),l=a.k5y(e,i);function u(e,t){return a.r8O(),5}function d(e,i){return a.r8O(),t.Market.Symbology.isForexSymbol(i)?1440:390}function p(e,t){return a.Y$C(),5}return a.u4X(12),l*=a.D45(r,n)},t.Drawing.freeform.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,m;if(i=(t=this.stx).panels[this.panelName],r=t.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,0!==(n=this.intervalRatio(this.interval,t.layout.interval,this.periodicity,t.layout.periodicity,this.d0,i.chart.symbol)))){s=t.layout.candleWidth/this.candleWidth,o=r.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,i.chart),l=t.pixelFromTick(this.p0[0],i.chart),h=this.pixelFromValue(i,this.p0[0],this.p0[1],r),c=[],u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u};for(var f=0;f<this.pNodes.length;f++){g=n*s*this.pNodes[f][0]+l,a.T7s(5);var y=a.k5y(6,5);m=o*this.pNodes[f][y],r.flipped?(a.T7s(5),m=a.k5y(h,m)):m+=h,c.push(g,m)}c.length&&(this.splineTension<0?t.connectTheDots(c,d,this.name,e,i,p):t.plotSpline(c,this.splineTension,d,this.name,e,!0,p))}},t.Drawing.freeform.prototype.adjust=function(){var e,t,i,r,n,s,o,l,h,c;if(t=(e=this.stx).panels[this.panelName]){i=[this.nodes[0],this.nodes[1]],this.pNodes=[i],a.T7s(44),this.lowX=this.nodes[a.D45("0",0)],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var u=2;u<this.nodes.length;u+=2)a.u4X(3),r=[this.nodes[u],this.nodes[a.D45(u,1)]],this.pNodes.push(r),this.lowX=Math.min(this.lowX,r[0]),this.hiX=Math.max(this.hiX,r[0]),this.lowY=Math.max(this.lowY,r[1]),this.hiY=Math.min(this.hiY,r[1]);0!==(n=this.intervalRatio(this.interval,e.layout.interval,this.periodicity,e.layout.periodicity,this.d0,t.chart.symbol))&&(s=e.getYAxisByField(t,this.field)||t.yAxis,o=e.layout.candleWidth/this.candleWidth,l=s.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),h=e.pixelFromTick(this.p0[0],t.chart),a.Y$C(),c=this.pixelFromValue(t,this.p0[0],this.p0[1],s),this.lowX=e.tickFromPixel(Math.floor(n*o*this.lowX)+h,t.chart),this.hiX=e.tickFromPixel(Math.ceil(n*o*this.hiX)+h,t.chart),s.flipped?(this.lowY=this.valueFromPixel(c-Math.floor(l*this.lowY),t,s),this.hiY=this.valueFromPixel(c-Math.ceil(l*this.hiY),t,s)):(this.lowY=this.valueFromPixel(Math.floor(l*this.lowY)+c,t,s),this.hiY=this.valueFromPixel(Math.ceil(l*this.hiY)+c,t,s)))}},t.Drawing.freeform.prototype.serialize=function(){return a.Y$C(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes,fld:this.field}},t.Drawing.freeform.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.candleWidth=t.cw,this.multiplier=t.mlt,this.d0=t.d0,this.tzo0=t.tzo0,this.v0=t.v0,this.interval=t.inter,this.periodicity=t.pd,this.nodes=t.nodes,this.field=t.fld,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=5,this.text="",this.ta=null,this.border=!1,this.fontSize=12,this.font={},this.stemEntry="",this.defaultWidth=35},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),a.Y$C(),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),this.p0=[t,i],this.render(e))},t.Drawing.callout.prototype.onChange=function(e){var i,r;this.stx.panels[this.panelName]&&(i=e.target,this.w=i.clientWidth,this.h=i.clientHeight,r=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(r.canvas,this.stx),this.render(r),a.r8O(),this.edit(r))},t.Drawing.callout.prototype.repositionTextArea=function(e){var i;i=2*this.defaultWidth+this.whitespace+this.padding,i=Math.max(this.w,i),a.T7s(45);var r=a.k5y(7,3,86,2,14);a.T7s(46);var n=a.k5y(6,48,14,4,8);e.style.left=t.stripPX(e.style.left)-(isNaN(i)?this.defaultWidth*n:i/r)+"px",this.ta=e},t.Drawing.callout.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if("t","o","p",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(this.context=e,s=i.pixelFromTick(this.p0[0],r.chart),o=this.pixelFromValue(r,this.p0[0],this.p0[1],n),!isNaN(o))){e.font=this.fontString,e.textBaseline="top",l=s,h=o,a.T7s(47);var C=a.D45(5,13,2,46,14);c=this.w/C,a.T7s(48);var w=a.D45(2,3,7,15,1);if(u=this.h/w,this.penDown){a.u4X(49);var k=a.D45(1,2,1,6,2);a.u4X(50);var T=a.D45(0,17,19,1);c=this.defaultWidth+this.whitespace/k+this.padding/T,u=this.fontSize+this.fontModifier}if((d=this.lineWidth)||(d=1.1),p=this.getLineColor(),g=this.getLineColor(this.borderColor),b=Math.min(Math.min(c,u)/2,8),this.stem&&(this.stem.t?(m=i.pixelFromTick(this.stem.t),y=this.pixelFromValue(r,this.stem.t,this.stem.v,n)):this.stem.x&&(m=l,y=h,l+=this.stem.x,h+=this.stem.y),x="",m>=l+c?(a.u4X(3),f=a.D45(l,c),x="r"):m>l-c&&m<l+c?(f=l,x="c"):m<=l-c&&(a.u4X(5),f=a.D45(l,c),x="l"),y>=h+u?(a.T7s(3),v=a.D45(h,u),x+="b"):y>h-u&&y<h+u?(v=h,x+="m"):y<=h-u&&(a.T7s(5),v=a.D45(h,u),x+="t"),this.stemEntry=x,"cm"!=x&&(m=Math.round(m),f=Math.round(f),y=Math.round(y),v=Math.round(v))),this.highlighted?i.canvasColor("stx_annotation_highlight_bg",e):this.fillColor?(e.fillStyle=this.fillColor,e.globalAlpha=.4):this.stem&&(e.fillStyle=i.containerColor),e.strokeStyle=g,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(d,this.pattern)),e.lineDashOffset=0),g&&("c","t","l","b",e.beginPath(),e.lineWidth=d,a.T7s(8),e.moveTo(a.D45(l,b,c),a.k5y(h,u,a.u4X(5))),"rt"!=this.stemEntry?(a.T7s(3),e.quadraticCurveTo(a.D45(l,c),a.k5y(h,u,a.u4X(5)),a.k5y(l,c,a.T7s(3)),a.k5y(u,b,h,a.u4X(4)))):(e.lineTo(m,y),a.u4X(3),e.lineTo(a.k5y(l,c),a.k5y(u,b,h,a.T7s(4)))),a.T7s(3),e.lineTo(a.k5y(l,c),a.k5y(b,2,h,a.T7s(51))),"rm"==this.stemEntry&&e.lineTo(m,y),a.u4X(3),e.lineTo(a.k5y(l,c),a.k5y(2,b,h,a.u4X(52))),a.u4X(3),e.lineTo(a.k5y(l,c),a.D45(h,b,u,a.u4X(8))),"rb"!=this.stemEntry?(a.T7s(3),e.quadraticCurveTo(a.D45(l,c),a.D45(h,u,a.u4X(3)),a.D45(l,b,c,a.T7s(8)),a.D45(h,u,a.u4X(3)))):(e.lineTo(m,y),a.u4X(8),e.lineTo(a.D45(l,b,c),a.D45(h,u,a.u4X(3)))),a.u4X(53),e.lineTo(a.D45(l,"2",b,0),a.D45(h,u,a.u4X(3))),"cb"==this.stemEntry&&e.lineTo(m,y),a.u4X(54),e.lineTo(a.D45(l,"2",1,b),a.D45(h,u,a.u4X(3))),a.u4X(4),e.lineTo(a.k5y(c,b,l),a.k5y(h,u,a.u4X(3))),"lb"!=this.stemEntry?(a.T7s(5),e.quadraticCurveTo(a.D45(l,c),a.k5y(h,u,a.T7s(3)),a.k5y(l,c,a.T7s(5)),a.k5y(h,b,u,a.u4X(8)))):(e.lineTo(m,y),a.u4X(5),e.lineTo(a.k5y(l,c),a.k5y(h,b,u,a.u4X(8)))),a.T7s(5),e.lineTo(a.k5y(l,c),a.D45(2,b,h,a.u4X(52))),"lm"==this.stemEntry&&e.lineTo(m,y),a.u4X(5),e.lineTo(a.D45(l,c),a.D45(h,b,"2",a.u4X(55))),a.T7s(5),e.lineTo(a.D45(l,c),a.D45(u,b,h,a.T7s(4))),"lt"!=this.stemEntry?(a.u4X(5),e.quadraticCurveTo(a.D45(l,c),a.D45(h,u,a.u4X(5)),a.k5y(c,b,l,a.u4X(4)),a.D45(h,u,a.T7s(5)))):(e.lineTo(m,y),a.T7s(4),e.lineTo(a.k5y(c,b,l),a.D45(h,u,a.T7s(5)))),a.T7s(56),e.lineTo(a.D45(b,0,"2",l),a.D45(h,u,a.T7s(5))),"ct"==this.stemEntry&&e.lineTo(m,y),a.u4X(52),e.lineTo(a.k5y(2,b,l),a.k5y(h,u,a.T7s(5))),a.u4X(8),e.lineTo(a.k5y(l,b,c),a.k5y(h,u,a.T7s(5))),e.fill(),e.globalAlpha=1,"none"!=this.pattern&&e.stroke()),this.highlighted?i.canvasColor("stx_annotation_highlight",e):e.fillStyle=p,h+=this.padding,!this.ta)for(var D=0;D<this.arr.length;D++)e.fillText(this.arr[D],l-c+this.padding,h-u),h+=this.fontSize;e.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(S="p0"==this.highlighted,this.littleCircle(e,m,y,S)),a.r8O()}},t.Drawing.callout.prototype.click=function(e,t,i){var r;if(!this.stx.overXAxis&&!this.stx.overYAxis)return r=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,r.chart),a.r8O(),this.penDown?(this.adjust(),this.edit(e),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(e,t,i,r){var n,s,o;a.r8O(),t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,t.stem?("drag"==t.action?this.stem={d:this.stx.dateFromTick(i,n.chart,!0),v:r}:"move"==t.action&&(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(t.stem.d,n.chart)-s),v:t.stem.v-o}),this.adjust()):this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.render(e))},t.Drawing.callout.prototype.lineIntersection=function(e,i,r,n){var s,o,l,h,c,u,d,p,g,m,f;if(s=this.stem,a.Y$C(),o=this.p0,h=(l=this.stx).panels[this.panelName],!o||!s||!h)return!1;if(c=s.t||l.tickFromDate(s.d,h.chart),u={x0:o[0],x1:c,y0:o[1],y1:s.v},p=(d=this.boxToPixels(l,this.panelName,u,l.getYAxisByField(h,this.field))).x0,g=d.y0,m=d.x1,f=d.y1,"string"==typeof this.stemEntry){if(this.stemEntry.indexOf("l")>-1)p-=this.w/2;else if(this.stemEntry.indexOf("r")>-1){a.T7s(57);var y=a.D45(0,2,0,1);p+=this.w/y}if(this.stemEntry.indexOf("t")>-1){a.T7s(42);var v=a.D45(18,15,268);g-=this.h/("2"|v)}else if(this.stemEntry.indexOf("b")>-1){a.T7s(58);var b=a.k5y(200,13,9,21);g+=this.h/b}}return t.boxIntersects(r.cx0,r.cy0,r.cx1,r.cy1,p,g,m,f,n)},t.Drawing.callout.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p;if("segmen",a.r8O(),"t",s=(n=this.stx).panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,r))return this.highlighted="p0",{action:"drag",stem:!0};a.u4X(17);var g=a.k5y(6,56,9);o=n.pixelFromTick(this.p0[0],s.chart)-this.w/g,l=n.getYAxisByField(s,this.field),a.T7s(59);var m=a.D45(14,20,6,3,15);a.u4X(60);var f=a.D45(20,5,20,3);return h=this.pixelFromValue(s,this.p0[0],this.p0[m],l)-this.h/f,c=o+this.w,u=h+this.h,this.stem&&this.stem.x&&(o+=this.stem.x,c+=this.stem.x,h+=this.stem.y,u+=this.stem.y),d=n.pixelFromTick(e,s.chart),p=n.pixelFromValueAdjusted(s,e,i),d+r.r>=o&&d-r.r<=c&&p+r.r>=h&&p-r.r<=u?(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:this.valueOnDrawingAxis(e,i)}):this.lineIntersection(e,i,r,"segment")?("m","o","ve",this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.fibonacci=function(){a.Y$C(),this.name="fibonacci",this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},a.T7s(5),t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,a.k5y("0.5",0),.618,1,1.382,a.D45("1.618",0)],t.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(e){var t,i;if(t=this.recommendedLevels,a.r8O(),t&&!e.currentVectorParameters.fibonacci.fibsAlreadySet){i=e.currentVectorParameters.fibonacci.fibs;for(var r=0;r<i.length;r++){delete i[r].display;for(var n=0;n<t.length;n++)i[r].level==t[n]&&(i[r].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f;if(i=(e=this.stx).panels[this.panelName]){r=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),a.T7s(5),s=a.k5y(r,n),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},o=e.pixelFromTick(this.p0[0],i.chart),l=e.pixelFromTick(this.p1[0],i.chart),h=e.getYAxisByField(i,this.field),c=this.pixelFromValue(i,this.p0[0],this.p0[1],h),u=this.pixelFromValue(i,this.p1[0],this.p1[1],h),d=0,p=1,a.Y$C();for(var y=0;y<this.parameters.fibs.length;y++)(g=this.parameters.fibs[y]).level>=d&&g.level<=p||!g.display||(m=this.pixelFromValue(i,this.p0[0],u<c?r-s*g.level:n+s*g.level,h),f=t.xIntersection({x0:o,x1:l,y0:c,y1:u},m),g.level<d?(d=g.level,this.outer.p1[1]=this.valueFromPixel(m,i,h),this.outer.p1[0]=e.tickFromPixel(f,i.chart)):g.level>p&&(p=g.level,this.outer.p0[1]=this.valueFromPixel(m,i,h),this.outer.p0[0]=e.tickFromPixel(f,i.chart)))}},t.Drawing.fibonacci.prototype.click=function(e,i,r){var n;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(this.accidentalClick(i,r)||(a.u4X(10),a.r8O(),this.setPoint(a.D45("1",1),i,r,n.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1),!0):(a.T7s(13),this.setPoint(a.D45(0,"0"),i,r,n.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R;if("st","x_","yaxis","m","id","dle","a","u","t","o",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){-1687845592,2013470837,s=2;for(var Y=1;-1687845592!==a.U3Y(Y.toString(),Y.toString().length,30850);Y++)o=Math.max(this.p0[2],this.p1[2]),l=Math.min(this.p0[2],this.p1[3]),h=n.flipped?l%o:o%l,c=i.pixelFromTick(this.p0[6],r.chart),u=i.pixelFromTick(this.p1[6],r.chart),d=this.pixelFromValue(r,this.p0[2],this.p0[4],n),p=this.pixelFromValue(r,this.p1[1],this.p1[2],n),s+=2;2013470837!==a.L3M(s.toString(),s.toString().length,98113)&&(o=Math.max(this.p0[1],this.p1[1]),l=Math.min(this.p0[1],this.p1[1]),h=n.flipped?l-o:o-l,c=i.pixelFromTick(this.p0[0],r.chart),u=i.pixelFromTick(this.p1[0],r.chart),d=this.pixelFromValue(r,this.p0[0],this.p0[1],n),p=this.pixelFromValue(r,this.p1[0],this.p1[1],n)),g=Math.min(p,d),m=Math.max(p,d),a.T7s(5),f=a.D45(m,g),a.u4X(61),y=a.k5y(32,"0",p,u,c,d),v={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=v),b=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",i.canvasFont("stx_yaxis",e),a.T7s(40);var z=a.D45(18,15,243,17);x=e.measureText("161.8%").width+z,S=Number.MAX_VALUE,C=Number.MAX_VALUE,a.u4X(62);var B=a.D45(2,19,20);w=Number.MAX_VALUE*B,a.T7s(5);var j=a.D45(0,1);k=Number.MAX_VALUE*j,T=this.getLineColor(),this.rays=[];for(var $=0;$<this.parameters.fibs.length;$++)if("unde","fin","e","d","se","gmen","t","a","u","t","o","au","to",e.textAlign="left",e.fillStyle=T,(D=this.parameters.fibs[$]).display){if(_=this.pixelFromValue(r,this.p0[0],p<d?o-h*D.level:l+h*D.level,n),A=t.xIntersection({x0:c,x1:u,y0:d,y1:p},_),M=this.parameters.extendLeft?0:A,F=r.left+r.width,this.parameters.printLevels){"ri","g","h","t",a.T7s(9);var X=a.k5y(11,1003,12,2);a.T7s(63);var W=a.D45(14,6,14,2,30);a.T7s(64);var U=a.D45(0,9,13,4,9);a.u4X(65);var q=a.k5y(9942,4,4);a.u4X(4);a.k5y(10,13,3333);a.u4X(50);var G=a.D45(8229,13,7183,8);a.T7s(66);var Q=a.k5y(3763,3763,3759);P=Math.round(D.level*X)/W+(("1240"|U)===q?G!=Q||336.06:"%"),F-=x,this.parameters.printValues&&(e.fillStyle=T,i.canvasFont("stx_yaxis",e)),F<M&&(e.textAlign="right"),e.fillText(P,F,_),F<M?F+=5:F-=5}this.parameters.printValues&&A<r.width&&(L=this.valueFromPixel(_,r,n),L=n.priceFormatter?n.priceFormatter(i,r,L):i.formatYAxisPrice(L,r,null,n),e==i.chart.context&&i.endClip(),i.createYAxisLabel(r,L,_,this.getLineColor(null,!0),null,e,n),e==i.chart.context&&i.startClip(r.name)),("auto"==(O=D.color)||t.isTransparent(O))&&(O=this.getLineColor()),("auto"==(E=D.color)||t.isTransparent(E))&&(E=this.fillColor),("auto"==E||t.isTransparent(E))&&(E=i.defaultColor),e.fillStyle=E,I=t.clone(D.parameters),this.highlighted&&(I.opacity=1),i.plotLine(M,F,_,_,O,"segment",e,r,I),this.rays.push([[M,_],[F,_]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(F,_),e.lineTo(M,_),M?e.lineTo(u,p):e.lineTo(M,p),e.lineTo(F,p),void 0!==E&&e.fill(),e.globalAlpha=1,_<C&&(S=A,C=_),_>k&&(w=A,k=_)}for(var Z=0;Z<=1;Z++)N=y?m-f*Z:g+f*Z,(N=Math.round(N))<C&&(S=t.xIntersection({x0:c,x1:u,y0:d,y1:p},N),C=N),N>k&&(w=t.xIntersection({x0:c,x1:u,y0:d,y1:p},N),k=N);H=t.clone(this.parameters.trend.parameters),this.highlighted&&(H.opacity=1),i.plotLine(S,w,C,k,b,"segment",e,r,H),this.highlighted&&(V="p0"==this.highlighted,R="p1"==this.highlighted,this.littleCircle(e,c,d,V),this.littleCircle(e,u,p,R))}},t.Drawing.fibonacci.prototype.reposition=function(e,i,r,n){a.Y$C(),i&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if(n=this.p0,s=this.p1,!n||!s)return null;for(var u in o={0:n,1:s})if(this.pointIntersection(o[u][0],o[u][1],r))return a.u4X(3),this.highlighted=a.k5y("p",u),{action:"drag",point:"p"+u};if(l=this.outer,h=this.rays,!(c=l&&this.lineIntersection(e,i,r,"segment",l.p0,l.p1)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.fibonacci.prototype.reconstruct=function(e,i){i=t.replaceFields(i,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=e,this.parameters=i.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,this.field=i.fld,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),a.T7s(13),this.setPoint(a.k5y(0,"1"),this.d1,this.v1,e.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var e;return e={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field},t.replaceFields(e,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){a.r8O(),this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){a.r8O(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),a.T7s(10),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,a.D45("4.236",1)],t.Drawing.fibprojection.prototype.click=function(e,i,r){var n,s;if(s=(n=this.stx).panels[this.panelName])return this.copyConfig(),a.r8O(),this.penDown?this.accidentalClick(i,r)?(n.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],s.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,i,r,s.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,r,s.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){a.u4X(67);var O=a.D45(1,13,33,6,19);s=this.p1["1">>O]-this.p0[1],o=i.pixelFromTick(this.p0[0],r.chart),l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p0[0],this.p0[1],n),c=this.pixelFromValue(r,this.p1[0],this.p1[1],n),u=null,d=null,this.p2&&(u=i.pixelFromTick(this.p2[0],r.chart),d=this.pixelFromValue(r,this.p2[0],this.p2[1],n)),p={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=p),g=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",i.canvasFont("stx_yaxis",e),a.u4X(5),m=-a.D45("1685286763",0),-1502175816,a.T7s(13),a.Y$C(),f=a.k5y(32,"2");for(var E=1;a.U3Y(E.toString(),E.toString().length,73713)!==m;E++){a.u4X(68);var I=a.k5y(20,7,9,679,3);y=e.measureText("").width*("29"*I),v=this.getLineColor(),a.T7s(27),f+=a.D45(0,"2")}if(-1502175816!==a.L3M(f.toString(),f.toString().length,76078)){a.T7s(3);var N=a.k5y(6,4);y=e.measureText("161.8%").width+N,v=this.getLineColor()}if(this.p2){this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)if("unde","fined","a","u","to",e.textAlign="left",e.fillStyle=v,(b=this.parameters.fibs[H]).display){if(x=this.pixelFromValue(r,this.p2[0],this.p2[1]+s*b.level,n),S=t.xIntersection({x0:o,x1:l,y0:h,y1:c},x),C=this.parameters.extendLeft?0:o,w=r.left+r.width,this.parameters.printLevels){a.T7s(66);var V=a.D45(2e3,8,750);a.T7s(4);var R=a.k5y(19,14,15);k=Math.round(b.level*V)/R+"%",w-=y,this.parameters.printValues&&(e.fillStyle=v,i.canvasFont("stx_yaxis",e)),w<C&&(e.textAlign="right"),e.fillText(k,w,x),w<C?w+=5:w-=5}this.parameters.printValues&&S<r.width&&(T=this.valueFromPixel(x,r,n),T=n.priceFormatter?n.priceFormatter(i,r,T):i.formatYAxisPrice(T,r,null,n),e==i.chart.context&&i.endClip(),i.createYAxisLabel(r,T,x,this.getLineColor(null,!0),null,e,n),e==i.chart.context&&i.startClip(r.name)),("auto"==(D=b.color)||t.isTransparent(D))&&(D=this.getLineColor()),("auto"==(_=b.color)||t.isTransparent(_))&&(_=this.fillColor),("auto"==_||t.isTransparent(_))&&(_=i.defaultColor),e.fillStyle=_,A=t.clone(b.parameters),this.highlighted&&(A.opacity=1),i.plotLine(C,w,x,x,D,"segment",e,r,A),this.rays.push([[C,x],[w,x]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(w,x),e.lineTo(C,x),C?e.lineTo(o,d):e.lineTo(C,d),e.lineTo(w,d),void 0!==_&&e.fill(),a.T7s(10),e.globalAlpha=a.D45("1",1)}}M=t.clone(this.parameters.trend.parameters),this.highlighted&&(M.opacity=1),i.plotLine(o,l,h,c,g,"segment",e,r,M),this.p2&&i.plotLine(l,u,c,d,g,"segment",e,r,M),this.highlighted&&("p","1","p","0",F="p0"==this.highlighted,P="p1"==this.highlighted,L="p2"==this.highlighted,this.littleCircle(e,o,h,F),this.littleCircle(e,l,c,P),this.littleCircle(e,u,d,L))}},t.Drawing.fibprojection.prototype.move=function(e,t,i){this.penDown&&(a.Y$C(),this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.fibprojection.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.setPoint(2,t.p2[0]-n,t.p2[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.render(e)))},t.Drawing.fibprojection.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if("se","gment",n=this.p0,s=this.p1,o=this.p2,!n||!s||!o)return null;for(var u in l={0:n,1:s,2:o})if(this.pointIntersection(l[u][0],l[u][1],r))return a.T7s(3),this.highlighted=a.D45("p",u),{action:"drag",point:"p"+u};if(h=this.rays,!(c=this.lineIntersection(e,i,r,"segment",n,s)||this.lineIntersection(e,i,r,"segment",s,o)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),p2:t.clone(o),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.fibprojection.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.fibarc=function(){a.Y$C(),this.name="fibarc"},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),a.u4X(5),t.Drawing.fibarc.prototype.recommendedLevels=[.382,a.D45("0.5",0),.618,1],t.Drawing.fibarc.prototype.setOuter=function(){var e,i,r,n,s,o,l,h,c;(i=(e=this.stx).panels[this.panelName])&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},r=e.getYAxisByField(i,this.field),n=this.pixelFromValue(i,this.p0[0],this.p0[1],r),s=this.pixelFromValue(i,this.p1[0],this.p1[1],r),o=e.pixelFromTick(this.p0[0],i.chart),l=e.pixelFromTick(this.p1[0],i.chart),a.u4X(42),h=a.D45(2,n,s),c=t.xIntersection({x0:o,x1:l,y0:n,y1:s},h),this.outer.p0[1]=this.valueFromPixel(h,i,r),this.outer.p0[0]=e.tickFromPixel(c,i.chart))},t.Drawing.fibarc.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y;if(s=(n=this.stx).panels[this.panelName]){if(a.r8O(),o=this.p0,l=this.p1,h=this.outer,!o||!l)return null;for(var v in c={0:o,1:l})if(this.pointIntersection(c[v][0],c[v][1],r))return a.u4X(3),this.highlighted=a.k5y("p",v),{action:"drag",point:"p"+v};return u=this.valueOnDrawingAxis(e,i),this.lineIntersection(e,u,r,"segment",h.p0,h.p1)?(this.highlighted=!0,{action:"move",p0:t.clone(o),p1:t.clone(l),tick:e,value:u}):(d=n.getYAxisByField(s,this.field),p={x0:o[0],x1:l[0],y0:o[1],y1:l[1]},g=this.boxToPixels(n,this.panelName,p,d),m={x:Math.abs(Math.sqrt(2)*(g.x1-g.x0)),y:Math.abs(Math.sqrt(2)*(g.y1-g.y0))},f=n.pixelFromTick(e,s.chart),y=n.pixelFromValueAdjusted(s,e,i),f+r.r<g.x1-m.x||f-r.r>g.x1+m.x||y+r.r<g.y1-m.y||y-r.r>g.y1+m.y||g.y0<g.y1&&y-r.r>g.y1||g.y0>g.y1&&y+r.r<g.y1?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:u}))}},t.Drawing.fibarc.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T;if("le","f","t",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.T7s(69),c=a.k5y(l,h),a.T7s(70),u=Math.abs(a.k5y(o,l,h,s)),d=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",i.canvasFont("stx_yaxis",e),p=this.getLineColor();for(var D=0;D<this.parameters.fibs.length;D++)if("a","uto",e.fillStyle=p,!((g=this.parameters.fibs[D]).level<0)&&g.display){a.u4X(17);var _=a.k5y(3,43,14);a.u4X(71);var A=a.k5y(6,145,17,7);a.u4X(72);var M=a.k5y(24,20,18,1,13);m=Math.abs(this.p1[_]-this.p0[A])*Math.sqrt(M)*g.level,a.u4X(8);var F=a.D45(0,7,8);a.T7s(73);var P=a.k5y(15,0,5,21);a.u4X(50);var L=a.D45(0,16,3,8);a.u4X(74);var O=a.k5y(20,9,43,0,15);a.T7s(75);var E=a.k5y(14,9,4);if(f=this.p1[F]+m*(c?P:L)*(n.flipped?O:E),y=this.pixelFromValue(r,this.p0[0],f,n),v=t.xIntersection({x0:s,x1:o,y0:l,y1:h},y),this.parameters.printLevels){"cent","er",e.textAlign="center",a.u4X(76);var I=a.D45(13e3,8,76888,20,6);a.T7s(77);var N=a.D45(8,2,9,4);b=Math.round(g.level*I)/N+"%",this.parameters.printValues&&("st","x_yaxis",e.fillStyle=p,i.canvasFont("stx_yaxis",e)),e.fillText(b,o,Math.round(y-5))}e.textAlign="left",this.parameters.printValues&&v<r.width&&(x=f,x=n.priceFormatter?n.priceFormatter(i,r,x):i.formatYAxisPrice(x,r,null,n),e==i.chart.context&&i.endClip(),i.createYAxisLabel(r,x,y,this.getLineColor(null,!0),null,e,n),e==i.chart.context&&i.startClip(r.name)),("auto"==(S=g.color)||t.isTransparent(S))&&(S=this.getLineColor()),e.strokeStyle=S,("auto"==(C=g.color)||t.isTransparent(C))&&(C=this.fillColor),("auto"==C||t.isTransparent(C))&&(C=i.defaultColor),e.fillStyle=C,e.globalAlpha=this.highlighted?1:g.parameters.opacity,e.lineWidth=g.parameters.lineWidth,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(e.lineWidth,g.parameters.pattern)),e.lineDashOffset=0),e.save(),e.beginPath(),a.u4X(12),e.scale(a.D45(1,u),1),a.T7s(10),e.arc(a.D45(o,u),h,Math.abs(y-h),0,Math.PI,!c),"none"!=this.pattern&&e.stroke(),e.globalAlpha=.05,e.fill(),e.restore(),e.setLineDash&&e.setLineDash([]),e.globalAlpha=1}e.textAlign="left",w=t.clone(this.parameters.trend.parameters),this.highlighted&&(w.opacity=1),a.T7s(78),i.plotLine(o,a.D45("2",o,s,32),h,a.k5y(2,l,h,a.T7s(42)),d,"segment",e,r,w),this.highlighted&&(k="p0"==this.highlighted,T="p1"==this.highlighted,this.littleCircle(e,s,l,k),this.littleCircle(e,o,h,T))}},t.Drawing.fibfan=function(){a.r8O(),this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=Math.min(h,l),u=Math.max(h,l),a.T7s(5),d=a.k5y(u,c),a.u4X(79),p=a.D45(s,o,l,0,h),this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",i.canvasFont("stx_yaxis",e),a.u4X(8);var P=a.k5y(12,12,10);g=e.measureText("161.8%").width+P,m=Number.MAX_VALUE,a.u4X(80);var L=a.D45(10,1,29,20);f=Number.MAX_VALUE*L,y=this.getLineColor(),this.rays=[];for(var O=0;O<this.parameters.fibs.length;O++)if("a","u","to",e.fillStyle=y,(v=this.parameters.fibs[O]).display&&(b=this.pixelFromValue(r,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1],n),x=t.xIntersection({x0:o,x1:o,y0:l,y1:h},b),S=r.left,o>s&&(S+=r.width),a.T7s(81),C=a.k5y(l,b,s,x,l,S,s),!(s>S-(this.parameters.printLevels?g+5:0)&&o>s||s<S+(this.parameters.printLevels?g+5:0)&&o<s))){if(this.parameters.printLevels){a.u4X(3);var E=a.D45(983,17);a.u4X(8);var I=a.k5y(22,14,2);a.T7s(34);var N=a.k5y(1,3,3,0);a.u4X(5);var H=a.D45(94280,89566);a.u4X(82);var V=a.D45(55,4,3,165,819);a.u4X(8);var R=a.k5y(145730,138067,7);a.T7s(83);var Y=a.k5y(8,2685,4,2673);a.u4X(84);var z=a.k5y(2126488,17,11,125476,11);w=Math.round(v.level*E)/I+("417.21"*N!=H?V==R?Y:"%":z),o>s?(S-=g,e.textAlign="left"):("r","i","ght",S+=g,e.textAlign="right"),this.parameters.printValues&&(e.fillStyle=y,i.canvasFont("stx_yaxis",e)),a.u4X(81),C=a.k5y(l,b,s,x,l,S,s),e.fillText(w,S,C),o>s?S-=5:S+=5}e.textAlign="left",this.parameters.printValues&&x<r.width&&(k=this.valueFromPixel(b,r,n),k=n.priceFormatter?n.priceFormatter(i,r,k):i.formatYAxisPrice(k,r,null,n),e==i.chart.context&&i.endClip(),i.createYAxisLabel(r,k,b,this.getLineColor(null,!0),null,e,n),e==i.chart.context&&i.startClip(r.name)),("auto"==(T=v.color)||t.isTransparent(T))&&(T=this.getLineColor()),("auto"==(D=v.color)||t.isTransparent(D))&&(D=this.fillColor),("auto"==D||t.isTransparent(D))&&(D=i.defaultColor),e.fillStyle=D,this.parameters.printLevels&&(a.T7s(81),C=a.D45(l,b,s,x,l,S,s)),_=t.clone(v.parameters),this.highlighted&&(a.u4X(27),_.opacity=a.k5y(0,"1")),i.plotLine(s,S,l,C,T,"segment",e,r,_),this.rays.push([[s,l],[S,C]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(S,C),e.lineTo(s,l),e.lineTo(S,l),e.fill(),e.globalAlpha=1,b<m&&(m=b),b>f&&(f=b)}for(var B=0;B<=1;B++)A=p?u-d*B:c+d*B,(A=Math.round(A))<m&&(m=A),A>f&&(f=A);this.highlighted&&(M="p0"==this.highlighted,F="p1"==this.highlighted,this.littleCircle(e,s,l,M),this.littleCircle(e,o,h,F))}},t.Drawing.fibtimezone=function(){this.name="fibtimezone"},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;var{stx:C}=this;if(i=C.panels[this.panelName],r=C.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,this.p1)){var{chart:w,left:k,width:T}=i,{p0:D,p1:_,parameters:A,highlighted:M}=this;n=C.pixelFromTick(D[0],w),s=C.pixelFromTick(_[0],w),o=this.pixelFromValue(i,D[0],D[1],r),l=this.pixelFromValue(i,_[0],_[1],r),a.u4X(5),h=[1,a.D45("0",0)],c=this.getLineColor(A.trend.color),e.textBaseline="middle",C.canvasFont("stx_yaxis",e),20,u=this.p1[0]-this.p0[0],d=this.getLineColor(),e.textAlign="center",p=n,g=0,a.Y$C();var{top:F}=r;m=r.bottom;var{printLevels:P,timezone:L}=A;for(("auto"==(f=L.color)||t.isTransparent(f))&&(f=this.getLineColor()),("auto"==(y=L.color)||t.isTransparent(y))&&(y=this.fillColor),("auto"==y||t.isTransparent(y))&&(y=C.defaultColor),P&&(a.u4X(5),m-=a.D45(20,7)),v=t.clone(A.timezone.parameters),M&&(v.opacity=1);"s","egm","en","t",p=C.pixelFromTick(D[0]+g*u,w),!(n<s&&p>k+T||n>s&&p<k);){P&&(e.fillStyle=d,e.fillText(s>n?g:-1*g,p,m+7)),e.fillStyle=y,a.u4X(10),C.plotLine(p,p,a.k5y("0",1),m,f,"segment",e,i,v),e.globalAlpha=.05,e.beginPath(),e.moveTo(n,F),e.lineTo(p,F),e.lineTo(p,m),e.lineTo(n,m),e.fill(),e.globalAlpha=1,a.T7s(85);var O=a.k5y(19,20);if(g=h[0]+h[O],h.unshift(g),!u)break}e.textAlign="left",C.plotLine(n,s,o,l,c,"segment",e,i,v),this.highlighted?(b="p0"==M,x="p1"==M,this.littleCircle(e,n,o,b),this.littleCircle(e,s,l,x)):(S=this.valueFromPixel(i.height/2,i,r),this.setPoint(0,D[0],S,w),this.setPoint(1,_[0],S,w))}},t.Drawing.fibtimezone.prototype.intersected=function(e,i,r){var n,s,o,l;if("segme","n","t",n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.u4X(3),this.highlighted=a.k5y("p",h),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},t.Drawing.arrow_v0=function(){this.name="arrow",this.dimension=[11,11],a.u4X(0),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",a.D45(32,"5"),10,"L",0,5,"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],a.T7s(5),this.points=[["M",1,0,"L",3,a.k5y("2",0),"L",a.k5y(64,"5",a.T7s(0)),0,"L",6,1,"L",a.k5y(0,"4",a.T7s(27)),3,"L",6,5,"L",5,6,"L",a.D45("3",3,a.u4X(44)),4,"L",1,6,"L",0,5,"L",2,3,"L",a.D45("0",0,a.u4X(44)),a.k5y(0,"1",a.T7s(27)),"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],a.u4X(0),this.points=[["M",1,5,"L",0,a.k5y(64,"6"),"L",2,8,"L",7,1,"L",6,0,"L",2,a.D45(0,"6"),"L",1,5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){this.name="star",a.r8O(),this.dimension=[12,12],a.u4X(27),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,7,"L",9,a.D45(0,"11"),"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],a.u4X(10),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,11,19,"B",18,15.4,22,a.k5y("11",1),22,7.5,"B",22,7.5,22,0,16,0,"B",13,a.D45("0",0,a.u4X(44)),a.D45(32,"11",a.u4X(0)),2.4,11,3]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){var e;a.r8O(),e=2;for(var t=1;-102769747!==a.U3Y(t.toString(),t.toString().length,72152);t++)this.name="",e+=2;-351471423!==a.U3Y(e.toString(),e.toString().length,43666)&&(this.name=""),this.name="focusarrow",this.dimension=[7,5],a.u4X(13),this.points=[["M",a.D45(0,"0"),0,"L",a.k5y("2",0,a.T7s(5)),a.k5y("2",1,a.T7s(10)),"L",0,4,"L",0,a.D45("0",0,a.u4X(5))],["M",6,0,"L",4,2,"L",6,4,"L",6,0]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){var e;e=2;for(var t=1;-1319222125!==a.U3Y(t.toString(),t.toString().length,70700);t++)this.name="",e+=2;-1213629662!==a.U3Y(e.toString(),e.toString().length,38099)&&(this.name=""),this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(e,t){return!1},adjust:function(){var e;a.r8O(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.p1=t.clone(this.p0))},intersected:function(e,i,a){var r;return this.p0&&this.p1?(this.p1[0]+=1,r=this.lineIntersection(e,i,a,"line"),this.p1=t.clone(this.p0),r||("l","i","n","e",this.p1[1]+=1,r=this.lineIntersection(e,i,a,"line"),this.p1=t.clone(this.p0),r)?(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],a)&&("p","0",this.highlighted="p0"),{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}):null):null},render:function(e){var r,n,s,o,l,h,c,u,d,p,g,m,f;a.Y$C(),n=(r=this.stx).panels[this.panelName],s=r.getYAxisByField(n,this.field),!n||this.field&&!s||(s=s||n.yAxis,o=r.pixelFromTick(this.p0[0],n.chart),l=this.pixelFromValue(n,this.p0[0],this.p0[1],s),h=this.getLineColor(),c={pattern:this.pattern,lineWidth:this.lineWidth},a.u4X(86),r.plotLine(o,a.k5y("100",o),l,l,h,"horizontal",e,n,c),a.T7s(3),r.plotLine(o,o,l,a.k5y(l,100),h,"vertical",e,n,c),this.axisLabel&&!this.repositioner&&(r.endClip(),u=this.p0[1],n.chart.transformFunc&&(u=n.chart.transformFunc(r,n.chart,u)),u=s.priceFormatter?s.priceFormatter(r,n,u):r.formatYAxisPrice(u,n,null,s),r.createYAxisLabel(n,u,l,h,null,null,s),r.startClip(n.name),this.p0[0]>=0&&!r.chart.xAxis.noDraw&&(d=r.dateFromTick(this.p0[0],n.chart,!0),t.ChartEngine.isDailyInterval(r.layout.interval)?(a.u4X(27),d.setHours(0,0,a.D45(0,"0"),0)):(g=1e3*d.getSeconds()+d.getMilliseconds(),i.Date&&r.displayZone&&(p=new i.Date(d.getTime(),r.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+g))),m=t.mmddhhmm(t.yyyymmddhhmm(d)),n.chart.xAxis.formatter?m=n.chart.xAxis.formatter(d,this.name,null,null,m):this.stx.internationalizer&&(m=t.displayableDate(r,r.chart,d)),r.endClip(),r.createXAxisLabel({panel:n,txt:m,x:o,backgroundColor:h,color:null,pointed:!0,padding:2}),r.startClip(n.name))),this.highlighted&&(f="p0"==this.highlighted,this.littleCircle(e,o,l,f)))}},!0),t.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){var e;a.Y$C(),e=this.stx.currentVectorParameters,this.color=e.currentColor,this.fillColor=e.fillColor,this.lineWidth=e.lineWidth,this.pattern=e.pattern},intersected:function(e,i,r){var n,s,o,l,h,c;if(a.Y$C(),"m","ove",!this.p0||!this.p1)return null;for(var u in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[u][0],n[u][1],r))return a.u4X(3),this.highlighted=a.k5y("p",u),{action:"drag",point:"p"+u};return s=this.valueOnDrawingAxis(e,i),this.lineIntersection(e,i,r,this.name)?("m","ov","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:s}):(o=this.p1[0]-(this.p0[0]-this.p1[0]),l=this.p0[0],h=this.p1[1],c=this.p0[1],e>Math.max(o,l)||e<Math.min(o,l)||s>Math.max(c,h)||s<Math.min(c,h)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:s}))},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if("s","egment",r=(i=this.stx).panels[this.panelName],a.Y$C(),n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.u4X(69),c=a.k5y(l,h),a.u4X(70),u=Math.abs(a.k5y(o,l,h,s)),d=this.getLineColor(),e.strokeStyle=d,("auto"==(p=this.fillColor)||t.isTransparent(p))&&(p=i.defaultColor),e.fillStyle=p,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),a.u4X(0),e.lineDashOffset=a.D45(32,"0")),i.canvasFont("stx_yaxis",e);for(var S=1;S<3;S++){a.T7s(42);var C=a.k5y(2,15,29);a.u4X(87);var w=a.k5y(12,28,14,16,13);a.T7s(75);var k=a.D45(20,11,7);a.u4X(8);var T=a.D45(0,5,8);g=Math.abs(this.p1[C]-this.p0[w])*Math.sqrt(k)*S/T,a.T7s(5);var D=a.D45(0,1);a.u4X(34);var _=a.k5y(1,3,3,0);a.T7s(88);var A=a.k5y(17,15,1019,4);m=this.p1[1]+g*(c?D:_)*(n.flipped?-1:A),f=this.pixelFromValue(r,this.p0[0],m,n),e.save(),e.beginPath(),a.T7s(12),e.scale(a.D45(1,u),1),a.T7s(10),e.arc(a.D45(o,u),h,Math.abs(f-h),0,Math.PI,!c),e.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&e.stroke(),e.globalAlpha=.1,e.fill(),e.restore(),e.globalAlpha=1,this.printLevels&&(e.fillStyle=d,e.textAlign="center",a.u4X(3),y=a.k5y(S,"/3"),e.fillText(y,o,Math.round(f-5)),e.fillStyle=p)}e.textAlign="left",v={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},i.plotLine(s,o,l,h,d,"segment",e,r,v),e.setLineDash&&e.setLineDash([]),this.highlighted&&("p","0",b="p0"==this.highlighted,x="p1"==this.highlighted,this.littleCircle(e,s,l,b),this.littleCircle(e,o,h,x))}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.field=t.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}}},!0),t.Drawing.speedline=function(){this.name="speedline",a.Y$C(),this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(e,i,r){var n,s,o,l;if(a.r8O(),n=this.p0,s=this.p1,!n||!s)return null;for(var h in o={0:n,1:s})if(this.pointIntersection(o[h][0],o[h][1],r))return a.u4X(3),this.highlighted=a.D45("p",h),{action:"drag",point:"p"+h};l=this.rays;for(var c=0;c<l.length;c++)if("r","a","y",this.lineIntersection(e,i,r,"ray",l[c][0],l[c][1],!0))return"m","ove",this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:this.valueOnDrawingAxis(e,i)};return null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D;if("stx_","yax","is",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),i.canvasFont("stx_yaxis",e),c=this.getLineColor(),e.strokeStyle=c,("auto"==(u=this.fillColor)||t.isTransparent(u))&&(u=i.defaultColor),e.fillStyle=u,d={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},m=["1","2/3","1/3","3/2","3"],a.T7s(29),f=[1,a.k5y("2",3,0),a.D45(1,3,a.u4X(12)),a.D45(3,2,a.T7s(12)),3],y=[],this.rays=[];for(var _=0;_<f.length;_++)(v=f[_])>1&&!this.extension||(b=this.pixelFromValue(r,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*v,n),v>1?(x=t.xIntersection({x0:s,x1:o,y0:l,y1:b},h),y.push(x)):(x=t.xIntersection({x0:o,x1:o,y0:l,y1:h},b),y.push(b)),S=v>1?x:o,C=v>1?h:b,this.confineToGrid||(S=r.left,o>s&&(S+=r.width),a.u4X(81),C=a.D45(l,b,s,o,l,S,s)),this.printLevels&&(1!=v||this.extension)&&(e.fillStyle=c,w=0,k=0,l>h?(k=-5,e.textBaseline="bottom"):(k=5,e.textBaseline="top"),s>o?(w=5,e.textAlign="right"):("l","eft",w=-5,e.textAlign="left"),v>1?e.fillText(m[_],x+(this.confineToGrid?0:w),h):e.fillText(m[_],o,b+(this.confineToGrid?0:k)),e.fillStyle=u),i.plotLine(s,S,l,C,c,"segment",e,r,d),1==v&&(p=S,g=C),this.rays.push([[s,l],[S,C]]),e.globalAlpha=.1,e.beginPath(),e.moveTo(S,C),e.lineTo(s,l),e.lineTo(p,g),e.fill(),e.globalAlpha=1);a.r8O(),e.textAlign="left",e.textBaseline="middle",this.confineToGrid&&(e.globalAlpha=.3,e.beginPath(),a.u4X(5),e.strokeRect(s,l,a.k5y(o,s),a.k5y(h,l)),e.moveTo(s,y[1]),e.lineTo(o,y[1]),e.moveTo(s,y[2]),e.lineTo(o,y[2]),this.extension&&(e.moveTo(y[3],l),e.lineTo(y[3],h),e.moveTo(y[4],l),e.lineTo(y[4],h)),e.stroke(),e.globalAlpha=1),this.highlighted&&("p","0",T="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(e,s,l,T),this.littleCircle(e,o,h,D))}}},!0),t.Drawing.gannfan=function(){this.name="gannfan",this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k;if("a","uto",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),i.canvasFont("stx_yaxis",e),c=this.getLineColor(),e.strokeStyle=c,("auto"==(u=this.fillColor)||t.isTransparent(u))&&(u=i.defaultColor),e.fillStyle=u,d={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},a.T7s(10),m=[1,2,a.D45("3",1),4,8,a.k5y("2",32,1,a.T7s(89)),a.D45(1,3,a.T7s(12)),a.D45(1,4,a.T7s(12)),a.D45(1,"8",1,a.T7s(90))],this.rays=[];for(var T=0;T<m.length;T++)f=m[T],a.u4X(91),y=a.k5y(s,o,s,f),a.u4X(92),v=a.k5y(l,f,h,l),b=r.left,o>s&&(b+=r.width),a.T7s(81),x=a.k5y(l,v,s,o,l,b,s),this.printLevels&&(e.fillStyle=c,S=0,C=0,l>h?("t","op",C=5,e.textBaseline="top"):(C=-5,e.textBaseline="bottom"),s>o?(S=5,e.textAlign="left"):(S=-5,e.textAlign="right"),f>1?(a.T7s(3),e.fillText(a.D45(f,"x1"),a.D45(y,S),h)):(a.u4X(52),e.fillText(a.D45(f,1,"1x"),o,a.D45(v,C,a.u4X(3)))),e.fillStyle=u),i.plotLine(s,b,l,x,c,"segment",e,r,d),this.rays.push([[s,l],[b,x]]),1==f&&(p=b,g=x),e.globalAlpha=.1,e.beginPath(),e.moveTo(b,x),e.lineTo(s,l),e.lineTo(p,g),e.fill(),e.globalAlpha=1;e.textAlign="left",e.textBaseline="middle",this.highlighted&&("p","0",w="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,s,l,w),this.littleCircle(e,o,h,k))}}},!0),t.Drawing.timecycle=function(){a.r8O(),this.name="timecycle",this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(e,i,r){var n,s,o,l;if("s","e","gment",n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.u4X(3),this.highlighted=a.k5y("p",h),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if("segm","ent","a","ut","o",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){for(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=0,e.textBaseline="middle",i.canvasFont("stx_yaxis",e),20,u=this.p1[0]-this.p0[0],e.textAlign="center",d=s,p=n.top,g=n.bottom,m=this.getLineColor(),("auto"==(f=this.fillColor)||t.isTransparent(f))&&(f=i.defaultColor),this.printLevels&&(a.T7s(5),g-=a.D45(20,7)),y={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},v=[],e.save(),e.fillStyle=f,e.globalAlpha=.05;d=i.pixelFromTick(this.p0[0]+c*u,r.chart),c++,!(s<o&&d>r.left+r.width||s>o&&d<r.left)&&(d<r.left||d>r.left+r.width||(e.beginPath(),e.moveTo(s,p),e.lineTo(d,p),e.lineTo(d,g),e.lineTo(s,g),e.fill(),v.push({c:c,x:d}),u)););e.globalAlpha=1,a.T7s(0),b=a.k5y(0,"0");for(var w=0;w<v.length;w++)i.plotLine(v[w].x,v[w].x,0,g,m,"segment",e,r,y),this.printLevels&&(e.fillStyle=m,i.chart.context.measureText(v[w].c).width+3<i.layout.candleWidth+b?(e.fillText(v[w].c,v[w].x,g+7),b=0):b+=i.layout.candleWidth);e.restore(),e.textAlign="left",i.plotLine(s,o,l,h,m,"segment",e,r,y),this.highlighted?("p","0",x="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,s,l,x),this.littleCircle(e,o,h,S)):(C=this.valueFromPixel(r.height/2,r,n),this.setPoint(0,this.p0[0],C,r.chart),this.setPoint(1,this.p1[0],C,r.chart))}}},!0),t.Drawing.regression=function(){a.Y$C(),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(e){var i;t.Drawing.copyConfig(this,e),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,a.r8O(),this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(e,t,i){var r,n;if(!(t<0))return this.copyConfig(),n=(r=this.stx).panels[this.panelName],this.penDown?(this.accidentalClick(t,i)||(a.r8O(),this.setPoint(1,t,i,n.chart),this.penDown=!1),!0):(this.setPoint(0,t,i,n.chart),this.isAllowed(r,this.field)?(this.penDown=!0,!1):(r.undo(),!0))},getYValue:function(e){var i,r,n,s,o,l,h,c;if(r=(i=this.stx).chart.dataSet[e],n=i.chart.dataSet[e],!r)return null;if(s=i.panels[this.panelName],o=i.getYAxisByField(s,this.field)||s.yAxis,i.charts[s.name]&&s.chart.transformFunc&&o==s.yAxis&&(n=r.transform),!n)return null;if(a.r8O(),l=null,h=null,c=i.defaultPlotField||"Close",this.field){if(!(h=t.existsInObjectChain(n,this.field)))return null;l=h=h.obj[h.member],r!=n&&(l=(l=t.existsInObjectChain(r,this.field)).obj[l.member]),"object"==typeof h&&(h=h[c],l=l[c])}else h=n[c],l=r[c];return{transformed:h,untransformed:l}},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N;if("seg","men","t",i=(t=this.stx).panels[this.panelName],r=t.getYAxisByField(i,this.field),i&&(!this.field||r)&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(n=t.pixelFromTick(this.p0[0],i.chart),s=t.pixelFromTick(this.p1[0],i.chart),n<i.left&&s<i.left||n>i.right&&s>i.right))){o=[],l=[],h=0,c=0,u=0,d=0,p=Math.min(this.p1[0],this.p0[0]),a.u4X(93);var H=a.k5y(19,16,17,26,7);g=Math.max(this.p1[0],this.p0[0])+H,a.u4X(5),m=a.D45(g,p);for(var V=p;V<g;V++)(f=this.getYValue(V))&&(o.push(f.transformed),l.push(f.untransformed));for(y=o.length,a.u4X(94),v=a.k5y(1,"2",y,y,0),a.T7s(0),b=Math.pow(v,a.k5y(64,"2")),a.u4X(95),x=a.k5y(1,v,3,y,"2"),V=0;V<y;V++)u+=y*o[V]-h,h+=o[V],d+=y*l[V]-c,c+=l[V];if(a.T7s(96),S=a.k5y(x,v,u,h,y,y,b),a.T7s(97),C=a.D45(y,h,S,v),a.T7s(96),w=a.D45(x,v,d,c,y,y,b),a.u4X(97),k=a.D45(y,c,S,v),this.p0[0]<this.p1[0]?(T=C,a.u4X(98),D=a.D45(m,C,S),this.p0[1]=k,a.u4X(98),this.p1[1]=a.D45(m,k,w)):(a.T7s(98),T=a.k5y(m,C,S),D=C,a.u4X(98),this.p0[1]=a.k5y(m,k,w),this.p1[1]=k),_=t.pixelFromTransformedValue(T,i,r),A=t.pixelFromTransformedValue(D,i,r),M=this.getLineColor(),F={pattern:this.pattern,lineWidth:this.lineWidth},t.plotLine(n,s,_,A,M,"segment",e,i,F),a.T7s(5),t.plotLine(n,n,a.D45(_,20),a.k5y(_,20,a.u4X(3)),M,"segment",e,i,F),a.u4X(5),t.plotLine(s,s,a.D45(A,20),a.D45(A,20,a.u4X(3)),M,"segment",e,i,F),this.active1||this.active2||this.active3){for(a.T7s(12),P=a.k5y(h,y),a.T7s(0),L=a.D45(96,"0"),V=0;V<y;V++)L+=Math.pow(o[V]-P,2);if(a.u4X(12),O={context:e,panel:i,points:{0:{x:n,v:T},1:{x:s,v:D}},stddev:Math.sqrt(a.D45(L,y)),yAxis:r},this.lines={},this.active1&&(this.renderStddev("1","p",O),this.renderStddev("1","n",O)),this.active2){1961278358,-995309573,E=2;for(var R=1;1961278358!==a.L3M(R.toString(),R.toString().length,23713);R++)this.renderStddev(7092,"2",O),this.renderStddev("e","n",O),E+=2;-995309573!==a.U3Y(E.toString(),E.toString().length,58979)&&(this.renderStddev(64206,"e",O),this.renderStddev(9049249,"n",O)),this.renderStddev("2","p",O),this.renderStddev("2","n",O)}this.active3&&(this.renderStddev("3","p",O),this.renderStddev("3","n",O))}this.highlighted?(I="p0"==this.highlighted,N="p1"==this.highlighted,this.littleCircle(e,n,_,I),this.littleCircle(e,s,A,N)):(this.pixelX=[n,s],this.pixelY=[_,A])}},renderStddev:function(e,t,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w;a.u4X(65),r=a.D45("stddev",e,t),a.T7s(3),n=a.k5y("color",e),a.T7s(3),s=a.k5y("pattern",e),a.T7s(3),o=a.k5y("lineWidth",e),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===t?-1*e:1*e,p=this.stx,g=i.panel,m=i.yAxis,f={name:r,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,g,m),y1:p.pixelFromTransformedValue(c+u*d,g,m),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[r]=f),y=i.context,v=l[0].x,b=l[1].x,p.plotLine(v,b,f.y0,f.y1,f.color,f.type,y,g,f.params),p.plotLine(v,v,f.y0-10,f.y0+10,f.color,f.type,y,g,f.params),p.plotLine(b,b,f.y1-10,f.y1+10,f.color,f.type,y,g,f.params),a.u4X(3),x=a.D45(e,"σ"),a.u4X(5);var k=a.D45(22,17);S=Math.max(v,b)+k,C=v<b?f.y1:f.y0,y.fillStyle=f.color,y.save(),y.textBaseline="middle",y.fillText(x,S,C),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=g.chart.left&&v<=g.chart.right||b>=g.chart.left&&b<=g.chart.right)&&(a.u4X(99),w=a.k5y(u,d,v<b?c:h),p.endClip(),p.createYAxisLabel(g,i.formatPrice(w,m),C,f.color,null,y,m),p.startClip(g.name))},intersected:function(e,i,r){var n,s,o,l,h,c,u;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(e,i))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],r,!0))return a.u4X(3),this.highlighted=a.k5y("p",d),{action:"drag",point:"p"+d};if(o=this,l=this.pixelX[0],h=this.pixelX[1],!(u=(c=function(t){var a,n;return a=[l,t.y0],n=[h,t.y1],o.lineIntersection(e,i,r,o.name,a,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return u?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},repositionIntersection:function(e,i){return!(!this.p0||!this.p1)&&(a.r8O(),!(this!=this.stx.repositioningDrawing||!this.highlighted)&&(!0===this.highlighted?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}:{action:"drag",point:this.highlighted}))},lineIntersection:function(e,i,r,n,s,o,l){var h;return l?(s||(s=this.p0),o||(o=this.p1),!(!s||!o)&&(this.stx,void 0!==r.cx0&&(h={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},t.boxIntersects(r.cx0,r.cy0,r.cx1,r.cy1,h.x0,h.y0,h.x1,h.y1)))):(a.u4X(3),console.log(a.D45(n," lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")),!1)},boxIntersection:function(e,t,i){return!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.color1=t.col1,this.color2=t.col2,this.color3=t.col3,this.active1=t.dev1,this.active2=t.dev2,this.active3=t.dev3,this.panelName=t.pnl,this.pattern=t.ptrn,this.pattern1=t.ptrn1,this.pattern2=t.ptrn2,this.pattern3=t.ptrn3,this.lineWidth=t.lw,this.lineWidth1=t.lw1,this.lineWidth2=t.lw2,this.lineWidth3=t.lw3,this.d0=t.d0,this.d1=t.d1,a.Y$C(),this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return a.Y$C(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.trendline.prototype.measure=function(){a.r8O()},t.Drawing.trendline.prototype.reconstruct=function(e,i){t.Drawing.segment.prototype.reconstruct.call(this,e,i),this.callout=new t.Drawing.callout,this.callout.reconstruct(e,i.callout)},t.Drawing.trendline.prototype.serialize=function(){var e;return a.r8O(),(e=t.Drawing.segment.prototype.serialize.call(this)).callout=this.callout.serialize(),e},t.Drawing.trendline.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k;if(" Ba","rs","%",")"," ",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(t.Drawing.segment.prototype.render.call(this,e),this.callout||(this.callout=new t.Drawing.callout,s=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(i,s)),this.callout.p0=t.clone(this.p0),o=i.pixelFromTick(this.p0[0],r.chart),l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p0[0],this.p0[1],n),c=this.pixelFromValue(r,this.p1[0],this.p1[1],n),isFinite(h)&&isFinite(c))){a.T7s(7),u=a.k5y(o,l,2),a.T7s(100),d=a.k5y(h,c,0,"2"),this.fontSize=t.stripPX(this.font&&this.font.size||13),a.T7s(5);a.D45(81,17);a.u4X(66);var T=a.k5y(414,1,6621);a.T7s(101);a.k5y(6465,16,6447,2158,7);a.u4X(30);var D=a.D45(15,114,2,67);p=1.2*this.callout.w+(this.callout.stemEntry[0]==(852.85==T||"c")?0:D),g=Math.sqrt(Math.pow(l-o,2)+Math.pow(c-h,2)),a.T7s(33);var _=a.k5y(1,8,1,6);a.T7s(87);var A=a.D45(6,3,7,18,55);m=p/(g||p)*(this.p1[1]<this.p0[_]?A:-1),a.u4X(102),f=a.k5y(d,m,c,u),a.T7s(103),y=a.D45(l,d,m,u),this.callout.p0[0]=i.tickFromPixel(f,r.chart),this.callout.p0[1]=this.valueFromPixel(y,r,n),this.callout.v0=this.callout.p0[1],this.callout.p1=t.clone(this.p0),this.callout.stx=i,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,a.T7s(5);var M=a.D45(15,14);v=this.p1[M]-this.p0[1],a.T7s(85);var F=a.k5y(2,4);a.T7s(104);var P=a.k5y(6,8,4,1);a.T7s(9);var L=a.k5y(16,16,12,19);this.callout.text=Number(v).toFixed(F)+(0===this.p0[1]?"":" ("+Number(100*v/this.p0[1]).toFixed(P)+"%) ")+Math.abs(this.p1["0"*L]-this.p0[0])+" Bars",b=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(S=i.pixelFromTick(b,r.chart),a.T7s(105),C=a.D45(l,c,o,o,S,h,h),x=this.valueFromPixel(C,r,n)||d):x=this.valueFromPixel(d,r,n),this.callout.stem={t:b,v:x},this.callout.renderText(),this.callout.render(e),this.highlighted&&(w="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,o,h,w),this.littleCircle(e,l,c,k))}},t.Drawing.trendline.prototype.lineIntersection=function(e,i,a,r){return t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment")},t.Drawing.trendline.prototype.intersected=function(e,i,a){var r,n;return this.p0&&this.p1?(r=this.callout.intersected(e,i,a),n=t.Drawing.segment.prototype.intersected.call(this,e,i,a),this.callout.highlighted=!(!r&&!n),n||(r?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}:null)):null},t.Drawing.average=function(){this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var e,i,r,n,s,o,l;a.r8O(),e=this.stx,this.p0&&this.p1&&(","," ",e.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),i=[],r="",this.active1&&i.push("1"),this.active2&&i.push("2"),this.active3&&i.push("3"),i.length&&(r="&ensp;"+i.join(", ")+" &sigma;"),n=(e.drawingContainer||document).querySelector(".mMeasure"),o=(s=e.controls.mSticky)&&s.querySelector(".mStickyInterior"),n&&(n.innerHTML+=r),o&&("C","l","o","se",(l=[]).push(t.capitalize(this.name)),l.push(this.field||e.defaultPlotField||"Close"),l.push(o.innerHTML+r),o.innerHTML=l.join("<br>")))},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if(t=this.stx,i=t.panels[this.panelName],r=t.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,this.p1&&!(this.p0[0]<0||this.p1[0]<0||(n=t.pixelFromTick(this.p0[0],i.chart),s=t.pixelFromTick(this.p1[0],i.chart),n<i.left&&s<i.left||n>i.right&&s>i.right)))){for(o=Math.min(this.p1[0],this.p0[0]),l=Math.max(this.p1[0],this.p0[0])+1,h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(p=c.length){if(a.u4X(12),g=a.D45(h,p),m=t.pixelFromTransformedValue(g,i,r),f=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},t.plotLine(n,s,m,m,f,"segment",e,i,y),a.u4X(5),t.plotLine(n,n,a.k5y(m,20),a.D45("20",4,m,a.u4X(106)),f,"segment",e,i,y),a.u4X(5),t.plotLine(s,s,a.D45(m,20),a.k5y(m,20,a.T7s(3)),f,"segment",e,i,y),!this.axisLabel||this.highlighted||this.penDown||(n>=i.chart.left&&n<=i.chart.right||s>=i.chart.left&&s<=i.chart.right)&&(t.endClip(),t.createYAxisLabel(i,w(g,r),m,f,null,e,r),t.startClip(i.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-g,2);a.u4X(12),b=Math.sqrt(a.D45(v,p)),x={context:e,formatPrice:w,panel:i,points:{0:{x:n,v:g},1:{x:s,v:g}},stddev:b,yAxis:r},this.lines={},this.active1&&(this.renderStddev("1","p",x),this.renderStddev("1","n",x)),this.active2&&(this.renderStddev("2","p",x),this.renderStddev("2","n",x)),this.active3&&(this.renderStddev("3","p",x),this.renderStddev("3","n",x))}this.highlighted?(S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,n,m,S),this.littleCircle(e,s,m,C)):(this.pixelX=[n,s],this.pixelY=[m,m])}}function w(e,a){return e=a&&a.priceFormatter?a.priceFormatter(t,i,e):t.formatYAxisPrice(e,i,null,a)}},reconstruct:function(e,i){this.axisLabel=i.al,t.Drawing.regression.prototype.reconstruct.call(this,e,i)},serialize:function(){var e;return(e=t.Drawing.regression.prototype.serialize.call(this)).al=this.axisLabel,e}},!0),t.Drawing.quadrant=function(){a.Y$C(),this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){var e;e=this.stx.currentVectorParameters,this.color=e.currentColor,this.fillColor=e.fillColor,this.lineWidth=e.lineWidth,this.pattern=e.pattern},$controls:[],render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if("s","eg","men","t","s","egm","ent","s","eg","m","ent",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1&&(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),!(s<r.left&&o<r.left||s>r.right&&o>r.right))){l=null,h=null;for(var w=Math.max(0,Math.min(this.p1[0],this.p0[0]));w<=Math.min(i.chart.dataSet.length-1,Math.max(this.p1[0],this.p0[0]));w++)null!==(c=this.getYValue(w))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));u=i.pixelFromTransformedValue(l,r,n),a.T7s(107),d=i.pixelFromTransformedValue(a.k5y(h,l,3,4),r,n),a.T7s(107),p=i.pixelFromTransformedValue(a.D45(h,l,2,3),r,n),a.T7s(7),g=i.pixelFromTransformedValue(a.D45(l,h,2),r,n),a.u4X(108),m=i.pixelFromTransformedValue(a.k5y(l,2,3,h),r,n),a.u4X(109),f=i.pixelFromTransformedValue(a.D45(l,"3",4,h,0),r,n),y=i.pixelFromTransformedValue(h,r,n),this.p0[1]=0,a.T7s(13),this.p1[a.D45(32,"1")]=!1,v=this.getLineColor(),("auto"==(b=this.fillColor)||t.isTransparent(b))&&(b=i.defaultColor),e.fillStyle=b,x={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(s,o,u,u,v,"segment",e,r,x),i.plotLine(s,o,y,y,v,"segment",e,r,x),a.r8O(),"quadrant"==this.name?("segme","nt",i.plotLine(s,o,d,d,v,"segment",e,r,x),i.plotLine(s,o,f,f,v,"segment",e,r,x)):"tirone"==this.name&&(i.plotLine(s,o,p,p,v,"segment",e,r,x),i.plotLine(s,o,m,m,v,"segment",e,r,x)),i.plotLine(s,s,u,y,v,"segment",e,r,x),i.plotLine(o,o,u,y,v,"segment",e,r,x),i.plotLine(s,o,g,g,v,"segment",e,r,t.extend(x,{opacity:"tirone"==this.name?.2:1})),e.globalAlpha=.1,e.beginPath(),a.T7s(5),e.fillRect(s,u,a.D45(o,s),a.k5y(y,u)),"quadrant"==this.name?(a.u4X(5),e.fillRect(s,d,a.k5y(o,s),a.D45(f,d))):"tirone"==this.name&&(a.T7s(5),e.fillRect(s,p,a.D45(o,s),a.k5y(m,p))),a.T7s(44),e.globalAlpha=a.k5y("1",1),this.highlighted?("p","1","p","0",S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,s,g,S),this.littleCircle(e,o,g,C)):(this.pixelX=[s,o],this.pixelY=[u,y,g],"quadrant"===this.name&&this.pixelY.push(d,f),"tirone"===this.name&&this.pixelY.push(p,m))}},intersected:function(e,i,r){var n,s,{pixelX:o,pixelY:l}=this;if(a.r8O(),!o||!l)return null;if(n=this.repositionIntersection(e,i))return n;for(var h=0;h<2;h++)if(this.pointIntersection(o[h],l[2],r,!0))return"dra","g",a.T7s(3),this.highlighted=a.k5y("p",h),{action:"drag",point:"p"+h};return s=[],o.forEach((e=>{a.Y$C(),s.push({p0:[e,l[0]],p1:[e,l[1]]})})),l.forEach((e=>{var t;t=2;for(var i=1;-762627520!==a.L3M(i.toString(),i.toString().length,11763);i++)s.push({p0:[o[1],e],p1:[o[6],e]}),t+=2;a.Y$C(),-462615059!==a.U3Y(t.toString(),t.toString().length,7074)&&s.push({p0:[o[1],e],p1:[o[6],e]}),s.push({p0:[o[0],e],p1:[o[1],e]})})),s.some((({p0:t,p1:n})=>(a.r8O(),this.lineIntersection(e,i,r,this.name,t,n,!0))))?("mo","ve",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:this.valueOnDrawingAxis(e,i)}):null},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return a.r8O(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.volumeprofile=function(){this.name="volumeprofile"},t.inheritsFrom(t.Drawing.volumeprofile,t.Drawing.regression),t.extend(t.Drawing.volumeprofile.prototype,{configs:["color","fillColor","lineWidth","pattern","parameters"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,a.r8O(),this.pattern=this.stx.currentVectorParameters.pattern,this.priceBuckets=this.stx.currentVectorParameters.volumeProfile.priceBuckets},$controls:[],getYValue:null,isAllowed:function(e,t){return"o","b",a.Y$C(),"je","ct",!t||"object"==typeof e.getFirstLastDataRecord(e.chart.dataSegment,t)[t]},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,{stx:q}=this,{dataSet:G}=q.chart;if(i=q.panels[this.panelName],r=q.getYAxisByField(i,this.field),i&&(!this.field||r)&&this.p1&&(r=r||i.yAxis,n=q.pixelFromTick(this.p0[0],i.chart),s=q.pixelFromTick(this.p1[0],i.chart),!(n<i.left&&s<i.left||n>i.right&&s>i.right))){var{flipped:Q}=r;o=null,l=null,h=Math.min(this.p1[0],this.p0[0]),c=Math.max(this.p1[0],this.p0[0]);for(var Z=h;Z<=c;Z++)if((u=G[Z])[this.field]&&(u=u[this.field]),u){var{High:K,Low:J}=u;(null===o||K>o)&&(o=K),(null===l||J<l)&&(l=J)}var{priceBuckets:ee}=this;a.u4X(29),d=a.k5y(o,ee,l),p=[],Q&&([o,l]=[l,o]),g=Q?-1:1;for(var te=l,ie=0;ie<=ee&&(p.push([te,0]),l!==o);te+=d*g,ie++);m=0;for(var ae=h;ae<=c;ae++)if(((f=G[ae])[this.field]||0===f[this.field])&&(f=f[this.field]),f){var{High:re,Low:ne,Volume:se}=f;if(se||0===se){y=[],v=p[0][0],b=null;for(var oe=1;oe<p.length;oe++)b=p[oe][0],(ne>=v&&ne<=b||re>=v&&re<=b||ne<v&&re>b)&&y.push(oe),v=b;if(y.length){x=se/y.length;for(var le=0;le<y.length;le++)(S=p[y[le]][1]+=x)>m&&(m=S)}}}(C=0===m&&p.length>1)&&q.displayErrorAsWatermark("chart",q.translateIf("Not enough data to render the Volume Profile")),w=e=>{a.u4X(110);var t=a.k5y(17,20,330,0,11);return Math.round(e)+"0.5"*t},k=(c-h)*q.layout.candleWidth,a.T7s(111);var he=a.k5y(13,15,0,4,7);T=w(q.pixelFromTick(h))-"1"*he,a.T7s(3),D=w(a.D45(T,k)),a.T7s(91),_=this.pixelFromValue(i,h,a.D45(l,o,l,2),r),A=T;var[ce]=p[0];M=this.getLineColor();var{fillColor:ue}=this;("auto"===ue||t.isTransparent(ue))&&(ue=q.defaultColor),e.fillStyle=ue,F={pattern:this.pattern,lineWidth:this.lineWidth},P=0,L=0,O=(e,t)=>[P,L]=[e,t],E=(t,r,n)=>{a.Y$C(),n||q.plotLine(P,t,L,r,M,"segment",e,i,F),[P,L]=[t,r]},(this.highlighted||C)&&("s","egm","ent",q.plotLine(T,D,_,_,q.defaultColor,"segment",e,i,Object.assign({},F,{opacity:.3})));for(var de=1;de<p.length;de++){var[pe,ge]=p[de];ge?(a.u4X(112),I=a.k5y(m,ge,k),a.T7s(3),N=w(a.k5y(T,I)),H=w(this.pixelFromValue(i,h,pe,r)),V=w(this.pixelFromValue(i,h,ce,r)),R=Math.max(H,r.top),Y=Math.min(V,r.bottom),a.u4X(113),z=a.k5y(R,H),a.T7s(113),B=a.D45(Y,V),R<=r.bottom&&Y>=r.top&&(this.highlighted||(e.globalAlpha=.3),O(T,Y),E(T,R),E(N,R,z),E(N,Y),N>A&&E(A,Y,B),e.globalAlpha=.2,a.u4X(5),e.fillRect(T,R,a.k5y(N,T),a.k5y(Y,R)),e.globalAlpha=1),A=N):A=T,ce=pe}this.highlighted&&(j="p0"===this.highlighted,$="p1"===this.highlighted,W=(X=this.p0[0]>this.p1[0])?$:j,U=X?j:$,this.littleCircle(e,T,_,W),this.littleCircle(e,D,_,U)),a.u4X(3),this.pixelX=[T,a.k5y(T,k)],this.pixelY=[this.pixelFromValue(i,h,o,r),this.pixelFromValue(i,h,l,r),_],this.p0[1]=0,this.p1[1]=!1}},intersected:function(e,i,r){var n,{p0:s,p1:o,stx:l}=this;if(!s||!o)return null;var[,,h]=this.pixelY||[];if(void 0!==h){if(n=this.repositionIntersection(e,i))return n;for(var[c,[u]]of[[0,s],[1,o]])if(this.pointIntersection(l.pixelFromTick(u),h,r,!0))return a.T7s(3),this.highlighted=a.D45("p",c),{action:"drag",point:"p"+c};return this.boxIntersection(e,i,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):(a.Y$C(),null)}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,a.Y$C(),this.priceBuckets=t.pb,this.adjust()},serialize:function(){return a.r8O(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,pb:this.priceBuckets}}},!0),t.Drawing.elliottwave=function(){this.name="elliottwave",a.u4X(0),this.lastPoint=a.D45(64,"0"),this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],a.r8O(),this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(e){e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(e,t){var i;this.stx=e,this.panelName=t.name,i=e.currentVectorParameters,Object.assign(this,i.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var e;a.Y$C(),e={};for(var i=0;i<this.points.length;i++)"t","z","o",a.u4X(3),e[a.k5y("d",i)]=this[a.D45("d",i)],a.u4X(3),e[a.D45("tzo",i)]=this[a.k5y("tzo",i)],a.u4X(3),e[a.D45("v",i)]=this[a.D45("v",i)];return e.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fld:this.field,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},e)},t.Drawing.elliottwave.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.field=i.fld,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(e.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(e){var i,r,n;if(i=this.stx.panels[this.panelName])for(var s=0;s<this.annotationPoints.length;s++)"tz","o",a.T7s(3),this[a.k5y("d",s)]=e[a.D45("d",s)],a.u4X(3),this[a.k5y("v",s)]=e[a.D45("v",s)],a.T7s(3),this[a.D45("tzo",s)]=e[a.D45("tzo",s)],r=t.strToDateTime(e["d"+s]),n=this.stx.tickFromDate(r,i.chart),this.points.push([n,e["v"+s]])},t.Drawing.elliottwave.prototype.calculateRadius=function(e){var t,i;this.getFontString(),e.font=this.fontString,t=0;for(var a=0;a<this.annotationPoints.length;a++)t<(i=e.measureText(this.annotationPoints[a]).width)&&(t=i);this.enclosedRadius=t},t.Drawing.elliottwave.prototype.check=function(e,t,i){var r,n;if(a.T7s(23),a.Y$C(),(r=this.points[a.k5y(i,1,"1")])&&e<=r[0])return!1;if(1===i&&2===this.points.length)return!0;if(a.T7s(3),(n=this.points[a.D45(i,1)])&&e>=n[0])return!1;if(!function(e){for(var t=2;t<e.length;t++)if(Math.sign(e[t][1]-e[t-1][1])==Math.sign(e[t-1][1]-e[t-2][1]))return!1;return!0}(this.points))return!1;return!0},t.Drawing.elliottwave.prototype.move=function(e,t,i){a.r8O(),this.copyConfig(),a.T7s(85);var r=a.k5y(16,17);this.points[this.lastPoint+r]=[t,i],this.render(e)},t.Drawing.elliottwave.prototype.adjust=function(){var e,i;if(e=this.stx.panels[this.panelName])for(var r=0;this.maxSegments+1>r;r++)a.T7s(3),i=this[a.D45("d",r)],this.setPoint(r,i,this["v"+r],e.chart),this.points[r][0]=this.stx.tickFromDate(t.strToDateTime(i),e.chart),a.u4X(3),this.points[r][1]=this[a.D45("v",r)]},t.Drawing.elliottwave.prototype.click=function(e,t,i){var r;if(r=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown){this.setPoint(0,t,i,r.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(e),a.T7s(9);var n=a.D45(16,0,8,7);return this.maxSegments=this.annotationPoints.length-n,this.trend=1,!1}return this.accidentalClick(t,i)?(this.penDown=!0,!1):!!(this.check(t,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,t,i,r.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)}},t.Drawing.elliottwave.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)){if(n=n||r.yAxis,s=this.annotationPoints,o=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),e.font=this.fontString,e.textAlign="center",e.textBaseline="middle",e.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(e),this.lastFontString=this.fontString,l=this.getLineColor(),e.fillStyle=e.strokeStyle=l,e.save(),e.setLineDash(o),h=this.dx,c=this.dy,u=this.points,d=this.pts,p=!this.showLines&&this.highlighted,g=u.length,this.penDown&&this.segment){"h","i","g","h",a.T7s(57);var F=a.D45(4,16,14,6);m=this.trend*(g%("2"*F)-.5)<0,this.drawDropZone(e,u[g-2][1],n[m?"high":"low"],u[g-2][0])}else if("string"==typeof this.highlighted&&i.repositioningDrawing){"l","o","w",f=parseInt(this.highlighted.substring(1,this.highlighted.length),10),a.u4X(4);var P=a.D45(10,12,0);m=this.trend*(f%P-.5)>0,a.u4X(114),y=u[a.k5y(0,"1",f)],a.T7s(3),v=u[a.k5y(f,1)],b=f>0?y[1]:v[1],v&&(b=Math[m?"max":"min"](b,v[1])),this.drawDropZone(e,b,n[m?"high":"low"],y?y[0]:null,v?v[0]:null)}for(var L=0;L<g;L++)x=u[L],S=i.pixelFromTick(x[0],r.chart),C=this.pixelFromValue(r,x[0],x[1],i.getYAxisByField(r,this.field)),d[L]=[S,C];if(L=0,this.showLines||p){for(e.beginPath(),p&&(e.globalAlpha=.3);L<d.length;L++)e.lineTo(d[L][0],d[L][1]);e.stroke(),L=0}for(e.restore();L<g;L++){w=L%2?h:-h,k=L%2?c:-c,w*=this.trend,k*=this.trend,n.flipped&&(a.T7s(10),w*=-a.k5y("1",1),k*=-1),T=d[L],a.T7s(13),D=T[a.D45(0,"2")]=T[0]+w,a.T7s(57);var O=a.k5y(9,20,0,2);_=T[3]=T[O]+k,A=this.enclosedRadius||8,M=s[L],"parentheses"===this.decoration&&(a.u4X(65),M=a.k5y("(",M,")")),e.fillText(M,D,_),"enclosed"===this.decoration&&(e.beginPath(),e.arc(D,_,A,0,2*Math.PI,!1),e.stroke()),this.highlighted&&(e.save(),this.littleCircle(e,this.pts[L][0],this.pts[L][1],this.highlighted==="p"+L),e.restore())}}},t.Drawing.elliottwave.prototype.reposition=function(e,t,i,r){var n,s,o,l,h;if("d","r","a","g",t){if(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"===t.action)for(var c=0;t.points.length>c;c++){l=t.points[c],this.setPoint(c,l[0]-s,l[1]-o,n.chart),a.T7s(115);var u=a.D45(2,6,1,15,12);this.points[c]=[l[0]-s,l["1"*u]-o]}"drag"===t.action&&(h=t.point,this.points[h]=[i,r],this.check(i,r,h)&&this.setPoint(h,i,r,n.chart)),this.render(e)}},t.Drawing.elliottwave.prototype.intersected=function(e,i,r){var n,s;if(a.Y$C(),!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if(s=this.points[o],this.pointIntersection(s[0],s[1],r))return a.u4X(3),this.highlighted=a.D45("p",o),{action:"drag",point:o,tick:e,value:this.valueOnDrawingAxis(e,i)};this.points[o+1]&&this.lineIntersection(e,i,r,"segment",s,this.points[o+1])&&(this.highlighted=!0,n={action:"move",points:t.clone(this.points),tick:e,value:this.valueOnDrawingAxis(e,i)})}return n},t.Drawing.elliottwave.prototype.measure=function(){var e,i,r,n,s;if(this.points.length>=2&&(e=this.points,this.stx.setMeasure(e[0][1],e[e.length-1][1],e[0][0],e[e.length-1][0],!0),r=(i=this.stx.controls.mSticky)&&i.querySelector(".mStickyInterior"))){(n=[]).push(t.capitalize("Elliott Wave")),-167812147,-1758096836,s=2;for(var o=1;-167812147!==a.U3Y(o.toString(),o.toString().length,52857);o++)this.getYValue&&n.push(this.field||this.stx.defaultPlotField||"Close"),n.push(r.innerHTML),r.innerHTML=n.join("<br>"),s+=2;-1758096836!==a.L3M(s.toString(),s.toString().length,87864)&&("<","b","r",">","C","l","os","e",this.getYValue&&n.push(this.field&&this.stx.defaultPlotField&&"Close"),n.push(r.innerHTML),r.innerHTML=n.join("<br>"))}},t.Drawing.printProjection=function(e,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if((n=i.arr).length>1){s=n[0][0],o=Math.round(.75*e.chart.maxTicks);for(var S=1;S<n.length;S++){for(a.T7s(5),l=n[a.D45(S,1)][0],h=n[S][0],c=t.strToDateTime(l),u=t.strToDateTime(h).getTime(),d=e.standardMarketIterator(c),p=0;c.getTime()<u;)c=d.next(),p+=1;if((g=t.strToDateTime(l).getTime())>t.strToDateTime(r[r.length-1].Date).getTime()){a.T7s(116);var C=a.D45(11,13,0,13,12);m=r.length-C,p+=1}else for(m=r.length-1;m>=0&&!(g<=t.strToDateTime(r[m].Date).getTime());m--);f={x0:0,x1:p,y0:r[m].Close,y1:n[S][1]},s=t.strToDateTime(l),d=e.standardMarketIterator(s),y=!1;for(var w=0;w<=p;w++)if(y?s=d.next():y=!0,!(s.getTime()<=r[r.length-1].DT.getTime())){(v=t.yIntersection(f,w))||(v=0),a.u4X(117);var k=a.D45(26e3,2e4,13,9990);if(0===(b=Math.round(v*k)/1e4)&&(b=n[S][1]),x={Date:t.yyyymmddhhmmssmmm(s),DT:s,Open:b,Close:b,High:b,Low:b,Volume:0,Adj_Close:b,Split_Close:b,projection:!0},"minute"==e.layout.interval&&o--<0)break;r[r.length]=x}}}}):console.error("drawingAdvanced feature requires first activating drawing feature.")},o=e=>{var t,i,a=we;t=2;for(var r=1;452466631!==a.L3M(r.toString(),r.toString().length,42860);r++)i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,t+=2;1625650045!==a.L3M(t.toString(),t.toString().length,52921)&&(i=""===+_CIQ?_CIQ:e.CIQ),i.computeEquationChart?(i.formatEquation=function(e){var t,i,r,n,s;t="",i=[],r="",n=!1;for(var o=1;o<e.length;o++)"["!=(s=e[o])||n?"]"==s&&n?(n=!1,""!==r&&(i.push(r),a.T7s(65),t+=a.D45("[",r,"]")),r=""):n?r+=s:"+"==s||"-"==s||"*"==s||"/"==s||":"==s||"%"==s||"("==s||")"==s?(""!==r&&isNaN(r)?(i.push(r),a.u4X(65),t+=a.k5y("[",r,"]")):t+=r,":"==s&&(s="/"),t+=s,r=""):" "!=s&&(r+=s):n=!0;return a.r8O(),""!==r&&isNaN(r)?(i.push(r),a.T7s(65),t+=a.D45("[",r,"]")):t+=r,{equation:t,symbols:i}},i.fetchEquationChart=function(e,t){var r,n,s,o,l,h,c;n=(r=i.formatEquation(e.symbol)).symbols,s=[],o=e.stx,a.u4X(44),l=-a.D45("1367451093",20),h=2;for(var u=1;-831917704!==a.U3Y(u.toString(),u.toString().length,63511);u++)e.stx=null,h+=2;a.L3M(h.toString(),h.toString().length,3798)!==l&&(a.T7s(13),e.stx=a.k5y(32,"1"));for(var d=0;d<n.length;d++)(c=i.shallowClone(e)).stx=o,c.symbol=n[d],c.symbolObject={symbol:n[d]},s.push(c);e.stx=o,o.quoteDriver.multiFetch(s,(function(n){var o,l,h,c,u;o={},e.loadMoreReplace=!0,l={charge:0};for(var d=0;d<n.length;d++){if((h=n[d]).dataCallback.error)return void t({error:h.dataCallback.error});o[h.params.symbol]=h.dataCallback.quotes,e.loadMoreReplace=e.loadMoreReplace&&h.params.loadMoreReplace,e.moreToLoad=e.moreToLoad||h.dataCallback.moreAvailable,(c=h.dataCallback.attribution)&&(c.charge&&(l.charge+=c.charge),l.source=c.source,void 0===l.exchange?l.exchange=c.exchange:l.exchange!=c.exchange&&(l.exchange=""))}if(a.r8O(),s.length||!e.loadMore&&!e.update)try{u=i.computeEquationChart(r.equation,o),t({quotes:u,moreAvailable:e.moreToLoad,attribution:l})}catch(e){var p;p={error:"Invalid equation: "+r.equation},e.name&&"NoException"==e.name&&(p.suppressAlert=!0),t(p)}}))}):console.error("equationsAdvanced feature requires first activating equations feature.")},l=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Y$C(),t.Marker?t.Marker.Performance||(t.ChartEngine.prototype.removeDOMMarker=function(e){console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),t.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},t.ChartEngine.prototype.drawMarkers=function(){i.r8O(),console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.ChartEngine.prototype.calculateMarkerStyles=function(e,a){i.Y$C(),console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),t.Marker.Performance.calculateMarkerStyles(this,e,a)},t.ChartEngine.prototype.drawCircleMarker=function(e,a,r){i.r8O(),console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),t.Marker.Performance.drawCircleMarker(e,a,r)},t.ChartEngine.prototype.drawSquareMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),t.Marker.Performance.drawSquareMarker(e,i,a)},t.ChartEngine.prototype.drawCalloutMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),t.Marker.Performance.drawCalloutMarker(e,i,a)},t.ChartEngine.prototype.drawMarkerStem=function(e,i,a){console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),t.Marker.Performance.drawMarkerStem(e,i,a)},t.ChartEngine.prototype.positionDOMMarkers=function(){console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.Marker.Performance=function(e){var a,r,n,s,o,l,h,c;this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},t.extend(this.params,e),a=this.template=document.createElement("TEMPLATE"),i.T7s(118),a.innerHTML=i.k5y('<div class="stx-marker-content">',"</div>",'<div class="stx-marker highlight">','<div class="stx-stem"></div>','<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>',"</div>","</div>",'<div class="stx-visual">'),(n=(r=this.template.content.cloneNode(!0)).querySelector(".stx-marker")).classList.add(e.type),n.classList.add(e.category),e.size&&n.classList.add(e.size),s=r.querySelector(".stx-visual"),o=r.querySelector(".stx-marker-expand"),l=r.querySelector("h4"),h=r.querySelector("p"),l.innerText=this.params.headline,h.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,i.Y$C(),this.deferAttach=!0,this.node=r.firstChild,this.node.params=this.params,this.visual=s,this.expand=o,"callout"===e.type&&(c=o.removeChild(l),r.querySelector(".stx-marker-content").insertBefore(c,o))},t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!1),t.Marker.Performance.consolidateExpanded=function(e){var t,a,r,n;if(t=e.markerHelper.highlighted,i.Y$C(),t.length){(a=e.activeMarker).consolidated||(a.consolidated=[]);for(var s=t.length-1;s>=0;s--)a!==t[s]&&(r=o(t[s]))&&(n="<consolidated><br><br>"+r.innerHTML.replace(/<consolidated>.*<\/consolidated>/g,"")+"</consolidated>",o(a).innerHTML+=n);a.stxNodeCreator.quickCache(a)}function o(e){var t;return(t=e.params.node.expand)?t.querySelector(".marker_content")||t:null}},t.Marker.Performance.reconstituteExpanded=function(e){e.markerHelper.highlighted.length&&e.activeMarker&&Array.from(e.activeMarker.params.node.expand.querySelectorAll("consolidated")).forEach((e=>e.remove()))},t.Marker.Performance.drawMarkers=function(e){var t,i,a,r,n,s;t=e.getMarkerArray("all"),i=e.chart;for(var o=0;o<t.length;o++)r=(a=t[o]).stxNodeCreator,n=i.dataSegment[0].tick,s=i.dataSegment[i.dataSegment.length-1].tick,n<=a.tick<=s&&r&&r.drawMarker&&r.drawMarker(a)},t.Marker.Performance.calculateMarkerStyles=function(e,t,a){var r,n,s,o,l;if((n=(r=e.container.ownerDocument).querySelector(".stx-marker-templates"))||("h","id","den",(n=document.createElement("DIV")).style.visibility="hidden",n.style.left="-1000px",r.body.append(n)),n.appendChild(t.node),s=getComputedStyle(t.stxNodeCreator.visual),!e.styles.stx_marker_stem){-183764548,852716217,o=2;for(var h=1;-183764548!==i.L3M(h.toString(),h.toString().length,83911);h++)l=getComputedStyle(t.node.querySelector(".stx-stem")),e.styles.stx_marker_stem=e.cloneStyle(l),i.u4X(13),o+=i.D45(64,"2");852716217!==i.U3Y(o.toString(),o.toString().length,81963)&&(l=getComputedStyle(t.node.querySelector("")),e.styles.stx_marker_stem=e.cloneStyle(l))}e.styles[a]=e.cloneStyle(s),n.removeChild(t.node)},t.Marker.Performance.drawCircleMarker=function(e,a,r){var n,s,o,l,h,c,u,d;s=(n=e.params.stx).chart.context,o=r.x,l=r.y,h=r.radius,c=r.label,u=r.color?r.color:a.backgroundColor,s.save(),s.beginPath(),s.setLineDash([]),s.lineWidth=1,s.fillStyle=u,s.strokeStyle=u,s.textAlign="center",i.u4X(119);var p=i.k5y(22,2,15,16);i.T7s(3);var g=i.D45(1,1);i.u4X(85);var m=i.k5y(11,12);if(s.font="normal bold "+Math.min(p,g*(h+m))+"px Roboto, Helvetica, sans-serif",s.arc(o,l,h,0,2*Math.PI,!1),s.fill(),s.stroke(),s.closePath(),c){s.fillStyle=t.chooseForegroundColor(s.fillStyle),-2044715141,1123089096,d=2;for(var f=1;-2044715141!==i.U3Y(f.toString(),f.toString().length,80978);f++)i.u4X(89),s.fillText(c,o,i.k5y("4",32,l)),d+=2;1123089096!==i.U3Y(d.toString(),d.toString().length,93125)&&(i.T7s(3),s.fillText(c,o,i.D45(l,1)))}(e.highlight||e.active)&&(t.isTransparent(u)&&(s.strokeStyle=n.defaultColor),s.beginPath(),i.T7s(86),s.arc(o,l,i.D45("4",h),0,2*Math.PI,!1),s.stroke(),s.closePath()),s.restore()},t.Marker.Performance.drawSquareMarker=function(e,a,r){var n,s,o,l,h,c,u;if(n=e.params.stx.chart.context,s=r.x,o=r.y,l=r.half,h=r.label,c=r.color?r.color:a.backgroundColor,i.u4X(10),u=i.k5y(l,2),n.setLineDash([]),n.lineWidth=1,n.fillStyle=c,n.strokeStyle=c,n.save(),n.beginPath(),"diamond"===e.node.params.type&&(n.translate(s,o),n.rotate(Math.PI/4),n.translate(-s,-o),l/=1.42,i.u4X(10),u=i.D45(l,2)),i.u4X(5),n.fillRect(i.D45(s,l),i.k5y(o,l),u,u),(e.highlight||e.active)&&(i.T7s(75),n.strokeRect(i.k5y(s,l,4),i.k5y(o,l,4,i.u4X(75)),i.k5y(u,8,i.T7s(3)),i.k5y(u,8,i.u4X(3)))),n.closePath(),n.restore(),h){"nor","m","al ","bold ","cen","t","er",n.save(),n.textAlign="center",i.T7s(8);var d=i.D45(0,7,9);n.font="normal bold "+Math.min(12,d*l)+"px Roboto, Helvetica, sans-serif",n.fillStyle=t.chooseForegroundColor(n.fillStyle),i.u4X(3),n.fillText(h,s,i.D45(o,1)),n.restore()}},t.Marker.Performance.drawCalloutMarker=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,g,m;r=e.params.stx.chart,i.r8O(),n=r.context,s=e.params,a.x,o=a.y,l=a.half,h=a.midWidth,c=a.headline,u=a.color?a.color:t.backgroundColor,d=2*l||25,p=Math.round(n.measureText(c).width),g=h?2*h:p+8,n.beginPath(),n.setLineDash([]),n.lineWidth=1,n.fillStyle=u,n.strokeStyle=u,n.font="normal bold 12px Roboto, Helvetica, sans-serif",n.rect(s.box.x0,s.box.y0,g,d),n.fill(),n.stroke(),n.closePath(),n.beginPath(),n.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",i.T7s(120),m=i.D45(g,p,2,20),n.rect(s.box.x0+m,o-l,p+40,22),n.fill(),n.stroke(),n.closePath(),n.fillStyle="black",n.fillText(c,s.box.x0+m+10,o)},t.Marker.Performance.drawMarkerStem=function(e,i,a){var r,n,s,o,l;r=e.params.stx.chart.context,n=a.x,a.y,r.beginPath(),r.strokeStyle=i.borderLeftColor,r.setLineDash([1,1]),s=t.stripPX(i.height),o=a.invert?e.params.box.y0:e.params.box.y1,l=a.invert?e.params.box.y0-s:e.params.box.y1+s,r.moveTo(n,o),r.lineTo(n,l),r.stroke(),r.closePath()},t.Marker.Performance.prototype.drawMarker=function(e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D;if("c","i","rcl",i.Y$C(),"e",a=e.params,(r=e.params.stx)&&(n=r.chart.dataSegment)&&n.length&&!(s=r.panels[e.params.panelName]).hidden&&(o=e.params.yAxis||s.yAxis,!(l=e.stxNodeCreator.params).hide)){h=l.type,c=l.category,u=l.headline,d=l.displayCategory,p=l.color,g=l.displayLabel,m=l.invert,f=l.size,"auto"===p&&(p=r.defaultColor),i.T7s(83),y=i.k5y("_","stx_marker_",h,c),f&&(i.u4X(3),y+=i.D45("_",f)),r.styles[y]||t.Marker.Performance.calculateMarkerStyles(r,e,y),v=e.style=r.styles[y],b=r.styles.stx_marker_stem,i.T7s(117);var _=i.D45(1100,100,11,9);i.T7s(4);var A=i.D45(8,2,8);x=parseInt(v.height,_)/A,i.u4X(93);var M=i.D45(140,7,2,145,20);i.u4X(21);var F=i.k5y(2,6,38,12);S=parseInt(v.width,M)/F,"diamond"===h&&(x*=1.42,S*=1.42),C=l.displayStem?parseInt(b.height,10)+parseInt(b.marginBottom,10):0,i.T7s(99),w=i.k5y(x,2,C),k=a.offset||0,T=r.pixelFromTick(e.tick),D=a.node.calculateYPosition({marker:e,panel:s,yAxis:o,height:w,half:x,offset:k,stemHeight:C,inverted:m,field:a.field,x:T}),(e.tick||0===e.tick)&&(a.box={x0:T-(S||x),y0:D-x,x1:T+(S||x),y1:D+x,midY:x,midX:S||x,stemHeight:C},c=d?c[0].toUpperCase():"",r.startClip(s.name),"circle"===h?t.Marker.Performance.drawCircleMarker(e,v,{x:T,y:D,radius:x,label:g||c,color:p}):"square"===h||"diamond"===h?t.Marker.Performance.drawSquareMarker(e,v,{x:T,y:D,half:x,label:g||c,color:p}):"callout"===h?t.Marker.Performance.drawCalloutMarker(e,v,{x:T,y:D,half:x,midWidth:S,headline:u,color:p}):(i.T7s(65),console.warn(i.k5y("Marker type: ",h," is unsupported with canvas markers!\nSupported Styles are Square, Diamond, Circle, and Callout."))),l.displayStem&&t.Marker.Performance.drawMarkerStem(e,b,{x:T,y:D,invert:m}),r.endClip(),e.attached&&this.positionPopUpNode(e))}},t.Marker.Performance.prototype.positionPopUpNode=function(e){var t,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if("px) tra",i.Y$C(),"nslateY","(","hi","dde","n",e.attached&&e.params.box){if(a=(t=e.params).stx,r=t.box,n=e.params.node.expand,s=a.chart.dataSet,o=a.chart.dataSegment,l=a.panels[t.panelName],e.tick){"D","a","t","e",c=[s[o[0]&&o[0].tick-1],s[o[0]&&o[0].tick-2]],u=a.getFirstLastDataRecord(c.concat(o),"Date"),i.T7s(57);var S=i.D45(0,9,13,22);i.T7s(85);var C=i.k5y(16,18);d=[s[o[o.length-1].tick+1],s[o[o.length-S].tick+C]],p=a.getFirstLastDataRecord(o.concat(d),"Date",!0),h=u.DT<=s[e.tick].DT&&s[e.tick].DT<=p.DT&&e.params.box.y0<=l.yAxis.bottom&&e.params.box.y1>=l.yAxis.top}else h=!1;if(e.highlight||e.active||(h=!1),n.style.visibility=h?"":"hidden",h){""!==n.style.height&&(n.style.height=""),g=n.rects,i.u4X(121);var w=i.k5y(0,8,4,19,610);if(m=g.height/w,y=e.node.params.infoOffset||0,f=e.node.params.infoOnLeft?r.x0-g.width-y<l.left?r.x1+y:r.x0-g.width-y:r.x0+g.width>l.right?r.x0-g.width-y:r.x1+y,f-=a.chart.left,v=t.avoidFlush?5:0,b=r.y0-m>=l.yAxis.top?r.y0+r.midY-m:l.yAxis.top+v,!t.avoidFlush&&r.y1+r.stemHeight===l.yAxis.bottom&&g.height>r.y1-r.y0+r.stemHeight&&(b=r.y1-g.height+r.stemHeight),r.y1+m>l.yAxis.bottom&&(b=l.yAxis.bottom-g.height-v),g.height>l.yAxis.height){b=l.yAxis.top+v,i.T7s(8);var k=i.D45(12,27,17);n.style.height=l.yAxis.height-k*v+"px"}b-=l.yAxis.top,x="translateX("+Math.floor(f)+"px) translateY("+Math.floor(b)+"px) translateZ(0)",n.style.transform=x,n.transform={translateX:f,translateY:b}}}},t.Marker.Performance.prototype.quickCache=function(e){var a,r,n;a=e.params.node.expand,r=e.style,n=t.stripPX(r.marginLeft)+t.stripPX(r.marginRight)+t.stripPX(r.borderRight)+t.stripPX(r.borderLeft),i.Y$C(),a.rects=a.getBoundingClientRect(),a.scrollBarWidth=a.rects.width-a.clientWidth-n},t.Marker.Performance.prototype.calculateYPosition=function(e){var t,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k;if("bott","om","abov","e_","c","andle",t=e.marker,a=e.panel,r=e.yAxis,n=e.height,s=e.half,o=e.offset,l=e.stemHeight,h=e.inverted,c=e.field,d=(u=t.params.stx).chart,p=u.chart.highLowBars,(g=d.dataSet[t.tick])&&(c&&(g=g[c]),g)){if("number"==typeof g&&((g={Close:g})[d.defaultPlotField]=g.Close,p=!1),m=u.getBarBounds(g,!!c),f=p?m[r.flipped?"low":"high"]:g[d.defaultPlotField],y=p?m[r.flipped?"high":"low"]:g[d.defaultPlotField],v=t.params.yPositioner,isNaN(f)&&(f=(r.high+r.low)/2),isNaN(y)){i.u4X(122);var T=i.k5y(20,8,4,0,5);y=(r.high+r.low)/T}if(x=0,"none"!=v){i.u4X(123);var D=i.D45(16,240,17,19,4);S=v.indexOf("_lane")>D,C=u.markerHelper.placementMap,i.T7s(62);var _=i.D45(12,6,19);i.u4X(4);i.D45(14,19,1345);i.T7s(5);var A=i.D45(7288,19);i.T7s(66);var M=i.D45(1897,1,16);i.u4X(1);var F=i.k5y(97489,1,92358);i.u4X(5);i.D45(3423,19);i.T7s(5);var P=i.D45(47845,38276);w=v+("665"*_==A?M:F>82.32?"|":P)+a.name,S&&void 0===C[w]&&(i.u4X(0),C[w]=i.D45(32,"2")),void 0===C[k=w+"-"+(S?t.params.label:e.x)]&&(C[k]=S?C[w]:0,i.u4X(3),C[w]+=i.k5y(n,2)),x=C[k],S||(i.u4X(124),C[k]+=i.D45("1",64,n))}switch(v){case"value":if(t.params.y||0===t.params.y){b=u.pixelFromPrice(t.params.y,a,r)-.5*n+s;break}case"above_candle":b=u.pixelFromPrice(f,a,r)-s-(!h&&l||o)-x;break;case"below_candle":b=u.pixelFromPrice(y,a,r)+s+(h&&l||o)+x;break;case"on_candle":i.T7s(43);var L=i.D45(12,12,3);b=u.pixelFromPrice((f+y)/L,a,r)-.5*n+s;break;case"top":case"top_lane":b=a.yAxis.top+s+(h&&l||o)+x;break;case"bottom":case"bottom_lane":b=a.yAxis.bottom-s-(!h&&l||o)-x}i.T7s(1);var O=i.k5y(24,12,0);i.u4X(5);var E=i.k5y(9,7);return Math.round(O*b)/E}},t.Marker.Performance.prototype.prepareForHolder=function(e){var t,a;return t=this.expand,i.r8O(),a=e.params.stx,t.classList.add(this.params.type),t.classList.add(this.params.category),a.markerHelper.domMarkers.push(e),t},t.Marker.Performance.prototype.addToHolder=function(e){var i,a;function r(t){a.activeMarker=e,a.activeMarker.click({cx:t.clientX,cy:t.clientY,panel:a.currentPanel}),t.stopPropagation()}i=this.expand,a=e.params.stx,t.Marker.Performance.reconstituteExpanded(a),t.Marker.Performance.consolidateExpanded(a),this.quickCache(e),i.clickClosure||(i.addEventListener("mousedown",r),i.addEventListener("touchstart",r,{passive:!1}),i.clickClosure=r)},t.Marker.Performance.prototype.remove=function(e){var t,a,r,n;(t=e.params.stx)&&t.markerHelper.domMarkers&&(-1!=(a=t.markerHelper.domMarkers.indexOf(e))&&(i.u4X(13),t.markerHelper.domMarkers.splice(a,i.D45(64,"1"))),e.attached&&(r=t.panels[e.params.panelName],(n=e.params.node.expand).parentNode===r.subholder&&r.subholder.removeChild(n),n.removeEventListener("click",n.clickClosure)))},t.Marker.Performance.prototype.click=function(e){var t,a,r,n,s,o;if(i.Y$C(),this.hasText){arguments.length>1&&(e={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var{cx:l,cy:h,marker:c,panel:u}=e;if(t=c.params.stx,c.attached){r=1066015995,n=413559663,s=2;for(var d=1;i.U3Y(d.toString(),d.toString().length,1984)!==r;d++)o=this.expand,s+=2;if(i.L3M(s.toString(),s.toString().length,1582)!==n&&(o=this.expand),o.rects&&o.transform&&o.rects.width-o.scrollBarWidth+o.transform.translateX<t.backOutX(l)&&t.backOutX(l)<o.rects.width+o.transform.translateX)return;this.remove(c)}else t.addToHolder(c),a=!0;c.attached=!c.attached,c.active=!c.active,a&&c.stxNodeCreator.positionPopUpNode(c)}}):console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=e=>{var t,i=we;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.OHLC.requestNew=function(e,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,n=i.colored,s=i.hollow,o=i.volume,l=i.histogram;for(var c=0;c<e.length;c++)switch("vol","ume","ca","nd","le",h=e[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":l=!0,a="candle";break;case"hlc":"b","ar",r=!0,a="bar";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},t.Renderer.OHLC.getChartParts=function(e,t){var i;return"border_c","olor_ev","en","bo","rde","r_col","or_down","candl","e","holl","o","w","fill_","color_","eve","n","ca","n","dle","stx_hollow_","c","andle_","down","bo","rder_col","or_","up","c","and","le","border_","color","_even","stx_hol","l","o","w_candle_even","b","order_co","lor_down","sha","dow","h","ol","lo","w","bo","rde","r_color_","up","h","ol","l","ow","fill_","co","lor_","up","stx_candle_","up","borde","r_colo","r_d","own","ca","nd","le","border_","color_up","stx_candl","e_shadow_up","stx_bar_","ev","e","n","s","t","x_b","ar_up","b","a","r","border_co","lor","ba","r","border_color_ev","en","stx","_histo","gram_e","ven","stx_hi","stogram_do","w","n","histog","ram","his","t","ogram",1,2,4,8,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:i=16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:e||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:t?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:t?i:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:t?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:i,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:i,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:17,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},t.Renderer.Bars=function(e){var t;this.construct(e),(t=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.Bars,t.Renderer.OHLC,!1),t.Renderer.HLC=function(e){var t;this.construct(e),(t=this.params).type="bar",t.hlc=!0,i.Y$C(),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.volume=t.hollow=t.histogram=!1},i.r8O(),t.inheritsFrom(t.Renderer.HLC,t.Renderer.Bars,!1),t.Renderer.Shading=function(e){this.construct(e),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],"rangechannel"==this.params.type&&(this.highLowBars=!0)},t.inheritsFrom(t.Renderer.Shading,t.Renderer.Lines,!1),t.Renderer.Shading.requestNew=function(e,i){var a,r,n;a=null,r=null;for(var s=0;s<e.length;s++)"ran","gechan","n","el","rangechannel"==(n=e[s])?a="rangechannel":"step"==n&&(r=!0);return null===a?null:new t.Renderer.Shading({params:t.extend(i,{type:a,step:r})})},t.Renderer.Shading.prototype.setShading=function(e){i.Y$C(),e.constructor!=Array&&(e=[e]),this.shading=e},t.Renderer.Shading.prototype.draw=function(){var e,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;for(e=this.stx,a=this.params,r=e.panels[a.panel].chart,"rangechannel"==a.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("L","o","w",this.beenSetup=!0,a.display=this.seriesParams[0].display,a.yAxis=this.seriesParams[0].yAxis,n=this.seriesParams[0].color||"auto","",(s=this.seriesParams[0].symbol)&&(i.T7s(3),i.k5y(s,".")),this.removeAllSeries(!0),o=a.name,e.addSeries(null,{symbol:s,loadData:!!s,field:"High",renderer:"Shading",name:o,style:"stx_line_up",display:a.display,shareYAxis:!0}),e.addSeries(null,{symbol:s,loadData:!!s,field:"Low",renderer:"Shading",name:o,style:"stx_line_down",display:a.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:n}))),this.shading||this.errTimeout||("W","arning: no shading scheme set.  Use myRenderer.setShading(scheme) to set.",console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),l=this,this.errTimeout=setTimeout((function(){i.Y$C(),l.errTimeout=null}),1e4)),h={},c=0;c<this.seriesParams.length;c++)u={},r.series[this.seriesParams[c].id]&&(u=t.clone(r.series[this.seriesParams[c].id].parameters)),h[this.seriesParams[c].id]={parameters:t.extend(t.extend(u,a),this.seriesParams[c]),yValueCache:this.caches[this.seriesParams[c].id]};for(c in e.drawSeries(r,h,a.yAxis,this),r.legend&&"rangechannel"==a.type&&(r.legend.colorMap||(r.legend.colorMap={}),d=a.display,p=[e.getCanvasColor("stx_line_up"),e.getCanvasColor("stx_line_down")],r.legend.colorMap[d]={color:p,display:d,isBase:this==e.mainSeriesRenderer}),h)this.caches[c]=h[c].yValueCache;for(c=0;c<this.shading.length;c++)"Cl","o","s","e","Cl","o","s","e","C","l","o","se","a","u","to",m=(g=this.shading[c]).color,"auto"==g.color&&(m=e.defaultColor),g.primary||(g.primary="Close"),!g.secondary&&this.seriesParams[0]&&(g.secondary=this.seriesParams[0].field),g.secondary&&(h[g.primary]||"Close"==g.primary)&&h[g.secondary]&&("Close"==g.primary&&a.yAxis&&a.yAxis!=r.yAxis||(f=b(g.primary).split("."),y=b(g.secondary).split("."),((v={topBand:f[0],topSubBand:f[1],topColor:g.greater||m||e.containerColor,topAxis:a.yAxis,bottomBand:y[0],bottomSubBand:y[1],bottomColor:g.lesser||m||e.containerColor,bottomAxis:"Close"==g.primary?null:a.yAxis,tension:a.tension||r.tension,opacity:.1,step:a.step}).topColor||v.bottomColor)&&(!a.highlight&&e.highlightedDraggable&&(v.opacity*=.3),t.fillIntersecting(e,a.panel,v))));function b(e){var t,a,r;return(t=h[e])?(a=t.parameters.field,r=t.parameters.subField,i.T7s(3),i.k5y(a,r?"."+r:"")):e}},t.Renderer.Histogram=function(e){var t;if("hi","st","o","gram",this.construct(e),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,i.r8O(),this.params.yAxis&&("num","b","er",this.params.bindToYAxis=!0,"number"==typeof this.params.yAxis.baseline)){1966530684,1443903702,t=2;for(var a=1;1966530684!==i.U3Y(a.toString(),a.toString().length,25082);a++)this.params.yAxis.baseline={value:this.params.yAxis.baseline},t+=2;1443903702!==i.U3Y(t.toString(),t.toString().length,39725)&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}),this.params.yAxis.baseline={value:this.params.yAxis.baseline}}},t.inheritsFrom(t.Renderer.Histogram,t.Renderer,!1),t.Renderer.Histogram.prototype.adjustYAxis=function(){var e;e=this.params.yAxis,i.Y$C(),e&&!e.baseline&&(e.min=0,e.highValue/=this.params.heightPercentage||1)},t.Renderer.Histogram.prototype.draw=function(){var e,a,r,n;(e=t.clone(this.params)).type=e.subtype,this.useSum="stacked"==e.subtype,i.r8O(),e.yAxis&&e.yAxis!=this.stx.chart.yAxis||(e.bindToYAxis=!0),this.stx.drawHistogram(e,this.seriesParams),(a=e.yAxis&&e.yAxis.baseline)&&a.color&&(r=this.stx.panels[this.params.panel],n=this.stx.pixelFromPrice(a.value,r,this.params.yAxis)-.5,this.stx.plotLine({x0:r.left,x1:r.right,y0:n,y1:n,color:a.color,type:"line",context:r.chart.context,confineToPanel:r,pattern:a.pattern||"solid",lineWidth:a.lineWidth||1,opacity:a.opacity||.8,globalCompositeOperation:"destination-over"}))},t.Renderer.Histogram.prototype.getBasis=function(e,t,a){var r,n,s;if(i.u4X(5),r=i.k5y("0",0),i.r8O(),e&&this.useSum)for(var o=0;o<this.seriesParams.length&&(n=this.seriesParams[o].field)!==t;o++)(s=e[n])&&"object"==typeof s&&(s=s[a||this.seriesParams[o].subField||this.stx.chart.defaultPlotField||"Close"]),s&&(r+=s);return r},t.Renderer.Heatmap=function(e){i.r8O(),this.construct(e),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},t.inheritsFrom(t.Renderer.Heatmap,t.Renderer,!1),t.Renderer.Heatmap.requestNew=function(e,i){var a;a=null;for(var r=0;r<e.length;r++)"heatmap"==e[r]&&(a="heatmap");return null===a?null:new t.Renderer.Heatmap({params:t.extend(i,{type:a})})},t.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(t.clone(this.params),this.seriesParams)},t.Renderer.Scatter=function(e){this.construct(e),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},t.inheritsFrom(t.Renderer.Scatter,t.Renderer.Lines,!1),t.Renderer.Scatter.requestNew=function(e,a){var r;i.Y$C(),r=null;for(var n=0;n<e.length;n++)"s","cat","te","r","scatterplot"==e[n]&&(r="scatter");return null===r?null:new t.Renderer.Scatter({params:t.extend(a,{type:r})})},t.Renderer.Scatter.prototype.drawIndividualSeries=function(e,t){var a,r;return"Error, Scatter rende","re","r require",i.r8O(),"s customChart.js",a=this.stx.panels[t.panel]||e.panel,r={colors:[]},this.stx.scatter?r=this.stx.scatter(a,t):console.warn("Error, Scatter renderer requires customChart.js"),r}},c=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateAccumulationDistribution=function(e,t){var i,a,r,n,s;i=t.chart.scrubbed;for(var o=t.startFrom;o<i.length;o++)if("Re","sult ",o){if((a=i[o]).futureTick)break;we.u4X(5),r=i[we.D45(o,1)],n=0,a.Close>r.Close?n=a.Close-Math.min(a.Low,r.Close):a.Close<r.Close&&(n=a.Close-Math.max(a.High,r.Close)),t.inputs["Use Volume"]&&(n*=a.Volume),(s=r["Result "+t.name])||(s=0),s+=n,isNaN(a.Close)||(a["Result "+t.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#F","F00","0","0","#00","FF00",t.Studies.calculateADX=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y;if(i.r8O(),t.Studies.calculateStudyATR(e,a),r=a.chart.scrubbed,n=a.days,(s=parseInt(a.inputs["Smoothing Period"],10))||0===s||(s=n),r.length<a.days+1)a.error=!0;else{i.u4X(5),o=i.D45("0",0),l=0,h=0,c=0;for(var v=Math.max(1,a.startFrom);v<r.length;v++){if("_sm","-","DM ",u=r[v],(d=Math.max(0,u.High-r[v-1].High))>(p=Math.max(0,r[v-1].Low-u.Low))?(i.T7s(13),p=i.D45(96,"0")):d=p>d?0:p=0,v<=n)l+=d,h+=p,o+=u["True Range "+a.name];else{"True"," Range ",i.T7s(103);var b=i.D45(0,89,8,11);i.u4X(43);var x=i.D45(6,1,7);l=r[v-b]["_sm+DM "+a.name]*(n-x)/n+d,i.T7s(8),h=r[v-i.D45(0,19,20)]["_sm-DM "+a.name]*(n-1)/n+p,i.u4X(8),o=r[v-i.D45(14,20,7)]["_smTR "+a.name]*(n-1)/n+u["True Range "+a.name]}if(u["_sm+DM "+a.name]=l,u["_sm-DM "+a.name]=h,u["_smTR "+a.name]=o,!(v<n)){if(i.T7s(112),g=i.D45(o,100,l),i.T7s(112),m=i.D45(o,100,h),i.T7s(125),f=i.k5y(33,120,3,20)*Math.abs(g-m)/(g+m),u["+DI "+a.name]=g,u["-DI "+a.name]=m,!1!==a.inputs.Series&&s)if(v<n+s-1){if(v==a.startFrom)for(var S=n;S<a.startFrom;S++){"+D","I"," ",i.T7s(8),c+=i.D45(107,13,6)*Math.abs(r[S]["+DI "+a.name]-r[S]["-DI "+a.name])/(r[S]["+DI "+a.name]+r[S]["-DI "+a.name])}c+=f}else if(v==n+s-1)"AD","X ",i.T7s(12),u["ADX "+a.name]=i.k5y(c,s);else{i.T7s(126);var C=i.D45(9,4,649,18,1);i.u4X(119);var w=i.D45(7,7,16,16);u["ADX "+a.name]=(r[v-C]["ADX "+a.name]*(s-w)+f)/s}if(a.inputs.Histogram){if("-D","I ","+","D","I"," ","+D","I"," ","_","his","t",y=a.name+"_hist",!u["+DI "+a.name]&&0!==u["+DI "+a.name])continue;if(!u["-DI "+a.name]&&0!==u["-DI "+a.name])continue;u[y]=u["+DI "+a.name]-u["-DI "+a.name],!1===a.inputs.Series&&(u["+DI "+a.name]=null,u["-DI "+a.name]=null),a.outputMap[y]=""}}}}},t.Studies.displayADX=function(e,a,r){var n,s,o,l,h,c,u;i.r8O(),n=a.underlay?.3:a.inputs.Series?.4:1,a.inputs.Series&&a.inputs.Shading&&(s="+DI "+a.name,o="-DI "+a.name,l=t.Studies.determineColor(a.outputs[a.outputMap[s]]),h=t.Studies.determineColor(a.outputs[a.outputMap[o]]),c=a.getYAxis(e),u={topBand:s,bottomBand:o,topColor:l,bottomColor:h,skipTransform:e.panels[a.panel].name!=a.chart.name,topAxis:c,bottomAxis:c,opacity:.3},!a.highlight&&e.highlightedDraggable&&(u.opacity*=.3),t.fillIntersecting(e,a.panel,u)),a.inputs.Histogram&&t.Studies.createHistogram(e,a,r,!1,n),!1!==a.inputs.Series?t.Studies.displaySeriesAsLine(e,a,r):a.inputs.Series||a.inputs.Histogram||e.displayErrorAsWatermark(a.panel,e.translateIf(a.name)+": "+e.translateIf("Nothing to display"))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:t.Studies.calculateADX,seriesFN:t.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("adx feature requires first activating studies feature.")},d=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","F","F0","000","#00","DD0","0","#F","F000","0","#","000","0F","F",t.Studies.calculateAlligator=function(e,a){var r,n,s,o,l;if("Lips Pe","riod",r={J:Number(a.inputs["Jaw Period"]),T:Number(a.inputs["Teeth Period"]),L:Number(a.inputs["Lips Period"])},(n=a.chart.scrubbed).length<Math.max(r.J,r.T,r.L)+1)a.error=!0;else{("Gator"===a.type||a.inputs["Show Lines"])&&("Lips"," Off","s","et","welles wi","lder",t.Studies.MA("welles wilder",r.J,"hl/2",a.inputs["Jaw Offset"],"Jaw",e,a),t.Studies.MA("welles wilder",r.T,"hl/2",a.inputs["Teeth Offset"],"Teeth",e,a),t.Studies.MA("welles wilder",r.L,"hl/2",a.inputs["Lips Offset"],"Lips",e,a));for(var h=a.startFrom;h<n.length;h++)if("Ga","tor",n[h]&&("Gator"==a.type&&("_","h","ist","2",s=n[h]["Jaw "+a.name],o=n[h]["Lips "+a.name],((l=n[h]["Teeth "+a.name])||0===l)&&("_h","ist1",(s||0===s)&&(i.T7s(5),n[h][a.name+"_hist1"]=Math.abs(i.D45(s,l))),(o||0===o)&&(i.T7s(5),n[h][a.name+"_hist2"]=-Math.abs(i.D45(l,o)))),a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""),a.inputs["Show Fractals"])){if(!(n[h-2]&&n[h-1]&&n[h]&&n[h+1]&&n[h+2]))continue;n[h-2].High&&n[h-1].High&&n[h].High&&n[h+1].High&&n[h+2].High&&n[h].High>n[h-1].High&&n[h].High>n[h-2].High&&n[h].High>n[h+1].High&&n[h].High>n[h+2].High&&(n[h]["Fractal High "+a.name]=1),n[h-2].Low&&n[h-1].Low&&n[h].Low&&n[h+1].Low&&n[h+2].Low&&n[h].Low<n[h-1].Low&&n[h].Low<n[h-2].Low&&n[h].Low<n[h+1].Low&&n[h].Low<n[h+2].Low&&(n[h]["Fractal Low "+a.name]=1)}}},t.Studies.displayAlligator=function(e,a,r){var n;function s(t,a){var s,l;i.Y$C(),l=e.chart.panel.yAxis.flipped,"high"==t?(n.fillStyle=e.defaultColor,n.textBaseline=l?"top":"bottom",s=e.pixelFromPrice(r[a].High),n.fillText(l?"▼":"▲",e.pixelFromBar(o,e.chart)-n.measureText("▲").width/2+1,l?s+5:s-5)):"low"==t&&(n.fillStyle=e.defaultColor,n.textBaseline=l?"bottom":"top",s=e.pixelFromPrice(r[a].Low),n.fillText(l?"▲":"▼",e.pixelFromBar(o,e.chart)-n.measureText("▼").width/2+1,l?s-5:s+5))}if(i.Y$C(),n=a.getContext(e),a.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,a,r),a.inputs["Show Fractals"]){e.startClip(),n.globalAlpha=a.underlay?.3:1,!a.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var o=2;o<r.length-2;o++)r[o]&&(r[o]["Fractal High "+a.name]&&s("high",o),r[o]["Fractal Low "+a.name]&&s("low",o));e.endClip()}},t.Studies.displayGator=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),(h=e.layout.candleWidth-2)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var g=0;g<r.length;g++)if(d=r[g],i.u4X(5),p=r[i.D45(g,1)],d)for(var m=1;m<=2;m++)"_","h","is","t","_hi","st",p||(p=e.getPreviousBar(e.chart,a.name+"_hist"+m,g)),p?Math.abs(p[a.name+"_hist"+m])<Math.abs(d[a.name+"_hist"+m])?s.fillStyle=c:Math.abs(p[a.name+"_hist"+m])>Math.abs(d[a.name+"_hist"+m])&&(s.fillStyle=u):s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(g,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"+m],n,o)-l));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}})):("alligator feature requ","ires firs","t activating studies feat","ure.",console.error("alligator feature requires first activating studies feature."))},p=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0"," to ","100",t.Studies.calculateAroon=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,g;if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(r=0,n=0,s=null,o=null,t.startFrom>0){"_st","ate"," ",i.u4X(5);var m=i.k5y(5,4);(l=a[t.startFrom-m]["_state "+t.name])&&(r=l[0],i.u4X(44),n=l[i.D45("1",0)],i.u4X(5),s=l[i.k5y("2",0)],o=l[3])}for(var f=t.startFrom;f<a.length&&("_s","tate"," ","A","roon ","Up ","Aroon ","Down ",!(c=a[f]).futureTick);f++){if(null===s&&(s=c.High),null===o&&(o=c.Low),(s=Math.max(s,c.High))==c.High)r=0;else if(++r>t.days)for(s=c.High,r=0,h=1;h<=t.days;h++)(s=Math.max(s,a[f-h].High))==a[f-h].High&&(r=h);if((o=Math.min(o,c.Low))==c.Low)n=0;else if(++n>t.days)for(o=c.Low,n=0,h=1;h<=t.days;h++)(o=Math.min(o,a[f-h].Low))==a[f-h].Low&&(n=h);u=!isNaN(c.High),d=!isNaN(c.Low),i.u4X(42),p=i.k5y(97,11,967)*(1-r/t.days),u&&(c["Aroon Up "+t.name]=p),i.u4X(3),g=i.D45(50,50)*(1-n/t.days),d&&(c["Aroon Down "+t.name]=g),u&&d&&(c["Aroon Oscillator "+t.name]=c["Aroon Up "+t.name]-c["Aroon Down "+t.name]),c["_state "+t.name]=[r,n,s,o]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")},g=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("s","quarew","av","e",t.Studies.calculateATRBands=function(e,i){var a,r,n,s=we;t.Studies.calculateStudyATR(e,i),(a=i.inputs.Field)&&"field"!=a||(a="Close"),s.r8O(),s.u4X(0),r=-s.D45(32,"2051834392"),n=2;for(var o=1;289363045!==s.U3Y(o.toString(),o.toString().length,73639);o++)t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,a,"ATR "+i.name),n+=2;s.L3M(n.toString(),n.toString().length,33139)!==r&&t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,a,""/i.name)},t.Studies.calculateSTARCBands=function(e,i){t.Studies.calculateStudyATR(e,i),t.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",e,i),we.r8O(),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},t.Studies.calculateATRStops=function(e,i){var a,r,n,s,o,l,h,c,u=we;if(u.Y$C(),"All"," Stops",a=i.chart.scrubbed){t.Studies.calculateStudyATR(e,i),r=i.inputs.HighLow;for(var d=Math.max(i.startFrom-1,1);d<a.length-1;d++)"B","uy S","t","ops ",n=a[d],u.u4X(5),s=a[u.k5y(d,1)],(o=n["Buy Stops "+i.name])||(o=n["Sell Stops "+i.name]),o||(o=0),n&&s&&(h=l=n.Close,c=n["ATR "+i.name]*i.inputs.Multiplier,n.Close>o&&s.Close>o?(r&&(l=n.High),u.T7s(5),h=Math.max(o,u.D45(l,c))):n.Close<=o&&s.Close<=o?(r&&(l=n.Low),u.u4X(3),h=Math.min(o,u.k5y(l,c))):n.Close>o?(r&&(l=n.High),u.u4X(5),h=u.D45(l,c)):n.Close<=o&&(r&&(l=n.Low),u.T7s(3),h=u.k5y(l,c)),l<=h?(u.u4X(3),a[u.D45(d,1)]["Buy Stops "+i.name]=h,u.T7s(127),delete a[u.k5y("1",64,d)]["Sell Stops "+i.name]):l>h&&(u.T7s(3),a[u.D45(d,1)]["Sell Stops "+i.name]=h,u.T7s(3),delete a[u.k5y(d,1)]["Buy Stops "+i.name]),u.T7s(86),a[u.k5y("1",d)]["All Stops "+i.name]=h);i.referenceOutput="All Stops",i.outputMap={},i.outputMap["All Stops "+i.name]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:t.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:t.Studies.displayPSAR2,calculateFN:t.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):("at","r feature r","equires first activating studies feature.",console.error("atr feature requires first activating studies feature."))},m=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.r8O(),t.Studies?(t.Studies.calculateAwesomeOscillator=function(e,a){var r;if(i.r8O(),(r=a.chart.scrubbed).length<33)a.error=!0;else{t.Studies.MA("simple",5,"hl/2",0,"_MA5",e,a),t.Studies.MA("simple",34,"hl/2",0,"_MA34",e,a);for(var n=Math.max(a.startFrom,33);n<r.length;n++)"_","MA3","4"," ",r[n]&&(r[n][a.name+"_hist"]=r[n]["_MA5 "+a.name]-r[n]["_MA34 "+a.name]);a.outputMap={},a.outputMap[a.name+"_hist"]=""}},t.Studies.displayAwesomeOscillator=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.u4X(3);var g=i.D45(0,2);(h=e.layout.candleWidth-g)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(i.u4X(5),s.globalAlpha*=i.D45("0.3",0));for(var m=0;m<r.length;m++)"_h","is","t",d=r[m],i.u4X(5),(p=r[i.D45(m,1)])||(p=e.getPreviousBar(e.chart,a.name+"_hist",m)),d&&(p&&(p[a.name+"_hist"]<d[a.name+"_hist"]?s.fillStyle=c:p[a.name+"_hist"]>d[a.name+"_hist"]&&(s.fillStyle=u)),d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(m,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:t.Studies.displayAwesomeOscillator,calculateFN:t.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("awesomeOscillator feature requires first activating studies feature.")},f=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateBalanceOfPower=function(e,i){var a,r;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)"_Rat","io ","_","Ratio ",(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):("balanceOfPower feature ","requ","ires first activating studies feature.",console.error("balanceOfPower feature requires first activating studies feature."))},y=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","m","a","Bollinger Bandwidt","h","a","u","to","m","a","f","ie","l","d","au","t","o",t.Studies.calculateBollinger=function(e,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",e,i),i.std=new t.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.calculateGenericEnvelope(e,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:t.Studies.calculateBollinger,seriesFN:t.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):("bollinge","r feature requires first activati","ng studies feature.",console.error("bollinger feature requires first activating studies feature."))},v=e=>{var t;we.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("aut","o","Commodity C","h","annel In","dex",t.Studies.calculateCCI=function(e,i){var a,r,n;if("h","lc/3",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.MA("simple",i.days,"hlc/3",0,"MA",e,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)if(r=a[s]){n=0;for(var o=0;o<i.days;o++)"hl","c/3",n+=Math.abs(a[s-o]["hlc/3"]-r["MA "+i.name]);n/=i.days,Math.abs(n)<1e-8?r["Result "+i.name]=0:r["Result "+i.name]=(r["hlc/3"]-r["MA "+i.name])/(.015*n)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):("cci feature req","uires fir","st activating s","tudies feature.",console.error("cci feature requires first activating studies feature."))},b=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Cen","te","r Of Grav","ity",t.Studies.calculateCenterOfGravity=function(e,t){var a,r,n,s,o;if("f","iel","d",(a=t.chart.scrubbed).length<t.days){995884059,-181514943,2;for(var l=1;995884059!==i.U3Y(l.toString(),l.toString().length,8964);l++)return void(t.error=!0);if(-181514943!==i.L3M(2..toString(),2..toString().length,42344))return void(t.error=!1)}(r=t.inputs.Field)&&"field"!=r||(r="Close");for(var h=Math.max(t.startFrom,t.days-1);h<a.length;h++){n=0,s=0;for(var c=0;c<t.days;c++)i.u4X(5),o=a[i.D45(h,c)][r],i.u4X(128),n-=i.D45(1,o,c),s+=o;s&&(i.T7s(12),a[h]["Result "+t.name]=i.k5y(n,s))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):console.error("centerOfGravity feature requires first activating studies feature.")},x=e=>{var t,i,a=we;if("u","ndefin","e","d",(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)t.Studies.calculateChaikinMoneyFlow=function(e,t){var i,r,n,s,o;i=2;for(var l=1;1838215298!==a.L3M(l.toString(),l.toString().length,34708);l++)r=t.chart.scrubbed,i+=2;if(-232068017!==a.L3M(i.toString(),i.toString().length,38592)&&(r=t.chart.scrubbed),r.length<t.days)t.error=!0;else{n=0,s=0,a.T7s(35);var h=a.k5y(1,13,2,14,19);(o=r[t.startFrom-h])&&("_su","mV ","_","su","mMF ",o["_sumMF "+t.name]&&(n=o["_sumMF "+t.name]),o["_sumV "+t.name]&&(s=o["_sumV "+t.name])),a.r8O();for(var c=t.startFrom;c<r.length;c++){if("_s","umMF ",r[c].High==r[c].Low)r[c]["_MFV "+t.name]=0;else{a.T7s(8);var u=a.k5y(0,14,16);r[c]["_MFV "+t.name]=r[c].Volume*(u*r[c].Close-r[c].High-r[c].Low)/(r[c].High-r[c].Low)}n+=r[c]["_MFV "+t.name],s+=r[c].Volume,c>t.days-1&&("Res","u","l","t ",n-=r[c-t.days]["_MFV "+t.name],(s-=r[c-t.days].Volume)&&(a.T7s(12),r[c]["Result "+t.name]=a.D45(n,s))),r[c]["_sumMF "+t.name]=n,r[c]["_sumV "+t.name]=s}}},t.Studies.calculateChaikinVolatility=function(e,i){var r,n,s;if("_","M","A",(r=i.chart.scrubbed).length<i.days)i.error=!0;else{for(n=i.startFrom;n<r.length&&("_Hi","gh-Lo","w ",!r[n].futureTick);n++)r[n]["_High-Low "+i.name]=r[n].High-r[n].Low;for(t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",e,i),(s=i.inputs["Rate Of Change"])||(s=i.days),n=Math.max(i.startFrom,s);n<r.length;n++)if(r[n-s]["_MA "+i.name]){if(r[n].futureTick)break;a.u4X(129);var o=a.k5y(81,9,10094,12,14);a.u4X(1);var l=a.D45(2,2,0);r[n]["Result "+i.name]=o*(r[n]["_MA "+i.name]/r[n-s]["_MA "+i.name]-l)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:t.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:t.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}});else{-349053425,-948072864,a.T7s(27),i=a.D45(0,"2");for(var r=1;-349053425!==a.L3M(r.toString(),r.toString().length,96175);r++)"chaikin featur","e requires first activating studies f","eature.",console.error("chaikin feature requires first activating studies feature."),i+=2;-948072864!==a.L3M(i.toString(),i.toString().length,78813)&&console.error("")}},S=e=>{var t,i,a,r=we;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,r.r8O(),t.Studies){"au","to","au","to","Varia","ble",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable="Variable",t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable="Variable",t.Studies.calculateChandeForecast=function(e,i){var a,n,s;if("Clo","se","fi","e","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("time series",i.days,n,0,"MA",e,i);for(var o=Math.max(1,i.startFrom);o<a.length;o++){"ob","ject",(s=a[o][n])&&"object"==typeof s&&(s=s[i.subField]),r.T7s(26);var l=r.D45(6500,1100,6,1);r.u4X(121);var h=r.D45(3,3,10,15,361);a[o]["Result "+i.name]=l*(h-a[o]["MA "+i.name]/s)}}},t.Studies.calculateChandeMomentum=function(e,t){var i,a,n,s,o,l,h,c,u,d;for(var p in"f","i","e","ld",i=t.name,t.outputs)r.T7s(65),i=r.k5y(p," ",i);if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(n=t.inputs.Field)&&"field"!=n||(n="Close"),s=0,o=0,l=[];for(var g=t.startFrom-t.days+1;g<a.length;g++)"obje","c","t","o","bject",g<1||(h=a[g][n],r.u4X(5),c=a[r.k5y(g,1)][n],h&&"object"==typeof h&&(h=h.Close),c&&"object"==typeof c&&(c=c.Close),void 0!==c&&(r.T7s(5),u=r.k5y(h,c),l.push(u),s+=u,o+=Math.abs(u),l.length==t.days&&(r.u4X(112),a[g][i]=r.D45(o,100,s),s-=d=l.shift(),o-=Math.abs(d))))}},t.Studies.calculateMovingAverageVariable=function(e,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;a=2;for(var S=1;1027248520!==r.L3M(S.toString(),S.toString().length,99460);S++)i.inputs.Type,n=i.chart.scrubbed,a+=2;-81001697!==r.L3M(a.toString(),a.toString().length,52480)&&(i.inputs.Type,n=i.chart.scrubbed),i.inputs.Type,n=i.chart.scrubbed,r.T7s(130);var C=r.D45(1,4,2,4);r.u4X(131);var w=r.D45(7,47,5,11,1);for(var k in s=C/(i.days+w),o=null,l=i.name,i.outputs)r.T7s(65),l=r.k5y(k," ",l);for((h=i.inputs.Field)&&"field"!=h||(h="Close"),i.cmo=new t.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:h},i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(e,i.cmo),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),g=i.startFrom,m=c,u=i.startFrom-1;u>=0;u--)if((d=n[u][l])||0===d){if(null===o&&(o=d),m<=0)break;m--,g=u}for(null===o&&(o=g=0),f=[],u=g;u<n.length;u++)if((d=(y=n[u])[h])&&"object"==typeof d&&(d=d[i.subField]),v=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d){if(y["_CMO "+i.name]||0===y["_CMO "+i.name]){r.T7s(132);var T=r.D45(9,5,318,86,3);b=Math.abs(y["_CMO "+i.name])/T,r.T7s(133),o=x=r.k5y(s,s,o,1,b,d,b),u<i.days&&(x=null),v?v[l]=x:u+c>=n.length&&((p={})[l]=x,f.push(p))}}else v?v[l]=null:u+c>=n.length&&((p={})[l]=null,f.push(p));i.appendFutureTicks(e,f)},r.T7s(13),i=-r.k5y(0,"371369641"),-800264839,a=2;for(var n=1;r.L3M(n.toString(),n.toString().length,97947)!==i;n++)"Chand","e Mtm","a","uto","aut","o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"auto",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:75,Field:"auto"}},"Chande Mtm":{name:"auto",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:4},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:62,studyOverBoughtColor:"Chande Mtm",studyOverSoldValue:-58,studyOverSoldColor:"auto"}}}}),r.u4X(0),a+=r.D45(0,"2");-800264839!==r.U3Y(a.toString(),a.toString().length,67584)&&("a","ut","o","a","uto",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"auto",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:75,Field:"auto"}},"Chande Mtm":{name:"auto",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:4},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:62,studyOverBoughtColor:"Chande Mtm",studyOverSoldValue:-58,studyOverSoldColor:"auto"}}}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})}else console.error("chande feature requires first activating studies feature.")},we.Y$C(),C=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0.","1","0",".","1",t.Studies.calculateChoppiness=function(e,a){var r,n,s;if(t.Studies.calculateStudyATR(e,a),(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else for(var o=Math.max(a.startFrom,a.days);o<r.length;o++)if(n=r[o]){if(n.futureTick)break;if(s=c(a.days,o),n["Sum True Range "+a.name]){"Sum"," True Ra","nge ",i.u4X(58);var l=i.D45(18903,3,19,1e3);i.u4X(43);var h=i.k5y(15,1,16);n["Result "+a.name]=l*Math.log(n["Sum True Range "+a.name]/Math.max(1e-6,s[h]-s[0]))/Math.log(a.days)}else isNaN(n)||(n["Result "+a.name]=0)}function c(e,t){var a,n;i.T7s(84);var s=i.D45(195,18,19,10,5);i.r8O(),a=Number.MAX_VALUE*s,n=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(a=Math.max(a,r[o].High),n=Math.min(n,r[o].Low));return[n,a]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")},w=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?t.Studies.initPriceRelative?("S","PY","B","eta","#FF","0000","#","00D","D0","0","-1"," to 1",t.Studies.calculateCorrelationCoefficient=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f;if(a=t.chart.scrubbed,r=t.days,a.length<r+1)t.error=!0;else{if(i.r8O(),t.compare=t.inputs["Compare To"],t.compare)t.compare=[t.compare];else for(var y in t.compare=[],t.outputs={},t.outputMap={},e.chart.series)if((n=e.chart.series[y]).parameters.color){t.compare.push(n.display),t.outputs["Result "+n.display]=n.parameters.color,i.u4X(66);i.D45(10,10,183);i.u4X(3);var v=i.D45(114,14);i.T7s(134);i.k5y(7028,2,521,19,11);i.u4X(42);var b=i.D45(959,3,1929);i.u4X(5);var x=i.D45(70932,65021);i.u4X(73);var S=i.D45(17,4086,13,18);i.T7s(119);var C=i.k5y(145280,36320,15,9091);i.u4X(135);i.k5y(20,20,277,3042,6);i.u4X(66);var w=i.k5y(820,2,4510);t.outputMap["Result "+n.display+(v>=b?"X":x<=S?C===w?"z":646.41:" ")+t.name]="Result "+n.display}if(t.compare.length)for(var k=0;k<t.compare.length;k++){s=0,o=0,l=0,h=0,c=0,u=t.compare[k],d=0;for(var T=t.startFrom-r;T<a.length;T++)if("_te","mp","s"," ","ob","j","ec","t","ob","j","ect",a[T]){if((p=a[T][u])&&"object"==typeof p&&(p=p.Close),p||0===p||("_","te","mp","s ",p=T>0&&a[T-1]&&a[T-1]["_temps "+t.name]&&a[T-1]["_temps "+t.name].c?a[T-1]["_temps "+t.name].c:0),p&&"object"==typeof p&&(p=p.Close),a[T]["_temps "+t.name]={},s+=a[T]["_temps "+t.name].b=a[T].Close,o+=a[T]["_temps "+t.name].c=p,l+=a[T]["_temps "+t.name].b2=Math.pow(a[T].Close,2),h+=a[T]["_temps "+t.name].c2=Math.pow(p,2),c+=a[T]["_temps "+t.name].bc=a[T].Close*p,d>=r){"_","t","emps"," ","_temps"," ",s-=a[T-r]["_temps "+t.name].b,o-=a[T-r]["_temps "+t.name].c,l-=a[T-r]["_temps "+t.name].b2,h-=a[T-r]["_temps "+t.name].c2,c-=a[T-r]["_temps "+t.name].bc,i.T7s(119);var D=i.k5y(5,5,6,7);g=l/r-Math.pow(s/r,D),i.u4X(74);var _=i.D45(15,3,34,0,14);m=h/r-Math.pow(o/r,_),i.T7s(9);var A=i.D45(19,18,12,23);f=(c/r-s*o/Math.pow(r,A))/Math.sqrt(g*m),i.u4X(14);i.k5y(7,20,779514,6586,17);i.T7s(136);i.D45(7245,4,805,3,161);i.u4X(6);var M=i.D45(20,8,4848,17);i.u4X(5);var F=i.k5y(5260,4208);a[T]["Result "+u+(460.7<M?" ":F)+t.name]=f}d++}}else t.error="Correlation Coefficient requires at least one comparison symbol"}},t.Studies.calculatePerformance=function(e,a){var r,n,s;if(i.Y$C(),"Comparis","on Symbol",r=a.chart.scrubbed,(n=a.inputs["Comparison Symbol"].toUpperCase())||(n=a.study.inputs["Comparison Symbol"]),a.days||(a.days=a.study.inputs.Period),r.length<a.days+1)a.error=!0;else{t.Studies.MA("ma",a.days,"Close",0,"_MA Base",e,a),t.Studies.MA("ma",a.days,n,0,"_MA Comp",e,a);for(var o=a.startFrom;o<r.length;o++)"_MA ","Base"," ",(s=r[o][n])&&(s.Close||0===s.Close)&&(s=s.Close),r[o]["Result "+a.name]=r[o].Close/s*(r[o]["_MA Comp "+a.name]/r[o]["_MA Base "+a.name])}},t.Studies.calculateBeta=function(e,a){var r,n,s,o;if("_","V","A","R","_VA","R","n"," ","_","CO","VAR","_COV","A","R","n ","m","a","_","MA ","Base",r=a.chart.scrubbed,(n=a.inputs["Comparison Symbol"].toUpperCase())||(n=a.study.inputs["Comparison Symbol"]),a.days||(a.days=a.study.inputs.Period),r.length<a.days+1)a.error=!0;else{for(var l=Math.max(a.startFrom,1);l<r.length;l++){"_BaseC","hange ",i.T7s(8);var h=i.D45(2,17,16);r[l]["_BaseChange "+a.name]=r[l].Close/r[l-1].Close-h,(s=r[l][n])&&(s.Close||0===s.Close)&&(s=s.Close),i.T7s(25),(o=r[i.D45("1",l)][n])&&(o.Close||0===o.Close)&&(o=o.Close),i.T7s(1),r[l]["_CompChange "+a.name]=i.k5y(s,o,1)}for(t.Studies.MA("ma",a.days,"_BaseChange "+a.name,0,"_MA Base",e,a),t.Studies.MA("ma",a.days,"_CompChange "+a.name,0,"_MA Comp",e,a),l=Math.max(a.startFrom,a.days);l<r.length;l++)"_CompCha","nge ",r[l]["_COVARn "+a.name]=(r[l]["_BaseChange "+a.name]-r[l]["_MA Base "+a.name])*(r[l]["_CompChange "+a.name]-r[l]["_MA Comp "+a.name]),r[l]["_VARn "+a.name]=Math.pow(r[l]["_CompChange "+a.name]-r[l]["_MA Comp "+a.name],2);for(t.Studies.MA("ma",a.days,"_COVARn "+a.name,0,"_COVAR",e,a),t.Studies.MA("ma",a.days,"_VARn "+a.name,0,"_VAR",e,a),l=Math.max(a.startFrom,2*a.days-1);l<r.length;l++)"_","COVAR ",r[l]["Result "+a.name]=r[l]["_COVAR "+a.name]/r[l]["_VAR "+a.name]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("comparisonStudies feature requires first activating priceRelative feature."):console.error("comparisonStudies feature requires first activating studies feature.")},k=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("fie","ld",t.Studies.calculateCoppock=function(e,i){var a,r,n,s,o,l,h,c=we;if("_S","u","m"," ","Long Ro","C","Cl","o","se","f","i","el","d",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=parseInt(i.inputs["Long RoC"],10))||(n=14),(s=parseInt(i.inputs["Short RoC"],10))||(s=11),(o=i.days)||(o=10),!(n<s))if(a.length<Math.max(s,n,o)+1)i.error=!0;else{for(var u=Math.max(i.startFrom,n);u<a.length;u++)if(c.T7s(5),l=a[c.k5y(u,s)][r],c.T7s(5),h=a[c.D45(u,n)][r],l&&h){c.T7s(137);var d=c.k5y(7,104,4,7);a[u]["_Sum "+i.name]=d*(a[u][r]/l+a[u][r]/h-2)}t.Studies.MA("weighted",o,"_Sum "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:t.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})):("coppock feature requires first activating studies ","feature.",console.error("coppock feature requires first activating studies feature."))},T=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#5F7C","B8","hig","h/lo","w","Darvas"," ","B","ox",t.Studies.calculateDarvas=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;r="A",r+="T",r+="H",n=a.chart.scrubbed,s=0,o=parseInt(a.inputs["ATH Lookback Period"],10),a.inputs["Volume Spike"]&&("s","i","mple",t.Studies.MA("simple",o,"Volume",0,"ADV",e,a)),i.T7s(3);var x=i.D45(85,15);for(l=parseFloat(a.inputs["Volume % of Avg"])/x,h="none",c={},u=null,d=null,p=null,g=parseFloat(a.inputs["Level Offset"]),m=!1,y={},["Darvas","Ghost","Profit","Loss",r,"ADV","Spike"].forEach((function(e){y[e]=e+" "+a.name})),f=a.startFrom-1;f>0;f--){if(!(v=n[f])[y.Darvas]&&!v[y.Ghost]){s=v[y.ATH]||0,d=v[y.Profit],p=v[y.Loss];break}for(var S in y)v[S]=null}for(;f<n.length;f++)if("Volu","me Spike","P","rice"," Min","imum",b=n[f]){if(parseFloat(a.inputs["Price Minimum"])<=n[s].Close){if("no","ne",!u||u.End&&f!=u.End+1||(n[f-1].Close>c.High?c={State:1,High:2*c.High-c.Low,Low:c.High,Start:f,End:2*c.End-c.Start+1}:u=null,u&&(b[y.Ghost]=t.clone(c),c.State=0,n[c.End]&&(n[c.End][y.Ghost]=t.clone(c)),u={Start:c.Start,End:c.End},d=c.High+g,(!p||p<c.Low-g)&&(p=c.Low-g))),b[y.Profit]=d,b[y.Loss]=p,(b.Close>=d||"high/low"==a.inputs["Exit Field"]&&b.High>=d)&&(d=null),"none"==h&&f==s+3&&!n[s+2][y.Darvas]&&!n[s+1][y.Darvas]&&!n[s][y.Darvas]&&n[s].High>b.High&&(h="high"),"high"==h&&(b.High>n[s].High?h="none":n[f-3].Low<n[f-2].Low&&n[f-3].Low<n[f-1].Low&&n[f-3].Low<b.Low&&("d","ar","v","as",c={State:1,High:n[s].High,Low:n[f-3].Low,Start:s},n[s][y.Darvas]=t.clone(c),h="darvas",u&&(u.End>f&&n[u.Start]&&(b[y.Ghost]=t.clone(n[u.Start][y.Ghost]),b[y.Ghost].End=f,n[u.End]&&delete n[u.End][y.Ghost]),b[y.Ghost].State=0,n[u.Start][y.Ghost].End=f,u=null),d=c.High+g,(!p||p<c.Low-g)&&(p=c.Low-g))),"darvas"==h&&("high/","l","o","w","E","xit"," Fie","ld","n","one","Exit F","ield",b.Close>c.High||"high/low"==a.inputs["Exit Field"]&&b.High>c.High?u={}:(b.Close<c.Low||"high/low"==a.inputs["Exit Field"]&&b.Low<c.Low)&&(h="none"),u?h="none":"none"==h&&(d=null,p=null),a.inputs["Ghost Boxes"]||(u=null),"none"==h)){for(var C=c.Start+1;C<f;C++)n[C][y.Darvas]=t.clone(c);c.State=0,c.End=f,b[y.Darvas]=t.clone(c),b[y.ATH]=s;continue}p&&(b.Close<c.Low||"high/low"==a.inputs["Exit Field"]&&b.Low<c.Low)&&("darvas"==h&&(h="none"),(b.Close<p||"high/low"==a.inputs["Exit Field"]&&b.Low<p)&&(d=null,p=null),u&&("Ghos","t e","nd:",u.End>f&&n[u.Start]&&(b[y.Ghost]=t.clone(n[u.Start][y.Ghost]),b[y.Ghost].End=f,n[u.End]&&delete n[u.End][y.Ghost]),b[y.Ghost].State=0,n[u.Start][y.Ghost].End=f,u=null))}if(b.High>=n[s].High&&(s=f),(f<3||b.High>=n[f-1].High&&b.High>=n[f-2].High&&b.High>=n[f-3].High)&&f-s>=o){s=f;for(var w=0;w<o&&!(f-w<0);w++)n[f-w].High>n[s].High&&(i.u4X(5),s=i.D45(f,w));m}a.inputs["Volume Spike"]&&f>o&&f==s&&b[y.ADV]*l<b.Volume&&(b[y.Spike]=1),b[y.ATH]=s}},t.Studies.displayDarvas=function(e,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L;(n=t.Studies.determineColor(a.outputs.Levels))&&"auto"!=n&&!t.isTransparent(n)||(n=e.defaultColor),(s=t.Studies.determineColor(a.outputs.Darvas))&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),(o=t.Studies.determineColor(a.outputs.Ghost))&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),l=e.panels[a.panel],h=a.getContext(e),i.u4X(138);var O=i.D45(9,0,8,20,19);if((p=e.layout.candleWidth-O)<2&&(p=1),e.startClip(a.panel),a.inputs["Stop Levels"]){for(h.setLineDash&&h.setLineDash([2,2]),h.lineWidth=2,h.strokeStyle=n,h.beginPath(),c=0;c<r.length;c++)"L","o","ss"," ","Lo","s","s ",u=r[c],i.T7s(25),g=r[i.k5y("1",c)],u&&(d=u["Loss "+a.name]?Math.floor(e.pixelFromPrice(u["Loss "+a.name],l)):null,m=g&&g["Loss "+a.name]?Math.floor(e.pixelFromPrice(g["Loss "+a.name],l)):null,d&&(u.candleWidth&&(p=Math.floor(Math.max(1,u.candleWidth))),f=Math.floor(e.pixelFromBar(c,l.chart)+p/2),y=Math.floor(e.pixelFromBar(c,l.chart)-p/2),m&&m>=d?h.lineTo(y,d):0===c?h.moveTo(e.chart.left,d):h.moveTo(y,d),h.lineTo(f,d)));h.stroke(),h.setLineDash&&h.setLineDash([]),i.u4X(44),h.lineWidth=i.k5y("1",0)}for(v=-10,x=0,i.Y$C(),C=-10,k=0,D=!1,_=!1,A=h.measureText("▲").width/2,M=0,c=0;c<r.length;c++)if("Ghos","t"," ",r[c]){if((r[c].Close||0===r[c].Close)&&(M=c),r[c]["Spike "+a.name]&&("b","ott","om",h.fillStyle=s,h.textBaseline="bottom",F=e.pixelFromPrice(r[c].High,e.chart.panel),h.fillText("▼",e.pixelFromBar(c)-A,F-5)),r[c].candleWidth&&(p=Math.floor(Math.max(1,r[c].candleWidth))),r[c]["Darvas "+a.name])if(1!=(u=r[c]["Darvas "+a.name]).State||D){if(0===u.State){i.T7s(66);var E=i.D45(6,6,1);x=Math.floor(e.pixelFromBar(c,l.chart)+p/E)-v,b=Math.floor(e.pixelFromPrice(u.High,l)),S=Math.floor(e.pixelFromPrice(u.Low,l))-b,h.strokeStyle=s,h.fillStyle=s,a.inputs["Stop Levels"]?(i.u4X(5),h.globalAlpha=i.k5y("0.3",0)):(h.strokeRect(v,b,x,S),h.globalAlpha=.2),h.fillRect(v,b,x,S),h.globalAlpha=1,D=!1}}else v=Math.floor(e.pixelFromBar(c,l.chart)-p/2),b=Math.floor(e.pixelFromPrice(u.High,l)),S=Math.floor(e.pixelFromPrice(u.Low,l))-b,D=!0;r[c]["Ghost "+a.name]&&a.inputs["Ghost Boxes"]&&(1!=(u=r[c]["Ghost "+a.name]).State||_?0===u.State&&(u.Start==u.End&&(C=Math.floor(e.pixelFromBar(c,l.chart)-p/2)),k=Math.floor(e.pixelFromBar(c,l.chart)+p/2)-C,w=Math.floor(e.pixelFromPrice(u.High,l)),T=Math.floor(e.pixelFromPrice(u.Low,l))-w,h.strokeStyle=o,h.fillStyle=o,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.strokeRect(C,w,k,T),h.globalAlpha=.2),h.fillRect(C,w,k,T),h.globalAlpha=1,_=!1):(C=Math.floor(e.pixelFromBar(c,l.chart)-p/2),w=Math.floor(e.pixelFromPrice(u.High,l)),k=Math.floor((u.End-u.Start+1)*e.layout.candleWidth+p/2),T=Math.floor(e.pixelFromPrice(u.Low,l))-w,_=!0))}if(D){x=Math.floor(e.pixelFromBar(M,l.chart)+p/2)-v,h.strokeStyle=s,h.fillStyle=s,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.beginPath(),i.u4X(99),h.moveTo(i.D45(2,x,v),b),h.lineTo(v,b),i.u4X(3),h.lineTo(v,i.D45(b,S)),i.T7s(99),h.lineTo(i.D45(2,x,v),i.k5y(b,S,i.u4X(3))),h.stroke(),h.globalAlpha=.2),-1758931124,485761774,P=2;for(var I=1;-1758931124!==i.U3Y(I.toString(),I.toString().length,6966);I++)i.u4X(10),h.fillRect(v,b,i.k5y(2,x),S),P+=2;485761774!==i.L3M(P.toString(),P.toString().length,9755)&&(i.u4X(98),h.fillRect(v,b,i.k5y(1,x,"6"),S)),h.globalAlpha=1}_&&("S","top ","L","evels",h.strokeStyle=o,h.fillStyle=o,a.inputs["Stop Levels"]?(i.T7s(5),h.globalAlpha=i.D45("0.3",0)):(h.strokeRect(C,w,k,T),h.globalAlpha=.2),h.fillRect(C,w,k,T),h.globalAlpha=1),(D||_)&&("Stop L","evel","s",a.inputs["Stop Levels"]&&(h.setLineDash&&h.setLineDash([2,2]),h.lineWidth=2,h.strokeStyle=n,L=Math.floor(e.pixelFromBar(M-1,l.chart)+p/2),d&&(h.beginPath(),h.moveTo(L,d),h.lineTo(D?v+2*x:C+k,d),h.stroke()),h.setLineDash&&h.setLineDash([]),h.lineWidth=1),D=!1,_=!1),e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):("darvasBox feature requires ","first activa","ting studies feature.",console.error("darvasBox feature requires first activating studies feature."))},D=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateDetrendedPrice=function(e,i){var a,r,n,s,o;if("Cl","o","s","e","fi","e","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.floor(i.days/2+1),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-n,"MA",e,i);for(var l=Math.max(i.days-n-1,i.startFrom-n);l<a.length-n;l++)"o","bject",l<0||((s=a[l][r])&&"object"==typeof s&&(s=s[i.subField]),o=a[l]["MA "+i.name],!s&&0!==s||!o&&0!==o||(we.u4X(5),a[l]["Result "+i.name]=we.D45(s,o)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:t.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("detrended feature requires first activating studies feature.")},_=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a",t.Studies.calculateDisparity=function(e,i){var a,r,n;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"_MA",e,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)if(a[s]&&(n=a[s]["_MA "+i.name])){we.u4X(5);var o=we.D45(19,18);a[s]["Result "+i.name]=100*(a[s][r]/n-o)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")},A=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Y$C(),t.Studies?("Ease ","of Mo","vement",t.Studies.calculateEaseOfMovement=function(e,a){var r,n,s,o,l,h;if("_E","O","M1 ","Mo","ving Av","erage Type",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{for(var c=Math.max(1,a.startFrom);c<r.length;c++){i.u4X(139);var u=i.D45(13,7,457,13,15);n=(r[c].High+r[c].Low)/u,i.T7s(85);var d=i.D45(18,19);i.T7s(140);var p=i.k5y(24,19,15,4,5);i.u4X(85);var g=i.D45(7,9);s=(r[c-d].High+r[c-p].Low)/g,i.T7s(5),o=i.D45(n,s),i.T7s(66);var m=i.k5y(100000002,3,66666666);l=r[c].Volume/m/(r[c].High-r[c].Low),i.u4X(12),h=i.k5y(o,l),isFinite(h)?r[c]["_EOM1 "+a.name]=h:r[c]["_EOM1 "+a.name]=NaN}t.Studies.MA(a.inputs["Moving Average Type"],a.days,"_EOM1 "+a.name,0,"Result",e,a)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:t.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},M=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Ehle","r Fishe","r Tra","nsform",t.Studies.calculateEhlerFisher=function(e,t){var i,a,r,n,s,o=we;if("_",o.Y$C(),"n ",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a=0,t.startFrom>1){o.T7s(125);var l=o.D45(4,7,9,18);a=i[t.startFrom-l]["_n "+t.name]}for(var h=t.startFrom;h<i.length&&("EF Tri","gger ",!(r=i[h]).futureTick);h++)if(h<t.days-1)"EF Tr","ig","ger ","E","F"," ",r["EF "+t.name]=r["EF Trigger "+t.name]=a;else{n=g(t.days,h),o.T7s(3);var c=o.k5y(59,5);o.T7s(141);var u=o.D45(4,13,1,11,8);o.u4X(87);var d=o.D45(5,9,2,13,3);(a=.33*("2">>c)*(((i[h].High+i[h].Low)/u-n[0])/Math.max(1e-6,n[d]-n[0])-.5)+.67*a)>0?a=Math.min(a,.9999):a<0&&(a=Math.max(a,-.9999)),s=h?i[h-1]["EF "+t.name]:0,o.T7s(5);var p=o.k5y(7,6);r["EF "+t.name]=.5*Math.log((p+a)/(1-a))+.5*s,r["EF Trigger "+t.name]=s,r["_n "+t.name]=a}}function g(e,t){var a,r,n;a=Number.MAX_VALUE,o.T7s(74);var s=o.k5y(5,5,7,4,2);r=Number.MAX_VALUE*s;for(var l=t-e+1;l<=t;l++){o.T7s(8);var h=o.k5y(0,9,11);n=(i[l].High+i[l].Low)/h,a=Math.min(a,n),r=Math.max(r,n)}for(var c=1;-462894389!==o.L3M(c.toString(),c.toString().length,85506);c++)return[a,r];if(1490492799!==o.U3Y(2..toString(),2..toString().length,70977))return[a,r]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")},F=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.r8O(),t.Studies?("#","5F7CB8","#DD3E","39","#","00","DD00",t.Studies.calculateElderImpulse=function(e,a){var r,n,s,o,l;r=a.chart.scrubbed,n=a.outputs.Bullish,s=a.outputs.Bearish,o=a.outputs.Neutral,t.Studies.MA("exponential",13,"Close",0,"_MA",e,a),i.T7s(60);var h=i.k5y(18,113730,10,107048);i.u4X(119);var c=i.k5y(478,1,7,4789);i.T7s(67);i.k5y(1036,12,6221,6216,18);i.T7s(142);i.D45(1073,1,12,8563,12);a.macd=new t.Studies.StudyDescriptor((h==c||"_")+a.name,"macd",a.panel),a.macd.chart=a.chart,a.macd.days=a.days,a.macd.startFrom=a.startFrom,a.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},a.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(e,a.macd);for(var u=a.startFrom;u<r.length;u++)"_","h","ist","_h","i","s","t","_","M","A"," ",l=0===u?o:r[u]["_MA "+a.name]>r[u-1]["_MA "+a.name]&&r[u]["_"+a.name+"_hist"]>r[u-1]["_"+a.name+"_hist"]?n:r[u]["_MA "+a.name]<r[u-1]["_MA "+a.name]&&r[u]["_"+a.name+"_hist"]<r[u-1]["_"+a.name+"_hist"]?s:o,r[u]["Result "+a.name]=l},t.Studies.calculateElderRay=function(e,a){var r;if("_E","M",i.Y$C(),"A","Clo","s","e","ex","p","o","nential",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{t.Studies.MA("exponential",a.days,"Close",0,"_EMA",e,a);for(var n=Math.max(a.startFrom,a.days-1);n<r.length;n++)"_","E","MA ","_","hist2","_EMA"," ",r[n][a.name+"_hist1"]=r[n].High-r[n]["_EMA "+a.name],r[n][a.name+"_hist2"]=r[n].Low-r[n]["_EMA "+a.name];a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""}},t.Studies.calculateElderForce=function(e,i){var a;if("R","es","ult","_E","F","1 ","exponentia","l",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var r=Math.max(1,i.startFrom);r<a.length;r++)a[r]["_EF1 "+i.name]=a[r].Volume*(a[r].Close-a[r-1].Close);t.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",e,i)}},t.Studies.initElderImpulse=function(e,a,r,n,s,o){var l;return l=t.Studies.initializeFN(e,a,r,n,s,o),s.calculateOnly||(e.chart.customChart={chartType:"colored_bar",colorFunction:function(e,t,i){var a;return(a=t["Result "+l.name])&&"object"==typeof a&&(a=a.color),a}},e.setMainSeriesRenderer()),i.r8O(),l},t.Studies.displayElderForce=function(e,a,r){var n,s,o,l;t.Studies.displaySeriesAsLine(e,a,r),n=t.Studies.determineColor(a.outputs.Result),s=e.panels[a.panel],o=a.getYAxis(e),l={skipTransform:s.name!=a.chart.name,panelName:a.panel,band:"Result "+a.name,threshold:0,color:n,yAxis:o},!a.highlight&&e.highlightedDraggable&&(l.opacity=.3),l.direction=1,t.preparePeakValleyFill(e,l),i.T7s(27),l.direction=-i.D45(0,"1"),t.preparePeakValleyFill(e,l)},t.Studies.displayElderRay=function(e,a,r){var n,s,o,l,h,c,u;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),i.T7s(13),l=e.pixelFromPrice(i.D45(0,"0"),n,o),i.T7s(73);var d=i.D45(16,0,8,22);(h=e.layout.candleWidth-d)<2&&(h=1),e.canvasColor("stx_histogram"),c=s.fillStyle,a.underlay||(s.globalAlpha=1),e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var p=0;p<r.length;p++)"_hi","st2","Elde","r Bear Power","_h","i","s","t1","Elder B","ull Powe","r",(u=r[p])&&(u.candleWidth&&(h=Math.floor(Math.max(1,u.candleWidth-2))),u[a.name+"_hist1"]>0&&g(p,0,"Elder Bull Power","_hist1"),u[a.name+"_hist2"]<0&&g(p,0,"Elder Bear Power","_hist2"),u[a.name+"_hist1"]<0&&g(p,.1,"Elder Bull Power","_hist1"),u[a.name+"_hist2"]>0&&g(p,.1,"Elder Bear Power","_hist2"));function g(r,c,d,p){s.fillStyle=t.Studies.determineColor(a.outputs[d]),i.Y$C(),s.fillRect(Math.floor(e.pixelFromBar(r,n.chart)-h/2+h*c),Math.floor(l),Math.floor(h*(1-2*c)),Math.floor(e.pixelFromPrice(u[a.name+p],n,o)-l))}e.endClip(),i.r8O(),s.fillStyle=c},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(e,t){e.chart.customChart=null,i.r8O(),e.setMainSeriesRenderer()}}})):console.error("elder feature requires first activating studies feature.")},P=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","uto","Fr","a","ctal Cha","os Bands","Fractal Chaos ","Oscillator",t.Studies.calculateFractalChaos=function(e,t){var i,a,r,n,s,o,l,h,c=we;c.r8O(),i=2;for(var u=1;436110258!==c.L3M(u.toString(),u.toString().length,45656);u++)a=t.chart.scrubbed,r=6,c.T7s(10),n=c.k5y("5",1),c.u4X(10),i+=c.D45("2",1);if(-1859944297!==c.U3Y(i.toString(),i.toString().length,19258)&&(a=t.chart.scrubbed,r=1,n=9),a=t.chart.scrubbed,c.T7s(10),r=c.D45("0",1),n=0,s=0,t.startFrom&&"Fractal Chaos Bands"==t.type){"Fr","actal"," Low"," ","Fractal High"," ",c.u4X(5);var d=c.k5y(12,11);r=a[t.startFrom-d]["Fractal High "+t.name],c.u4X(8);var p=c.D45(0,2,3);n=a[t.startFrom-p]["Fractal Low "+t.name]}for(var g=Math.max(4,t.startFrom);g<a.length&&!a[g].futureTick;g++){for(o=!isNaN(a[g].High),l=!isNaN(a[g].Low),(o||l)&&(a[g]["Result "+t.name]=0),s=0,h=0;h<=g&&a[g-h]&&!(a[g-h].High>a[g-2].High)&&!(h<2&&a[g-h].High==a[g-2].High);h++)if(a[g-h].High<a[g-2].High&&s++,4==s){r=a[g-2].High;break}for("Fractal Chaos Bands"==t.type?o&&(a[g]["Fractal High "+t.name]=r>0?r:null):4==s&&(a[g]["Result "+t.name]=1),s=0,h=0;h<=g&&a[g-h]&&!(a[g-h].Low<a[g-2].Low)&&!(h<2&&a[g-h].Low==a[g-2].Low);h++)if(a[g-h].Low>a[g-2].Low&&s++,4==s){n=a[g-2].Low;break}"Fractal Chaos Bands"==t.type?("Fract","al Low ",l&&(a[g]["Fractal Low "+t.name]=n>0?n:null)):4==s&&("Resu","lt"," ",a[g]["Result "+t.name]=-1)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:t.Studies.calculateFractalChaos,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):("fractalChaos feature requires f","irst activati","ng studies feature.",console.error("fractalChaos feature requires first activating studies feature."))},L=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Hi","g","h"," Minus Low","Vertical Horizontal Filt","er","William","s %R","au","to","a","ut","o",t.Studies.calculateMaxHighMinLow=function(e,t){var i,a,r,n,s,o,l,h=we;if("Low"," Pe","r","iod",i=t.chart.scrubbed,a=t.days,r=t.days,t.inputs["High Period"]&&(a=t.inputs["High Period"]),t.inputs["Low Period"]&&(r=t.inputs["Low Period"]),i.length<Math.max(a,r)+1)t.error=!0;else{n=Number.MAX_VALUE,h.u4X(144);var c=h.k5y(14,18,4,9,435);if(s=Number.MAX_VALUE*c,t.startFrom>1){for(o=1;o<a;o++)t.startFrom-o>=0&&(s=Math.max(s,i[t.startFrom-o].High));for(o=1;o<r;o++)t.startFrom-o>=0&&(n=Math.min(n,i[t.startFrom-o].Low))}for(var u=Math.max(0,t.startFrom-1);u<i.length;u++){if("VT ","HZ"," Filter","G","o","p","ala","GA","P","O","H","H","V",s=Math.max(s,i[u].High),n=Math.min(n,i[u].Low),u>=a&&i[u-a].High==s)for(s=i[u].High,o=1;o<a;o++)s=Math.max(s,i[u-o].High);if(u>=r&&i[u-r].Low==n)for(n=i[u].Low,o=1;o<r;o++)n=Math.min(n,i[u-o].Low);if(l=0,"HHV"==t.type)l=s;else if("LLV"==t.type)l=n;else if("Donchian Width"==t.type)h.u4X(5),l=h.k5y(s,n);else if("GAPO"==t.type||"Gopala"==t.type)l=Math.log(s-n)/Math.log(r);else{if("VT HZ Filter"==t.type){h.T7s(5),l=h.D45(s,n),i[u]["_MHML "+t.name]=l;continue}if("Williams %R"==t.type){h.T7s(145),l=h.k5y(1,99,14,14)*(s-i[u].Close)/(s-n),i[u]["Result "+t.name]=l;continue}}if(u==i.length-1)break;i[u+1].futureTick||("Donch","ian Channel","Donchian Channel"==t.type?("Donc","hian Low ",h.u4X(86),i[h.k5y("1",u)]["Donchian High "+t.name]=s,h.T7s(86),i[h.k5y("1",u)]["Donchian Low "+t.name]=n,h.T7s(3),i[h.D45(u,1)]["Donchian Median "+t.name]=h.D45(s,"2",n,h.u4X(146))):(h.u4X(3),i[h.k5y(u,1)]["Result "+t.name]=l))}}},t.Studies.calculateVerticalHorizontalFilter=function(e,i){var a,r,n,s;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{i.mhml=new t.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,we.Y$C(),i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(e,i.mhml),r=0,n=[];for(var o=Math.max(1,i.startFrom-i.days);o<a.length;o++)s=Math.abs(a[o].Close-a[o-1].Close),n.push(s),r+=s,n.length==i.days&&(a[o]["Result "+i.name]=a[o]["_MHML "+i.name]/r,r-=n.shift())}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(e,t){var i,a,r,n=we;n.u4X(5),i=-n.k5y("554777892",0),a=2;for(var s=1;-1015085515!==n.L3M(s.toString(),s.toString().length,93894);s++)r=t.chart.scrubbed,a+=2;n.L3M(a.toString(),a.toString().length,80745)!==i&&(r=t.chart.scrubbed),r=t.chart.scrubbed;for(var o=t.startFrom;o<r.length;o++)r[o]["Result "+t.name]=r[o].High-r[o].Low},inputs:{}}})):("highLowStudies f","eature requires first activating studies feat","ure.",console.error("highLowStudies feature requires first activating studies feature."))},O=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#00","FF","00","#FF","0000","Ichimo","ku Clouds",t.Studies.calculateIchimoku=function(e,t){var i,a,r,n,s,o,l,h,c=we;function u(e,t){var a,r;a=Number.MAX_VALUE,c.u4X(4);var n=c.D45(16,5,10);r=Number.MAX_VALUE*n;for(var s=t-e+1;s<=t;s++)s<0||(a=Math.min(a,i[s].Low),r=Math.max(r,i[s].High));return[a,r]}for("Leading Span B P","eriod","Con","versio","n Line Pe","riod","Base L","ine Period",i=t.chart.scrubbed,a={Base:Number(t.inputs["Base Line Period"]),Conv:Number(t.inputs["Conversion Line Period"]),LeadB:Number(t.inputs["Leading Span B Period"]),Lag:Number(t.inputs["Lagging Span Period"])},r=t.startFrom;r<i.length;r++)if(i[r]){n=u(a.Conv,r),c.T7s(5);var d=c.k5y(6,5);c.u4X(5);var p=c.k5y(5,3);i[r]["Conversion Line "+t.name]=(n[d]+n[0])/p,n=u(a.Base,r),c.u4X(5);var g=c.D45(17,16);i[r]["Base Line "+t.name]=(n[g]+n[0])/2,r<a.Lag||(i[r-a.Lag]["Lagging Span "+t.name]=i[r].Close)}for(s=[],r=Math.max(0,t.startFrom-a.Base);r<i.length;r++){n=u(a.LeadB,r),c.u4X(5);var m=c.k5y(8,6);o=(i[r]["Conversion Line "+t.name]+i[r]["Base Line "+t.name])/m,c.T7s(8);var f=c.D45(3,9,7);c.u4X(5);var y=c.k5y(11,9);l=(n[f]+n[0])/y,i[r+a.Base]?(i[r+a.Base]["Leading Span A "+t.name]=o,i[r+a.Base]["Leading Span B "+t.name]=l):("Leading"," Spa","n A ",(h={})["Leading Span A "+t.name]=o,h["Leading Span B "+t.name]=l,s.push(h))}t.appendFutureTicks(e,s)},t.Studies.displayIchimoku=function(e,i,a){var r,n,s,o,l,h,c,u;we.Y$C(),r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=t.Studies.determineColor(i.outputs[i.outputMap[r]]),o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.panels[i.panel],h=i.getYAxis(e),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),u=2;for(var d=1;1211210322!==we.L3M(d.toString(),d.toString().length,19682);d++)t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a),u+=2;551403592!==we.L3M(u.toString(),u.toString().length,43124)&&(t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):console.error("ichimoku feature requires first activating studies feature.")},E=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.r8O(),t.Studies?("au","to",t.Studies.calculateIntradayMomentum=function(e,t){var a,r,n,s,o,l;if(a=t.chart.scrubbed,r=t.days,a.length<r+1)t.error=!0;else{if(n=0,s=0,i.r8O(),t.startFrom>1){i.u4X(85);var h=i.k5y(2,3);n=a[t.startFrom-h]["_totUp "+t.name],s=a[t.startFrom-1]["_totDn "+t.name]}for(var c=t.startFrom;c<a.length;c++)(o=a[c].Close-a[c].Open)>0?n+=o:s-=o,c>=r&&((l=a[c-r].Close-a[c-r].Open)>0?n-=l:s+=l),i.u4X(147),a[c]["Result "+t.name]=i.k5y("100",4,n,n,s),a[c]["_totUp "+t.name]=n,a[c]["_totDn "+t.name]=s}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("intradayMomentum feature requires first activating studies feature.")},I=e=>{var t;we.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","au","to","e","m","a",t.Studies.calculateKeltner=function(e,i){we.r8O(),t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",e,i),t.Studies.calculateStudyATR(e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},N=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#FF00","00","#","00DD0","0",t.Studies.calculateKlinger=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;if("Signal"," Pe","riods","e","xponent","ia","l","_","EMA","-L","_","E","MA-S","expone","nt","ial","_EMA-","L ","_","SV"," ","_hi","st",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(p*=-1),p&&(a[d][h]=p);for(t.Studies.MA("exponential",r,h,0,"_EMA-S",e,i),we.T7s(5),t.Studies.MA("exponential",n,h,we.D45("0",0),"_EMA-L",e,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(t.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",e,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("klinger feature requires first activating studies feature.")},H=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Y$C(),t.Studies?("Ti","me ","Series Fore","cast","Lin","e","a","r Reg Slope","Li","n","ear Reg R2","Linear"," Reg F","orecas","t","Time","Series","time s","er","ie","s","Tim","eSer","ies",t.Studies.prettify["time series"]="tsma",t.Studies.movingAverage.conversions.tsma="time series",t.Studies.movingAverage.translations["time series"]="Time Series",t.Studies.movingAverage.typeMap.tsma="TimeSeries",t.Studies.movingAverage.typeMap["time series"]="TimeSeries",t.Studies.calculateMovingAverageTimeSeries=function(e,a){var r,n,s,o,l,h,c,u;for(var d in a.ma=new t.Studies.StudyDescriptor(a.name,"ma",a.panel),a.ma.chart=a.chart,a.ma.days=a.days,a.ma.startFrom=a.startFrom,a.ma.inputs=a.inputs,t.Studies.calculateLinearRegressionIndicator(e,a.ma),r=a.name,a.outputs)i.u4X(65),r=i.k5y(d," ",r);n=parseInt(a.inputs.Offset,10),isNaN(n)&&(n=0),s=a.chart.scrubbed,o=n;for(var p=a.startFrom-1;p>=0;p--)if((l=s[p][r])||0===l){if(!(o>0))break;o--}for(h=[],p++;p<s.length;p++)c=s[p],p+n>=0&&(p+n<s.length?(i.u4X(3),s[i.D45(p,n)][r]=c["Forecast "+a.name]):((u={})[r]=c["Forecast "+a.name],h.push(u)));a.appendFutureTicks(e,h)},t.Studies.calculateLinearRegressionIndicator=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f;if("C","l","os","e",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(r=t.inputs.Field)&&"field"!=r||(r="Close"),i.u4X(85);var y=i.D45(14,15);i.T7s(18);var v=i.D45(1,4,8,150,15);n=t.days*(t.days+("1"|y))/v,s=Math.pow(n,2),i.T7s(5);var b=i.k5y(13,11);i.T7s(85);var x=i.D45(14,15);i.T7s(85);var S=i.k5y(12,15);if(o=n*(b*t.days+x)/S,l=0,h=0,c=0,t.startFrom){"_su","ms ",i.T7s(5);var C=i.k5y(5,4);(u=a[t.startFrom-C]["_sums "+t.name])&&(h=u[0],l=u[1],c=u[2])}for(var w=t.startFrom;w<a.length;w++)if("_","sums ",(d=a[w][r])&&"object"==typeof d&&(d=d[t.subField]),(d||0===d)&&(h+=t.days*d-l,l+=d,c+=Math.pow(d,2),!(w<t.days-1))){if(w>t.days-1){if("o","bje","ct",(p=a[w-t.days][r])&&"object"==typeof p&&(p=p[t.subField]),!p&&0!==p)continue;l-=p,c-=Math.pow(p,2)}g=(t.days*h-n*l)/(t.days*o-s),a[w]["Slope "+t.name]=g,m=(l-g*n)/t.days,a[w]["Intercept "+t.name]=m,a[w]["Forecast "+t.name]=m+g*t.days,i.T7s(5);var k=i.k5y(19,17);f=(t.days*o-s)/(t.days*c-Math.pow(l,"2"|k)),i.T7s(148),a[w]["RSquared "+t.name]=i.D45(f,g,g),a[w]["_sums "+t.name]=[h,l,c]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):("linearRegressi","on feature requires first activa","ting studies fea","ture.",console.error("linearRegression feature requires first activating studies feature."))},V=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#FF0","000","#0","0","DD0","0",t.Studies.calculateMACD=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m=we;if(m.Y$C(),"MA","C","D"," ","Signal"," MA ","Type","F","ast MA Period",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),t.Studies.MA(o,i.macd1Days,s,0,"_MACD1",e,i),t.Studies.MA(o,i.macd2Days,s,0,"_MACD2",e,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)"_M","AC","D2 ","_","MAC","D2 ","_M","AC","D","1 ",!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(m.u4X(3),h[m.k5y("MACD ",n)]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),t.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",e,i),m.u4X(3),d=m.k5y(n,"_hist"),l=c;l<a.length;l++)h=a[l],m.T7s(3),((p=h[m.k5y("Signal ",n)])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);-582480080,-629695052,g=2;for(var f=1;-582480080!==m.U3Y(f.toString(),f.toString().length,49963);f++)i.outputMap[d]="",g+=2;-629695052!==m.U3Y(g.toString(),g.toString().length,61077)&&(i.outputMap[d]="")}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")},R=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Y$C(),t.Studies?(t.Studies.calculateMassIndex=function(e,a){var r,n;if("e",i.Y$C(),"xpo","nential",(r=a.chart.scrubbed).length<Math.max(9,a.days+1))a.error=!0;else{for(var s=a.startFrom;s<r.length;s++)r[s]["_High-Low "+a.name]=r[s].High-r[s].Low;if(t.Studies.MA("exponential",9,"_High-Low "+a.name,0,"_EMA",e,a),t.Studies.MA("exponential",9,"_EMA "+a.name,0,"_EMA2",e,a),n=0,r[a.startFrom-1]&&r[a.startFrom-1]["_total "+a.name]){i.u4X(149);var o=i.k5y(16,8,32,6,3);n=r[a.startFrom-o]["_total "+a.name]}for(var l=Math.max(17,a.startFrom);l<r.length;l++){if("_EM","A"," ",n+=r[l]["_EMA "+a.name]/r[l]["_EMA2 "+a.name],l>=17+a.days-1){r[l]["Result "+a.name]=n,i.T7s(150);var h=i.D45(2,9,3,12);i.u4X(30);var c=i.k5y(12,167,14,0);n-=r[l-a.days+h]["_EMA "+a.name]/r[l-a.days+c]["_EMA2 "+a.name]}r[l]["_total "+a.name]=n}}},t.Studies.displayMassIndex=function(e,i,a){var r,n,s,o;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Bulge Threshold"],e.panels[i.panel],n=i.getYAxis(e),s=t.Studies.determineColor(i.outputs.Result),o={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&e.highlightedDraggable&&(o.opacity*=.3),t.preparePeakValleyFill(e,o),t.Studies.drawHorizontal(e,i,null,r,n,s)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")},Y=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Money Flow ","Index",t.Studies.calculateMoneyFlowIndex=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;if("_",i.Y$C(),"cu","mMF ",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{r=0,n=0,i.u4X(8);var g=i.k5y(0,1,2);s=a[t.startFrom-g],o="_rawMF "+t.name,l="_cumMF "+t.name,h="Result "+t.name,s&&s[l]&&(r=s[l][0],n=s[l][1]);for(var m=t.startFrom;m<a.length;m++)c=a[m]["hlc/3"],m>0&&!a[m].futureTick&&(i.u4X(5),u=a[i.D45(m,1)]["hlc/3"],d=c*a[m].Volume,c>u?r+=d:c<u?(i.u4X(10),n-=d*=-i.D45("1",1)):(i.u4X(10),d=i.D45("0",1)),m>t.days&&((p=a[m-t.days][o])>0?r-=p:n+=p,0===n?a[m][h]=100:a[m].Volume&&(i.T7s(151),a[m][h]=i.D45(100,1,n,r,100))),a[m][o]=d,a[m][l]=[r,n])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):("mo","neyFlow feature requires first activating studies feature.",console.error("moneyFlow feature requires first activating studies feature."))},z=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Guppy Multiple Moving A","verage","P","ercent","Movi","ng Average Deviation","a","u","t","o","au","t","o","fie","l","d","DoubleExpo","nential","Hu","l","l","T","riple Exponenti","a","l","Double Ex","pon","enti","al","H","ull","3-e","xpone","ntial","h","ul","l","h","m","a","t","e","m","a",t.Studies.prettify=t.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},t.Studies.prettify),t.extend(t.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),t.Studies.calculateMovingAverageHull=function(e,a){var r,n,s,o,l,h,c,u;for("_","MM","A"," ","f","ield",r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("wma",a.days,n,0,"_WMA1",e,a),t.Studies.MA("wma",Math.ceil(a.days/2),n,0,"_WMA2",e,a),s=a.startFrom-1;s>=0&&((o=r[s][n])&&"object"==typeof o&&(o=o[a.subField]),!o&&0!==o);s--);for(s++;s<r.length;s++){"_WMA2"," ",l=r[s],i.T7s(152);var d=i.k5y(12,10,13,4,534);l["_MMA "+a.name]=d*l["_WMA2 "+a.name]-l["_WMA1 "+a.name]}for(var p in h=parseInt(a.inputs.Offset,10),isNaN(h)&&(h=0),c=Math.floor(Math.sqrt(a.days)),t.Studies.MA("wma",c,"_MMA "+a.name,h,"_HMA",e,a),u=a.name,i.r8O(),a.outputs)i.T7s(65),u=i.k5y(p," ",u);for(s=Math.max(a.days+c-1,a.startFrom);s<r.length;s++)r[s][u]=r[s]["_HMA "+a.name]},t.Studies.calculateMovingAverageDoubleExponential=function(e,a){var r,n,s,o,l,h,c,u,d,p,g;for("C","lose","f","ie","l","d",r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("ema",a.days,n,0,"_EMA1",e,a),t.Studies.MA("ema",a.days,"_EMA1 "+a.name,0,"_EMA2",e,a),s=parseInt(a.inputs.Offset,10),isNaN(s)&&(s=0),h=s,o=a.startFrom-1;o>=0;o--)if((l=r[o][n])&&"object"==typeof l&&(l=l[a.subField]),l||0===l){if(!(h>0))break;h--}for(var m in c=a.name,a.outputs)i.T7s(65),c=i.D45(m," ",c);for(u=[],o++;o<r.length;o++){if(!(o<2*(a.days-1)))d=r[o],i.u4X(125),p=i.k5y(21,4,28,8)*d["_EMA1 "+a.name]-d["_EMA2 "+a.name],o+s>=0&&(o+s<r.length?(i.u4X(3),r[i.k5y(o,s)][c]=p):((g={})[c]=p,u.push(g)))}a.appendFutureTicks(e,u)},t.Studies.calculateMovingAverageTripleExponential=function(e,a){var r,n,s,o,l,h,c,u,d,p,g;for("_E","M","A","3","e","ma","_E","MA1 ","_","E","M","A1","fi","eld",r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("ema",a.days,n,0,"_EMA1",e,a),t.Studies.MA("ema",a.days,"_EMA1 "+a.name,0,"_EMA2",e,a),t.Studies.MA("ema",a.days,"_EMA2 "+a.name,0,"_EMA3",e,a),s=parseInt(a.inputs.Offset,10),isNaN(s)&&(s=0),h=s,i.Y$C(),o=a.startFrom-1;o>=0;o--)if("ob","j","ec","t",(l=r[o][n])&&"object"==typeof l&&(l=l[a.subField]),l||0===l){if(!(h>0))break;h--}for(var m in c=a.name,a.outputs)i.u4X(65),c=i.k5y(m," ",c);for(u=[],o++;o<r.length;o++)if("_EM","A","1"," ",!(o<3*(a.days-1))){d=r[o],i.u4X(5);var f=i.D45(416,384);i.T7s(8);var y=i.D45(0,2,5);p=("3">>f)*d["_EMA1 "+a.name]-y*d["_EMA2 "+a.name]+d["_EMA3 "+a.name],o+s>=0&&(o+s<r.length?(i.T7s(3),r[i.D45(o,s)][c]=p):((g={})[c]=p,u.push(g)))}a.appendFutureTicks(e,u)},t.Studies.calculateMAEnvelope=function(e,a){var r,n,s;i.r8O(),(r=a.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA(a.inputs["Moving Average Type"],a.days,r,0,"MA",e,a),n=a.inputs["Shift Type"],s=a.inputs.Shift,n||(n="percent",s=a.inputs["Shift Percentage"]),"percent"==n?(i.T7s(12),t.Studies.calculateGenericEnvelope(e,a,i.D45(s,100),"MA "+a.name)):"points"==n&&("M","A"," ",t.Studies.calculateGenericEnvelope(e,a,null,"MA "+a.name,null,Number(s)))},t.Studies.calculateMADev=function(e,a){var r,n,s,o,l,h,c,u;if("_M","A","e","xpon","ential","Po","ints","Poin","ts O","r Percent",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),(s=a.inputs["Points Or Percent"])||(s="Points"),(o=a.inputs["Moving Average Type"])||(o="exponential"),i.r8O(),t.Studies.MA(o,a.days,n,0,"_MA",e,a),l=a.name+"_hist";for(var d=Math.max(a.startFrom,a.days-1);d<r.length;d++)"_","M","A"," ",(c=(h=r[d])[n])&&"object"==typeof c&&(c=c[a.subField]),((u=h["_MA "+a.name])||0===u)&&("Points"==s?(i.u4X(5),h[l]=i.k5y(c,u)):(i.T7s(153),h[l]=i.D45(100,c,1,u)));a.outputMap={},a.outputMap[a.name+"_hist"]=""}},t.Studies.calculateGMMA=function(e,a){var r,n,s;function o(r){return function(n){i.T7s(3),t.Studies.MA("ema",n,"Close",0,i.D45("MA ",n),e,a),a.outputMap["MA "+n+" "+a.name]=r}}r=a.chart.scrubbed,i.T7s(13),n=[3,i.k5y(64,"5"),8,10,12,i.D45("15",0,i.T7s(5))],s=[30,35,40,45,50,60],r.length<n[0]?a.error=!0:(i.r8O(),a.outputMap={},n.forEach(o("Short Term")),s.forEach(o("Long Term")))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:t.Studies.calculateMADev,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},Guppy:{name:"Guppy Multiple Moving Average",overlay:!0,calculateFN:t.Studies.calculateGMMA,inputs:{},outputs:{"Short Term":"#ea1d2c","Long Term":"#00afed"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:function(e,a){a.inputs["Moving Average Type"]="triangular",i.r8O(),t.Studies.calculateMAEnvelope(e,a)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")},B=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculatePSAR=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;function g(){r=0,n=null,i.r8O(),s=!s}if(a=t.chart.scrubbed,r=0,n=null,s=!1,o=0,l=parseFloat(t.inputs["Minimum AF"]),h=parseFloat(t.inputs["Maximum AF"]),t.startFrom>0){i.u4X(75);var m=i.k5y(15,7,7);o=a[t.startFrom-m]["Result "+t.name],i.T7s(5);var f=i.k5y(21,20);(c=a[t.startFrom-f]["_state "+t.name])&&3==c.length&&(r=c[0],n=c[1],s=c[2])}for(var y=t.startFrom-1;y<a.length-1;y++)if("_","state ",!(y<0)){if(a[y].futureTick)break;u=o,s?((!n||n<a[y].High)&&(n=a[y].High,i.T7s(3),r=Math.min(i.D45(r,l),h)),i.T7s(154),o=i.k5y(u,n,r,u),d=Math.min(a[Math.max(1,y)-1].Low,a[y].Low),o>a[y+1].Low?(o=n,g()):o>d&&(o=d)):((!n||n>a[y].Low)&&(n=a[y].Low,i.T7s(3),r=Math.min(i.k5y(r,l),h)),i.u4X(154),o=i.D45(u,n,r,u),p=Math.max(a[Math.max(1,y)-1].High,a[y].High),o<a[y+1].High?(o=n,g()):o<p&&(o=p)),i.u4X(3),a[i.k5y(y,1)]["_state "+t.name]=[r,n,s],isNaN(a[y].High)&&isNaN(a[y].Low)||(i.u4X(124),a[i.k5y("1",64,y)]["Result "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:t.Studies.calculatePSAR,seriesFN:t.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")},j=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#d3e8","ae","#","b3d","9","87","#","69","9","158","au","t","o",t.Studies.calculatePivotPoints=function(e,a){var r,n,s,o,l,h,c,u,d,p,g;function m(){i.u4X(155);var e=i.k5y(324,13,13,19,18);i.T7s(156);var t=i.D45(15,44,15,11);i.r8O(),d.pivotPoint=(d.high+d.low+r[y-e].Close)/t,d.prevHigh=d.high,d.prevLow=d.low,d.hlSpread=d.high-d.low,d.high=d.low=0}r=a.chart.scrubbed,i.r8O(),n=2;for(var f=1;1034036331!==i.L3M(f.toString(),f.toString().length,90035);f++)s="",o=e.layout.interval,l=e.layout.timeUnit,n+=2;1956631968!==i.U3Y(n.toString(),n.toString().length,60554)&&(s="",o=e.layout.interval,l=e.layout.timeUnit),s="day",o=e.layout.interval,l=e.layout.timeUnit,"day"==o?s="month":t.ChartEngine.isDailyInterval(o)?s="year":"second"==o||"millisecond"==o||"second"==l||"millisecond"==l?s="15min":(h=e.layout.periodicity,"minute"!=o&&(h*=o),h>=30&&(s="week")),c=null,i.u4X(1),u=i.D45(105,15,0)-t.getFromNS(e.chart,"market.beginningDayOfWeek",0),d={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},a.startFrom>1&&r[a.startFrom-1]["_pointers "+a.name]&&("_","p","ointers ",d=t.clone(r[a.startFrom-1]["_pointers "+a.name]));for(var y=Math.max(1,a.startFrom);y<r.length;y++)if("fi","bona","c","ci",r[y-1]){if(d.high=Math.max(d.high,r[y-1].High),d.low=Math.min(d.low>0?d.low:r[y-1].Low,r[y-1].Low),a.inputs.Continuous||"year"==s&&r[y].DT.getYear()!=r[y-1].DT.getYear()||"month"==s&&r[y].DT.getMonth()!=r[y-1].DT.getMonth()||"week"==s&&(r[y].DT.getDay()+u)%7<(r[y-1].DT.getDay()+u)%7?m():"day"==s?(null===c&&(c=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[y].DT,shiftToDateBoundary:!0})),p=new Date(new Date(+r[y].DT).setMilliseconds(r[y].DT.getMilliseconds()+c)),(g=new Date(new Date(+r[y-1].DT).setMilliseconds(r[y-1].DT.getMilliseconds()+c))).getDate()!==p.getDate()&&0!==g.getDay()&&e.chart.market.isMarketDate(p)&&(c=null,m())):"15min"!=s||r[y].DT.getHours()==r[y-1].DT.getHours()&&Math.floor(r[y].DT.getMinutes()/15)==Math.floor(r[y-1].DT.getMinutes()/15)||m(),r[y]["Pivot "+a.name]=d.pivotPoint,"fibonacci"==a.inputs.Type.toLowerCase())"Resi","stance"," 3"," ","Resi","stance"," 1"," ",r[y]["Resistance 1 "+a.name]=d.pivotPoint+.382*d.hlSpread,r[y]["Resistance 2 "+a.name]=d.pivotPoint+.618*d.hlSpread,r[y]["Resistance 3 "+a.name]=d.pivotPoint+d.hlSpread,r[y]["Support 1 "+a.name]=d.pivotPoint-.382*d.hlSpread,r[y]["Support 2 "+a.name]=d.pivotPoint-.618*d.hlSpread,r[y]["Support 3 "+a.name]=d.pivotPoint-d.hlSpread;else{"Support"," 2"," ","Supp","or","t 1"," ","Resistanc","e ","3 ",i.u4X(5);var v=i.k5y(4,2);r[y]["Resistance 1 "+a.name]=v*d.pivotPoint-d.prevLow,r[y]["Resistance 2 "+a.name]=d.pivotPoint+d.hlSpread,i.u4X(157);var b=i.D45(3,268,9,28,15);r[y]["Resistance 3 "+a.name]=d.prevHigh+b*(d.pivotPoint-d.prevLow),i.T7s(1);var x=i.D45(28,4,5);r[y]["Support 1 "+a.name]=x*d.pivotPoint-d.prevHigh,r[y]["Support 2 "+a.name]=d.pivotPoint-d.hlSpread,i.T7s(8);var S=i.D45(16,26,12);r[y]["Support 3 "+a.name]=d.prevLow-S*(d.prevHigh-d.pivotPoint)}r[y]["_pointers "+a.name]=t.clone(d)}},t.Studies.displayPivotPoints=function(e,i,a){var r,n;i.noSlopes=!i.inputs.Continuous,t.Studies.displaySeriesAsLine(e,i,a),i.inputs.Shading&&("Resi","s","ta","nce 2 ","Resistanc","e 3","Res","istance"," 3 ",r=e.panels[i.panel],n={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:r.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(n.opacity*=.3),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 3"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Support 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:t.Studies.determineColor(i.outputs["Support 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:t.Studies.determineColor(i.outputs["Support 3"])},n)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")},X=e=>{var t,i,a,r=we;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,r.r8O(),t.Studies){t.Studies.calculatePrettyGoodOscillator=function(e,i){var a;if("C","l","o","se","_","EMA",r.r8O(),"t","rueRange",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",e,i),t.Studies.MA("simple",i.days,"Close",0,"_SMA",e,i);for(var n=Math.max(1,i.startFrom);n<a.length;n++)a[n]["_SMA "+i.name]&&a[n]["_EMA "+i.name]&&(a[n]["Result "+i.name]=(a[n].Close-a[n]["_SMA "+i.name])/a[n]["_EMA "+i.name])}},1638111810,r.T7s(5),i=r.D45("430268724",0),a=2;for(var n=1;1638111810!==r.U3Y(n.toString(),n.toString().length,92285);n++)"au","to","Pretty G","ood"," Osci","llator",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}}),r.T7s(13),a+=r.D45(64,"2");r.U3Y(a.toString(),a.toString().length,34725)!==i&&("a","uto","a","u","t","o",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"auto",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:7,studyOverBoughtColor:"auto",studyOverSoldValue:!1,studyOverSoldColor:"auto"}}}}))}else console.error("prettyGoodOscillator feature requires first activating studies feature.")},W=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0",".","0","5","a","u","t","o","au","to","#F","F0","00","0",t.Studies.calculatePMO=function(e,a){var r,n,s,o,l;if("P","M","O","P","M","O"," ","PM","O","Doub","l","e Smoothing Period",r={Smooth:Number(a.inputs["Smoothing Period"])-1,Double:Number(a.inputs["Double Smoothing Period"])-1,Signal:Number(a.inputs["Signal Period"])},(n=a.chart.scrubbed).length<r.Smooth+r.Double)a.error=!0;else{for((s=a.inputs.Field)&&"field"!=s||(s="Close"),o=a.startFrom;o<n.length;o++)if(n[o]&&n[o-1]&&(i.u4X(114),l=n[i.D45(0,"1",o)][s])){i.T7s(75);var h=i.k5y(7e3,20,5980);i.u4X(158);var c=i.D45(8,13,16,5,0);n[o]["_ROCx10 "+a.name]=h*(n[o][s]/l-c)}t.Studies.MA("exponential",r.Smooth,"_ROCx10 "+a.name,0,"_EMAx10",e,a),t.Studies.MA("exponential",r.Double,"_EMAx10 "+a.name,0,"PMO",e,a),i.Y$C(),t.Studies.MA("exponential",r.Signal,"PMO "+a.name,0,"PMOSignal",e,a),a.zoneOutput="PMO"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):console.error("priceMomentumOscillator feature requires first activating studies feature.")},U=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0",".","1","au","t","o","#","FF","0000","v","d","m","a","fie","l","d","Po","in","ts","e","m","a","fie","l","d","P","r","ice Oscillator",t.Studies.calculatePriceOscillator=function(e,i){var a,r,n,s,o,l,h,c,u,d=we;if(d.r8O(),"Cl","o","s","e",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{s=i.inputs.Field,(o=i.inputs["Moving Average Type"])||(o="simple"),s&&"field"!=s||(s="Close"),i.parameters.isVolume&&("exponent","ial",s="Volume",o="exponential"),(l=i.inputs["Points Or Percent"])||(l="Percent"),t.Studies.MA(o,r,s,0,"_Short MA",e,i),d.u4X(27),t.Studies.MA(o,n,s,d.D45(0,"0"),"_Long MA",e,i);for(var p=Math.max(n,i.startFrom);p<a.length;p++)(h=a[p])&&(c=h["_Short MA "+i.name],u=h["_Long MA "+i.name],!c&&0!==c||!u&&0!==u||("Inc","reasi","ng"," Bar","Res","ul","t"," ","Points"==l?(d.T7s(5),h["Result "+i.name]=d.k5y(c,u)):(d.u4X(159),h["Result "+i.name]=d.k5y(0,c,"100","1",32,u)),i.outputs["Increasing Bar"]&&("_h","i","s","t","_hi","st",h[i.name+"_hist"]=h["Result "+i.name],i.outputMap={},i.outputMap[i.name+"_hist"]="")))}},t.Studies.displayRAVI=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),(l=e.layout.candleWidth-2)<2&&(l=1),h=t.Studies.determineColor(i.outputs["Increasing Bar"]),c=t.Studies.determineColor(i.outputs["Decreasing Bar"]),e.startClip(i.panel),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var m=0;m<a.length;m++)"_","hi","st","_h","ist","#CCCCC","C",u=a[m],we.u4X(5),(d=a[we.k5y(m,1)])||(d=e.getPreviousBar(e.chart,i.name+"_hist",m)),u&&(p=0,g=0,i.parameters&&i.parameters.studyOverZonesEnabled&&(p=parseFloat(i.parameters.studyOverBoughtValue),g=parseFloat(i.parameters.studyOverSoldValue)),d?u[i.name+"_hist"]>p&&d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:u[i.name+"_hist"]<g&&d[i.name+"_hist"]>u[i.name+"_hist"]?n.fillStyle=c:n.fillStyle="#CCCCCC":n.fillStyle="#CCCCCC",u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(m,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):("priceVolumeOscillator feature requ","ires"," first acti","vating studies feature.",console.error("priceVolumeOscillator feature requires first activating studies feature."))},q=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","au","t","o","P","rime N","umber Oscill","ator",t.Studies.calculatePrimeNumber=function(e,t){var a,r,n,s,o,l,h,c;a=[],r=t.chart.scrubbed;for(var u=t.startFrom;u<r.length;u++)if("Prime Numb","er Ban","ds",n=r[u]){if(s=n.High,!isNaN(s)){for(var d=0;s>0&&s<=10;d++)s*=10;for(g(s)&&(s+=2),(s=Math.ceil(s))%2==0&&s++;!g(s);)s+=2;s/=Math.pow(10,d)}if(o=n.Low,!isNaN(o)){for(var p=0;o>0&&o<=10;p++)o*=10;if(g(o)&&(o-=2),(o=Math.floor(o))%2==0&&o--,o>0){for(;!g(o);)o-=2;o/=Math.pow(10,p)}}"Prime Number Bands"==t.type?(isNaN(s)||(n["Prime Bands Top "+t.name]=s),isNaN(o)||(n["Prime Bands Bottom "+t.name]=Math.max(0,o))):(i.u4X(27),l=i.k5y(0,"0"),h=t.inputs["Tolerance Percentage"]*(s-o)/100,(c=s+o-2*n.Close)<h?(i.T7s(27),l=i.D45(0,"1")):c>h&&(l=-1),l&&(n["Result "+t.name]=l))}function g(e){var t;if(e<=0)return!1;if(e!=Math.floor(e))return!1;if(!0===a[e]||!1===a[e])return a[e];t=parseInt(Math.sqrt(e),10);for(var i=2;i<=t;i++)if(e%i==0)return a[e]=!1,!1;return a[e]=!0,!0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:t.Studies.calculatePrimeNumber,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")},G=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("fiel","d",t.Studies.calculateKST=function(e,i){var a,r,n,s,o,l,h,c,u,d=we;for("KST"," ","S","ignal Perio","d","Heaviest Rate of Change ","Period","fi","eld",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),d.T7s(10),s[d.k5y("2",1)]=Number(i.inputs["Light SMA Period"]),d.T7s(44),s[d.k5y("3",3)]=Number(i.inputs["Heavy SMA Period"]),s[4]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)if(l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]){d.u4X(5);var p=d.k5y(95600,86040);d.u4X(3);d.D45(8171,4);d.T7s(75);var g=d.D45(110500,17,103983);d.T7s(160);var m=d.k5y(8022,15057,120450,6);d.u4X(88);var f=d.D45(2,8,936700,59160);d.u4X(8);d.k5y(2163,16,13);d.T7s(5);d.k5y(9506,16);d.u4X(161);var y=d.D45(10,290,50,7,18);d.u4X(3);var v=d.D45(0,1);a[l]["_ROC"+h+(253.18==p?232.44:g>m?328==f&&649.8:" ")+i.name]=y*(a[l][r]/a[l-n[h]][r]-v)}for(h=1;h<=4;h++)t.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["KST "+i.name]=null,h=1;h<=4;h++)"K","ST ","_S","M","A",((c=a[l]["_SMA"+h+" "+i.name])||0===c)&&(d.T7s(10),a[l]["KST "+i.name]+=d.D45(h,c));u=2;for(var b=1;-396151449!==d.L3M(b.toString(),b.toString().length,94505);b++)t.Studies.MA("KSTSignal",o,"KSTSignal"*i.name,5,"KSTSignal",e,i),u+=2;-951772607!==d.U3Y(u.toString(),u.toString().length,1461)&&("KSTSi","gnal",t.Studies.MA("KSTSignal",o,"KSTSignal"*i.name,5,"KSTSignal",e,i)),t.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",e,i)},t.Studies.calculateSpecialK=function(e,i){var a,r,n,s,o,l,h,c,u=we;for("Cl","ose",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs.Interval)||(n="daily"),s={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},o={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},l=i.startFrom;l<a.length;l++)if(a[l])for(h=0;h<s[n].length;h++)if("_","ROC",l>=s[n][h]&&a[l-s[n][h]]&&a[l-s[n][h]][r]){u.T7s(3);var d=u.k5y(34,539);u.u4X(8);var p=u.k5y(4490,4,14);u.u4X(88);u.D45(3,15,373255,8483);u.u4X(32);var g=u.D45(10,17,107,17,18);u.T7s(5);var m=u.D45(12,11);a[l]["_ROC"+h+(d<p&&" ")+i.name]=g*(a[l][r]/a[l-s[n][h]][r]-m)}for(h=0;h<o[n].length;h++)"_","M","A","exponen","tial",t.Studies.MA("daily"==n?"simple":"exponential",o[n][h],"_ROC"+h+" "+i.name,0,"_MA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for("Re","sult ",a[l]["Result "+i.name]=null,h=0;h<o[n].length;h++){"_","M","A",u.u4X(4);u.D45(14,11,6790);u.T7s(3);u.D45(9229,11);u.T7s(137);var f=u.k5y(7863,22,2,13);u.u4X(75);var y=u.D45(58560,11,53669);u.u4X(162);var v=u.D45(5,13,6,110240,654593);u.T7s(163);var b=u.D45(9385,18780,5,1);((c=a[l]["_MA"+h+(854.06==f||(107.3!=y?5650>v?b:" ":133.78))+i.name])||0===c)&&(u.u4X(164),a[l]["Result "+i.name]+=u.k5y(h,c,1,4))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")},Q=e=>{var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Studies?t.Studies.studyLibrary.PVAT||("hh:m","m",":s","s","s","t","ep","0 ","to max","Projected Aggregate Vol","ume","+","5","0","%","#8c","c","1","76","#c","f","b","d0e","-","100%","+","100%","0 to ma","x",t.Studies.initProjectedVolume=function(e,i,a,r,n,s){var o,l,{market:h}=e.chart;return o="00:00",h&&(o=h.getNormalOpen()),o.match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),a["Anchor Time"]&&a["Anchor Time"].length||("Anchor Ti","me",a["Anchor Time"]=o),l=t.Studies.initializeFN(e,i,a,r,n,s),e.currentlyImporting||(l.defaultAnchorTime=o),l},t.Studies.validateProjectedVolumeLookback=function(e,t){var{interval:i,periodicity:a}=e.layout,{"Lookback Days":r}=t.inputs;return we.u4X(165),we.k5y(r,a,i,10)},t.Studies.calculateProjectedVolume=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,$,X,W,U,q,G,Q,Z,K=we;function J(e,t,i){for(;t;)e=new Date(new Date(e).setDate(e.getDate()+(i?1:-1))),se.isMarketDate(e)&&t--;return e}r="heikina",r+="shi";var{interval:ee,timeUnit:te,aggregationType:ie}=e.layout,{symbol:ae,scroll:re,scrubbed:ne,market:se}=e.chart;if(n="PAV"===a.type,s=a.study?a.study.name:a.type,t.ChartEngine.isDailyInterval(ee))a.error=`${s} is Intraday Only`;else if("tick"===te)a.error=`Tick mode not supported for ${s}`;else if("minute"!==te)a.error=`Sub-minute periodicities not supported for ${s}`;else if(ie&&["ohlc",r].includes(ie))t.Studies.validateProjectedVolumeLookback(e,a)||(a.error=`Selected lookback/periodicity combo not supported for ${s}`);else{1594085346,-248392690,o=2;for(var oe=1;1594085346!==K.U3Y(oe.toString(),oe.toString().length,8995);oe++)a.error=`Aggregation type not supported for ${s}`,o+=2;-248392690!==K.L3M(o.toString(),o.toString().length,65221)&&(a.error=`Aggregation type not supported for ${s}`)}if(!a.error){if(a.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,a):t.Studies.removeAnchorHandle(e,a),(l=se?se.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(l+=":00"),!e.currentlyImporting)if(a.defaultAnchorTime){if(l!==a.defaultAnchorTime)return"An","chor T","ime",a.defaultAnchorTime=l,a.inputs["Anchor Time"]=l,void t.Studies.repositionAnchor(e,a)}else{628471074,2141261643,h=2;for(var le=1;628471074!==K.L3M(le.toString(),le.toString().length,60107);le++)a.defaultAnchorTime=l,h+=2;2141261643!==K.U3Y(h.toString(),h.toString().length,43317)&&(a.defaultAnchorTime=l),a.defaultAnchorTime=l}var{"Lookback Days":he,"Anchor Time":ce}=a.inputs,[ue,de,pe=0]=ce.split(":");if(c=t.getFn("Market.Symbology.isForexSymbol")(ae),u=a.getDependents(e),d=0,p=[],u.forEach((({inputs:e,outputMap:t})=>{K.Y$C(),e.Period&&(d=Math.max(parseInt(e.Period),d),p.push(...Object.keys(t)))})),a.dependentsOutputMap=p,m=_e(ne.length-1,!0),f=Math.ceil(ne.length-1-re),K.u4X(5),y=_e(K.D45(f,d)),c&&ne[y]&&t.dateToStr(ne[y].DT,"HH:mm")!==l&&(K.T7s(28),y=_e(K.D45(y,0,"1"))),g=!c&&a.startFrom>y&&ne[y]&&void 0!==ne[y]["V "+a.name]&&p.every((e=>(K.r8O(),![void 0,null].includes(ne[y][e]))))&&!1!==m?m:y,(v=J(Me(y),he)).setHours(0,0,0),K.u4X(13),x=((b=_e(K.D45(0,"0"),!0))||0===b)&&Fe(J(ne[b].DT,he,!0)),ne[0].DT>v){if(!e.quoteDriver)return K.u4X(83),a.error=`${K.D45("ata to ","Not"," enough d","calculate ")}${s}`;if(a.chart.endPoints.begin>v&&e.quoteDriver.extendHistoricalData({from:v}),!(x>0))return;g=x}if(!(g<0||g>ne.length-1)){if(S=ne.length-a.startFrom==1&&a.cachedFutureTicks&&a.cachedLastProjection&&+a.cachedLastProjection.DT==+ne[ne.length-1].DT&&ne[g]["PV "+a.name]){K.T7s(130);var ge=K.D45(1,2,4,4);ne[ne.length-ge]["PV "+a.name]=a.cachedLastProjection.projectedValue,a.appendFutureTicks(e,a.cachedFutureTicks),g=a.startFrom}else{a.cachedFutureTicks=null,a.cachedLastProjection=null,C=[m],w=[];for(var me=0;me<he;me++)k=_e(C[0]-1),C.unshift(k);for(;C[he]>=g;){if(T=C.pop(),!ne[T])return Ae(T);D=De(ne[T].DT);var{hours:fe,minutes:ye}=D;if(A=void 0,_=se.getClose(ne[T].DT)){for(M=se.getNextClose(ne[T].DT),A=De(_);(0!==A.hours||0!==A.minutes)&&_.getDate()===M.getDate();)_=M,M=se.getNextClose(M);0===(A=De(_)).hours&&(A.hours=24)}else A={hours:24,minutes:0};F=C.slice();for(var ve=0;ve<F.length;ve++){if(P=F[ve],!ne[P])return Ae(P);var{hours:be,minutes:xe}=De(ne[P].DT);if(be<fe||be===fe&&xe<ye)do{P++,({hours:be,minutes:xe}=De(ne[P].DT))}while(be!==fe||xe!==ye);F[ve]=P}for(;fe<A.hours||fe===A.hours&&ye<A.minutes;){L=!1,O=void 0,E=void 0,I=0,N=0;for(var Se=0;Se<F.length;Se++)if(null!==(H=F[Se])){if(!(V=ne[H]))return Ae(H);var{hours:Ce,minutes:ke}=De(V.DT);R=V.DT.getDate(),Ce===fe&&ke===ye&&(I+=V.Volume,N++,F[Se]++,ne[F[Se]].DT.getDate()!==R?F[Se]=null:L||(({hours:O,minutes:E}=De(ne[F[Se]].DT)),L=!0))}if(fe=O,ye=E,0===N)break;K.u4X(12),Y=K.k5y(I,N),ne[T]?ne[T]["PV "+a.name]=Y:w.push({["PV "+a.name]:Y}),T++}C.unshift(_e(C[0]-1))}a.cachedLastProjection={DT:ne[ne.length-1].DT,projectedValue:ne[ne.length-1]["PV "+a.name]},a.cachedFutureTicks=w,a.appendFutureTicks(e,w)}if(z=null,B=0,K.u4X(44),j=K.k5y("0",0),S&&n)for(;g>0;){if("V"," ",K.T7s(5),(X=ne[K.k5y(g,1)]["V "+a.name])||0===X){B=X;break}g--}for(var Te=g;Te<ne.length;Te++)if("V"," ","P","V"," ",U=(W=ne[Te]).Volume,q=W["PV "+a.name],W.futureTick||($=Te),null===z&&(z=t.Studies.getMarketOffset({stx:e,localQuoteDate:ne[Te].DT,shiftToDateBoundary:!0})),G=new Date(new Date(W.DT).getTime()+z),Q=ne[Te-1]&&new Date(new Date(ne[Te-1].DT).getTime()+z),(Z=new i.Date(W.DT,se.market_def.market_tz||"America/New_York")).setHours(ue,de,pe),K.T7s(3),(Z=new Date(K.k5y(Z,z))).setDate(G.getDate()),Q&&G.getDate()!==Q.getDate()&&(z=null,B=0,j=0),G<Z)W["V "+a.name]=0,W["PV "+a.name]=0;else if(n?(B+=U,j+=q):(B=U,j=q),W["V "+a.name]=B,S||(W["PV "+a.name]=j),[NaN,null,void 0].includes(B)&&!W.futureTick)return void(a.error=`${s} requires volume`);a.cachedLastProjection.projectedValue=ne[$]["PV "+a.name],a.outputMap={},a.outputMap["V "+a.name]="",a.outputMap["PV "+a.name]="Average Line",u.forEach((t=>{t.startFrom=g,t.study.calculateFN(e,t)}))}}function De(e){return{hours:e.getHours(),minutes:e.getMinutes()}}function _e(i,a){var r,n,s,o,l;return r=Me(i),s=Fe(n=se.getOpen(r)||((o=r).setHours(0),o.setMinutes(0),l=t.Studies.getMarketOffset({stx:e,localQuoteDate:o}),new Date(o.getTime()+l))),a?(s<0&&(s=Fe(J(n,1,!0))),!(s>=ne.length)&&s):s}function Ae(e){K.Y$C(),console.error(`Expected data for ${Me(e).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`)}function Me(t){return K.r8O(),e.dateFromTick(t,null,!0,"scrubbed")}function Fe(t){return e.tickFromDate(t,null,null,!0,"scrubbed")}},t.Studies.displayProjectedVolume=function(e,i,a){var r,n,s,o,l,h,c,u=we;if("stx_volu","me_underlay","_","up","Ale","rt"," Ba","r",i.error)return t.Studies.removeAnchorHandle(e,i);var{"Alert Threshold":d=""}=i.inputs;u.T7s(5);var p=u.D45(10,11);u.u4X(166);var g=u.D45(12,13,1,12,2);r=parseInt(d.slice(0,p),g)/100,"object"==typeof(n=i.outputs["Alert Bar"])&&(n=n.color),i.volumeField="V "+i.name,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,s=e.canvasStyle("stx_volume_underlay_up").opacity,o=e.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(t){var a,l,h,c,d,p;var{Open:g,Close:m,iqPrevClose:f}=t;return a=e.colorByCandleDirection?g:f,u.u4X(167),l=u.k5y(a,m),h=t["PV "+i.name],c=t["V "+i.name],u.u4X(168),d=u.D45(h,r,1),{fill_color:(p=r<0?c<d:c>d)&&n||(l?this.fill_color_down:this.fill_color_up),border_color:l?this.border_color_down:this.border_color_up,opacity:p?1:l?o:s,border_opacity:l?o:s}},l=i.study?i.study.name:i.type;var{loadingMore:m}=e.chart;if(h=a.some((e=>(u.r8O(),e&&e[i.volumeField]&&e["PV "+i.name]))),c=a[0]&&!a[0].futureTick&&(void 0===a[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((e=>[void 0,null].includes(a[0][e])))),!h&&m)return i.error=`Fetching data for ${l}`;t.Studies.createVolumeChart(e,i,a),t.Studies.displaySeriesAsLine(e,i,a),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a),c&&t.Studies.calculateProjectedVolume(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):console.error("projectedVolume feature requires first activating studies feature.")},Z=e=>{var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,we.Y$C(),t.Studies?("0 to 1","00",t.Studies.calculatePsychologicalLine=function(e,t){var i,a,r,n,s;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=[],we.T7s(5),r=we.k5y(119,19)/t.days,n=0;for(var o=Math.max(t.startFrom-t.days,1);o<i.length&&!i[o].futureTick;o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>t.days&&(n-=a.shift()*r),o<t.startFrom||isNaN(i[o].Close)||(i[o]["Result "+t.name]=n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):console.error("psychologicalLine feature requires first activating studies feature.")},K=e=>{var t,i;if("un","defined",(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){t.Studies.calculateQStick=function(e,i){var a;if("M",we.Y$C(),"oving Average Ty","pe",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)"_","Clos","e-Open ",a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",e,i)}},1996508970,-618878875,i=2;for(var a=1;1996508970!==we.U3Y(a.toString(),a.toString().length,19580);a++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}}),i+=2;-618878875!==we.L3M(i.toString(),i.toString().length,44972)&&("Movi","ng Average"," Type",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"ma",calculateFN:t.Studies.calculateQStick,inputs:{Period:1,"Moving Average Type":"Moving Average Type"}}}))}else console.error("qstick feature requires first activating studies feature.")},J=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Y$C(),t.Studies?("#","00D","D","00","#","FF7F","0","0","#FF0","000","fie","ld",t.Studies.calculateRainbow=function(e,a){var r,n,s,o,l,h,c,u,d;if("O","s","c",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),s=n;for(var p=1;p<=10;p++){t.Studies.MA("simple",a.days,s,0,"SMA"+p,e,a),i.T7s(8);i.D45(17980,9002,12);i.u4X(66);var g=i.D45(152,38,4);i.T7s(42),s="SMA"+p+(("9640"|g)>=i.D45(505,12,2020)?" ":228.02)+a.name}for(var m=Math.max(a.startFrom,10);m<r.length;m++)if(r[m]){if(r[m].futureTick)break;for(o=0,l=0,h=-1*Number.MAX_VALUE,c=Number.MAX_VALUE,p=1;p<=10;p++)((u=r[m]["SMA"+p+" "+a.name])||0===u)&&(o+=u,l++,h=Math.max(h,u),c=Math.min(c,u));if(a.name.indexOf("Osc")>-1&&("HHV/LLV Look","back",d=b(a.inputs["HHV/LLV Lookback"],m),l)){"O","v","e","r ",i.T7s(8);var f=i.k5y(104,23,19);i.T7s(26);var y=i.k5y(19,2,20,2);r[m][a.name+"_hist"]=f*(r[m][n]-o/l)/Math.max(1e-6,d[y]-d[0]),i.T7s(43);var v=i.k5y(12,4,4);r[m]["Over "+a.name]=100*(h-c)/Math.max(1e-6,d[v]-d[0]),r[m]["Under "+a.name]=-r[m]["Over "+a.name],r[m]["Zero "+a.name]=0}}a.name.indexOf("Osc")>-1&&("Ze","r","o"," ","Negative"," Ba","r","U","nd","er"," ","Positiv","e"," ","Bar",a.outputMap={},a.outputMap["Over "+a.name]="Positive Bar",a.outputMap["Under "+a.name]="Negative Bar",a.outputMap["Zero "+a.name]="",a.outputMap[a.name+"_hist"]="")}function b(e,t){var a,n;i.T7s(169);var s=i.D45(16,10,10,5);a=Number.MAX_VALUE*s,n=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(a=Math.max(a,r[o].Close),n=Math.min(n,r[o].Close));return[n,a]}},t.Studies.displayRainbowMA=function(e,i,a){var r;r=e.panels[i.panel];for(var n=10;n>0;n--)t.Studies.displayIndividualSeriesAsLine(e,i,r,"SMA"+n+" "+i.name,a)},t.Studies.displayRainbowOsc=function(e,a,r){var n,s,o,l,h,c,u,d,p,g,m;t.Studies.displaySeriesAsLine(e,a,r),n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),l=e.pixelFromPrice(0,n,o),h=n.name!=a.chart.name,c=t.Studies.determineColor(a.outputs["Positive Bar"]),s.strokeStyle=c,e.plotDataSegmentAsLine("Over "+a.name,n,{skipTransform:h,label:!1,yAxis:o}),(u=s.createLinearGradient(0,l,0,o.flipped?o.bottom:o.top)).addColorStop(0,e.containerColor),u.addColorStop(1,c),t.prepareChannelFill(e,{skipTransform:h,color:u,opacity:!a.highlight&&e.highlightedDraggable?.3:1,panelName:a.panel,topBand:"Over "+a.name,bottomBand:"Zero "+a.name,yAxis:o}),d=t.Studies.determineColor(a.outputs["Negative Bar"]),i.Y$C(),s.strokeStyle=d,e.plotDataSegmentAsLine("Under "+a.name,n,{skipTransform:h,label:!1,yAxis:o}),(p=s.createLinearGradient(0,l,0,o.flipped?o.top:o.bottom)).addColorStop(0,e.containerColor),p.addColorStop(1,d),t.prepareChannelFill(e,{skipTransform:h,color:p,opacity:!a.highlight&&e.highlightedDraggable?.3:1,panelName:a.panel,topBand:"Zero "+a.name,bottomBand:"Under "+a.name,yAxis:o}),(g=e.layout.candleWidth-2)<2&&(g=1),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),s.fillStyle="#CCCCCC";for(var f=0;f<r.length;f++)"_h","i","s","t",(m=r[f])&&(m[a.name+"_hist"]>0?s.fillStyle=c:m[a.name+"_hist"]<0&&(s.fillStyle=d),m.candleWidth&&(g=Math.floor(Math.max(1,m.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(f,n.chart)-g/2),Math.floor(l),Math.floor(g),Math.floor(e.pixelFromPrice(m[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("rainbow feature requires first activating studies feature.")},ee=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateRandomWalk=function(e,t){var i,a,r,n,s,o,l,h,c;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else for(var u=Math.max(2,t.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=t.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||(i[u]["Random Walk High "+t.name]=s,i[u]["Random Walk Low "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")},te=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","FF","000","0","a","u","t","o",t.Studies.calculateRelativeVigor=function(e,i){var a,r,n,s,o,l,h,c;if("Re","l Vi","g ","_D","en","o","m","_C","hang","e"," ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)"_Rang","e"," ",n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(t.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",e,i),t.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",e,i),we.r8O(),s=[],o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&("_D","eno","m ","_","Nume","r"," ",!a[r].futureTick);r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),l=0,h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(we.u4X(12),a[r]["Rel Vig "+i.name]=we.k5y(l,h))}for(t.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",e,i),r=i.startFrom;r<a.length;r++)"R","elVig","S","ignal ","Re","l Vig ",a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")},ie=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","0"," ","to 100","fiel","d",t.Studies.calculateRSI=function(e,t){var a,r,n,s,o,l,h,c;function u(e,t){var a;if(i.Y$C(),0===t)return 100;for(var r=1;1935261524!==i.L3M(r.toString(),r.toString().length,75654);r++)return i.T7s(10),a=i.k5y(e,t),i.T7s(170),i.D45(225,299,a,7);return-2019648500!==i.L3M(2..toString(),2..toString().length,82124)?(i.T7s(12),a=i.k5y(e,t),i.T7s(171),i.D45(a,100,"100",1)):void 0}if(a=t.chart.scrubbed,(r=t.inputs.Field)&&"field"!=r||(r="Close"),a.length<t.days+1)t.error=!0;else{for(var d=t.startFrom;d<a.length;d++)if("_","av","g","L ","_","avgG ","_avgG"," ",d&&(n=a[d],i.T7s(5),s=a[i.D45(d,1)],(n[r]||0===n[r])&&(s[r]||0===s[r]))){if(o=n[r]-s[r],l=Math.min(d,t.days),(h=s["_avgG "+t.name])||(h=0),i.T7s(12),h-=i.k5y(h,l),(c=s["_avgL "+t.name])||(c=0),i.T7s(12),c-=i.D45(c,l),o>0)i.u4X(12),h+=i.D45(o,l);else{if(!(o<=0))continue;i.u4X(12),c-=i.k5y(o,l)}d>=t.days&&(!h&&0===h||!c&&0===c||(n["RSI "+t.name]=u(h,c))),n["_avgG "+t.name]=h,n["_avgL "+t.name]=c}t.zoneOutput="RSI"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("rsi feature requires first activating studies feature.")},ae=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("e","m","a",t.Studies.calculateSchaff=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f;function y(e,t,n){var s,o,l;s=null,o=null;for(var h=t-e+1;h<=t;h++){i.u4X(3);i.D45(920,2);i.u4X(1);var c=i.k5y(128520,6,14280);i.T7s(1);var u=i.k5y(8428,1,2);i.u4X(172);var d=i.D45(13,2,297,15,2665);i.T7s(75);i.D45(1176,12,576);i.T7s(173);i.k5y(5901,5,16,5896,1177);i.T7s(161);var p=i.k5y(15,120840,8630,18,18);i.u4X(72);var g=i.k5y(26,595,9,7,16);i.T7s(3);var m=i.D45(9650,20);(l=r[h][n+(7674===c?u:d>=998.5?p==g?666.52:" ":m)+a.name])&&(s=null===s?l:Math.min(s,l),o=null===o?l:Math.max(o,l))}return[s,o]}if("Mo","ving Average ","T","ype","C","l","os","e","Sh","ort Cycle",r=a.chart.scrubbed,n=a.days,s=Number(a.inputs["Short Cycle"]),o=Number(a.inputs["Long Cycle"]),r.length<Math.max(n,s,o)+1)a.error=!0;else{(l=a.inputs.Field)&&"field"!=l||(l="Close"),.5,t.Studies.MA(a.inputs["Moving Average Type"],s,l,0,"_MACD1",e,a),t.Studies.MA(a.inputs["Moving Average Type"],o,l,0,"_MACD2",e,a),h=0,c=0;for(var v=a.startFrom;v<r.length;v++)"_P","F ","_","MAC","D ","_M","A","CD2 ",u=r[v],v<o-1||(d=u["_MACD1 "+a.name],p=u["_MACD2 "+a.name],(d||0===d||p||0===p)&&("_M","A","CD ",i.u4X(5),u["_MACD "+a.name]=i.D45(d,p)),g=u["_MACD "+a.name],v<o+(n-1)||(h=(m=y(n,v,"_MACD"))[1]>m[0]?100*(g-m[0])/(m[1]-m[0]):h,(g||0===g)&&("_","P","F ","_P","F"," ","_","P","F ",u["_PF "+a.name]=r[v-1]["_PF "+a.name]?r[v-1]["_PF "+a.name]+.5*(h-r[v-1]["_PF "+a.name]):h),f=u["_PF "+a.name],v<o+2*(n-1)||(c=(m=y(n,v,"_PF"))[1]>m[0]?100*(f-m[0])/(m[1]-m[0]):c,(f||0===f)&&("R","es","ul","t ",u["Result "+a.name]=r[v-1]["Result "+a.name]?r[v-1]["Result "+a.name]+.5*(c-r[v-1]["Result "+a.name]):c))))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):console.error("schaffTrendCycle feature requires first activating studies feature.")},re=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","5","F7C","B8","#E9","9B5","4",t.Studies.calculateShinohara=function(e,a){var r,n;if((r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{n={weakNum:0,weakDen:0,strongNum:0,strongDen:0},i.Y$C(),a.startFrom>1&&("_ac","cum","s ",n=t.clone(r[a.startFrom-1]["_accums "+a.name]));for(var s=a.startFrom;s<r.length;s++){if(n.weakNum+=r[s].High-r[s].Close,n.weakDen+=r[s].Close-r[s].Low,s>0){i.T7s(8);var o=i.D45(0,11,12);n.strongNum+=r[s].High-r[s-o].Close,i.T7s(75);var l=i.D45(12,4,7);n.strongDen+=r[s-l].Close-r[s].Low}if(s>=a.days){n.weakNum-=r[s-a.days].High-r[s-a.days].Close,n.weakDen-=r[s-a.days].Close-r[s-a.days].Low,i.T7s(58);var h=i.D45(118,14,2,102);if(r[s]["Weak Ratio "+a.name]=h*n.weakNum/n.weakDen,s>a.days){i.u4X(104);var c=i.D45(14,15,2,1);n.strongNum-=r[s-a.days].High-r[s-a.days-c].Close,i.T7s(73);var u=i.k5y(3,0,18,20);n.strongDen-=r[s-a.days-u].Close-r[s-a.days].Low,i.T7s(5);var d=i.k5y(77,9);r[s]["Strong Ratio "+a.name]=("100"|d)*n.strongNum/n.strongDen}}r[s]["_accums "+a.name]=t.clone(n)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):console.error("shinohara feature requires first activating studies feature.")},ne=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","ut","o","#","FF","00","00","au","to","#F","F00","00","f","ield","0 ","to"," ","100","a","u","t","o","Stochast","ic Momentum Index",t.Studies.calculateStochastics=function(e,i){var a,r,n,s,o,l,h,c=we;function u(e,t,i){var a,r,s,o,l;c.u4X(4),a=c.D45(i,1,e),c.u4X(174);var h=c.D45(11,4,4,2,10);r=Number.MAX_VALUE*-("1"|h),s=Number.MAX_VALUE;for(var u=a;u<=e;u++)o=n[u]["Close"==t?"Low":t],l=n[u]["Close"==t?"High":t],(o||0===o)&&(l||0===l)&&(s=Math.min(s,o),r=Math.max(r,l));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[e][t]-s)/(r-s)*100}if("%","K"," ","s","i","m","ple","simp","le","%","D Per","iods","%K Pe","ri","ods","C","lo","se",i.smooth||(i.smooth=i.inputs.Smooth),c.Y$C(),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{if((s=i.inputs["%K Smoothing Periods"])&&!i.inputs.Fast?i.smooth=!0:i.smooth&&(s=3),(o=i.inputs["%D Periods"])||(o=3),i.outputs.Fast){"S","lo","w",i.outputMap={},c.u4X(44),l=-c.k5y("1451177031",5),1339093242,h=2;for(var d=1;c.L3M(d.toString(),d.toString().length,55001)!==l;d++)"F","a","s","t",i.outputMap["Fast"*i.name]="Fast",h+=2;1339093242!==c.L3M(h.toString(),h.toString().length,36834)&&(i.outputMap["%K "+i.name]="Fast"),i.outputMap["%D "+i.name]="Slow"}for(var p=Math.max(r,i.startFrom);p<n.length;p++)null!==u(p,a,r)&&(n[p]["_Fast%K "+i.name]=u(p,a,r));t.Studies.MA("simple",i.smooth?s:1,"_Fast%K "+i.name,0,"%K",e,i),t.Studies.MA("simple",o,"%K "+i.name,0,"%D",e,i)}},t.Studies.calculateStochMomentum=function(e,i){var a,r,n,s,o,l,h,c,u=we;if("%","K ","_","D","HL2","_D","HL ","_","H","S","1","%D Per","iods",u.Y$C(),a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++){h=o[l],c=f(a,l),u.T7s(3);var d=u.k5y(0,1);u.u4X(8);var p=u.D45(14,16,4);h["_H "+i.name]=h.Close-(c[0]+c[d])/p,u.T7s(132);var g=u.D45(17,5,25,10,7);h["_DHL "+i.name]=c[g]-c[0]}for(t.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",e,i),t.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",e,i),t.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",e,i),t.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",e,i),l=a-1;l<o.length;l++){"_","DH","L2 ",u.T7s(57);var m=u.k5y(15,18,97,1);o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*m}t.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",e,i),i.zoneOutput="%K"}function f(e,t){var i,a;i=null,a=null;for(var r=t-e+1;r<=t;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return we.r8O(),this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")},se=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b8","2","c","0c",t.Studies.calculateSupertrend=function(e,i){var a,r,n,s,o,l,h=we;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.calculateStudyATR(e,i);for(var c=i.startFrom;c<a.length;c++)if("_Dir","ec","tion ",r=a[c]){h.T7s(1);var u=h.k5y(6,2,1);n=(r.High+r.Low)/u,s=i.inputs.Multiplier*r["ATR "+i.name],h.u4X(5),o=h.D45(n,s),h.u4X(3),l=h.D45(n,s),c&&("_Do","wnt","rend ","_Uptre","nd"," ","_U","ptrend"," ",a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.u4X(5),o=a[h.k5y(c,1)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.T7s(5),l=a[h.D45(c,1)]["_Downtrend "+i.name])),h.u4X(27),r["_Direction "+i.name]=h.D45(0,"1"),c&&("_Direct","ion ","_Direc","tion ",h.T7s(5),r["_Direction "+i.name]=a[h.k5y(c,1)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(r["_Direction "+i.name]=-1)),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l}h.Y$C(),i.outputMap={},i.outputMap["Trend "+i.name]=""}},t.Studies.displaySupertrend=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g;r=e.panels[i.panel],we.Y$C(),n=i.getContext(e),s=i.getYAxis(e),o={skipTransform:r.name!=i.chart.name,skipProjections:!0,label:e.preferences.labels,yAxis:s,highlight:i.highlight},l="Trend "+i.name;for(var m=0;r.chart.transformFunc&&s!=r.chart.yAxis&&m<a.length;m++)(h=a[m])&&h.transform&&(h.transform[l]=r.chart.transformFunc(e,r.chart,h[l]));for(e.plotDataSegmentAsLine(l,r,o,(function(e,t,a){if("_Di","re","ction ",we.Y$C(),t&&t["_Direction "+i.name]<0)return i.outputs.Downtrend;return i.outputs.Uptrend})),n.lineWidth=1,n.globalAlpha=1,e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),c=n.measureText("▲").width/2,u=0;u<a.length;u++)if("_D","i","recti","on ",a[u]&&a[u-1])if(a[u-1]["_Direction "+i.name]>a[u]["_Direction "+i.name]){"au","to",(d=t.Studies.determineColor(i.outputs.Downtrend))&&"auto"!=d&&!t.isTransparent(d)||(d=e.defaultColor),n.fillStyle=d,n.textBaseline="bottom",p=e.pixelFromPrice(a[u].High,r,s);for(var f=5;f<=45;f+=10)s.flipped?n.fillText("▲",e.pixelFromBar(u)-c,p+f):n.fillText("▼",e.pixelFromBar(u)-c,p-f)}else if(a[u-1]["_Direction "+i.name]<a[u]["_Direction "+i.name]){(d=t.Studies.determineColor(i.outputs.Uptrend))&&"auto"!=d&&!t.isTransparent(d)||(d=e.defaultColor),n.fillStyle=d,n.textBaseline="top",g=e.pixelFromPrice(a[u].Low,r,s);for(var y=5;y<=45;y+=10)s.flipped?n.fillText("▼",e.pixelFromBar(u)-c,g-y):n.fillText("▲",e.pixelFromBar(u)-c,g+y)}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:t.Studies.displaySupertrend,calculateFN:t.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")},oe=e=>{var t,i;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){t.Studies.calculateSwingIndex=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=we;if("Resu","lt ","Limit Mov","e Value",(null===(i=t.inputs["Limit Move Value"])||isNaN(i))&&(i=99999),a=t.chart.scrubbed,r=0,t.startFrom>1){p.u4X(175);var g=p.D45(299,15,18,10,8);r=a[t.startFrom-g]["Result "+t.name]}for(var m=Math.max(1,t.startFrom);m<a.length;m++){"S","wi","n","g",n=Math.abs(a[m].High-a[m-1].Close),s=Math.abs(a[m].Low-a[m-1].Close),o=Math.abs(a[m].High-a[m].Low),l=Math.abs(a[m-1].Close-a[m-1].Open),h=Math.max(n,s),c=Math.max(o,h),p.T7s(99),u=p.k5y(.25,l,c),c==n?(p.u4X(10),u-=p.D45(.5,s)):c==s&&(p.T7s(10),u-=p.k5y(.5,n)),p.u4X(60);var f=p.D45(17,3,11,8);p.u4X(3);var y=p.D45(0,1);d=50*(a[m].Close-a[m-f].Close+.5*(a[m].Close-a[m].Open)+.25*(a[m-1].Close-a[m-y].Open))/u*(h/i),0!==u&&0!==i||(d=0),"Swing"==t.type&&(r=0),r+=d,a[m]["Result "+t.name]=r}},-305275005,472638978,i=2;for(var a=1;-305275005!==we.L3M(a.toString(),a.toString().length,82512);a++)"A","cc"," Swi","ng",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Limit Move Value",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":990}},Swing:{name:"Acc Swing",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":986}}}),i+=2;472638978!==we.L3M(i.toString(),i.toString().length,63677)&&("Swing"," Index",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}}))}else console.error("swingIndex feature requires first activating studies feature.")},le=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","#","FF","000","0","aut","o",t.Studies.calculateTrendIntensity=function(e,i){var a,r,n,s,o,l,h,c,u=we;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ma",i.days,r,0,"_SMA",e,i),n=0,u.u4X(10),s=u.k5y("0",1),h=[],c=Math.ceil(i.days/2),o=Math.max(0,i.startFrom-c);o<a.length;o++)"T","II"," ",(a[o]["_SMA "+i.name]||0===a[o]["_SMA "+i.name])&&((l=a[o][r]-a[o]["_SMA "+i.name])<0?(u.T7s(176),s+=u.D45(l,1)):n+=l,h.push(l),h.length>c&&((l=h.shift())<0?(u.T7s(176),s-=u.D45(l,1)):n-=l),o<i.startFrom||(a[o]["TII "+i.name]=(d=n,p=s,u.Y$C(),Math.abs(p)<1e-8?100:(u.T7s(151),u.D45(100,1,p,d,100)))));var d,p;t.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")},he=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTRIX=function(e,i){var a,r,n,s,o,l,h,c=we;if("_MA","3"," ","_M","A1 ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r=i.name,c.T7s(3),n=["Close",c.k5y("_MA1 ",r),c.D45("_MA2 ",r),c.k5y("_MA3 ",r)];for(var u=0;u<n.length-1;u++)t.Studies.MA("exponential",i.days,n[u],0,"_MA"+(u+1).toString(),e,i);1379334033,-63382962,s=2;for(var d=1;1379334033!==c.L3M(d.toString(),d.toString().length,5513);d++)o=n[1],s+=2;-63382962!==c.L3M(s.toString(),s.toString().length,92471)&&(o=n[1]),o=n[3];for(var p=Math.max(1,i.startFrom);p<a.length;p++)"Res","ul","t"," ",c.u4X(5),(l=a[c.D45(p,1)][o])&&((h=a[p][o])||0===h)&&(c.T7s(3),a[p][c.D45("Result ",r)]=c.k5y(100,h,1,l,c.u4X(153)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:t.Studies.calculateTRIX}})):("trix feature requires first acti","va","ting ","studies feature.",console.error("trix feature requires first activating studies feature."))},ce=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTwiggsMoneyFlow=function(e,t){var a,r,n,s,o,l;if((a=t.chart.scrubbed).length<t.days)t.error=!0;else{i.Y$C(),r=0,n=0,i.u4X(5);var h=i.k5y(1,0);(s=a[t.startFrom-h])&&("_","s","umMF ",s["_sumMF "+t.name]&&(r=s["_sumMF "+t.name]),s["_sumV "+t.name]&&(n=s["_sumV "+t.name]));for(var c=Math.max(1,t.startFrom);c<a.length;c++){if("_","su","m","V ","_M","F","V ",o=Math.max(a[c-1].Close,a[c].High),l=Math.min(a[c-1].Close,a[c].Low),a[c]["_MFV "+t.name]=a[c].Volume*(2*a[c].Close-o-l)/(o-l==0?999999:o-l),c>t.days-1){i.u4X(43);var u=i.D45(17,1,18);r*=(t.days-u)/t.days,i.T7s(177);var d=i.k5y(18,19,15,15);n*=(t.days-d)/t.days}r+=a[c]["_MFV "+t.name],n+=a[c].Volume,c>t.days-1&&n&&(i.u4X(12),a[c]["Result "+t.name]=i.k5y(r,n>0?n:999999)),a[c]["_sumMF "+t.name]=r,a[c]["_sumV "+t.name]=n}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):console.error("twiggsMoneyFlow feature requires first activating studies feature.")},ue=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?t.Studies.calculateTypicalPrice?("Ty","pical"," ","Price",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")},de=e=>{var t;we.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateUlcerIndex=function(e,i){var a,r,n,s;if((a=i.chart.scrubbed).length<2*i.days-1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),we.r8O(),n=Math.max(i.startFrom,i.days-1);n<a.length;n++)a[n]["_PD2 "+i.name]=Math.pow(100*(a[n][r]/o(i.days,n,r)-1),2);for(t.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",e,i),n=Math.max(i.startFrom,2*(i.days-1));n<a.length;n++)"Result"," ","_","M","A"," ",((s=a[n]["_MA "+i.name])||0===s)&&(a[n]["Result "+i.name]=Math.sqrt(s))}function o(e,t,i){var r;r=null,we.Y$C();for(var n=t-e+1;n<=t;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:t.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):("ulcerIndex feature"," requir","es f","irst activating studies feature.",console.error("ulcerIndex feature requires first activating studies feature."))},pe=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o",t.Studies.calculateUltimateOscillator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=we;i=t.chart.scrubbed,a=[t.inputs["Cycle 1"],t.inputs["Cycle 2"],t.inputs["Cycle 3"]],x.T7s(13),r=-x.D45(32,"1865201039"),x.T7s(44),n=x.D45("2",2);for(var S=1;x.U3Y(S.toString(),S.toString().length,22804)!==r;S++)s=Math.max(a[2],a[6],a[5]),n+=2;if(-1809697466!==x.U3Y(n.toString(),n.toString().length,58396)&&(s=Math.max(a[6],a[4],a[7])),s=Math.max(a[0],a[1],a[2]),i.length<s+1)t.error=!0;else{x.u4X(178);var C=x.D45(10,7,20,17,399);o=a[0]*a[C],x.T7s(137);var w=x.k5y(26,8,12,20);l=a[0]*a[w],x.T7s(162);var k=x.k5y(14,20,13,0,201);x.T7s(179);var T=x.k5y(31,5,28,1);h=a[k]*a[T],c=[0,0,0],u=[0,0,0],t.startFrom&&(i[t.startFrom-1]["_accbp "+t.name]&&(c=i[t.startFrom-1]["_accbp "+t.name].slice()),i[t.startFrom-1]["_acctr "+t.name]&&(u=i[t.startFrom-1]["_acctr "+t.name].slice()));for(var D=Math.max(1,t.startFrom);D<i.length;D++){"_a","cctr ",d=Math.min(i[D].Low,i[D-1].Close),p=i[D].Close-d,x.T7s(5);var _=x.k5y(6,5);g=Math.max(i[D].High,i[D-_].Close)-d;for(var A=0;A<a.length;A++)if(c[A]+=p,u[A]+=g,D>a[A]){m=Math.min(i[D-a[A]].Low,i[D-a[A]-1].Close),f=i[D-a[A]].Close-m,x.u4X(3);var M=x.D45(0,1);y=Math.max(i[D-a[A]].High,i[D-a[A]-M].Close)-m,c[A]-=f,u[A]-=y}if(i[D]["_accbp "+t.name]=c.slice(),i[D]["_acctr "+t.name]=u.slice(),!(D<s)){x.u4X(156);var F=x.D45(2,35,15,17);x.u4X(58);var P=x.k5y(62,9,9,6);x.T7s(4);var L=x.D45(20,8,14);x.T7s(5);var O=x.k5y(37,5);v=h*c[0]/u[0]+l*c[F]/u[P]+o*c[L]/u["2"<<O],x.u4X(65),b=x.D45(h,l,o),x.u4X(112),i[D]["Result "+t.name]=x.D45(b,100,v)}}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):("ultimateOscillator feat","ure requ","ires first activating studies feature.",console.error("ultimateOscillator feature requires first activating studies feature."))},ge=e=>{var t,i=we;i.Y$C(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#f","ff","69","e","#","85c9","9e","#00a","fed","harm","onic","Valuati","on Lines",t.Studies.calculateValuationLines=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y;r="field"==t.inputs.Field?"Close":t.inputs.Field,n=t.inputs["Average Type"],s=t.inputs["Display Average"],o=t.inputs["Display 1 Standard Deviation (1σ)"],l=t.inputs["Display 2 Standard Deviation (2σ)"],h=t.inputs["Display 3 Standard Deviation (3σ)"],c=[];for(var v=0;v<a.length;++v)a[v]&&!isNaN(a[v][r])&&c.push(a[v][r]);if(u=function(e,t){var a,r,n,s,o,l;switch("ha","r","mon","ic",a=e.length,r=0,n=0,s=0,t){case"mean":for(n=a;s<a;++s)r+=e[s];break;case"harmonic":for(r=a;s<a;++s){i.u4X(137),n+=i.k5y(0,16,10,5)/e[s]}break;case"median":if(i.u4X(12),o=Math.floor(i.k5y(a,2)),l=e.slice().sort((function(e,t){return e>t?1:e<t?-1:0})),a%2==0){i.u4X(180);var h=i.D45(24,2,2,20,5);r=l[o]+l[o-h],n=2}else r=l[o],n=1}return i.T7s(12),i.D45(r,n)}(c,n),d=!(o||l||h)||function(e,t){var a,r;a=e.length,r=0;for(var n=0;n<a;++n)r+=Math.pow(e[n]-t,2);return i.u4X(12),Math.sqrt(i.k5y(r,a))}(c,u),t.data={Average:s?[u]:null,"1 Standard Deviation (1σ)":o?[u+d,u-d]:null,"2 Standard Deviation (2σ)":l?[u+2*d,u-2*d]:null,"3 Standard Deviation (3σ)":h?[u+3*d,u-3*d]:null},p=d,t.parameters||(t.parameters={}),h?(i.T7s(181),t.parameters.range=[i.D45(p,d,u,3),i.D45(p,u,d,3,i.T7s(182))]):l?(i.T7s(181),t.parameters.range=[i.k5y(p,d,u,2),i.D45(p,u,d,2,i.T7s(182))]):o?(i.T7s(75),t.parameters.range=[i.k5y(u,d,p),i.k5y(u,d,p,i.u4X(65))]):s&&(i.u4X(5),t.parameters.range=[i.k5y(u,p),i.k5y(u,p,i.u4X(3))]),t.panel){g=e.panels[t.panel],1572037487,1923038974,i.u4X(5),m=i.D45("2",0);for(var b=1;1572037487!==i.U3Y(b.toString(),b.toString().length,9021);b++)f=e.getYAxisByName(g,t.name),m+=2;1923038974!==i.U3Y(m.toString(),m.toString().length,15712)&&(f=e.getYAxisByName(g,t.name)),f&&(f.decimalPlaces=g.chart.yAxis.printDecimalPlaces,y={yAxis:f},e.calculateYAxisRange(g,f,t.parameters.range[0],t.parameters.range[1]),e.createYAxis(g,y),e.drawYAxis(g,y))}},t.Studies.displayValuationLines=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w;r=e.panels[a.panel],n=a.getYAxis(e),s=a.getContext(e),o=a.data,l=a.parameters.labels,h=a.inputs["Average Type"],c={mean:"AVG",median:"MED",harmonic:"HAVG"},u=e.canvasStyle("ciq-valuation-average-line"),d=e.canvasStyle("ciq-valuation-deviation-line"),i.T7s(71);var k=i.D45(5,102,18,2);for(var T in p=e.getCanvasFontSize("stx_yaxis")+3*k,i.r8O(),o)if(o[T])for(i.T7s(183),g=i.D45(T,"Average"),m=t.Studies.determineColor(a.outputs[T]),f=o[T],y=0;y<f.length;++y)"l","e","f","t",":"," ","d","as","h","ed","das","h","ed","no","n","e","s","ol","i","d",v=f[y],(b=e.pixelFromPrice(v,r,n))<=r.top||b>=r.yAxis.bottom||(C=g?{pattern:"none"!=u.borderStyle&&u.borderStyle||"solid",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:n}:{pattern:"none"!=d.borderStyle&&d.borderStyle||"dashed",lineWidth:parseFloat(d.borderWidth)||1,opacity:parseFloat(d.opacity)||1,yAxis:n},e.plotLine(r.left,r.right,b,b,m,"line",s,r,C),"yaxis"!==l?(b+=Math.floor(C.lineWidth/2))+p>=r.yAxis.bottom||(x=(g?c[h]+": ":T[0]+"σ: ")+e.formatYAxisPrice(v,r),S=s.measureText(x).width,w=r.right-S-3,n&&"left"==n.position&&(w=r.left+3),i.T7s(184),s.strokeText(x,w,i.k5y(p,"0.5",1,"2",b))):e.createYAxisLabel(r,e.formatYAxisPrice(v,r),b,m,null,s,n))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(e,i,a){t.Studies.calculateValuationLines(e,i,a),t.Studies.displayValuationLines(e,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1σ)":!1,"Display 2 Standard Deviation (2σ)":!1,"Display 3 Standard Deviation (3σ)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1σ)":"#e1e1e1","2 Standard Deviation (2σ)":"#85c99e","3 Standard Deviation (3σ)":"#fff69e"}}})):("valuationLines feature ","requires first activating studies featu","re.",console.error("valuationLines feature requires first activating studies feature."))},me=e=>{var t,i=we;i.r8O(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("im","pl","ie","d","h","ist","orica","l","Relative Vola","tility","H","istorical Vola","tilit","y",t.Studies.calculateRelativeVolatility=function(e,a){var r,n,s,o,l,h,c;if("Clo","s","e","Smoothing Peri","od",a.days=Number(a.inputs["Smoothing Period"]),r=Number(a.inputs["STD Period"]),(n=a.chart.scrubbed).length<a.days+r)a.error=!0;else{s=a.inputs.Field,i.Y$C(),s&&"field"!=s||(s="Close"),a.std=new t.Studies.StudyDescriptor(a.name,"sdev",a.panel),a.std.chart=a.chart,a.std.days=r,a.std.startFrom=a.startFrom,a.std.inputs={Field:s,"Standard Deviations":1,Type:"ma"},a.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,a.std),o=0,l=0,a.startFrom>1&&(o=n[a.startFrom-1]["_avgG "+a.name]||0,l=n[a.startFrom-1]["_avgL "+a.name]||0);for(var u=Math.max(a.startFrom,a.days);u<n.length;u++)if("_avg","G"," ",h=n[u],i.u4X(5),c=n[i.D45(u,1)],(h[s]||0===h[s])&&(c[s]||0===c[s])&&(h["_STD "+a.name]||0===h["_STD "+a.name])){if(h[s]>c[s]){"_","S","T","D ",o=(o*(a.days-1)+h["_STD "+a.name])/a.days,i.T7s(85);var d=i.k5y(15,16);l=l*(a.days-d)/a.days}else{i.u4X(73);var p=i.D45(19,4,7,29);l=(l*(a.days-p)+h["_STD "+a.name])/a.days,i.T7s(6);var g=i.D45(3,7,0,9);o=o*(a.days-g)/a.days}h["Rel Vol "+a.name]=(m=o)+(f=l)===0?(i.T7s(44),i.k5y("100",36)):(i.T7s(185),i.D45(f,m,100,m)),h["_avgG "+a.name]=o,h["_avgL "+a.name]=l}var m,f;a.zoneOutput="Rel Vol"}},t.Studies.calculateHistoricalVolatility=function(e,t){var a,r,n,s,o,l,h,c,u;if("Days Pe","r Yea","r","Standar","d Deviatio","ns",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if((r=t.inputs.Field)&&"field"!=r||(r="Close"),(n=t.inputs["Standard Deviations"])<0&&(n=1),s=100*Math.sqrt(function(t){isNaN(t)&&(t=365);if("day"==e.layout.interval)return t;if("week"==e.layout.interval)return 52;if("month"==e.layout.interval)return 12;return i.Y$C(),t}(t.inputs["Days Per Year"]))*n,o=[],l=0,t.startFrom>1){i.T7s(8);var d=i.D45(0,5,6);l=a[t.startFrom-d]["_state "+t.name][0],o=a[t.startFrom-1]["_state "+t.name][1].slice()}for(var p=Math.max(1,t.startFrom);p<a.length;p++){if(i.u4X(5),(h=a[i.D45(p,1)][r])&&(c=Math.log(a[p][r]/h),o.push(c),l+=c,p>=t.days)){u=0,l/=t.days;for(var g=0;g<o.length;g++)u+=Math.pow(o[g]-l,2);l*=t.days,l-=o.shift(),a[p]["Result "+t.name]=Math.sqrt(u/t.days)*s}a[p]["_state "+t.name]=[l,o.slice()]}}},t.Studies.calculateVolatilityCone=function(e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;var{periodicity:b,interval:x}=e.layout;if(r=a.study?a.study.name:a.type,!t.ChartEngine.isDailyInterval(x))return i.T7s(65),void(a.error=`${r}${i.D45(" is not supported for"," intraday periodiciti","es")}`);n=Number(a.inputs["Projection Bars"]),s=Number(a.inputs["Days Per Year"]),"week"==x&&(i.T7s(10),s=i.D45("52",1)),"month"==x&&(s=12),n=Math.min(n,s),o=a.chart.scrubbed,(l=a.inputs.Field)&&"field"!=l||(l="Close"),i.u4X(21);var S=i.k5y(1,13,118,9);for(h=o.length-S;h>0&&void 0===o[h][l];)h--;if(c=o[h].DT,u=o[h][l],d=o[h].implVol,i.T7s(186),p=i.k5y("60","1000",24,60),(g="historical"===a.inputs["Volatility source"])||void 0!==d){a._graphs=[68,95].filter(((e,t)=>(i.T7s(3),a.inputs[`Probability ${e}% (${i.D45(t,1)}σ)`]))),m=[],i.Y$C(),g||"day"!==x||1!==b?a._expiryDates=null:(f=o[h].expiryDates||Array.from(new Set(Object.values(o[h].optionChain||{}).map((({expiration:e})=>(i.r8O(),+(e&&e.value||e||0)))).filter((e=>e)))),a._expiryDates=f.map((e=>({dt:new Date(e)}))));for(var C=0;C<=n;C++)o[C+h]||m.push({[a.inputs["Probability 68% (1σ)"]&&"Result 68% Upper "+a.name||void 0]:0,[a.inputs["Probability 95% (2σ)"]&&"Result 95% Upper "+a.name||void 0]:0});a.appendFutureTicks(e,m),g&&t.Studies.calculateHistoricalVolatility(e,a),y=g?o[h][`Result ${a.name}`]/100:d,v=function(e){var t,r,n;i.u4X(3),t=o[i.D45(e,h)],i.Y$C(),r=s<365?e:Math.round((t.DT-c)/p),n=u*y*Math.sqrt(r/s);var{DT:l}=t;a._graphs.forEach((function(e){var t,a,{quote:r,diff:n,currentValue:s,sd:o}=this;i.u4X(99),i.r8O(),t=i.k5y(e<95?1:2,n,s),i.T7s(23),a=i.D45(s,n,e<95?1:2),i.u4X(83),r[`${i.k5y("lt","Re","su"," ")}${e}${i.k5y("% ","Uppe","r ",i.T7s(65))}${o.name}`]=t,r[`Result ${e}% Lower ${o.name}`]=a,(o._expiryDates||[]).forEach((e=>{var r;if(!(e.dt<c)&&(i.Y$C(),Math.abs(e.dt-l)<p)){e.Upper=t,e.Lower=a,456362320,710945211,r=2;for(var n=1;456362320!==i.L3M(n.toString(),n.toString().length,4080);n++)e.DT=l,r+=2;710945211!==i.U3Y(r.toString(),r.toString().length,19138)&&(e.DT=l)}}))}),{quote:t,diff:n,currentValue:u,sd:a})};for(var w=0;w<=n;w++)v(w);a.outputMap={},a._graphs.forEach((e=>{i.u4X(3),a.outputMap[`${i.D45("Res","ult ")}${e}${i.D45("Up","%"," ","per ",i.T7s(83))}${a.name}`]="Color",i.Y$C(),a.outputMap[`Result ${e}% Lower ${a.name}`]="Color"}))}else a.error=`${r} Study: Implied Volatility source data is not available`},t.Studies.displayVolatilityCone=function(e,a,r){var n,s,o,l,h;a.error||(n=t.Studies.determineColor(a.outputs.Color),(s=e.panels[a.panel])&&!s.hidden&&(o=a.getYAxis(e),l={topColor:n,bottomColor:n,skipTransform:s.name!=a.chart.name,topAxis:o,bottomAxis:o,opacity:.3},i.Y$C(),!a.highlight&&e.highlightedDraggable&&(l.opacity*=.3),a._graphs.forEach((i=>{l.topBand=`Result ${i}% Upper ${a.name}`,l.bottomBand=`Result ${i}% Lower ${a.name}`,a.inputs.Fill&&t.fillIntersecting(e,a.panel,l),t.Studies.displayIndividualSeriesAsLine(e,a,s,l.topBand,r),t.Studies.displayIndividualSeriesAsLine(e,a,s,l.bottomBand,r)})),a._expiryDates&&(h=e.chart.context,e.startClip(),h.beginPath(),a._expiryDates.forEach((t=>{var a,r,o;t.DT&&(a=e.pixelFromDate(t.DT),i.r8O(),r=e.pixelFromPrice(t.Upper,s),o=e.pixelFromPrice(t.Lower,s),e.plotLine({x0:a,x1:a,y0:r,y1:o,color:n,pattern:"dashed"}),h.moveTo(a,r),h.arc(a,r,3,0,2*Math.PI,!1),h.moveTo(a,o),h.arc(a,o,3,0,2*Math.PI,!1),h.fillStyle=n,h.fill())})),e.endClip())))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}},"Volatility Cone":{name:"Volatility Cone",overlay:!0,calculateFN:t.Studies.calculateVolatilityCone,seriesFN:t.Studies.displayVolatilityCone,inputs:{"Volatility source":["historical","implied"],"Probability 68% (1σ)":!0,"Probability 95% (2σ)":!1,"Projection Bars":20,"Days Per Year":[252,365],Field:"field",Period:10,"Standard Deviations":1,Fill:!0},outputs:{Color:"#3a627d"},panelSelect:!1,attributes:{"Volatility source":{hidden:function(){return!t.Studies.impliedVolatilityAvailable}},Field:{hidden:function(){return i.r8O(),"Implied"===this.inputs["Volatility source"]}},"Standard Deviations":{hidden:function(){return i.Y$C(),"I","mpli","ed","Implied"===this.inputs["Volatility source"]}},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0},underlayEnabled:{hidden:!0}}}})):console.error("volatilityIndex feature requires first activating studies feature.")},fe=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","b","6","4a96","Vol","ume P","rof","ile",t.Studies.displayVolumeProfile=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=we;if(e&&e.chart.dataSet){r="stx_volume_profile",n="stx-",n+="floa",n+="t-date",s=i.getContext(e);var{chart:S}=e,{panel:C}=S,{yAxis:w}=C,{flipped:k}=w,{highValue:T,lowValue:D}=S,{displayBorder:_=i.inputs["Display Border"],displayVolume:A=i.inputs["Display Volume"],widthPercentage:M=i.inputs["Width Percentage"],numberBars:F=i.inputs["Price Buckets"]}=i.parameters;if(!1!==_&&(_=!0),!0!==A&&(A=!1),(!M||M<0)&&(M=.25),x.r8O(),(!F||F<0)&&(x.T7s(44),F=x.D45("30",28)),F=Math.ceil(F),x.u4X(29),0!==(o=x.D45(T,F,D))){l=[],k&&([T,D]=[D,T]),h=k?-1:1;for(var P=D,L=0;L<=F;P+=o*h,L++)l.push([P,0]);c=0;for(var O=0;O<a.length;O++)if(null!==(u=a[O])){var{Volume:E}=u;if(E){var{High:I,Low:N}=u.transform||u;d=[],x.T7s(44),p=l[0][x.k5y("0",0)],g=null;for(var H=1;H<l.length;H++)g=l[H][0],(N>=p&&N<=g||I>=p&&I<=g||N<p&&I>g)&&d.push(H),p=g;if(d.length){m=E/d.length;for(var V=0;V<d.length;V++)(f=l[d[V]][1]+=m)>c&&(c=f)}}}0!==c?(e.setStyle(r,"color",t.Studies.determineColor(i.outputs["Bars Color"])),y=e.getCanvasFontSize(n),v=e.canvasStyle(r).borderTopColor,b=_&&!t.isTransparent(v),e.canvasFont(n,s),R(),b&&R(!0),s.globalAlpha=1):e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"))}}function R(a){var n,o,h,u,d,p,g,m,f,b,C,k,T,D,_;e.canvasColor(r),s.beginPath(),o=t=>(x.Y$C(),n(e.pixelFromTransformedValue(t))),h=(n=e=>(x.r8O(),Math.round(e)))(S.width*M),x.Y$C(),d=u=n(S.right)-2.5;for(var[F]=l[0],P=1;P<l.length;P++){var[L,O]=l[P];if(O){x.u4X(112),p=x.k5y(c,O,h),x.u4X(187);var E=x.D45(11,2,14,3,2);g=n(u-p)+(a?-.5*E:0),x.u4X(73);var I=x.k5y(3,20,20,42);if(m=o(L)+(a?.5:I),f=o(F)+(a?.5:0),b=Math.max(m,w.top),C=Math.min(f,w.bottom),b<=w.bottom&&C>=w.top)if(s.moveTo(u,C),s.lineTo(u,b),s.lineTo(g,b),s.lineTo(g,C),a)(1==P||d>g)&&s.lineTo(d,C);else if(s.lineTo(u,C),A&&(k=t.condenseInt(O),x.u4X(5),T=x.k5y(C,b),y<=T-2)){"t","o","p",D=void 0;try{({width:D}=s.measureText(k))}catch(e){x.u4X(27),D=x.D45(0,"0")}s.textBaseline="top",_=s.fillStyle,s.fillStyle=v,x.u4X(75),s.fillText(k,x.D45(g,D,3),x.k5y(b,"2",2,y,T,x.u4X(188))),s.fillStyle=_}d=g}else d=u;F=L}!i.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),a||s.fill(),s.strokeStyle=v,a&&s.stroke(),s.closePath()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:t.Studies.displayVolumeProfile,calculateFN:null,inputs:{"Display Border":!0,"Display Volume":!1,"Price Buckets":30,"Width Percentage":.25},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")},ye=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("n","o","ne","Tr","ade Volum","e ","Index","#","FF00","00","a","u","to","m","a","a","u","to","Negative Volume"," ","In","dex",t.Studies.calculateOnBalanceVolume=function(e,t){var i,a,r,n,s,o,l,h;(i=t.inputs.Field)&&"field"!=i||(i="Close"),r=!1,(a=t.inputs["Min Tick Value"])||0===a||(r=!0,a=0),n=t.chart.scrubbed,s=0;for(var c=t.startFrom;c<n.length;c++)o=n[c],c&&o[i]&&(n[c-1][i]&&(we.T7s(5),l=n[we.k5y(c,1)]),l&&(o[i]-l[i]>a?s=1:l[i]-o[i]>a?s=-1:r&&(s=0),(h=l["Result "+t.name])||(h=0),h+=o.Volume*s,o["Result "+t.name]=h))},t.Studies.calculatePriceVolumeTrend=function(e,t){var i,a,r,n,s=we;if("Cl","ose",(i=t.inputs.Field)&&"field"!=i||(i="Close"),a=t.chart.scrubbed,r=0,t.startFrom>1){1665491586,-1824315570,n=2;for(var o=1;1665491586!==s.L3M(o.toString(),o.toString().length,97867);o++){s.u4X(189);var l=s.D45(17,11,19,19,6);r=a[t.startFrom-l]["Result "+t.name],n+=2}if(-1824315570!==s.U3Y(n.toString(),n.toString().length,67448)){s.u4X(190);var h=s.D45(13,97,4,7,0);r=a[t.startFrom*h][""%t.name]}}for(var c=Math.max(1,t.startFrom);c<a.length;c++)if(a[c][i]&&a[c-1][i]){s.u4X(191);var u=s.k5y(5,0,17,52,15);r+=a[c].Volume*(a[c][i]-a[c-u][i])/a[c-1][i],a[c]["Result "+t.name]=r}},t.Studies.calculateVolumeIndex=function(e,i){var a,r,n,s,o,l,h,c=we;if("In","dex"," ","Moving Average Ty","pe",(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.chart.scrubbed).length<i.days+1){98994291,2017557222,2;for(var u=1;98994291!==c.L3M(u.toString(),u.toString().length,55211);u++)return void(i.error=!1);if(2017557222!==c.L3M(2..toString(),2..toString().length,89541))return void(i.error=!0)}if(n=100,i.startFrom>1){c.T7s(5);var d=c.D45(1,0);n=r[i.startFrom-d]["Index "+i.name]}for(var p=Math.max(1,i.startFrom);p<r.length;p++)"In","d","ex ",s=r[p][a],o=r[p].Volume,s&&"object"==typeof s&&(o=s.Volume,s=s[i.subField]),c.u4X(5),l=r[c.k5y(p,1)][a],h=r[p-1].Volume,l&&"object"==typeof l&&(h=l.Volume,l=l[i.subField]),s&&l&&(("Pos Vol"==i.type&&o>h||"Neg Vol"==i.type&&o<h)&&(c.u4X(12),n*=c.D45(s,l)),r[p]["Index "+i.name]=n);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:t.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(e,i){we.Y$C(),t.Studies.calculateRateOfChange?t.Studies.calculateRateOfChange(e,i):("Volume Rate of Change st","udy requires first activating m","omentum feature.",console.error("Volume Rate of Change study requires first activating momentum feature."),t.Studies.calculateRateOfChange=function(e,t){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",heightFactor:.25},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(e,t){e.layout.volumeUnderlay=!1,e.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},ve=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0",".0","1","a","u","t","o","Vortex"," Indi","c","ator",t.Studies.calculateVortex=function(e,i){var a,r,n,s,o,l,h,c,u=we;if(a=i.chart.scrubbed,r=i.days,u.Y$C(),a.length<r+1)i.error=!0;else{n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&(n=t.clone(a[i.startFrom-1]["_totals "+i.name]));for(var d=Math.max(i.startFrom,1);d<a.length;d++)"_","t","otals ","_Tr","ue"," Range ",s=a[d],u.T7s(5),o=a[u.D45(d,1)],l=Math.abs(s.High-o.Low),h=Math.abs(s.Low-o.High),c=Math.max(s.High,o.Close)-Math.min(s.Low,o.Close),n.tr+=c,n.vmPlus+=l,n.vmMinus+=h,d>r&&("_VMM","inus"," ",u.T7s(5),n.tr-=a[u.D45(d,r)]["_True Range "+i.name],u.u4X(5),n.vmPlus-=a[u.D45(d,r)]["_VMPlus "+i.name],u.T7s(5),n.vmMinus-=a[u.D45(d,r)]["_VMMinus "+i.name]),s["_True Range "+i.name]=c,s["_VMPlus "+i.name]=l,s["_VMMinus "+i.name]=h,d>=r&&("-","V","I"," ",s["+VI "+i.name]=n.vmPlus/n.tr,s["-VI "+i.name]=n.vmMinus/n.tr),s["_totals "+i.name]=t.clone(n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):console.error("vortex feature requires first activating studies feature.")},be=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","8bc1","76","Marke","t Facilitation I","ndex",t.Studies.calculateMFI=function(e,t){var i,a,r,n,s,o;if(i=t.chart.scrubbed,r=0,(n=t.inputs["Scale Factor"])||(n=t.study.inputs["Scale Factor"]),s=Math.pow(10,Number(n)),t.startFrom>1){we.u4X(4);var l=we.D45(17,18,0);r=i[t.startFrom-l]["_high "+t.name]}for(o=t.startFrom;o<i.length;o++)i[o]&&i[o].Volume&&(i[o][t.name+"_hist"]=a=s*(i[o].High-i[o].Low)/i[o].Volume,i[o]["_high "+t.name]=r=Math.max(r,a));t.outputMap={},t.outputMap[t.name+"_hist"]=""},t.Studies.displayMFI=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,g,m=we;m.r8O(),r=e.panels[i.panel],n=i.getContext(e),o=(s=i.getYAxis(e)).flipped?s.top:s.bottom,m.u4X(5);var f=m.k5y(36,34);(l=e.layout.candleWidth-f)<2&&(l=1),h=t.Studies.determineColor(i.outputs.Green),c=t.Studies.determineColor(i.outputs.Fade),u=t.Studies.determineColor(i.outputs.Fake),d=t.Studies.determineColor(i.outputs.Squat),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var y=0;y<a.length;y++)"_","hi","st","_","hi","s","t","_h","i","s","t",p=a[y],m.u4X(5),(g=a[m.D45(y,1)])||(g=e.getPreviousBar(e.chart,i.name+"_hist",y)),p&&(g&&(g[i.name+"_hist"]<p[i.name+"_hist"]?g.Volume<p.Volume?n.fillStyle=h:g.Volume>p.Volume&&(n.fillStyle=u):g[i.name+"_hist"]>p[i.name+"_hist"]&&(g.Volume<p.Volume?n.fillStyle=d:g.Volume>p.Volume&&(n.fillStyle=c))),p.candleWidth&&(l=Math.floor(Math.max(1,p.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(y,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(p[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:t.Studies.displayMFI,calculateFN:t.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},Se.Pz,Se.rx,Se.hM,Se.$$,Se.$I;var ke=i(261);function Te(e={}){let t=De();console.log("getConfig",t);let i={initialSymbol:{symbol:t&&t.symbolObject&&t.symbolObject.dispSymbol,exc:t&&t.symbolObject&&t.symbolObject.exc,asset:t&&t.symbolObject&&t.symbolObject.asset,streamSym:t&&t.symbolObject&&t.symbolObject.streamSym,instrument:t&&t.symbolObject&&t.symbolObject.instrument,id:t&&t.symbolObject&&t.symbolObject.id,precision:t&&t.symbolObject&&t.symbolObject.precision,platform:t&&t.platform,appID:t&&t.appID,sessionID:t&&t.sessionID,intradayURL:t&&t.intradayURL,historicalURL:t&&t.historicalURL,symbolSearchURL:t&&t.symbolSearchURL,socketURL:t&&t.socketURL,publicURL:t&&t.publicURL,tradingURL:t&&t.tradingURL,view:t&&t.view,deviceType:t&&t.deviceType,userMode:t&&t.userMode,selectedTheme:t&&t.selectedTheme,encryptionKey:t&&t.encryptionKey,isEncryptionEnabled:t&&t.isEncryptionEnabled,chartID:t&&t.symbolObject.chartID},root:document,initialData:void 0,enabledAddOns:{dataLoader:!0,extendedHours:!0,fullScreen:!0,inactivityTimer:!0,rangeSlider:!0,shortcuts:!0,tableView:!0,tooltip:!0},onNewSymbolLoad:{removeSeries(e){return"study"!==e.parameters.bucket},loadError(e,t){}},restore:!0,lookupDriver:xe.Pz.ChartEngine.Driver.Lookup.ChartIQ,hotkeyConfig:{hotkeys:[{label:"Pan chart up",action:"up",options:{percent:.02},commands:["ArrowUp","Up"]},{label:"Pan chart down",action:"down",options:{percent:.02},commands:["ArrowDown","Down"]},{label:"Pan chart right",action:"right",options:{bars:1},commands:["ArrowRight","Right"]},{label:"Pan chart left",action:"left",options:{bars:1},commands:["ArrowLeft","Left"]},{label:"Pan chart up fast",action:"up",options:{percent:.2},commands:["Shift+ArrowUp","Shift+Up"]},{label:"Pan chart down fast",action:"down",options:{percent:.2},commands:["Shift+ArrowDown","Shift+Down"]},{label:"Pan chart right fast",action:"right",options:{bars:10},commands:["Shift+ArrowRight","Shift+Right"]},{label:"Pan chart left fast",action:"left",options:{bars:10},commands:["Shift+ArrowLeft","Shift+Left"]},{label:"Page chart right",action:"pageRight",commands:["Alt+ArrowRight","Alt+Right","PageUp"]},{label:"Page chart left",action:"pageLeft",commands:["Alt+ArrowLeft","Alt+Left","PageDown"]},{label:"Zoom in x-axis",action:"zoomInXAxis",commands:["NumpadAdd","="]},{label:"Zoom out x-axis",action:"zoomOutXAxis",commands:["NumpadSubtract","-"]},{label:"Zoom in y-axis",action:"zoomInYAxis",commands:["+"]},{label:"Zoom out y-axis",action:"zoomOutYAxis",commands:["_"]},{label:"Toggle crosshair",action:"toggleCrosshairs",commands:["Alt+Backslash","Alt+\\","Alt+Þ"]},{label:"Toggle continuous zoom",action:"toggleContinuousZoom",commands:["Alt+Digit0","Alt+0"],extension:"continuousZoom"},{label:"Tab to next",action:"keyboardNavigateNext",commands:["Tab"]},{label:"Tab to previous",action:"keyboardNavigatePrevious",commands:["Shift+Tab"]},{label:"Select at tab",action:"keyboardNavigateClick",commands:["Enter"]},{label:"Pan to home",action:"home",commands:["Home"]},{label:"Pan to start of loaded data",action:"end",commands:["End"]},{label:"Delete a highlighted item or the active drawing",action:"delete",commands:["Backspace","Delete","Del"]},{label:"Close an open menu / dialog box or undo the active drawing",action:"escape",commands:["Escape","Esc"]},{label:"Symbol Lookup",action:"symbolLookup",commands:["Shift+Alt+KeyL"],ariaLabel:"Opens main symbol lookup for chart"},{label:"Table view",action:"tableView",commands:["Alt+KeyK"],extension:"tableView",ariaLabel:"Opens chart data in table format"},{label:"Range Slider",action:"rangeSlider",commands:["Shift+Alt+KeyR"],extension:"rangeSlider"},{label:"Extended Hours",action:"extendedHours",commands:["Shift+Alt+KeyX"],extension:"extendedHours"},{label:"Keyboard Shortcuts",action:"shortcuts",commands:["Shift+Alt+Slash","Shift+Alt+?"],extension:"shortcuts"},{label:"Outliers",action:"outliers",commands:["Shift+Alt+KeyO"],extension:"outliers"},{label:"Market Depth",action:"marketDepth",commands:["Shift+Alt+KeyD"],extension:"marketDepth"},{label:"L2 Heat Map",action:"l2HeatMap",commands:["Shift+Alt+KeyM"],extension:"marketDepth"},{label:"Import Data",action:"dataLoader",commands:["Alt+KeyI"],extension:"dataLoader"},{label:"Trade From Chart",action:"tfc",commands:["Shift+Alt+KeyP"],extension:"tfc"}],keysToRepeat:["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","-","_","=","+"]},systemMessages:{copytoclipboard:{message:"Copied to clipboard.",type:"info",displayTime:5},logdeactivated:{message:"Log scale has been deactivated due to a zero or negative value in your visible dataset.",type:"warning"}},marketFactory:calMarketFactory,chartEngineParams:{preferences:{labels:!1,currentPriceLine:!0,whitespace:0},layout:{periodicity:5,interval:1,timeUnit:"minute"},crosshairXOffset:0,crosshairYOffset:0},quoteFeeds:[{quoteFeed:e.quoteFeed,behavior:{refreshInterval:1,bufferSize:200}}],selector:{sideNav:".ciq-sidenav",sidePanel:"cq-side-panel",lookupComponent:".ciq-search cq-lookup",studyLegend:"cq-study-legend",timeSpanEvent:".stx-markers cq-item.span-event",markersMenuItem:".stx-markers cq-item",themesMenuItem:"cq-themes",tfcTradePanel:".stx-trade-panel",tfcToggle:".stx-trade"},themes:{builtInThemes:{"ciq-day":"Day","ciq-night":"Night"},defaultTheme:"ciq-day",nameValueStore:e.nameValueStore},displayStyleIcons:!0,menuChartStyle:[{type:"radio",label:"Candle",cmd:"Layout.ChartType()",iconCls:"candle",value:"candle"},{type:"radio",label:"Bar",cmd:"Layout.ChartType()",iconCls:"bar",value:"bar"},{type:"radio",label:"Colored Bar",cmd:"Layout.ChartType()",iconCls:"colored-bar",value:"colored_bar"},{type:"radio",label:"Line",cmd:"Layout.ChartType()",iconCls:"line",value:"line"},{type:"radio",label:"Vertex Line",cmd:"Layout.ChartType()",iconCls:"vertex-line",value:"vertex_line"},{type:"radio",label:"Step",cmd:"Layout.ChartType()",iconCls:"step",value:"step"},{type:"radio",label:"Mountain",cmd:"Layout.ChartType()",iconCls:"mountain",value:"mountain"},{type:"radio",label:"Baseline",cmd:"Layout.ChartType()",iconCls:"baseline-delta",value:"baseline_delta"},{type:"radio",label:"Hollow Candle",cmd:"Layout.ChartType()",iconCls:"hollow-candle",value:"hollow_candle"},{type:"radio",label:"Volume Candle",cmd:"Layout.ChartType()",iconCls:"volume-candle",value:"volume_candle"},{type:"radio",label:"Colored HLC Bar",cmd:"Layout.ChartType()",iconCls:"colored-hlc",value:"colored_hlc"},{type:"radio",label:"Scatterplot",cmd:"Layout.ChartType()",iconCls:"scatterplot",value:"scatterplot"},{type:"radio",label:"Histogram",cmd:"Layout.ChartType()",iconCls:"histogram",value:"histogram"}],menuChartAggregates:[{type:"separator"},{type:"radio",label:"Heikin Ashi",cmd:"Layout.ChartType()",iconCls:"heikinashi",value:"heikinashi"},{type:"radio",label:"Kagi",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('kagi')",iconCls:"kagi",value:"kagi"},{type:"radio",label:"Line Break",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('linebreak')",iconCls:"linebreak",value:"linebreak"},{type:"radio",label:"Renko",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('renko')",iconCls:"renko",value:"renko"},{type:"radio",label:"Range Bars",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('rangebars')",iconCls:"rangebars",value:"rangebars"},{type:"radio",label:"Point & Figure",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('pandf')",iconCls:"pandf",value:"pandf"}],menuChartPreferences:[{type:"checkbox",label:"Range Selector",cmd:"Layout.RangeSlider()",cls:"rangeslider-ui"},{type:"checkbox",label:"Extended Hours",cmd:"Layout.ExtendedHours()",cls:"extendedhours-ui"},{type:"checkbox",label:"Animation",cmd:"Layout.Animation()",cls:"animation-ui"},{type:"checkbox",label:"Hide Outliers",cmd:"Layout.Outliers()",cls:"outliers-ui"},{type:"checkbox",label:"Market Depth",cmd:"Layout.MarketDepth()",cls:"marketdepth-ui"},{type:"checkbox",label:"L2 Heat Map",cmd:"Layout.L2Heatmap()",cls:"marketdepth-ui"}],menuYAxisPreferences:[{type:"checkbox",label:"Log Scale",cmd:"Layout.ChartScale('log')"},{type:"checkbox",label:"Invert",cmd:"Layout.FlippedChart()"}],menuViewConfig:{},menuStudiesConfig:{excludedStudies:{stochastics:!0},alwaysDisplayDialog:{ma:!0,AVWAP:!0}},drawingTools:[{type:"dt",tool:"annotation",group:"text",label:"Annotation",shortcut:"w"},{type:"dt",tool:"arrow",group:"markings",label:"Arrow",shortcut:"a"},{type:"dt",tool:"line",group:"lines",label:"Line",shortcut:"l"},{type:"dt",tool:"horizontal",group:"lines",label:"Horizontal",shortcut:"o"},{type:"dt",tool:"vertical",group:"lines",label:"Vertical",shortcut:"p"},{type:"dt",tool:"rectangle",group:"markings",label:"Rectangle",shortcut:"r"},{type:"dt",tool:"segment",group:"lines",label:"Segment"},{type:"dt",tool:"average",group:"statistics",label:"Average Line"},{type:"dt",tool:"callout",group:"text",label:"Callout"},{type:"dt",tool:"channel",group:"lines",label:"Channel"},{type:"dt",tool:"check",group:"markings",label:"Check"},{type:"dt",tool:"continuous",group:"lines",label:"Continuous"},{type:"dt",tool:"crossline",group:"lines",label:"Crossline"},{type:"dt",tool:"elliottwave",group:"technicals",label:"Elliott Wave"},{type:"dt",tool:"ellipse",group:"markings",label:"Ellipse",shortcut:"e"},{type:"dt",tool:"freeform",group:"lines",label:"Doodle"},{type:"dt",tool:"fibprojection",group:"fibonacci",label:"Fib Projection"},{type:"dt",tool:"fibarc",group:"fibonacci",label:"Fib Arc"},{type:"dt",tool:"fibfan",group:"fibonacci",label:"Fib Fan"},{type:"dt",tool:"fibtimezone",group:"fibonacci",label:"Fib Time Zone"},{type:"dt",tool:"focusarrow",group:"markings",label:"Focus"},{type:"dt",tool:"gannfan",group:"technicals",label:"Gann Fan"},{type:"dt",tool:"gartley",group:"technicals",label:"Gartley"},{type:"dt",tool:"heart",group:"markings",label:"Heart"},{type:"dt",tool:"pitchfork",group:"technicals",label:"Pitchfork"},{type:"dt",tool:"quadrant",group:"statistics",label:"Quadrant Lines"},{type:"dt",tool:"ray",group:"lines",label:"Ray"},{type:"dt",tool:"regression",group:"statistics",label:"Regression Line"},{type:"dt",tool:"retracement",group:"fibonacci",label:"Fib Retracement"},{type:"dt",tool:"star",group:"markings",label:"Star"},{type:"dt",tool:"speedarc",group:"technicals",label:"Speed Resistance Arc"},{type:"dt",tool:"speedline",group:"technicals",label:"Speed Resistance Line"},{type:"dt",tool:"timecycle",group:"technicals",label:"Time Cycle"},{type:"dt",tool:"tirone",group:"statistics",label:"Tirone Levels"},{type:"dt",tool:"trendline",group:"text",label:"Trend Line"},{type:"dt",tool:"volumeprofile",group:"statistics",label:"Volume Profile"},{type:"dt",tool:"xcross",group:"markings",label:"Cross"}],drawingToolGrouping:["All","Favorites","Text","Statistics","Technicals","Fibonacci","Markings","Lines"],menuRendering:{separator:()=>"\n\t\t\t\t\t<cq-separator></cq-separator>",item:({label:e,cmd:t})=>`\n\t\t\t\t\t<cq-item stxtap="${t}">${e}</cq-item>`,radio:({label:e,cmd:t,cls:i})=>`\n\t\t\t\t\t<cq-item\n\t\t\t\t\t\t${i?`class="${i}"`:""}\n\t\t\t\t\t\tstxsetget="${t}">${e}<span class="ciq-radio"><span></span></span>\n\t\t\t\t\t</cq-item>`,checkbox:({label:e,cmd:t,cls:i})=>`\n\t\t\t\t\t<cq-item\n\t\t\t\t\t\t${i?`class="${i}"`:""}\n\t\t\t\t\t\tstxsetget="${t}">${e}<span class="ciq-checkbox ciq-active"><span></span></span>\n\t\t\t\t\t</cq-item>`,radioOptions:({label:e,cmd:t,options:i,cls:a})=>`\n\t\t\t\t\t<cq-item ${a?`class="${a}"`:""}>\n\t\t\t\t\t\t<span class="ciq-edit" stxtap="${i}"></span>\n\t\t\t\t\t\t<div stxsetget="${t}">${e}<span class="ciq-radio"><span></span></span></div>\n\t\t\t\t\t</cq-item>`,range:({label:e,cmd:t,cls:i})=>`\n\t\t\t\t\t<div ${i?`class="${i}"`:""} stxtap="${t}">${e}</div>\n\t\t\t\t`,dt:({tool:e,group:t,label:i,shortcut:a})=>`\n\t\t\t\t\t<cq-item\n\t\t\t\t\t\tclass="ciq-tool"\n\t\t\t\t\t\tcq-tool="${e}"\n\t\t\t\t\t\t${a?`cq-tool-shortcut="${a}"`:""}\n\t\t\t\t\t\tcq-tool-group="${t}"\n\t\t\t\t\t\tstxtap="tool('${e}')"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class="icon ${e}"></span>\n\t\t\t\t\t\t<label>${i}</label>\n\t\t\t\t\t</cq-item>\n\t\t\t\t`},getMenu(e,t){let i=this[e];if(i)return!0===t&&(t=(e,t)=>e.label>t.label?1:-1),"function"==typeof t&&(i=i.sort(t)),this[e].map((e=>this.menuRendering[e.type||"item"](e,this)))},addOns:{tooltip:{ohl:!0,volume:!0,series:!0,studies:!0},inactivityTimer:{minutes:30},animation:{animationParameters:{tension:.3}},rangeSlider:{},fullScreen:{},extendedHours:{filter:!0},continuousZoom:{periodicities:[{period:1,interval:"month"},{period:1,interval:"week"},{period:1,interval:"day"},{period:8,interval:30},{period:1,interval:30},{period:5,interval:1},{period:1,interval:1},{period:10,interval:1,timeUnit:"second"},{period:1,interval:1,timeUnit:"second"}],boundaries:{maxCandleWidth:15,minCandleWidth:3}},forecasting:{moduleName:"PlotComplementer",id:"forecast",decorator:{symbol:"_fcst",display:" Forecast"},renderingParameters:{chartType:"channel",opacity:.5,pattern:"dotted"},quoteFeed:e.forecastQuoteFeed,behavior:{refreshInterval:60}},outliers:{},tableView:{},dataLoader:{},shortcuts:{}},plugins:{timeSpanEventPanel:{menuItemSelector:".stx-markers cq-item.span-event",loadSample:!0,showTooltip:!0,infoPanel:{durationEvent:"main",spanEvent:"main",singleEvent:"main"}},marketDepth:{volume:!0,mountain:!0,step:!0,record:!0,height:"50%",orderbook:!0,interaction:!0},tfc:{moduleName:"TFC"},crossSection:{pointFreshnessTimeout:1,enableTimeSeries:!0,timelineDateSelector:{height:95,useNotifications:!0},postInstall({uiContext:e,extension:t}){const{stx:{crossSection:i}}=e;xe.Pz.getFn("UI.CurveEdit")(null,e,this),xe.Pz.getFn("CrossSection.HUD")(null,e),this.timelineDateSelector&&xe.Pz.getFn("CrossSection.TimelineDateSelector")(Object.assign({crossSection:i},this.timelineDateSelector));const a=e.topNode.querySelector("cq-datepicker");a&&a.registerCallback((e=>t.setCurveDate(e)))}},visualEarnings:{menuContainer:".ciq-dropdowns"}},channels:{crosshair:"layout.crosshair",headsUp:"layout.headsUp",sidenav:"layout.sidenav",tableView:"channel.tableView",drawing:"channel.drawing",drawingPalettes:"channel.drawingPalettes",breakpoint:"channel.breakpoint",containerSize:"channel.containerSize",sidenavSize:"channel.sidenavSize",sidepanelSize:"channel.sidepanelSize",pluginPanelHeight:"channel.pluginPanelHeight",tfc:"channel.tfc",tc:"channel.tc",analystviews:"channel.analystviews",technicalinsights:"channel.technicalinsights",dataLoader:"channel.dataLoader",dialog:"channel.dialog",keyboardNavigation:"channel.keyboardNavigation"},dialogs:{dataLoader:{tag:"cq-data-dialog"},view:{tag:"cq-view-dialog"},aggregation:{tag:"cq-aggregation-dialog"},timezone:{tag:"cq-timezone-dialog"},language:{tag:"cq-language-dialog"},theme:{tag:"cq-theme-dialog"},study:{tag:"cq-study-dialog",attributes:{"cq-study-axis":!0,"cq-study-panel":"alias"}},fibSettings:{tag:"cq-fib-settings-dialog"},volumeprofileSettings:{tag:"cq-volumeprofile-settings-dialog"},share:{tag:"cq-share-dialog"}},eventMarkersImplementation:e.markerFeed,scrollbarStyling:{refresh(t,i={suppressScrollX:!0}){"function"==typeof e.scrollStyle&&(t.__ps||(t.__ps=new e.scrollStyle(t,i),t.__ps.scrollbarX.setAttribute("tabindex",-1),t.__ps.scrollbarY.setAttribute("tabindex",-1)),t.__ps.update(t))}},multiChartCopySymbol:!0,nameValueStore:e.nameValueStore,onWebComponentsReady:()=>{let e=chartData?De(chartData):De();if(e){Pe(e.symbolObject.exc,e.symbolObject.chartID,e.userMode);let t=e.symbolObject.instrument.toLowerCase();console.log("instrument :",t);let i=e.symbolObject.chartID?e.symbolObject.chartID:"chart0";Le(localStorage.getItem(`activeSpan-${i}`)),"landscape"!==e.view?$("cq-context").addClass("potraitView").removeClass("landscapeView"):$("cq-context").addClass("landscapeView").removeClass("potraitView"),"web"===e.deviceType&&("chart_iframe"===e.chartElement||"portrait-expand"===e.view||"index"===e.symbolObject.asset?($(".bfsl-order").css({display:"none"}),$(".bfsl-order").addClass("hide").removeClass("show-btn")):$(".bfsl-order").addClass("show-btn").removeClass("hide"))}},onEngineReady:e=>{},onChartReady:e=>{},createChart:function(e){let t=this;if(xe.Pz.UI){const i=new xe.Pz.UI.Chart,{stx:a}=i.createChartAndUI({container:e,config:t});let r=De();Oe(),Ee();let n=r&&r.view,s=(r&&r.selectedTheme,r&&r.symbolObject&&r.symbolObject.precision),o=(r&&r.symbolObject&&r.symbolObject.asset,r&&r.symbolObject.tickSize),l=r&&r.deviceType;return l&&"web"===l?$(".multiCharts").addClass("show").removeClass("hide"):$(".multiCharts").addClass("hide").removeClass("show"),Me(n),_e(o),Ae(s),a.dontRoll=!0,a}return xe.Pz.ChartEngine.create({container:e,config:t})}};return e.quoteFeed||(i.quoteFeeds.length=0),i}xe.Pz.activateImports(Se.r,Se.rt,Se.VO,Se.i3,Se.H,Se.ag,Se.Tl,Se.PP,Se.mD,Se.tb,Se.hA,Se.Kn,Se.ac,Se.BN,Se.yP,Se.tO,Se.$L,Se.l0,Se.rS,Se.Dg,Se.Fq,Se.aN,Se.e4,Se.yN,Se.qe,Se.KY,Se.TO,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,w,k,T,D,_,A,M,F,P,L,O,E,I,N,H,V,R,Y,z,B,j,X,W,U,q,G,Q,Z,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ue,ce,de,pe,ge,me,fe,ye,ve,be,Ce.oQ,Ce.fv,Ce.Xc,Ce.dK,Ce.yR,Ce.wO,Ce.fc,Ce.bZ,Ce.BG,Ce._s,Ce.Md,ke.mu,ke.g,ke.hf,ke.tT,ke.bK,ke.T5,ke.Jv,ke.Zk,ke.xv,ke.lc,ke.vI,ke.oK,ke.WZ,ke.ZC,ke.gc,ke.l3,ke.xD,ke.nP,ke.cu,ke.j1,ke.JA,ke.yn,ke.Pb,ke.W7,ke._m,ke.P5,ke.GI,ke.ec,ke.cH,ke.DG,ke.Gv,ke.KX,ke.AR,ke.Iv,ke.M7,ke.bR,ke.HX,ke.sN,ke.$L,ke.Kk,ke.n$,ke.kg,ke.It,ke.q2,ke.Xf,ke.Vm,ke.rd,ke.B7,ke.np,ke.OQ,ke.ZN,ke.Sj,ke.Yw,ke.uI,ke.tk,ke.Bt,ke.HN,ke.LN,ke.hZ,ke.VG,null);function De(e=""){let t=decodeURIComponent(e||chartData);if(t){let e=t.substring(1);var i="";let a="";e&&(a=e.split("=")),a&&a.length&&a[1]&&(i=JSON.parse(a[1]))}return i}function _e(e){e&&(xe.Pz.ChartEngine.YAxis.prototype.minimumPriceTick=e)}function Ae(e){xe.Pz.ChartEngine.YAxis.prototype.decimalPlaces=e||2}function Me(e){console.log("view",e)}function Fe(e,t,i,a){i?($(`#${i} #ranges>div.active`).removeClass("active"),$(`#${i} #ranges .${e}`).addClass("active")):(i="chart0",console.log("rangeeeee",e),$("#ranges>div.active").removeClass("active"),$(`.${a} .${e}`).addClass("active")),localStorage.setItem(`activeSpan-${i}`,t),Le(t)}function Pe(e,t,i){if("NFO"===e||"GUEST"===i){t||(t="chart0");let e=localStorage.getItem(`activeSpan-${t}`);"1D"===e&&"5D"===e||(stxx.setPeriodicity({period:5,interval:1,timeUnit:"minute"}),Fe("1_day","1D",t))}}function Le(e){"1D"===e||"5D"===e||"1M"===e||"3M"===e||"6M"===e||"YTD"===e||"1Y"===e||"5Y"===e?($(".case-one").css({display:"block"}),$(".case-two").css({display:"block"})):($(".case-one").css({display:"block"}),$(".case-two, .case-three").css({display:"none"}))}function Oe(){let e=chartData?De(chartData):De();if(e.symbolObject){let t="";t=e&&e.symbolObject&&e.symbolObject.chartID?e.symbolObject.chartID:"chart0","NFO"===e.symbolObject.exc||"GUEST"===e.userMode?(console.log("resolution",e.symbolObject.exc,e.symbolObject),$(`#${t} .range-case-1`).hide(),$(`#${t} .range-case-2`).show()):(console.log("resolution",e.symbolObject.exc,e.symbolObject),$(`#${t} .range-case-1`).show(),$(`#${t} .range-case-2`).hide())}}function Ee(){let e=chartData?De(chartData):De(),t=e.symbolObject.chartID?e.symbolObject.chartID:"chart0",i=localStorage.getItem(`activeSpan-${t}`);i||(i="1D"),console.log("Valueee",i,t),t?($(`#${t} #ranges>div.active`).removeClass("active"),$(`#${t} #ranges .${i}`).addClass("active")):(id="chart0",console.log("rangeeeee",i),$("#ranges>div.active").removeClass("active"),$(`#ranges .${i}`).addClass("active"))}$(document).on("click",".active-range",(function(e){let t=$(this).closest("cq-instant-chart").attr("id"),i=$(this).attr("data-value");Fe($(this).attr("id"),i,t,"range-case-1")})),$(document).on("click",".active-range-case-2",(function(e){let t=$(this).closest("cq-instant-chart").attr("id"),i=$(this).attr("data-value");Fe($(this).attr("id"),i,t,"range-case-2")})),$(document).on("click",".buy-order",(function(e){let t=De();console.log("data1",t),console.log("window.chartIQ",window.chartIQ);let i=JSON.stringify({id:"orderPad",data:{action:"BUY"}});window.chartIQ&&(t&&"android"===t.platform?window.chartIQ.postMessage(i):window.chartIQ.postMessage(i,"*")),window&&window.postMessage(i,"*"),parent&&parent.postMessage(i,"*"),parent&&parent.gotoOrderPad&&parent.gotoOrderPad(t.symbolObject,"BUY")})),$(document).on("click",".sell-order",(function(e){let t=De();console.log("window.chartIQ",window.chartIQ);let i=JSON.stringify({id:"orderPad",data:{action:"SELL"}});window.chartIQ&&(t&&"android"===t.platform?window.chartIQ.postMessage(i):window.chartIQ.postMessage(i,"*")),window&&window.postMessage(i,"*"),parent&&parent.postMessage(i,"*"),parent&&parent.gotoOrderPad&&parent.gotoOrderPad(t.symbolObject,"SELL")})),window.getMultiParamsData=function(e){let t=window.location.search,i=decodeURIComponent(t);if(i){let e=i.substring(1);var a="";let t="";var r="";e&&(t=e.split("=")),t&&t.length&&t[1]&&(a=JSON.parse(t[1]))}return a&&a.symbolObject&&a.symbolObject.length&&(r=a.symbolObject.filter((t=>{if(t.chartID===e)return t}))),{appID:a.appID,sessionID:a.sessionID,view:a.view,deviceType:a.deviceType,userMode:a.userMode,selectedTheme:a.selectedTheme,encryptionKey:a.encryptionKey,isEncryptionEnabled:a.isEncryptionEnabled,intradayURL:a.intradayURL,historicalURL:a.historicalURL,tradingURL:a.tradingURL,symbolSearchURL:a.symbolSearchURL,socketURL:a.socketURL,publicURL:a.publicURL,symbolObject:{exc:r[0].exc,streamSym:r[0].streamSym,instrument:r[0].instrument,id:r[0].id,asset:r[0].asset,precision:r[0].precision,dispSymbol:r[0].dispSymbol,chartID:e}}},window.getQueryParams=De,window.getConfig=Te,window.updateActiveRange=Fe,window.ChangeSymbolData=function(e){let t=De(e);Pe(t.symbolObject.exc,t.symbolObject.chartID,t.userMode),Oe(),Ee(),t.symbolObject.instrument.toLowerCase(),"web"!==t.deviceType?($("#tfc-shares-qty").addClass("tfc-mobile-view "),$(".qty-plus-minus-view .qty-change").css({display:"block"}),$(".stx-data-qty-minus").prop("disabled",!0)):($("#tfc-shares-qty").removeClass("tfc-mobile-view "),$(".qty-plus-minus-view .qty-change").attr("style","display: none !important"));let i={symbol:t.symbolObject.dispSymbol,exchDisp:t.symbolObject.exc,assetType:t.symbolObject.asset,streamSym:t.symbolObject.streamSym,instrument:t.symbolObject.instrument,id:t.symbolObject.id,excToken:t.symbolObject.excToken,baseSym:t.symbolObject.baseSym,expiry:t.symbolObject.expiry};if(stxx&&stxx.uiContext){stxx.uiContext.changeSymbol(i);let e=t&&t.view,a=(t&&t.selectedTheme,t&&t.symbolObject&&t.symbolObject.precision),r=t&&t.symbolObject&&t.symbolObject.tickSize;Me(e),_e(r),Ae(a)}},window.getResolutionList=Oe;i(594),i(577),i(525),i(289),i(519),i(913);window.CIQ=ke.Pz}},i={};function a(e){var r=i[e];if(void 0!==r)return r.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=function(t,i,r,n){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],r=e[c][1],n=e[c][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||s>=n)&&Object.keys(a.O).every((function(e){return a.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<s&&(s=n));if(o){e.splice(c--,1);var h=r();void 0!==h&&(t=h)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,r,n]},a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={321:0,532:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,n,s=i[0],o=i[1],l=i[2],h=0;if(s.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var c=l(a)}for(t&&t(i);h<s.length;h++)n=s[h],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},i=self.webpackChunksample_template_webpack=self.webpackChunksample_template_webpack||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var r=a.O(void 0,[532,23,407,910,160],(function(){return a(968)}));r=a.O(r)}();